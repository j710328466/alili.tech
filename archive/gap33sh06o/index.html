<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="为树莓派 3 构建 64 位内核"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>为树莓派 3 构建 64 位内核 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gap33sh06o/",
				"appid": "1613049289050283", 
				"title": "为树莓派 3 构建 64 位内核 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-22T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2e231ixc666/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/482jx5m2ihd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&text=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&text=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&title=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&is_video=false&description=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&title=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&title=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&title=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgap33sh06o%2f&title=%e4%b8%ba%e6%a0%91%e8%8e%93%e6%b4%be%203%20%e6%9e%84%e5%bb%ba%2064%20%e4%bd%8d%e5%86%85%e6%a0%b8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">为树莓派 3 构建 64 位内核</h1><div class="meta"><div class="postdate"><time datetime="2019-01-22" itemprop="datePublished">2019-01-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#为树莓派-3-构建-64-位内核\x22\x3e\x3c\/a\x3e为树莓派 3 构建 64 位内核\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e编辑：在写完这个这篇文章之后，我在树莓派 3 上基于 Debian 开始打造 64 位的系统。你可以\x3ca href=\x22https:\/\/github.com\/bamarni\/pi64\x22\x3e在这里找到\x3c\/a\x3e。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e树莓派 3\x3c\/strong\x3e 配有 Broadcom BCM2837 64 位 ARMv8 四核 Cortex A53 处理器，它是一个 \x3cstrong\x3e64 位 CPU\x3c\/strong\x3e。如果你有一块，运行以下命令可能会让你感到惊讶：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3euname\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e-a\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3eLinux\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eraspberrypi\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.4\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.34-v7\x3c\/span\x3e\x2b \x3cspan class=\x22hljs-selector-id\x22\x3e#930\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eSMP\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eWed\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eNov\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e23\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e15\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:20\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:41\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eGMT\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3earmv7l\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eGNU\x3c\/span\x3e\/\x3cspan class=\x22hljs-selector-tag\x22\x3eLinux\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e是的，这是一个 \x3cstrong\x3e32 位内核\x3c\/strong\x3e。这是因为树莓派基金会还没有为官方的树莓派系统 Raspbian 提供 64 位版本。然而你可以构建一个，多亏了 \x3ca href=\x22https:\/\/github.com\/Electron752\x22\x3eElectron752\x3c\/a\x3e 提供的许多补丁。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#构建内核\x22\x3e\x3c\/a\x3e构建内核\x3c\/h3\x3e\n\x3cp\x3e树莓派基金会维护着\x3ca href=\x22https:\/\/github.com\/raspberrypi\/linux\x22\x3e它们自己的 Linux 内核分支\x3c\/a\x3e，它为它们的设备特别裁剪过，同时定期地从上游合并。\x3c\/p\x3e\n\x3cp\x3e我们将会遵照\x3ca href=\x22https:\/\/www.raspberrypi.org\/documentation\/linux\/kernel\/building.md\x22\x3e这个页面\x3c\/a\x3e的指导来\x3cstrong\x3e构建一个 64 位内核\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e我们不能使用“本地构建”的方法，因为它需要一块 64 位的树莓派，这个我们明显还没有。因此我们需要\x3cstrong\x3e交叉编译\x3c\/strong\x3e它，\x3cstrong\x3eUbuntu\x3c\/strong\x3e 是推荐的系统。我个人没有 Ubuntu，因此我在一个有 2 个 CPU 的 Ubuntu 16.04 Digital Ocean 实例上构建，这应该花费我 $0.03。如果你也想这么做，你可以通过\x3ca href=\x22https:\/\/m.do.co\/c\/8ef9c5832a9c\x22\x3e这个链接\x3c\/a\x3e得到 $10 的免费额度。或者你可以通过使用 Virtualbox 中的 Ubuntu VM 作为实例。\x3c\/p\x3e\n\x3cp\x3e首先，我们需要一些\x3cstrong\x3e构建工具\x3c\/strong\x3e以及** aarch64 交叉编译器**：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs armasm\x22\x3e\x3cspan class=\x22hljs-symbol\x22\x3eapt\x3c\/span\x3e-\x3cspan class=\x22hljs-meta\x22\x3eget\x3c\/span\x3e update\n\x3cspan class=\x22hljs-symbol\x22\x3eapt\x3c\/span\x3e-\x3cspan class=\x22hljs-meta\x22\x3eget\x3c\/span\x3e install -y \x3cspan class=\x22hljs-keyword\x22\x3ebc \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebuild-essential \x3c\/span\x3egcc-aarch64-linux-gnu git unzip\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e接着我们可以下载 \x3cstrong\x3eLinux 内核源码\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3egit clone –depth=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e -\x3cspan class=\x22hljs-selector-tag\x22\x3eb\x3c\/span\x3e rpi-\x3cspan class=\x22hljs-number\x22\x3e4.8\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.y\x3c\/span\x3e https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/github.com\/raspberrypi\/linux.git\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e进入到创建的 git 目录。另外你可以为你的内核添加额外的版本标签，可以通过编辑 \x3ccode\x3eMakefile\x3c\/code\x3e 的开始几行完成：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ini\x22\x3e\x3cspan class=\x22hljs-attr\x22\x3eVERSION\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3ePATCHLEVEL\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3eSUBLEVEL\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3eEXTRAVERSION\x3c\/span\x3e = \x2bbilal\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e为了\x3cstrong\x3e构建它\x3c\/strong\x3e，运行下面的命令：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3emake \x3cspan class=\x22hljs-attribute\x22\x3eARCH\x3c\/span\x3e=arm64 \x3cspan class=\x22hljs-attribute\x22\x3eCROSS_COMPILE\x3c\/span\x3e=aarch64-linux-gnu- bcmrpi3_defconfig\nmake -j 3 \x3cspan class=\x22hljs-attribute\x22\x3eARCH\x3c\/span\x3e=arm64 \x3cspan class=\x22hljs-attribute\x22\x3eCROSS_COMPILE\x3c\/span\x3e=aarch64-linux-gnu-\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e第一个应该很快。第二个则会完全不同，我没有精确计时，但是对我来说大概要半个小时。根据你的 CPU 数（nproc * 1.5）调整 \x3ccode\x3e-j\x3c\/code\x3e 标志。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#选择一个-linux-发行版\x22\x3e\x3c\/a\x3e选择一个 Linux 发行版\x3c\/h3\x3e\n\x3cp\x3e在内核编译的时候，我们可以开始准备它的 Linux 发行版了。在本教程中为了简单我使用 \x3cstrong\x3eRaspbian\x3c\/strong\x3e，即使这是一个只有 32 位的发行版。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e如果你想要一直用 64 位系统，你应该选一个有 aarch64 支持的发行版，Debian 有一个健壮的 \x3ca href=\x22https:\/\/wiki.debian.org\/Arm64Port\x22\x3eARM64 移植版\x3c\/a\x3e。得到它基本有三种方式：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e下载一个预构建的根文件系统，这很可能会如页面中提到的那样给你一个过期的版本。\x3c\/li\x3e\n\x3cli\x3e如果你熟悉 debootstrap，用它构建你自己的（这回比较棘手，因为它需要一些手工调整，它最初的目的是在已经运行的主机上进行 chroot，而不是为其他机器构建根文件系统）\x3c\/li\x3e\n\x3cli\x3e我建议使用 multistrap，这里有一个很好的教程：\x3ca href=\x22http:\/\/free-electrons.com\/blog\/embdebian-with-multistrap\/\x22\x3ehttp:\/\/free-electrons.com\/blog\/embdebian-with-multistrap\/\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e回到 Raspbian，我们现在可以下载官方系统，并开始准备了。\x3c\/p\x3e\n\x3cp\x3e打开一个新的 shell 会话并运行下面的命令：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3ewget -O raspbian\x3cspan class=\x22hljs-selector-class\x22\x3e.zip\x3c\/span\x3e https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/downloads.raspberrypi.org\/raspbian_lite_latest\x3c\/span\x3e\nunzip raspbian\x3cspan class=\x22hljs-selector-class\x22\x3e.zip\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们用下面的命令审查：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs tap\x22\x3efdisk -l 2016-11-25-raspbian-jessie-lite.img\nDisk 2016-11-25-raspbian-jessie-lite.img: 1.3 GiB,\x3cspan class=\x22hljs-number\x22\x3e 1390411776 \x3c\/span\x3ebytes,\x3cspan class=\x22hljs-number\x22\x3e 2715648 \x3c\/span\x3esectors\nUnits: sectors of\x3cspan class=\x22hljs-number\x22\x3e 1 \x3c\/span\x3e*\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3e=\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3ebytes\nSector size (logical\/physical):\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3ebytes \/\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3ebytes\nI\/O size (minimum\/optimal):\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3ebytes \/\x3cspan class=\x22hljs-number\x22\x3e 512 \x3c\/span\x3ebytes\nDisklabel type: dos\nDisk identifier: 0x244b8248\n\nDevice Boot Start End Sectors Size Id Type\n2016-11-25-raspbian-jessie-lite.img1\x3cspan class=\x22hljs-number\x22\x3e 8192 \x3c\/span\x3e137215\x3cspan class=\x22hljs-number\x22\x3e 129024 \x3c\/span\x3e63M c W95 FAT32 (LBA)\n2016-11-25-raspbian-jessie-lite.img2\x3cspan class=\x22hljs-number\x22\x3e 137216 \x3c\/span\x3e2715647\x3cspan class=\x22hljs-number\x22\x3e 2578432 \x3c\/span\x3e1.2G\x3cspan class=\x22hljs-number\x22\x3e 83 \x3c\/span\x3eLinux\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们可以看到它有\x3cstrong\x3e两个分区\x3c\/strong\x3e。第一个是\x3cstrong\x3e启动分区\x3c\/strong\x3e，它主要包含了 bootloader、Linux 内核以及少量配置文件。第二个是\x3cstrong\x3e根分区\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e我们可以在我们的文件系统上\x3cstrong\x3e挂载这些分区\x3c\/strong\x3e，从\x3cstrong\x3e根分区\x3c\/strong\x3e开始：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3emount -o loop,offset=\x3cspan class=\x22hljs-number\x22\x3e70254592\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-11\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-25\x3c\/span\x3e-raspbian-jessie-lite.img \/mnt\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eoffset\x3c\/code\x3e 取决于扇区大小（512）：70254592 = 512 * 137216\x3c\/p\x3e\n\x3cp\x3e接着是\x3cstrong\x3e启动分区\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3emount -o loop,offset=\x3cspan class=\x22hljs-number\x22\x3e4194304\x3c\/span\x3e,sizelimit=\x3cspan class=\x22hljs-number\x22\x3e66060288\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-11\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-25\x3c\/span\x3e-raspbian-jessie-lite.img \/mnt\/boot\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eoffset\x3c\/code\x3e ：4194304 = 512 \x3cem\x3e 8192，\x3ccode\x3esizelimit\x3c\/code\x3e：66060288 = 512 \x3c\/em\x3e 129024 。\x3c\/p\x3e\n\x3cp\x3e树莓派系统现在应该可以在 \x3ccode\x3e\/mnt\x3c\/code\x3e 中看到了。我们基本要完成了。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#打包内核\x22\x3e\x3c\/a\x3e打包内核\x3c\/h3\x3e\n\x3cp\x3e内核编译完成后，最后一步包括\x3cstrong\x3e复制 Linux 内核\x3c\/strong\x3e以及\x3cstrong\x3e设备树\x3c\/strong\x3e到启动分区中：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs awk\x22\x3ecp arch\x3cspan class=\x22hljs-regexp\x22\x3e\/arm64\/\x3c\/span\x3eboot\x3cspan class=\x22hljs-regexp\x22\x3e\/Image \/m\x3c\/span\x3ent\x3cspan class=\x22hljs-regexp\x22\x3e\/boot\/\x3c\/span\x3ekernel8.img\ncp arch\x3cspan class=\x22hljs-regexp\x22\x3e\/arm64\/\x3c\/span\x3eboot\x3cspan class=\x22hljs-regexp\x22\x3e\/dts\/\x3c\/span\x3ebroadcom\x3cspan class=\x22hljs-regexp\x22\x3e\/bcm2710-rpi-3-b.dtb \/m\x3c\/span\x3ent\x3cspan class=\x22hljs-regexp\x22\x3e\/boot\/\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e调整 \x3ccode\x3econfig.txt\x3c\/code\x3e :\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3eecho “kernel=kernel8.img” \x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt; \x3c\/span\x3e\/mnt\/boot\/config.txt\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e安装\x3cstrong\x3e内核模块\x3c\/strong\x3e :\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3emake \x3cspan class=\x22hljs-attribute\x22\x3eARCH\x3c\/span\x3e=arm64 \x3cspan class=\x22hljs-attribute\x22\x3eCROSS_COMPILE\x3c\/span\x3e=aarch64-linux-gnu \x3cspan class=\x22hljs-attribute\x22\x3eINSTALL_MOD_PATH\x3c\/span\x3e=\/mnt modules_install\numount \/mnt\/boot\numount \/mnt\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e就是这样了，用于树莓派 3 的\x3cstrong\x3e ARM64 Linux 内核\x3c\/strong\x3e诞生了！\x3c\/p\x3e\n\x3cp\x3e现在你可以压缩镜像，通过 scp 下载下来，并按照标准的步骤放到你的 SD 卡中。\x3c\/p\x3e\n\x3cp\x3e最后你会得到：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3euname\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e-a\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3eLinux\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eraspberrypi\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.8\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.13\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-selector-tag\x22\x3ebilal-v8\x3c\/span\x3e\x2b \x3cspan class=\x22hljs-selector-id\x22\x3e#1\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eSMP\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eWed\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eDec\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e14\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e14\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:09\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:38\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eUTC\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eaarch64\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eGNU\x3c\/span\x3e\/\x3cspan class=\x22hljs-selector-tag\x22\x3eLinux\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/devsidestory.com\/build-a-64-bit-kernel-for-your-raspberry-pi-3\/\x22\x3ehttps:\/\/devsidestory.com\/build-a-64-bit-kernel-for-your-raspberry-pi-3\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22http:\/\/devsidestory.com\/about-me\x22\x3eBilal Amarni\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/geekpi\x22\x3egeekpi\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>为树莓派 3 构建 64 位内核</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/build-a-64-bit-kernel-for-your-raspberry-pi-3">https://www.zcfy.cc/article/build-a-64-bit-kernel-for-your-raspberry-pi-3</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gap33sh06o/" target="_blank">https://alili.tech/archive/gap33sh06o/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/lfmj4xr00e/">2016年终总结--前端生涯从0到1的过程<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/ukfvl3yzohq/">ES6新语法疑点简析<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/adal5cm5rlr/">Icon 进化史<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/xwquh4g09bl/">JS 中 TDZ 的理解<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/13j072ppoyf/">Javascript 中 Y 组合子的推导<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/kn3l7fwd55/">Redux story-1:who creates it?<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/9gngp6sg77/">Redux概念之二: Redux的三大原则<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/ktc291v9lq/">V8 Object 内存结构与属性访问详解<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/62hk7sdq93k/">Vue&#43;MySQL&#43;Express小试牛刀<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/q9tzlra5qaj/">Vue2.0简易案例<aside class="dates">2019-01-27</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>