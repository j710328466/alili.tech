<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="HTML5 中 canvas 的使用总结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>HTML5 中 canvas 的使用总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/7kt5s47oysx/",
				"appid": "1613049289050283", 
				"title": "HTML5 中 canvas 的使用总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-31T02:31:16"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/41pgo3a2iyp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/nvtmua2a1hd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&text=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&text=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&title=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&is_video=false&description=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&title=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&title=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&title=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7kt5s47oysx%2f&title=HTML5%20%e4%b8%ad%20canvas%20%e7%9a%84%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">HTML5 中 canvas 的使用总结</h1><div class="meta"><div class="postdate"><time datetime="2019-01-31" itemprop="datePublished">2019-01-31</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e1. 概述\x3c\/h3\x3e\n\x3cp\x3eCanvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。\x3c\/p\x3e\n\x3cp\x3e使用前，首先需要新建一个\x26lt;canvas\x26gt;网页元素。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ccanvas id=\x26quot;myCanvas\x26quot; width=\x26quot;400\x26quot; height=\x26quot;200\x26quot;\x3e\n  您的浏览器不支持canvas！\n\x3c\/canvas\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22myCanvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22400\x22\x3c\/span\x3e height=\x3cspan class=\x22hljs-string\x22\x3e\x22200\x22\x3c\/span\x3e\x26gt;\n  您的浏览器不支持canvas！\n\x26lt;\/canvas\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中，如果浏览器不支持这个API，则就会显示\x26lt;canvas\x26gt;标签中间的文字——“您的浏览器不支持canvas！”。\x3c\/p\x3e\n\x3cp\x3e每个canvas节点都有一个对应的context对象（上下文对象），Canvas API定义在这个context对象上面，所以需要获取这个对象，方法是使用getContext方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var canvas = document.getElementById(\x27myCanvas\x27);\nif (canvas.getContext) {\n  var ctx = canvas.getContext(\x272d\x27);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27myCanvas\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (canvas.getContext) {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ctx = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中，getContext方法指定参数2d，表示该canvas节点用于生成2D图案（即平面图案）。如果参数是webgl，就表示用于生成3D图像（即立体图案），这部分实际上单独叫做WebGL API。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e2. 绘图方法\x3c\/h3\x3e\n\x3cp\x3ecanvas画布提供了一个用来作图的平面空间，该空间的每个点都有自己的坐标，x表示横坐标，y表示竖坐标。原点(0, 0)位于图像左上角，x轴的正向是原点向右，y轴的正向是原点向下。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e（1）绘制路径\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3ebeginPath方法表示开始绘制路径，moveTo(x, y)方法设置线段的起点，lineTo(x, y)方法设置线段的终点，stroke方法用来给透明的线段着色。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath(); \/\/ 开始路径绘制\nctx.moveTo(20, 20); \/\/ 设置路径起点，坐标为(20,20)\nctx.lineTo(200, 20); \/\/ 绘制一条到(200,20)的直线\nctx.lineWidth = 1.0; \/\/ 设置线宽\nctx.strokeStyle = \x27#CC0000\x27; \/\/ 设置线的颜色\nctx.stroke(); \/\/ 进行线的着色，这时整条线才变得可见\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.beginPath(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开始路径绘制\x3c\/span\x3e\nctx.moveTo(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置路径起点，坐标为(20,20)\x3c\/span\x3e\nctx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制一条到(200,20)的直线\x3c\/span\x3e\nctx.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置线宽\x3c\/span\x3e\nctx.strokeStyle = \x27#CC0000\x27; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置线的颜色\x3c\/span\x3e\nctx.stroke(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 进行线的着色，这时整条线才变得可见\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3emoveto和lineto方法可以多次使用。最后，还可以使用closePath方法，自动绘制一条当前点到起点的直线，形成一个封闭图形，省却使用一次lineto方法。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e（2）绘制矩形\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3efillRect(x, y, width, height)方法用来绘制矩形，它的四个参数分别为矩形左上角顶点的x坐标、y坐标，以及矩形的宽和高。fillStyle属性用来设置矩形的填充色。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.fillStyle = \x27yellow\x27;\nctx.fillRect(50, 50, 200, 100); \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.fillStyle = \x27yellow\x27;\nctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e); \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3estrokeRect方法与fillRect类似，用来绘制空心矩形。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.strokeRect(10,10,200,100); \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.strokeRect(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e); \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eclearRect方法用来清除某个矩形区域的内容。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.clearRect(100,50,50,50); \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.clearRect(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e); \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e（3）绘制文本\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3efillText(string, x, y) 用来绘制文本，它的三个参数分别为文本内容、起点的x坐标、y坐标。使用之前，需用font设置字体、大小、样式（写法类似与CSS的font属性）。与此类似的还有strokeText方法，用来添加空心字。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.font = \x26quot;Bold 20px Arial\x26quot;; \/\/ 设置字体\nctx.textAlign = \x26quot;left\x26quot;;\/\/ 设置对齐方式\nctx.fillStyle = \x26quot;#008600\x26quot;; \/\/ 设置填充颜色\nctx.fillText(\x26quot;Hello!\x26quot;, 10, 50); \/\/ 设置字体内容，以及在画布上的位置\nctx.strokeText(\x26quot;Hello!\x26quot;, 10, 100); \/\/ 绘制空心字\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.font = \x3cspan class=\x22hljs-string\x22\x3e\x22Bold 20px Arial\x22\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置字体\x3c\/span\x3e\nctx.textAlign = \x3cspan class=\x22hljs-string\x22\x3e\x22left\x22\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置对齐方式\x3c\/span\x3e\nctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22#008600\x22\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置填充颜色\x3c\/span\x3e\nctx.fillText(\x3cspan class=\x22hljs-string\x22\x3e\x22Hello!\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置字体内容，以及在画布上的位置\x3c\/span\x3e\nctx.strokeText(\x3cspan class=\x22hljs-string\x22\x3e\x22Hello!\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制空心字\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3efillText方法不支持文本断行，即所有文本出现在一行内。所以，如果要生成多行文本，只有调用多次fillText方法。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e（4）绘制圆形和扇形\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3earc方法用来绘制扇形。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.arc\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3ex\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3ey\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3eradius\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3estartAngle\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3eendAngle\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3eanticlockwise\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3earc方法的x和y参数是圆心坐标，radius是半径，startAngle和endAngle则是扇形的起始角度和终止角度（以弧度表示），anticlockwise表示做图时应该逆时针画（true）还是顺时针画（false）。\x3c\/p\x3e\n\x3cp\x3e下面是如何绘制实心的圆形:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath(); \nctx.arc(60, 60, 50, 0, Math.PI*2, true); \nctx.fillStyle = \x26quot;#000000\x26quot;; \nctx.fill();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.beginPath(); \nctx.arc(\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e*\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, true); \nctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22#000000\x22\x3c\/span\x3e; \nctx.fill();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e绘制空心圆形的例子:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath(); \nctx.arc(60, 60, 50, 0, Math.PI*2, true); \nctx.lineWidth = 1.0; \nctx.strokeStyle = \x26quot;#000\x26quot;; \nctx.stroke();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.beginPath(); \nctx.arc(\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e*\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, true); \nctx.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e; \nctx.strokeStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22#000\x22\x3c\/span\x3e; \nctx.stroke();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e（5）设置渐变色\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3ecreateLinearGradient方法用来设置渐变色。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var myGradient = ctx.createLinearGradient(0, 0, 0, 160); \nmyGradient.addColorStop(0, \x26quot;#BABABA\x26quot;); \nmyGradient.addColorStop(1, \x26quot;#636363\x26quot;);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3evar myGradient = ctx.createLinearGradient(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e160\x3c\/span\x3e); \nmyGradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22#BABABA\x22\x3c\/span\x3e); \nmyGradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22#636363\x22\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecreateLinearGradient方法的参数是(x1, y1, x2, y2)，其中x1和y1是起点坐标，x2和y2是终点坐标。通过不同的坐标值，可以生成从上至下、从左到右的渐变等等。\x3cbr\x3e使用方法如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.fillStyle = myGradient;\nctx.fillRect(10,10,200,100);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.fillStyle = myGradient;\nctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e（6）设置阴影\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e一系列与阴影相关的方法，可以用来设置阴影。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.shadowOffsetX = 10; \/\/ 设置水平位移\nctx.shadowOffsetY = 10; \/\/ 设置垂直位移\nctx.shadowBlur = 5; \/\/ 设置模糊度\nctx.shadowColor = \x26quot;rgba(0,0,0,0.5)\x26quot;; \/\/ 设置阴影颜色\nctx.fillStyle = \x26quot;#CC0000\x26quot;; \nctx.fillRect(10,10,200,100);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.shadowOffsetX = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置水平位移\x3c\/span\x3e\nctx.shadowOffsetY = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置垂直位移\x3c\/span\x3e\nctx.shadowBlur = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置模糊度\x3c\/span\x3e\nctx.shadowColor = \x3cspan class=\x22hljs-string\x22\x3e\x22rgba(0,0,0,0.5)\x22\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置阴影颜色\x3c\/span\x3e\nctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22#CC0000\x22\x3c\/span\x3e; \nctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e3. 图像处理方法\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3edrawImage方法\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3eCanvas API 允许将图像文件插入画布，做法是读取图片后，使用drawImage方法在画布内进行重绘。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var img = new Image();\nimg.src = \x27image.png\x27;\nctx.drawImage(img, 0, 0); \/\/ 设置对应的图像对象，以及它在画布上的位置\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eImage\x3c\/span\x3e();\nimg.src = \x3cspan class=\x22hljs-string\x22\x3e\x27image.png\x27\x3c\/span\x3e;\nctx.drawImage(img, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置对应的图像对象，以及它在画布上的位置\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码将一个PNG图像载入画布。drawImage()方法接受三个参数，第一个参数是图像文件的DOM元素（即\x26lt;img\x26gt;节点），第二个和第三个参数是图像左上角在画布中的坐标，上例中的(0, 0)就表示将图像左上角放置在画布的左上角。\x3c\/p\x3e\n\x3cp\x3e由于图像的载入需要时间，drawImage方法只能在图像完全载入后才能调用，因此上面的代码需要改写。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var image = new Image();\nimage.onload = function() {\n    var canvas = document.createElement(\x27canvas\x27);\n    canvas.width = image.width;\n    canvas.height = image.height;\n    canvas.getContext(\x272d\x27).drawImage(image, 0, 0);\n    \/\/ 插入页面底部\n    document.body.appendChild(image);\n    return canvas;\n}\nimage.src = \x27image.png\x27;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3evar \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image();\n\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.onload = function() {\n    var canvas = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n    canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n    canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e;\n    canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e).drawImage(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 插入页面底部\x3c\/span\x3e\n    document.body.appendChild(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e canvas;\n}\n\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.src = \x3cspan class=\x22hljs-string\x22\x3e\x27image.png\x27\x3c\/span\x3e;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3egetImageData方法，putImageData方法\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3egetImageData方法可以用来读取Canvas的内容，返回一个对象，包含了每个像素的信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e imageData = context.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.width\x3c\/span\x3e, \x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e.\x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eimageData对象有一个data属性，它的值是一个一维数组。该数组的值，依次是每个像素的红、绿、蓝、alpha通道值，因此该数组的长度等于 图像的像素宽度 x 图像的像素高度 x 4，每个值的范围是0–255。这个数组不仅可读，而且可写，因此通过操作这个数组的值，就可以达到操作图像的目的。修改这个数组以后，使用putImageData方法将数组内容重新绘制在Canvas上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22context.putImageData(imageData, 0, 0);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3econtext.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3etoDataURL方法\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e对图像数据做出修改以后，可以使用toDataURL方法，将Canvas数据重新转化成一般的图像文件形式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function convertCanvasToImage(canvas) {\n    var image = new Image();\n    image.src = canvas.toDataURL(\x27image\/png\x27);\n    return image;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econvertCanvasToImage\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(canvas)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e image = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image();\n    image.src = canvas.toDataURL(\x3cspan class=\x22hljs-string\x22\x3e\x27image\/png\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e image;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码将Canvas数据，转化成PNG data URI。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3esave方法，restore方法\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3esave方法用于保存上下文环境，restore方法用于恢复到上一次保存的上下文环境。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.save();\nctx.shadowOffsetX = 10;\nctx.shadowOffsetY = 10;\nctx.shadowBlur = 5;\nctx.shadowColor = \x27rgba(0,0,0,0.5)\x27;\nctx.fillStyle = \x27#CC0000\x27;\nctx.fillRect(10,10,150,100);\nctx.restore();\nctx.fillStyle = \x27#000000\x27;\nctx.fillRect(180,10,150,100);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.save();\nctx.shadowOffsetX = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\nctx.shadowOffsetY = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\nctx.shadowBlur = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\nctx.shadowColor = \x27rgba(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e)\x27;\nctx.fillStyle = \x27#CC0000\x27;\nctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\nctx.restore();\nctx.fillStyle = \x27#\x3cspan class=\x22hljs-number\x22\x3e000000\x3c\/span\x3e\x27;\nctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码先用save方法，保存了当前设置，然后绘制了一个有阴影的矩形。接着，使用restore方法，恢复了保存前的设置，绘制了一个没有阴影的矩形。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4. 动画\x3c\/h3\x3e\n\x3cp\x3e利用JavaScript，可以在canvas元素上很容易地产生动画效果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var posX = 20,\n    posY = 100;\nsetInterval(function() {\n    context.fillStyle = \x26quot;black\x26quot;;\n    context.fillRect(0,0,canvas.width, canvas.height);\n\n    posX \x2b= 1;\n    posY \x2b= 0.25;\n\n    context.beginPath();\n    context.fillStyle = \x26quot;white\x26quot;;\n\n    context.arc(posX, posY, 10, 0, Math.PI*2, true); \n    context.closePath();\n    context.fill();\n}, 30);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3evar posX = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e,\n    posY = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\nsetInterval(function() {\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22black\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,canvas.width, canvas.height)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n    posX \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    posY \x2b= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3ebeginPath();\n\x3c\/span\x3e    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22white\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.arc(posX, posY, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, Math.PI*\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, true)\x3cspan class=\x22hljs-comment\x22\x3e; \x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eclosePath();\n\x3c\/span\x3e    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fill()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n}, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码会产生一个小圆点，每隔30毫秒就向右下方移动的效果。setInterval函数的一开始，之所以要将画布重新渲染黑色底色，是为了抹去上一步的小圆点。\x3c\/p\x3e\n\x3cp\x3e通过设置圆心坐标，可以产生各种运动轨迹。先上升后下降。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var vx = 10,\n    vy = -10,\n    gravity = 1;\nsetInterval(function() {\n    posX \x2b= vx;\n    posY \x2b= vy;\n    vy \x2b= gravity;\n    \/\/ ...\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vx = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n    vy = \x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e,\n    gravity = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\nsetInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    posX \x2b= vx;\n    posY \x2b= vy;\n    vy \x2b= gravity;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中，x坐标始终增大，表示持续向右运动。y坐标先变小，然后在重力作用下，不断增大，表示先上升后下降。\x3cbr\x3e小球不断反弹后，逐步趋于静止。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var vx = 10,\n    vy = -10,\n    gravity = 1;\nsetInterval(function() {\n    posX \x2b= vx;\n    posY \x2b= vy;\n    if (posY \x3e canvas.height * 0.75) {\n          vy *= -0.6;\n          vx *= 0.75;\n          posY = canvas.height * 0.75;\n    }\n    vy \x2b= gravity;\n    \/\/ ...\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3evar vx = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n    vy = \x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e,\n    gravity = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\nsetInterval(function() {\n    posX \x2b= vx;\n    posY \x2b= vy;\n    if (posY \x26gt; canvas.height * \x3cspan class=\x22hljs-number\x22\x3e0.75\x3c\/span\x3e) {\n          vy *= \x3cspan class=\x22hljs-number\x22\x3e-0.6\x3c\/span\x3e;\n          vx *= \x3cspan class=\x22hljs-number\x22\x3e0.75\x3c\/span\x3e;\n          posY = canvas.height * \x3cspan class=\x22hljs-number\x22\x3e0.75\x3c\/span\x3e;\n    }\n    vy \x2b= gravity;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码表示，一旦小球的y坐标处于屏幕下方75%的位置，向x轴移动的速度变为原来的75%，而向y轴反弹上一次反弹高度的40%。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e5.像素处理\x3c\/h3\x3e\n\x3cp\x3e通过getImageData方法和putImageData方法，可以处理每个像素，进而操作图像内容。\x3cbr\x3e假定filter是一个处理像素的函数，那么整个对Canvas的处理流程，可以用下面的代码表示。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (canvas.width \x3e 0 \x26amp;\x26amp; canvas.height \x3e 0) {\n    var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    filter(imageData);\n    context.putImageData(imageData, 0, 0);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e imageData = \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e, canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n    filter(imageData);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以下是几种常见的处理方法：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e灰度效果\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e灰度图（grayscale）就是取红、绿、蓝三个像素值的算术平均值，这实际上将图像转成了黑白形式。假定d[i]是像素数组中一个象素的红色值，则d[i\x2b1]为绿色值，d[i\x2b2]为蓝色值，d[i\x2b3]就是alpha通道值。转成灰度的算法，就是将红、绿、蓝三个值相加后除以3，再将结果写回数组。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22grayscale = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i \x3c d.length; i \x2b= 4) {\n      var r = d[i];\n      var g = d[i \x2b 1];\n      var b = d[i \x2b 2];\n      d[i] = d[i \x2b 1] = d[i \x2b 2] = (r\x2bg\x2bb)\/3;\n    }\n    return pixels;\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3egrayscale = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(pixels)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e d = pixels.data;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; d.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e r = d[i];\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e g = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n      d[i] = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = (r\x2bg\x2bb)\/\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e pixels;\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e复古效果\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e复古效果（sepia）则是将红、绿、蓝三个像素，分别取这三个值的某种加权平均值，使得图像有一种古旧的效果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sepia = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i \x3c d.length; i \x2b= 4) {\n      var r = d[i];\n      var g = d[i \x2b 1];\n      var b = d[i \x2b 2];\n      d[i]     = (r * 0.393)\x2b(g * 0.769)\x2b(b * 0.189); \/\/ red\n      d[i \x2b 1] = (r * 0.349)\x2b(g * 0.686)\x2b(b * 0.168); \/\/ green\n      d[i \x2b 2] = (r * 0.272)\x2b(g * 0.534)\x2b(b * 0.131); \/\/ blue\n    }\n    return pixels;\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3esepia = function (pixels) {\n    var d = pixels.data;\n    for (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; d.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n      var r = d[i];\n      var g = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n      var b = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n      d[i]     = (r * \x3cspan class=\x22hljs-number\x22\x3e0.393\x3c\/span\x3e)\x2b(g * \x3cspan class=\x22hljs-number\x22\x3e0.769\x3c\/span\x3e)\x2b(b * \x3cspan class=\x22hljs-number\x22\x3e0.189\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ red\x3c\/span\x3e\n      d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = (r * \x3cspan class=\x22hljs-number\x22\x3e0.349\x3c\/span\x3e)\x2b(g * \x3cspan class=\x22hljs-number\x22\x3e0.686\x3c\/span\x3e)\x2b(b * \x3cspan class=\x22hljs-number\x22\x3e0.168\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ green\x3c\/span\x3e\n      d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = (r * \x3cspan class=\x22hljs-number\x22\x3e0.272\x3c\/span\x3e)\x2b(g * \x3cspan class=\x22hljs-number\x22\x3e0.534\x3c\/span\x3e)\x2b(b * \x3cspan class=\x22hljs-number\x22\x3e0.131\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ blue\x3c\/span\x3e\n    }\n    return pixels;\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e红色蒙版效果\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e红色蒙版指的是，让图像呈现一种偏红的效果。算法是将红色通道设为红、绿、蓝三个值的平均值，而将绿色通道和蓝色通道都设为0。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22red = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i \x3c d.length; i \x2b= 4) {\n      var r = d[i];\n      var g = d[i \x2b 1];\n      var b = d[i \x2b 2];\n      d[i] = (r\x2bg\x2bb)\/3;        \/\/ 红色通道取平均值\n      d[i \x2b 1] = d[i \x2b 2] = 0; \/\/ 绿色通道和蓝色通道都设为0\n    }\n    return pixels;\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3ered = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(pixels)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e d = pixels.data;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; d.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e r = d[i];\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e g = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n      d[i] = (r\x2bg\x2bb)\/\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 红色通道取平均值\x3c\/span\x3e\n      d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绿色通道和蓝色通道都设为0\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e pixels;\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e亮度效果\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e亮度效果（brightness）是指让图像变得更亮或更暗。算法将红色通道、绿色通道、蓝色通道，同时加上一个正值或负值。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22brightness = function (pixels, delta) {\n    var d = pixels.data;\n    for (var i = 0; i \x3c d.length; i \x2b= 4) {\n          d[i] \x2b= delta;     \/\/ red\n          d[i \x2b 1] \x2b= delta; \/\/ green\n          d[i \x2b 2] \x2b= delta; \/\/ blue   \n    }\n    return pixels;\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3ebrightness = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(pixels, delta)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e d = pixels.data;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; d.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n          d[i] \x2b= delta;     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ red\x3c\/span\x3e\n          d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x2b= delta; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ green\x3c\/span\x3e\n          d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] \x2b= delta; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ blue   \x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e pixels;\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e反转效果\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e反转效果（invert）是指图片呈现一种色彩颠倒的效果。算法为红、绿、蓝通道都取各自的相反值（255-原值）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22invert = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i \x3c d.length; i \x2b= 4) {\n        d[i] = 255 - d[i];\n        d[i\x2b1] = 255 - d[i \x2b 1];\n        d[i\x2b2] = 255 - d[i \x2b 2];\n    }\n    return pixels;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3einvert = function (pixels) {\n    var d = pixels.data;\n    for (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; d.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n        d[i] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e - d[i];\n        d[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e - d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n        d[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e - d[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n    }\n    return pixels;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>HTML5 中 canvas 的使用总结</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007495768">https://segmentfault.com/a/1190000007495768</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/7kt5s47oysx/" target="_blank">https://alili.tech/archive/7kt5s47oysx/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/dc9tmbt89lc/">CSS3 巧妙实现聊天气泡<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/awfhylei7vr/">Element 一套优雅的 Vue 2 组件库是如何开发的<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/5n6e7oj31zb/">Ionic2入坑基础教程和安装指南<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/k9uktrr2ck/">JavaScript arguments 对象全面介绍<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/d31ygsiurr7/">JavaScript 版俄罗斯方块——重构<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f1goxj498pc/">JavaScript中this绑定详解<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/fpk9tyls8sb/">Markcook2.0，使用Vue2.0和Vuex2.0进行完全重构升级<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/rnj4z8l02t/">N3-components - 强劲的 Vue UI组件库<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/7njdijhy2um/">Node.js &#43; React Native 毕设：农业物联网监测系统的开发手记<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f8zzbybr4tl/">Redux、Flux、Vuex<aside class="dates">2019-02-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>