<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="小小weibo音乐播放器"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>小小weibo音乐播放器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jym0578xfxn/",
				"appid": "1613049289050283", 
				"title": "小小weibo音乐播放器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-13T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/rq8vaa1h77a/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/t9ymjbarkph/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&text=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&text=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&title=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&is_video=false&description=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&title=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&title=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&title=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjym0578xfxn%2f&title=%e5%b0%8f%e5%b0%8fweibo%e9%9f%b3%e4%b9%90%e6%92%ad%e6%94%be%e5%99%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">小小weibo音乐播放器</h1><div class="meta"><div class="postdate"><time datetime="2019-01-13" itemprop="datePublished">2019-01-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e故事背景：前几周看到一个网友做web音乐播放器，然而在巧合之下发现微博的网页播放器挺不错的，就捉摸着自己试试，文章最末处献上源码，喜欢就请带走吧。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e演示地址：\x3ca href=\x22http:\/\/123.56.191.84\/jmusic_v1\/jmusic.php\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/123.56.191.84\/jmusic_v...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e兼容当前主流浏览器包括ie9及以上，不考虑兼容ie8及以下的浏览器\x3c\/p\x3e\n\x3cp\x3e好了，步入正题，这个小东西涉及的一些大概知识点：\x3ccode\x3ecRUL\x3c\/code\x3e、\x3ccode\x3eajax\x3c\/code\x3e、\x3ccode\x3esession\x3c\/code\x3e、\x3ccode\x3ememcache\x3c\/code\x3e、\x3ccode\x3e闭包\x3c\/code\x3e、\x3ccode\x3e递归\x3c\/code\x3e。。差不多就这些把，没别的了，考虑到有些朋友可能对有些知识点遗忘了，哈哈，我特意整理了每个知识点的笔记。\x3cbr\x3e\x3ccode\x3eCookie 与 Session：\x3c\/code\x3e\x3ca href=\x22http:\/\/segmentfault.com\/n\/1330000009610165\x22\x3ehttp:\/\/segmentfault.com\/n\/133...\x3c\/a\x3e\x3cbr\x3e\x3ccode\x3eMemcache：\x3c\/code\x3e\x3ca href=\x22https:\/\/segmentfault.com\/n\/1330000009605929\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/n\/13...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x221330000009605929\x22 data-typeid=\x224\x22\x3e点击预览\x3c\/button\x3e\x3cbr\x3e\x3ccode\x3ecURL：\x3c\/code\x3e\x3ca href=\x22https:\/\/segmentfault.com\/n\/1330000009577171\x22\x3ehttps:\/\/segmentfault.com\/n\/13...\x3c\/a\x3e\x3cbr\x3e至于如果作为一个前端不知道ajax那我也没办法了，找点资料了解下吧，因为太简单，我就没有整理笔记了，但是如果有网友需要，可以联系我。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e功能演示\x3c\/h1\x3e\n\x3cp\x3e1.小窗口与大窗口切换\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/1.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/1.gif\x22 alt=\x22tinywindow\x22 title=\x22tinywindow\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e2.播放面板的：后退、播放与暂停、前进、播放模式切换、音量（点赞与分享功能没做，和删除功能大同小异，后面有时间了我再补上）、定位播放位置（可拖拽）\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/2.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/2.gif\x22 alt=\x22playing\x22 title=\x22playing\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e3.播放列表页、新歌榜（默认显示20首）、歌曲搜索页、列表滚动条。\x3c\/p\x3e\n\x3ch6\x3e\n\x3ccode\x3e注：\x3c\/code\x3e这些歌曲均是通过网易接口爬取过来的，因为网易很坑，我拿到的接口中30首差不多就只有5-8首可以正常播放，所以采用了cURL爬取验证，过滤掉了不能放的音乐，如果不知道网易接口怎么用的，可以自行\x3ca href=\x22http:\/\/www.baidu.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e百度\x3c\/a\x3e\n\x3c\/h6\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/4.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/4.gif\x22 alt=\x22list\x22 title=\x22list\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e4.播放列表的歌曲批量删除、单曲删除，排行榜的批量播放、搜索列表的批量播放。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/6.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/6.gif\x22 alt=\x22delete\x22 title=\x22delete\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e5.歌词的拖拽查看\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/5.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/raw.githubusercontent.com\/66pig\/-jMusic\/f27729b1e1c42c3868994290066f9aa47d38306b\/show\/5.gif\x22 alt=\x22drag\x22 title=\x22drag\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e播放器使用方法（引入方法）\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e将除show文件夹之外的必要文件移动到你要显示播放器所在的文件夹\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在要显示播放器的页面中插入如下几行代码\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    1. \x3c?php session_start();?\x3e\n    2. \x3clink charset=\x26quot;utf-8\x26quot; href=\x26quot;css\/jmusic.css\x26quot; type=\x26quot;text\/css\x26quot; rel=\x26quot;stylesheet\x26quot; \/\x3e\n    3. \x3cscript charset=\x26quot;utf-8\x26quot; src=\x26quot;.\/js\/jmusic.js\x26quot;\x3e\x3c\/script\x3e\n    4. \x3cscript\x3ejMusic.cacheid = \x27\x3c?php if(!empty(session_id()))echo session_id(); ?\x3e\x27;\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e    1. \x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e session_start();\x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    2. \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22css\/jmusic.css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    3. \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/js\/jmusic.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    4. \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3ejMusic.cacheid = \x27\x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3eempty\x3c\/span\x3e(session_id()))\x3cspan class=\x22hljs-keyword\x22\x3eecho\x3c\/span\x3e session_id(); \x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x27;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意：除第一行代码必须放在网页顶部外，其余代码可以插入到任意位置（但是css样式插入位置必须在\x3ccode\x3e\x26lt;head\x26gt;\x3c\/code\x3e标签中），但是要保准顺序不能变 第4行代码必须要在第三行代码后面\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e代码插入示例\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c?php session_start();?\x3e\n\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3e音乐播放器\x3c\/title\x3e\n    \x3clink charset=\x26quot;utf-8\x26quot; href=\x26quot;css\/jmusic.css\x26quot; type=\x26quot;text\/css\x26quot; rel=\x26quot;stylesheet\x26quot; \/\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \n\x3c\/body\x3e\n\x3cscript charset=\x26quot;utf-8\x26quot; src=\x26quot;.\/js\/jmusic.js\x26quot;\x3e\x3c\/script\x3e\n\x3cscript\x3e\n    jMusic.cacheid = \x27\x3c?php if(!empty(session_id()))echo session_id(); ?\x3e\x27;\n\x3c\/script\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e session_start();\x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e音乐播放器\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22css\/jmusic.css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/js\/jmusic.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3e\n    jMusic.cacheid = \x27\x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3eempty\x3c\/span\x3e(session_id()))\x3cspan class=\x22hljs-keyword\x22\x3eecho\x3c\/span\x3e session_id(); \x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x27;\n\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e提醒：代码必须要放置在php环境、并且安装memcache扩展\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4行代码解释\x3c\/h3\x3e\n\x3cp\x3e1.\x3ccode\x3e\x26lt;?php session_start();?\x26gt;\x3c\/code\x3e  \/\/启动Session 的初始化 ，分配给用户一个sessionid，此id使用来读取服务器缓存的用户播放记录和新歌榜记录（方便下次快速播放-\x26gt;因为网易api的问题才会考虑缓存新歌榜的记录的）。\x3cbr\x3e2.\x3ccode\x3e\x26lt;link charset=\x22utf-8\x22 href=\x22css\/jmusic.css\x22 type=\x22text\/css\x22 rel=\x22stylesheet\x22 \/\x26gt;\x3c\/code\x3e   \/\/ 引入css样式文件\x3cbr\x3e3.\x3ccode\x3e\x26lt;script charset=\x22utf-8\x22 src=\x22.\/js\/jmusic.js\x22\x26gt;\x26lt;\/script\x26gt;\x3c\/code\x3e   引入js主文件\x3cbr\x3e4.\x3ccode\x3e\x26lt;script\x26gt;jMusic.cacheid = \x27\x26lt;?php if(!empty(session_id()))echo session_id(); ?\x26gt;\x27;\x26lt;\/script\x26gt;\x3c\/code\x3e  \/\/ 将sessionid传递给js主文件通过ajax进行服务器的匹配是否存在此用户的缓存音乐，如果存在就直接返回，没有怎重新从api获取\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e文件目录\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ejmusic.php \/\/次文件是你的将要引入播放器的文件（可修改）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ecss  \/\/ css样式文件（不可改，但是如果懂，可以自行修改）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ejs   \/\/ js主文件（不可改，但是如果懂，可以自行修改）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ephp  \/\/ 存放着php文件，用于验证网易api中那些音乐可以播放哪些音乐不可以播放\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eshow \/\/ 用于存放本文章中所有功能演示图片（可删除）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3e提示\x3c\/h1\x3e\n\x3cp\x3e这种可以缓存音乐的都是需要用户登录的，考虑到大家看演示的时候都会缓存造成大量垃圾，而我又是用的很渣的服务器，所以缓存在的时间只有24小时，并且开启了session的垃圾回收机制（当访问过大时，超时的session会被自动删除）。\x3cbr\x3e如果想要看微博原始播放器的朋友，可以移步至：\x3ca href=\x22http:\/\/www.weibo.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点击进入微博页\x3c\/a\x3e\x3ccode\x3e提醒：必须要登录后播放器才会显示，如果有账号可以登录查看\x3c\/code\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e源码下载地址\x3c\/h1\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/66pig\/-jMusic\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/66pig\/-jMusic\x3c\/a\x3e\x3c\/p\x3e\n\x3ch6\x3e其实很早就做出来了，但是好尴尬，最开始不知道怎么把源码发上来（自己服务器存放的时间都不长，链接容易失效），没玩过github，初次尝试，别见笑，后期有时间会更新的，如果你们觉得有什么bug也可以合并过来，大家相互学习。\x3c\/h6\x3e\n\x3cp\x3e当有朋友想要视频播放器的时候会发现其实视频播放器的功能多数都体现在了这个音乐播放器，是吧？这就是为啥我把这个发出来，而视频播放器中多数人的一个瓶颈应该全屏问题，下次再说吧，先到这里了，如果有问题可以联系我。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>小小weibo音乐播放器</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009631416">https://segmentfault.com/a/1190000009631416</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jym0578xfxn/" target="_blank">https://alili.tech/archive/jym0578xfxn/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>