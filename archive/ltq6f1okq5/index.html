<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="简单一招搞定 three.js 屏幕适配"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>简单一招搞定 three.js 屏幕适配 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ltq6f1okq5/",
				"appid": "1613049289050283", 
				"title": "简单一招搞定 three.js 屏幕适配 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-18T02:30:34"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jvdjd3q1ldm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bw1wb7yyeog/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&text=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&text=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&title=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&is_video=false&description=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&title=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&title=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&title=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fltq6f1okq5%2f&title=%e7%ae%80%e5%8d%95%e4%b8%80%e6%8b%9b%e6%90%9e%e5%ae%9a%20three.js%20%e5%b1%8f%e5%b9%95%e9%80%82%e9%85%8d"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">简单一招搞定 three.js 屏幕适配</h1><div class="meta"><div class="postdate"><time datetime="2019-01-18" itemprop="datePublished">2019-01-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e这篇文章只讨论 \x3ccode\x3ePerspectiveCamera\x3c\/code\x3e 的适配方法\x3c\/p\x3e\n\x3cp\x3e做过手机 H5 的同学可能会觉得屏幕适配挺麻烦。原因是设计师提供的设计稿尺寸比固定，但是前端开发者却要适配不同大小、长宽比的目标设备。适配的终极目标无非是最大程度把主体内容优雅地呈现给用户。开发和设计如果没有协调好的话可能会妥协比较丑陋的方案，例如由于设计比例问题，为了照顾主体内容不被裁剪，只好设备两边，或者上下留黑边这种。\x3c\/p\x3e\n\x3cp\x3e不过在 3D 的世界里，我们不用担心会有黑边的问题，因为 3D 场景是无限延伸的，总能填满任何比例的屏幕。\x3c\/p\x3e\n\x3cp\x3e先看看 PerspectiveCamera 官方 API 说明如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22PerspectiveCamera( fov, aspect, near, far )\n\nfov — Camera frustum vertical field of view.\naspect — Camera frustum aspect ratio.\nnear — Camera frustum near plane.\nfar — Camera frustum far plane.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode\x3ePerspectiveCamera( fov, aspect, \x3cspan class=\x22hljs-keyword\x22\x3enear\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efar\x3c\/span\x3e )\n\nfov — Camera frustum vertical field \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e view.\naspect — Camera frustum aspect ratio.\n\x3cspan class=\x22hljs-keyword\x22\x3enear\x3c\/span\x3e — Camera frustum \x3cspan class=\x22hljs-keyword\x22\x3enear\x3c\/span\x3e plane.\n\x3cspan class=\x22hljs-keyword\x22\x3efar\x3c\/span\x3e — Camera frustum \x3cspan class=\x22hljs-keyword\x22\x3efar\x3c\/span\x3e plane.\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面四个参数都会影响成像结果，\x3ccode\x3efov\x3c\/code\x3e 和 \x3ccode\x3easpect\x3c\/code\x3e 设置 XY 平面的范围，也就是广度。 \x3ccode\x3enear\x3c\/code\x3e 和 \x3ccode\x3efar\x3c\/code\x3e 影响的是纵深 Z 轴的范围，也就是深度。纵深只要保证物体离相机距离在这个范围就可以了，这是为了性能而设置的参数，由用户设置，只渲染必要的东西。实际上真实的相机这两个值对应的是 0 到 无限远。\x3c\/p\x3e\n\x3cp\x3e这些参数设置好之后，成像就相应确定了。最后 three.js 把相机拍摄到的矩形区域对应好四个顶点渲染到屏幕上。\x3ccode\x3e同样比例的屏幕看到的图像是一致的，与屏幕大小无关\x3c\/code\x3e\x26lt;\/span\x26gt;。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVK4wg?w=973\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/bVK4wg?w=973\x26amp;h=300\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e下面我用一个简单的场景来看一下这些参数对成像的影响。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e场景元素\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e相机 （PerspectiveCamera）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e一个边长为 100 的平面（主体内容范围），放在世界坐标中心。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var camera = new THREE.PerspectiveCamera(53, 500 \/ 500, 0.1, 1000);\n\nvar planeGemo = new THREE.PlaneGeometry( 100, 100, 10, 10 )\nvar meshMaterial = new THREE.MeshLambertMaterial();\nmeshMaterial.color = new THREE.Color(0x2dcaf1);\nmeshMaterial.side = THREE.DoubleSide;\n\nvar wireFrameMat = new THREE.MeshBasicMaterial();\nwireFrameMat.color = new THREE.Color(0xdddddd);\nwireFrameMat.wireframe = true;\n\nvar plane = THREE.SceneUtils.createMultiMaterialObject(planeGemo, [meshMaterial, wireFrameMat]);\n\nscene.add(plane);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PerspectiveCamera(\x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e planeGemo = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PlaneGeometry( \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e )\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e meshMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial();\nmeshMaterial.color = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Color(\x3cspan class=\x22hljs-number\x22\x3e0x2dcaf1\x3c\/span\x3e);\nmeshMaterial.side = THREE.DoubleSide;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e wireFrameMat = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshBasicMaterial();\nwireFrameMat.color = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Color(\x3cspan class=\x22hljs-number\x22\x3e0xdddddd\x3c\/span\x3e);\nwireFrameMat.wireframe = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = THREE.SceneUtils.createMultiMaterialObject(planeGemo, [meshMaterial, wireFrameMat]);\n\nscene.add(plane);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e目标\x3c\/h2\x3e\n\x3cp\x3e在任何屏幕下，都能最大程度地显示完整的立方体。最大程度，就是最少多余空间的意思。下面是要达到效果\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVK4wi?w=964\x26amp;h=344\x22 src=\x22https:\/\/static.alili.tech\/img\/bVK4wi?w=964\x26amp;h=344\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e设置 fov 参数\x3c\/h2\x3e\n\x3cp\x3e可以直接想到的一种适配方法是——改变 camera 到目标物体的距离以控制成像的内容，但是这样做计算成本比较高，而且还有可能影响其他一些数值，然后需要相应一起计算修改。\x3cbr\x3e我想到改变视角也可以达到控制成像内容多少的目的，于是我想可不可以只通过改变 fov 一个数值，达到我要的效果。\x3c\/p\x3e\n\x3cp\x3efov 官网的定义翻译过来是垂直方向的视角大小。我们先规定好相机到平面的距离为 100，然后试试看能不能通过计算设置 fov 值，刚好让平面填满一个宽高比为 1:1 的屏幕。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22plane.position.set(0,0,0);\ncamera.position.set(0,0,100);\ncamera.lookAt(new THREE.Vector3);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eplane.position.set(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\ncamera.position.set(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\ncamera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVK4wj?w=621\x26amp;h=366\x22 src=\x22https:\/\/static.alili.tech\/img\/bVK4wj?w=621\x26amp;h=366\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e观察上面的图，可以很容易求出 fov 的值， fov = arctan((100\/2)\/100) * 2; fov 为 0.9272952180016122，约等于 53 度。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22camera.fov = Math.atan((100\/2)\/100) * 2 * (180 \/ Math.PI);\ncamera.updateProjectionMatrix();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecamera.fov = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan((\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\/\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e) * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * (\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e \/ \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI);\ncamera.updateProjectionMatrix();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e设置完刚刚求出的 fov 值，将场景渲染到 宽高比为 1:1 的画布上。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVK4wu?w=732\x26amp;h=212\x22 src=\x22https:\/\/static.alili.tech\/img\/bVK4wu?w=732\x26amp;h=212\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e渲染结果和预想的一样，平面刚好填满了 1:1 的画布。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3efov 和宽高比例的关系\x3c\/h2\x3e\n\x3cp\x3e下面在固定的 fov 下，使用 dat.gui 工具调整宽高比，观察渲染区域的变化。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVK4wy?w=965\x26amp;h=985\x22 src=\x22https:\/\/static.alili.tech\/img\/bVK4wy?w=965\x26amp;h=985\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因为fov设置的是垂直方向的视角范围，可以看到无论我们怎么改变宽高比例，垂直方向的渲染范围，都是一致的。水平方向则是以裁剪的方式显示。也就是说当我们设置好视角让垂直方向范围刚好等于主体内容的范围，只要宽高比大于1，我们得到的渲染结果，已经是最佳的了。问题就只剩下当宽高比小于1的情况了。\x3c\/p\x3e\n\x3cp\x3e宽高比小于1的时候，垂直方向显示的高度刚好是等于主体内容的高度。为了能让水平方向完整显示主体内容，我们只有将垂直方向范围增大，也就是将 fov 设置一个更大的值，此时水平方向的范围也会随之增大。当将 fov调整到 水平方向刚好能显示主体内容时，垂直方向此时显示的范围是超过主体内容垂直方向的范围的。其中的关系，其实可以用很简单的函数求出来。\x3c\/p\x3e\n\x3cp\x3e已知 照相机到主题内容的距离为 d\x3cbr\x3e正方形主体内容的边长为 w\x3c\/p\x3e\n\x3cp\x3e设宽高比为 r，求照相机垂直方向的视角 f\x3c\/p\x3e\n\x3cp\x3e当 r \x26gt;= 1 时，照相机拍摄到的垂直方向范围等于 w\x3c\/p\x3e\n\x3cp\x3e当 r \x26gt; 1\x3cbr\x3e\x3ccode\x3ed * tan(f\/2) * 2 = w\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e当 r \x26lt; 1 时，照相机拍摄到的水平方向范围等于 w，垂直方向范围应该是 w\/r\x3cbr\x3e\x3ccode\x3ed * tan(f\/2) * 2 = w\/r\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e这样，任意宽高比例的屏幕应该对应多大的垂直视角就确定了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e最终代码与效果\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var controls = new function () {\n\n    camera.position.z = CAMERA_TO_MAIN_DIS;\n\n    this.width = 500;\n    this.height = 500;\n    this.planeRY = 0;\n\n    \/**\n    * 计算相机 fov 的函数\n    * @param d : 在相机前方 d 距离\n    * @param w : 想要看到最大正方形区域边长为 w\n    * @param r : 屏幕宽高比\n    *\/\n    function calcFov(d, w, r) {\n        var f;\n        var vertical = w;\n        if (r \x3c 1) {\n            vertical = vertical\/r;\n        }\n        f = Math.atan(vertical\/d\/2)*2 * (180 \/ Math.PI);\n        return f;\n    }\n\n    this.redraw = ()=\x3e{\n        webGLRenderer.setSize(this.width, this.height);\n        plane.rotation.y = this.planeRY;\n        camera.fov = calcFov(CAMERA_TO_MAIN_DIS, MAIN_CONTENT_WIDTH, this.width \/ this.height);\n        camera.aspect = this.width \/ this.height;\n        camera.updateProjectionMatrix();\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e controls = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n\n    camera.position.z = CAMERA_TO_MAIN_DIS;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width = \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height = \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.planeRY = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n    * 计算相机 fov 的函数\n    * @param d : 在相机前方 d 距离\n    * @param w : 想要看到最大正方形区域边长为 w\n    * @param r : 屏幕宽高比\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecalcFov\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ed, w, r\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e f;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vertical = w;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r \x26lt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            vertical = vertical\/r;\n        }\n        f = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan(vertical\/d\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)*\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * (\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e \/ \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e f;\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.redraw = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{\n        webGLRenderer.setSize(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height);\n        plane.rotation.y = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.planeRY;\n        camera.fov = calcFov(CAMERA_TO_MAIN_DIS, MAIN_CONTENT_WIDTH, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height);\n        camera.aspect = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height;\n        camera.updateProjectionMatrix();\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008796502?w=965\x26amp;h=985\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008796502?w=965\x26amp;h=985\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n\x3cp\x3edemo 的完整代码：\x3ca href=\x22http:\/\/codepen.io\/JasonTurbo\/pen\/ZLwJMo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/codepen.io\/JasonTurbo\/pen\/ZLwJMo\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22JasonTurbo\/pen\/ZLwJMo\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3cbr\x3e原文链接：\x3ca href=\x22http:\/\/gnauhca.com\/blog\/2016\/11\/24\/threejs\/THREEJS%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/gnauhca.com\/blog\/2016\/11\/24\/threejs\/THREEJS%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D\/\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>简单一招搞定 three.js 屏幕适配</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008796468">https://segmentfault.com/a/1190000008796468</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ltq6f1okq5/" target="_blank">https://alili.tech/archive/ltq6f1okq5/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>