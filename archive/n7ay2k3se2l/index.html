<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="在 Ubuntu 上体验 LXD 容器"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>在 Ubuntu 上体验 LXD 容器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/n7ay2k3se2l/",
				"appid": "1613049289050283", 
				"title": "在 Ubuntu 上体验 LXD 容器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-21T02:30:06"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dohtwfnxq16/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/sksi48h8jd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&text=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&text=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&is_video=false&description=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn7ay2k3se2l%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%8a%e4%bd%93%e9%aa%8c%20LXD%20%e5%ae%b9%e5%99%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">在 Ubuntu 上体验 LXD 容器</h1><div class="meta"><div class="postdate"><time datetime="2019-01-21" itemprop="datePublished">2019-01-21</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#在-ubuntu-上体验-lxd-容器\x22\x3e\x3c\/a\x3e在 Ubuntu 上体验 LXD 容器\x3c\/h1\x3e\n\x3cp\x3e本文的主角是容器，一种类似虚拟机但更轻量级的构造。你可以轻易地在你的 Ubuntu 桌面系统中创建一堆容器！\x3c\/p\x3e\n\x3cp\x3e虚拟机会虚拟出整个电脑让你来安装客户机操作系统。\x3cstrong\x3e相比之下\x3c\/strong\x3e，容器\x3cstrong\x3e复用\x3c\/strong\x3e了主机的 Linux 内核，只是简单地 \x3cstrong\x3e包容\x3c\/strong\x3e 了我们选择的根文件系统（也就是运行时环境）。Linux 内核有很多功能可以将运行的 Linux 容器与我们的主机分割开（也就是我们的 Ubuntu 桌面）。\x3c\/p\x3e\n\x3cp\x3eLinux 本身需要一些手工操作来直接管理他们。好在，有 LXD（读音为 Lex-deeh），这是一款为我们管理 Linux 容器的服务。\x3c\/p\x3e\n\x3cp\x3e我们将会看到如何：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在我们的 Ubuntu 桌面上配置容器，\x3c\/li\x3e\n\x3cli\x3e创建容器，\x3c\/li\x3e\n\x3cli\x3e安装一台 web 服务器，\x3c\/li\x3e\n\x3cli\x3e测试一下这台 web 服务器，以及\x3c\/li\x3e\n\x3cli\x3e清理所有的东西。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3\x3e\x3ca href=\x22#设置-ubuntu-容器\x22\x3e\x3c\/a\x3e设置 Ubuntu 容器\x3c\/h3\x3e\n\x3cp\x3e如果你安装的是 Ubuntu 16.04，那么你什么都不用做。只要安装下面所列出的一些额外的包就行了。若你安装的是 Ubuntu 14.04.x 或 Ubuntu 15.10，那么按照 \x3ca href=\x22https:\/\/linux.cn\/article-7687-1.html\x22\x3eLXD 2.0 系列（二）：安装与配置\x3c\/a\x3e 来进行一些操作，然后再回来。\x3c\/p\x3e\n\x3cp\x3e确保已经更新了包列表：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo apt update\nsudo apt\x3cspan class=\x22hljs-built_in\x22\x3e upgrade\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e安装 \x3ccode\x3elxd\x3c\/code\x3e 包：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs cmake\x22\x3esudo apt \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e lxd\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e若你安装的是 Ubuntu 16.04，那么还可以让你的容器文件以 ZFS 文件系统的格式进行存储。Ubuntu 16.04 的 Linux kernel 包含了支持 ZFS 必要的内核模块。若要让 LXD 使用 ZFS 进行存储，我们只需要安装 ZFS 工具包。没有 ZFS，容器会在主机文件系统中以单独的文件形式进行存储。通过 ZFS，我们就有了写入时拷贝等功能，可以让任务完成更快一些。\x3c\/p\x3e\n\x3cp\x3e安装 \x3ccode\x3ezfsutils-linux\x3c\/code\x3e 包（若你安装的是 Ubuntu 16.04.x）：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs cmake\x22\x3esudo apt \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e zfsutils-linux\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e安装好 LXD 后，包安装脚本应该会将你加入 \x3ccode\x3elxd\x3c\/code\x3e 组。该组成员可以使你无需通过 \x3ccode\x3esudo\x3c\/code\x3e 就能直接使用 LXD 管理容器。根据 Linux 的习惯，\x3cstrong\x3e你需要先登出桌面会话然后再登录\x3c\/strong\x3e 才能应用 \x3ccode\x3elxd\x3c\/code\x3e 的组成员关系。（若你是高手，也可以通过在当前 shell 中执行 \x3ccode\x3enewgrp lxd\x3c\/code\x3e 命令，就不用重登录了）。\x3c\/p\x3e\n\x3cp\x3e在开始使用前，LXD 需要初始化存储和网络参数。\x3c\/p\x3e\n\x3cp\x3e运行下面命令：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3e$ sudo lxd init\nName of the storage backend \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e use (dir \x3cspan class=\x22hljs-keyword\x22\x3eor\x3c\/span\x3e zfs): zfs\nCreate a new ZFS\x3cspan class=\x22hljs-built_in\x22\x3e pool \x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e\/\x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e)? \x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e\nName of the new ZFS pool: lxd-pool\nWould you like \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e use an existing block device (\x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e\/\x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e)? \x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e\nSize \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e GB of the new loop device (1GB minimum): 30\nWould you like LXD \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e be available over the\x3cspan class=\x22hljs-built_in\x22\x3e network \x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e\/\x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e)? \x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eDo\x3c\/span\x3e you want \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e configure the LXD\x3cspan class=\x22hljs-built_in\x22\x3e bridge \x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e\/\x3cspan class=\x22hljs-literal\x22\x3eno\x3c\/span\x3e)? \x3cspan class=\x22hljs-literal\x22\x3eyes\x3c\/span\x3e \n\x26gt; You will be asked about the\x3cspan class=\x22hljs-built_in\x22\x3e network bridge \x3c\/span\x3econfiguration. Accept all defaults \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e continue.\nWarning: Stopping lxd.service, but it can still be activated by:\n lxd.socket\n LXD has been successfully configured.\n$ _\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们在一个（单独）的文件而不是块设备（即分区）中构建了一个文件系统来作为 ZFS 池，因此我们无需进行额外的分区操作。在本例中我指定了 30GB 大小，这个空间取之于根（\x3ccode\x3e\/\x3c\/code\x3e） 文件系统中。这个文件就是 \x3ccode\x3e\/var\/lib\/lxd\/zfs.img\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e行了！最初的配置完成了。若有问题，或者想了解其他信息，请阅读 \x3ca href=\x22https:\/\/www.stgraber.org\/2016\/03\/15\/lxd-2-0-installing-and-configuring-lxd-212\/\x22\x3ehttps:\/\/www.stgraber.org\/2016\/03\/15\/lxd-2-0-installing-and-configuring-lxd-212\/\x3c\/a\x3e 。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#创建第一个容器\x22\x3e\x3c\/a\x3e创建第一个容器\x3c\/h3\x3e\n\x3cp\x3e所有 LXD 的管理操作都可以通过 \x3ccode\x3elxc\x3c\/code\x3e 命令来进行。我们通过给 \x3ccode\x3elxc\x3c\/code\x3e 不同参数来管理容器。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs applescript\x22\x3elxc \x3cspan class=\x22hljs-built_in\x22\x3elist\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e可以列出所有已经安装的容器。很明显，这个列表现在是空的，但这表示我们的安装是没问题的。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sqf\x22\x3elxc \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3elist\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e列出可以用来启动容器的（已经缓存的）镜像列表。很明显这个列表也是空的，但这也说明我们的安装是没问题的。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sqf\x22\x3elxc \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3elist\x3c\/span\x3e ubuntu：\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e列出可以下载并启动容器的远程镜像。而且指定了显示 Ubuntu 镜像。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sqf\x22\x3elxc \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3elist\x3c\/span\x3e images：\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e列出可以用来启动容器的（已经缓存的）各种发行版的镜像列表。这会列出各种发行版的镜像比如 Alpine、Debian、Gentoo、Opensuse 以及 Fedora。\x3c\/p\x3e\n\x3cp\x3e让我们启动一个 Ubuntu 16.04 容器，并称之为 \x3ccode\x3ec1\x3c\/code\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs llvm\x22\x3e$ lxc launch ubuntu：\x3cspan class=\x22hljs-keyword\x22\x3ex\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ec\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\nCreating \x3cspan class=\x22hljs-keyword\x22\x3ec\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\nStarting \x3cspan class=\x22hljs-keyword\x22\x3ec\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n$ \n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们使用 \x3ccode\x3elaunch\x3c\/code\x3e 动作，然后选择镜像 \x3ccode\x3eubuntu：x\x3c\/code\x3e （\x3ccode\x3ex\x3c\/code\x3e 表示 Xenial\/16.04 镜像），最后我们使用名字 \x3ccode\x3ec1\x3c\/code\x3e 作为容器的名称。\x3c\/p\x3e\n\x3cp\x3e让我们来看看安装好的首个容器，\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs gherkin\x22\x3e$ lxc list\n\n\x2b---------|\x3cspan class=\x22hljs-string\x22\x3e---------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e----------------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-----------\x2b\n\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e NAME \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e STATE \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e IPV4 \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e IPV6 \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e TYPE \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e SNAPSHOTS \x3c\/span\x3e|\n\x2b---------|\x3cspan class=\x22hljs-string\x22\x3e---------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e----------------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-----------\x2b\n\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e c1 \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e RUNNING \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e 10.173.82.158 (eth0) \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e PERSISTENT \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e 0 \x3c\/span\x3e|\n\x2b---------|\x3cspan class=\x22hljs-string\x22\x3e---------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e----------------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e------------\x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-----------\x2b\n\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们的首个容器 c1 已经运行起来了，它还有自己的 IP 地址（可以本地访问）。我们可以开始用它了！\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#安装-web-服务器\x22\x3e\x3c\/a\x3e安装 web 服务器\x3c\/h3\x3e\n\x3cp\x3e我们可以在容器中运行命令。运行命令的动作为 \x3ccode\x3eexec\x3c\/code\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3e$ lxc exec c1 -- uptime\n \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e：\x3cspan class=\x22hljs-number\x22\x3e47\x3c\/span\x3e：\x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e up \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e min，\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e users，load average：\x3cspan class=\x22hljs-number\x22\x3e0.07\x3c\/span\x3e，\x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e，\x3cspan class=\x22hljs-number\x22\x3e0.04\x3c\/span\x3e\n$ _\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在 \x3ccode\x3eexec\x3c\/code\x3e 后面，我们指定容器、最后输入要在容器中运行的命令。该容器的运行时间只有 2 分钟，这是个新出炉的容器：-)。\x3c\/p\x3e\n\x3cp\x3e命令行中的 \x3ccode\x3e--\x3c\/code\x3e 跟我们 shell 的参数处理过程有关。若我们的命令没有任何参数，则完全可以省略 \x3ccode\x3e-\x3c\/code\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e lxc \x3cspan class=\x22hljs-built_in\x22\x3eexec\x3c\/span\x3e c1 -- df -h\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这是一个必须要 \x3ccode\x3e-\x3c\/code\x3e 的例子，由于我们的命令使用了参数 \x3ccode\x3e-h\x3c\/code\x3e。若省略了 \x3ccode\x3e-\x3c\/code\x3e，会报错。\x3c\/p\x3e\n\x3cp\x3e然后我们运行容器中的 shell 来更新包列表。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3e$ lxc exec c1 bash\nroot@c1:~# apt update\nIgn http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/archive.ubuntu.com trusty InRelease\x3c\/span\x3e\nGet:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/archive.ubuntu.com trusty-updates InRelease [65.9 kB]\x3c\/span\x3e\nGet:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/security.ubuntu.com trusty-security InRelease [65.9 kB]\x3c\/span\x3e\n...\nHit http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/archive.ubuntu.com trusty\/universe Translation-en \x3c\/span\x3e\nFetched \x3cspan class=\x22hljs-number\x22\x3e11.2\x3c\/span\x3e MB \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3es (\x3cspan class=\x22hljs-number\x22\x3e1228\x3c\/span\x3e kB\/s) \nReading package lists... Done\nroot@c1:~# apt upgrade\nReading package lists... Done\nBuilding dependency tree \n...\nProcessing triggers for man-db (\x3cspan class=\x22hljs-number\x22\x3e2.6\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.7\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3eubuntu1) ...\nSetting up dpkg (\x3cspan class=\x22hljs-number\x22\x3e1.17\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3eubuntu5\x3cspan class=\x22hljs-number\x22\x3e.7\x3c\/span\x3e) ...\nroot@c1:~# _\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们使用 nginx 来做 web 服务器。nginx 在某些方面要比 Apache web 服务器更酷一些。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3eroot@c1:~# apt install nginx\nReading package lists... Done\nBuilding dependency tree\n...\nSetting up nginx-core (\x3cspan class=\x22hljs-number\x22\x3e1.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.6\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3eubuntu3\x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3e) ...\nSetting up nginx (\x3cspan class=\x22hljs-number\x22\x3e1.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.6\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3eubuntu3\x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3e) ...\nProcessing triggers for libc-bin (\x3cspan class=\x22hljs-number\x22\x3e2.19\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-0\x3c\/span\x3eubuntu6\x3cspan class=\x22hljs-number\x22\x3e.9\x3c\/span\x3e) ...\nroot@c1:~# _\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e让我们用浏览器访问一下这个 web 服务器。记住 IP 地址为 10.173.82.158，因此你需要在浏览器中输入这个 IP。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/i2.wp.com\/blog.simos.info\/wp-content\/uploads\/2016\/06\/lxd-nginx.png?ssl=1\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01998102156c1c5da8.png\x22 alt=\x22lxd-nginx\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e让我们对页面文字做一些小改动。回到容器中，进入默认 HTML 页面的目录中。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@c1\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# cd \/var\/www\/html\/\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@c1\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\/var\/www\/html\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# ls -l\x3c\/span\x3e\ntotal \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n-rw-r--r-- \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e root root \x3cspan class=\x22hljs-number\x22\x3e612\x3c\/span\x3e Jun \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e index.nginx-debian.html\nroot\x3cspan class=\x22hljs-variable\x22\x3e@c1\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\/var\/www\/html\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e使用 nano 编辑文件，然后保存：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/i2.wp.com\/blog.simos.info\/wp-content\/uploads\/2016\/06\/lxd-nginx-nano.png?ssl=1\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01435cad93ee0528b4.png\x22 alt=\x22lxd-nginx-nano\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e之后，再刷一下页面看看，\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/i1.wp.com\/blog.simos.info\/wp-content\/uploads\/2016\/06\/lxd-nginx-modified.png?ssl=1\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t015dc90a573e5d055b.png\x22 alt=\x22lxd-nginx-modified\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#清理\x22\x3e\x3c\/a\x3e清理\x3c\/h3\x3e\n\x3cp\x3e让我们清理一下这个容器，也就是删掉它。当需要的时候我们可以很方便地创建一个新容器出来。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs asciidoc\x22\x3e\x3cspan class=\x22hljs-section\x22\x3e$ lxc list\n\x2b---------\x2b---------\x2b----------------------\x2b------\x2b------------\x2b-----------\x2b\x3c\/span\x3e\n\x3cspan class=\x22hljs-section\x22\x3e| NAME | STATE   | IPV4                 | IPV6 | TYPE       | SNAPSHOTS    |\n\x2b---------\x2b---------\x2b----------------------\x2b------\x2b------------\x2b-----------\x2b\x3c\/span\x3e\n\x3cspan class=\x22hljs-section\x22\x3e| c1   | RUNNING | 10.173.82.169 (eth0) |      | PERSISTENT | 0            |\n\x2b---------\x2b---------\x2b----------------------\x2b------\x2b------------\x2b-----------\x2b\x3c\/span\x3e\n$ lxc stop c1\n$ lxc delete c1\n\x3cspan class=\x22hljs-section\x22\x3e$ lxc list\n\x2b---------\x2b---------\x2b----------------------\x2b------\x2b------------\x2b-----------\x2b\x3c\/span\x3e\n\x3cspan class=\x22hljs-section\x22\x3e| NAME | STATE   | IPV4                 | IPV6 | TYPE       | SNAPSHOTS    |\n\x2b---------\x2b---------\x2b----------------------\x2b------\x2b------------\x2b-----------\x2b\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e\x2b---------\x2b\x3c\/span\x3e---------\x3cspan class=\x22hljs-code\x22\x3e\x2b----------------------\x2b\x3c\/span\x3e------\x3cspan class=\x22hljs-code\x22\x3e\x2b------------\x2b\x3c\/span\x3e-----------\x2b\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们停止（关闭）这个容器，然后删掉它了。\x3c\/p\x3e\n\x3cp\x3e本文至此就结束了。关于容器有很多玩法。而这只是配置 Ubuntu 并尝试使用容器的第一步而已。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/blog.simos.info\/trying-out-lxd-containers-on-our-ubuntu\/\x22\x3ehttps:\/\/blog.simos.info\/trying-out-lxd-containers-on-our-ubuntu\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/blog.simos.info\/author\/simos\/\x22\x3eSimos Xenitellis\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/lujun9972\x22\x3elujun9972\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>在 Ubuntu 上体验 LXD 容器</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/trying-out-lxd-containers-on-our-ubuntu">https://www.zcfy.cc/article/trying-out-lxd-containers-on-our-ubuntu</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/n7ay2k3se2l/" target="_blank">https://alili.tech/archive/n7ay2k3se2l/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>