<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript 中对大量数据的多重过滤"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript 中对大量数据的多重过滤 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/hjgkntbgqek/",
				"appid": "1613049289050283", 
				"title": "JavaScript 中对大量数据的多重过滤 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/h1hfvr2a2nj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/s4apghsr7o/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&text=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&text=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&title=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&is_video=false&description=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&title=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&title=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&title=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhjgkntbgqek%2f&title=JavaScript%20%e4%b8%ad%e5%af%b9%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e9%87%8d%e8%bf%87%e6%bb%a4"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript 中对大量数据的多重过滤</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e所有代码使用 ES2015 语法，需要 ES5 语法的可以用 \x3ca href=\x22http:\/\/babeljs.io\/repl\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBabel - Try it out\x3c\/a\x3e 或者 \x3ca href=\x22http:\/\/www.typescriptlang.org\/play\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eTypeScript Playground\x3c\/a\x3e 翻译。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e问题提出\x3c\/h2\x3e\n\x3cp\x3e今天有朋友问我一个问题，前端通过 Ajax 从后端取得了大量的数据，需要根据一些条件过滤，过滤的方法是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Filter {\n    filterA(s) {\n        let data = this.filterData || this.data;\n        this.filterData = data.filter(m =\x3e m.a === s);\n    }\n    \n    filterB(s) {\n        let data = this.filterData || this.data;\n        this.filterData = data.filter(m =\x3e m.b === s);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFilter\x3c\/span\x3e \x3c\/span\x3e{\n    filterA(s) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterData || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterData = data.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e m.a === s);\n    }\n    \n    filterB(s) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterData || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterData = data.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e m.b === s);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在迷糊了，觉得这样处理数据不对，但是又不知道该怎么处理。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e发现问题\x3c\/h2\x3e\n\x3cp\x3e问题就在过滤上，这样固然可以实现多重过滤（先调用 \x3ccode\x3efilterA()\x3c\/code\x3e 再调用 \x3ccode\x3efilterB()\x3c\/code\x3e 就可以实现），但是这个过滤是不可逆的。假如过滤过程是这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22f.filterA(\x26quot;a1\x26quot;);\nf.filterB(\x26quot;b1\x26quot;);\nf.filterA(\x26quot;a2\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3ef.filterA(\x3cspan class=\x22hljs-string\x22\x3e\x22a1\x22\x3c\/span\x3e);\nf.filterB(\x3cspan class=\x22hljs-string\x22\x3e\x22b1\x22\x3c\/span\x3e);\nf.filterA(\x3cspan class=\x22hljs-string\x22\x3e\x22a2\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e本来是希望按 \x3ccode\x3e\x22a1\x22\x3c\/code\x3e 和 \x3ccode\x3e\x22b1\x22\x3c\/code\x3e 过滤了数据之后，再修改第一个条件为 \x3ccode\x3e\x22a2\x22\x3c\/code\x3e，但结果却成了空集。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e解决问题\x3c\/h2\x3e\n\x3cp\x3e发现了问题，就针对性的解决。这个问题既然是因为过滤过程不可逆造成的，那每次都直接从 \x3ccode\x3ethis.data\x3c\/code\x3e 开始过滤，而不是从 \x3ccode\x3ethis.filterData\x3c\/code\x3e 开始过滤，就能解决问题。如果要这样做，就需要将选择的过滤条件先记录下来。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e记录过滤条件\x3c\/h3\x3e\n\x3cp\x3e用一个列表记录过滤条件当然是可行的，但是注意对同一个条件的两次过滤是互斥的，只能保留最后一个，所以应该用 HashMap 更为合适。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Filter {\n    constructor() {\n        this.filters = {};\n    }\n\n    set(key, filter) {\n        this.filters[key] = filter;\n    }\n\n    getFilters() {\n        return Object.keys(this.filters).map(key =\x3e this.filters[key]);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFilter\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filters = {};\n    }\n\n    set(key, filter) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filters[key] = filter;\n    }\n\n    getFilters() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filters).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filters[key]);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种情况下，像上面的过程表示为\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22f.set(\x26quot;A\x26quot;, m =\x3e m.a === \x26quot;a1\x26quot;);\nf.set(\x26quot;B\x26quot;, m =\x3e m.b === \x26quot;b1\x26quot;);\nf.set(\x26quot;A\x26quot;, m =\x3e m.a === \x26quot;a1\x26quot;);\n\nlet filters = f.getFilters();  \/\/ length === 2;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ef.set(\x3cspan class=\x22hljs-string\x22\x3e\x22A\x22\x3c\/span\x3e, m =\x26gt; m.a === \x3cspan class=\x22hljs-string\x22\x3e\x22a1\x22\x3c\/span\x3e);\nf.set(\x3cspan class=\x22hljs-string\x22\x3e\x22B\x22\x3c\/span\x3e, m =\x26gt; m.b === \x3cspan class=\x22hljs-string\x22\x3e\x22b1\x22\x3c\/span\x3e);\nf.set(\x3cspan class=\x22hljs-string\x22\x3e\x22A\x22\x3c\/span\x3e, m =\x26gt; m.a === \x3cspan class=\x22hljs-string\x22\x3e\x22a1\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e filters = f.getFilters();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ length === 2;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面第 3 句设置的 filter 覆盖了第 1 句设置的那个。现在再用最后取得的 \x3ccode\x3efilters\x3c\/code\x3e 依次来过滤原数据 \x3ccode\x3ethis.data\x3c\/code\x3e，就能得到正确的结果。\x3c\/p\x3e\n\x3cp\x3e有人会觉得 \x3ccode\x3egetFilters()\x3c\/code\x3e 返回的列表不是按 \x3ccode\x3eset\x3c\/code\x3e 的顺序的——的确，这是 HashMap 的特点，无序。不过对于简单条件的判断，不管谁先谁后，结果是一样的。但是对于一些复合条件判断，就可能会有影响。\x3c\/p\x3e\n\x3cp\x3e确实需要的话，可以通过 array 代替 map 来解决一下顺序的问题，但这样查找效率会降低（线性查找）。如果还想解决查找效率的问题，可以用 array \x2b map 来处理。这里就不多说了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e过滤\x3c\/h3\x3e\n\x3cp\x3e实际上在使用的时候，每次都 \x3ccode\x3egetFilter()\x3c\/code\x3e 再用一个循环来处理确实比较慢。既然 \x3ccode\x3edata\x3c\/code\x3e 都封装成 \x3ccode\x3eFilter\x3c\/code\x3e 中，可以考虑直接给一个 \x3ccode\x3efilter()\x3c\/code\x3e 方法来作为过滤接口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Filter {\n    filter() {\n        let data = this.data;\n        for (let f of this.getFilters()) {\n            data = data.filter(f);\n        }\n        return data;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFilter\x3c\/span\x3e \x3c\/span\x3e{\n    filter() {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data;\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e f \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getFilters()) {\n            data = data.filter(f);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不过这样我觉得效率不太好，尤其是对大量数据的时候。不妨利用一下 \x3ca href=\x22https:\/\/lodash.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elodash\x3c\/a\x3e 的延迟处理过程。\x3c\/p\x3e\n\x3ch4\x3e利用 lodash 的延迟处理\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filter() {\n    let chain = _(this.data);\n    for (let f of this.getFilters()) {\n        chain = chain.filter(f);\n    }\n    return chain.value();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3efilter() {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e chain = _(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data);\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e f \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getFilters()) {\n        chain = chain.filter(f);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e chain.value();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3elodash 在数据大于 200 的时候会启用延迟处理过程，也就是说，它会处理成一个循环中依次调用每一个 filter，而不是对每一个 filter 进行一次循环。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e延迟处理和非延迟处理通过下图可以看出来区别。非延迟处理总共会进行 \x3ccode\x3en\x3c\/code\x3e（这里 n = 3） 次大循环，产生 \x3ccode\x3en - 1\x3c\/code\x3e 个中间结果。而延迟处理只会进行一次大循环，没有中间结果产生。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVE6Du?w=588\x26amp;h=426\x22 src=\x22https:\/\/static.alili.tech\/img\/bVE6Du?w=588\x26amp;h=426\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e不过说实在的，我不太喜欢为了一点小事多加载一个库，所以干脆自己做个简单的实现\x3c\/p\x3e\n\x3ch4\x3e自己实现延迟处理\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filter() {\n    const filters = this.getFilters();\n    return data.filter(m =\x3e {\n        for (let f of filters) {\n            \/\/ 如果某个 filter 已经把它过滤掉了，也不用再用后面的 filter 来判断了\n            if (!f(m)) {\n                return false;\n            }\n        }\n        return true;\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3efilter() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filters = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getFilters();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e f \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e filters) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果某个 filter 已经把它过滤掉了，也不用再用后面的 filter 来判断了\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!f(m)) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n            }\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e里面的 for 循环还可以用 Array.prototype.every 来简化：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filter() {\n    const filters = this.getFilters();\n    return data.filter(m =\x3e {\n        return filters.every(f =\x3e f(m));\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3efilter() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filters = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getFilters();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e filters.every(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ef\x3c\/span\x3e =\x26gt;\x3c\/span\x3e f(m));\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e数据过滤其实并不是多复杂的事情，只要把思路理清楚，搞明白什么数据是需要保留的，什么数据是临时（中间过程）的，什么数据是最终结果……利用 Array.prototype 中的相关方法，或者诸如 lodash 之类的工具，很容易就处理出来了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript 中对大量数据的多重过滤</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007371890">https://segmentfault.com/a/1190000007371890</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/hjgkntbgqek/" target="_blank">https://alili.tech/archive/hjgkntbgqek/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/sj57jxyoook/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/qsw902j95k/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（下）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/nnpmjlot58j/">IndexedDB使用与出坑指南<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/alvlbas9oai/">JS事件模型<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/u0pzym8k36o/">JS练习实例--编写经典小游戏俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/khwpyk5yz8q/">JavaScript 事件代理和委托<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/kuocl6lc3n/">JavaScript 版俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/n8bk54lyrf/">Promise学习:基础入门<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/7bk7u30qncb/">Redux 入坑进阶 - 源码解析<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/853kqfmqmf7/">Snap.svg 基本知识入门<aside class="dates">2019-02-03</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>