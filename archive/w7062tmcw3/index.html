<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="3D 视差效果"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>3D 视差效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/w7062tmcw3/",
				"appid": "1613049289050283", 
				"title": "3D 视差效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-29T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/5jt1iw1t77b/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4wvjfeus9ur/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&text=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&text=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&title=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&is_video=false&description=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&title=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&title=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&title=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fw7062tmcw3%2f&title=3D%20%e8%a7%86%e5%b7%ae%e6%95%88%e6%9e%9c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">3D 视差效果</h1><div class="meta"><div class="postdate"><time datetime="2019-01-29" itemprop="datePublished">2019-01-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVG94Y?w=586\x26amp;h=503\x22 src=\x22https:\/\/static.alili.tech\/img\/bVG94Y?w=586\x26amp;h=503\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e前一周敢玩新版PC端上线，其中原创视频封面用的就是上图的效果，下面详细说一下怎么实现\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e起因\x3c\/h2\x3e\n\x3cp\x3e这个效果有着相对较好的用户体验，在 hover 的基础上又有了与用户交互的体验，仿佛用户一直在不同角度按压这张图片。\x3c\/p\x3e\n\x3cp\x3e当然这个效果早就有人在写并用于官网了，感兴趣可以去\x3ca href=\x22http:\/\/www.smartisan.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e锤子官网\x3c\/a\x3e，看下轮播图的鼠标交互效果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e基本思路\x3c\/h2\x3e\n\x3cp\x3e单借助 CSS3 的 hover 不足以支配这个效果，JS 方案考虑以下步骤\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e绑定鼠标事件（mouseover），绑定离开事件（mouseleave）\x3c\/li\x3e\n\x3cli\x3e判断鼠标相对于图片的位置\x3c\/li\x3e\n\x3cli\x3e计算出应该翻转（rotate）的角度，同时改变阴影的方向\x3c\/li\x3e\n\x3cli\x3e将图片复位\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e这里涉及 CSS3 的一个比较少用的属性 \x3ccode\x3eperspective\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3eMDN: perspective 属性指定了观察者与 z = 0 平面的距离，使具有三维位置变换的元素产生透视效果。z \x26gt; 0 的三维元素比正常大，而 z \x26lt; 0 时则比正常小，大小程度由该属性的值决定。\x3c\/blockquote\x3e\n\x3cp\x3e深入了解去看这个文章\x3ca href=\x22http:\/\/www.alloyteam.com\/2012\/10\/the-css3-transform-perspective-property\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCSS3 Transform 的 perspective 属性\x3c\/a\x3e，时间比较久但是很经典，除了兼容性描述有变其它描述很准确。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e开始构建\x3c\/h2\x3e\n\x3cp\x3ehtml：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;avatar\x26quot;\x3e\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22avatar\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecss:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.avatar {\n  width: 300px;\n  height: 300px;\n  margin: 50px auto;\n\n  background: url(\x27http:\/\/7xr2s7.com1.z0.glb.clouddn.com\/avatar.jpg\x27);\n  background-size: contain;\n\n  transition: all .3s linear;\n  transform-origin: 50%;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.avatar\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50px\x3c\/span\x3e auto;\n\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/7xr2s7.com1.z0.glb.clouddn.com\/avatar.jpg\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground-size\x3c\/span\x3e: contain;\n\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all .\x3cspan class=\x22hljs-number\x22\x3e3s\x3c\/span\x3e linear;\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform-origin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ejs:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let el = document.querySelector(\x27.avatar\x27)\n\nel.addEventListener(\x27mousemove\x27, (e) =\x3e {\n  let thisPX = el.getBoundingClientRect().left\n  let thisPY = el.getBoundingClientRect().top\n  let boxWidth = el.getBoundingClientRect().width\n  let boxHeight = el.getBoundingClientRect().height\n\n  let mouseX = e.pageX - thisPX\n  let mouseY = e.pageY - thisPY\n  let X\n  let Y\n\n  X = mouseX - boxWidth \/ 2\n  Y = boxHeight \/ 2 - mouseY\n\n  el.style.transform = `perspective(300px) rotateY(${X \/ 10}deg) rotateX(${Y \/ 10}deg)`\n  el.style.boxShadow = `${-X \/ 20}px ${Y \/ 20}px 50px rgba(0, 0, 0, 0.3)`\n})\n\n\nel.addEventListener(\x27mouseleave\x27, () =\x3e {\n  el.style.transform = `perspective(300px) rotateY(0deg) rotateX(0deg)`\n  el.style.boxShadow = \x27\x27\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e el = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.avatar\x27\x3c\/span\x3e)\n\nel.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, (e) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e thisPX = el.getBoundingClientRect().left\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e thisPY = el.getBoundingClientRect().top\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e boxWidth = el.getBoundingClientRect().width\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e boxHeight = el.getBoundingClientRect().height\n\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mouseX = e.pageX - thisPX\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mouseY = e.pageY - thisPY\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e X\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e Y\n\n  X = mouseX - boxWidth \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n  Y = boxHeight \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - mouseY\n\n  el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`perspective(300px) rotateY(\x3cspan class=\x22hljs-subst\x22\x3e${X \x3cspan class=\x22hljs-regexp\x22\x3e\/ 10}deg) rotateX(${Y \/\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e}\x3c\/span\x3edeg)`\x3c\/span\x3e\n  el.style.boxShadow = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${-X \x3cspan class=\x22hljs-regexp\x22\x3e\/ 20}px ${Y \/\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e}\x3c\/span\x3epx 50px rgba(0, 0, 0, 0.3)`\x3c\/span\x3e\n})\n\n\nel.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseleave\x27\x3c\/span\x3e, () =\x26gt; {\n  el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`perspective(300px) rotateY(0deg) rotateX(0deg)`\x3c\/span\x3e\n  el.style.boxShadow = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上代码看似没什么问题，也许你在新版本浏览器（无需babel）已经顺利执行了，但是这里有一个坑。\x3c\/p\x3e\n\x3cp\x3e除非你能确定你的图片在一屏内，就是说你的 body 最大高度就是窗口高度，不然 \x3ccode\x3elet mouseY = e.pageY - thisPY\x3c\/code\x3e 这句计算出来的不一定是真实的鼠标偏移量，而是加上滚动调偏移后的值。\x3c\/p\x3e\n\x3cp\x3e解决办法就是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let scrollTop = document.documentElement.scrollTop \x2b document.body.scrollTop  \/\/计算滚动高度\n\nlet mouseY = e.pageY - scrollTop - thisPY  \/\/减去滚动高度\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e scrollTop = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollTop \x2b \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop  \x3cspan class=\x22hljs-comment\x22\x3e\/\/计算滚动高度\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mouseY = e.pageY - scrollTop - thisPY  \x3cspan class=\x22hljs-comment\x22\x3e\/\/减去滚动高度\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一般的项目考虑到这就可以了，如果你的项目存在 X 轴上的偏移计算原理相同，减去偏移量。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e实例\x3c\/h2\x3e\n\x3cp\x3e我自己的代码放在了 codepen，如下\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/orangexc\/pen\/VmgoVX\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/codepen.io\/orangexc\/p...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22orangexc\/pen\/VmgoVX\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cp\x3e另外最近发现在 codepen 上的一个项目，在热门榜单上，基本思路是一样的只不过换了种方式去写，很不错的例子，对于需要多个元素循环绑定的情况很好用。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/PavelDoGreat\/pen\/aBPRaX\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/codepen.io\/PavelDoGre...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22PavelDoGreat\/pen\/aBPRaX\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cblockquote\x3e注：此种方法规避了高度差计算的问题，因为是基于 offsetX（作用元素的偏移量），\x3cstrong\x3e推荐使用\x3c\/strong\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3eJS 动画考虑的会相对多一些，可以获取宽高及鼠标位置（方法多样），根据鼠标位置可以计算出动画的对应效果，选择合适的且兼容性好的代码很关键\x3c\/p\x3e\n\x3cblockquote\x3e文章出自 orange 的 个人博客 \x3ca href=\x22http:\/\/orangexc.xyz\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/orangexc.xyz\/\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>3D 视差效果</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007864456">https://segmentfault.com/a/1190000007864456</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/w7062tmcw3/" target="_blank">https://alili.tech/archive/w7062tmcw3/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/t42iv2yle7e/">2016-我的前端之路:工具化与工程化<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/xlhryjzdso/">2016年总结--成长<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/4wvjfeus9ur/">2016年末总结，我的前端之路<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5jt1iw1t77b/">AlloyTouch实战--60行代码搞定QQ看点资料卡<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/kquf0fxkw2j/">ES6，你不得不学！<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/r5b6g4133jh/">Emmet-前端开发神器<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5dbaikv4emi/">FreeCodeCamp中级算法题答案<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/iuyeljg6lm/">JSONP是什么<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/23ftsgrtzzc/">JS中的观察者模式(发布订阅)<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/6zyet64jeml/">Promise介绍--异步篇<aside class="dates">2019-01-29</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>