<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Redux story-1:who creates it?"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Redux story-1:who creates it? | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/kn3l7fwd55/",
				"appid": "1613049289050283", 
				"title": "Redux story-1:who creates it? | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-27T02:31:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9gngp6sg77/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/13j072ppoyf/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&text=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&text=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&title=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&is_video=false&description=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Redux%20story-1%3awho%20creates%20it%3f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&title=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&title=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&title=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkn3l7fwd55%2f&title=Redux%20story-1%3awho%20creates%20it%3f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Redux story-1:who creates it?</h1><div class="meta"><div class="postdate"><time datetime="2019-01-27" itemprop="datePublished">2019-01-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e 这是一个系列文章，旨在分享在react及相关技术栈实践过程中的个人感悟，心得。如果有不好的地方，欢迎各位批评指正。\x3c\/p\x3e\n\x3cp\x3e 由于对react本身还未深入了解，今天我们先来谈一谈redux相关的问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eWho creates it?\x3c\/h2\x3e\n\x3cp\x3e \x3ca href=\x22https:\/\/github.com\/gaearon\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDan Abramov\x3c\/a\x3e是\x3ccode\x3eredux\x3c\/code\x3e的作者，同时，他也是\x3ccode\x3eCreate React App\x3c\/code\x3e, \x3ccode\x3eReact Hot Loader\x3c\/code\x3e作者。当然1年前，他也由于\x3ccode\x3eredux\x3c\/code\x3e及相关的开源贡献加入了\x3ccode\x3efacebook\x3c\/code\x3e（他大二就辍学了，之前还当过.net工程师）。\x3c\/p\x3e\n\x3cp\x3e 在我最初了解到他的时候，我觉得他非常有礼貌。同时，也为了更多的了解\x3ccode\x3eredux\x3c\/code\x3e，我计划开始阅读他的每一条tweet，原先计划的是从15年7月开始，后来因为进展缓慢，而且\x3ccode\x3ereact\x3c\/code\x3e版本也已经发生很大变化了，于是便从16年1月1日开始阅读，目前记录到7月15日了。事实也证明，在这个过程中，的的确确学习到了很多东西。包括\x3ccode\x3eredux\x3c\/code\x3e的文档及\x3ccode\x3eredux-links\x3c\/code\x3e的作者\x3ca href=\x22https:\/\/github.com\/markerikson\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMark Erikson\x3c\/a\x3e，以及国外很多写过\x3ccode\x3eredux\x3c\/code\x3e系列的朋友们。\x3c\/p\x3e\n\x3cp\x3e 如果你有兴趣的话，可以看看我摘录的\x3ca href=\x22https:\/\/github.com\/NE-SmallTown\/react-heaven\/blob\/master\/Something-Interestingly-About-Redux-Or-Its-Author.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一些片段\x3c\/a\x3e。其中除了知识性的内容外，还有一些关于它自己生活，经历，学习方法，如何面对JS疲劳等等的摘录。也让我渐渐的了解到了国外的程序员们的一些观点，兴趣，梗等等。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e正文\x3c\/h2\x3e\n\x3cp\x3e 好了，暂时先介绍到这里了。切回redux本身，下面是学习源码过程中自己的一些体会。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3ecreateStore\x3c\/h2\x3e\n\x3cp\x3e \x3ccode\x3ecreateStore\x3c\/code\x3e的第3个参数为\x3ccode\x3eenhancer\x3c\/code\x3e，如果\x3ccode\x3eenhancer\x3c\/code\x3e有多个，那么应该使用\x3ccode\x3ecompose\x3c\/code\x3e的方式组合多个\x3ccode\x3eenhancer\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e 且每个\x3ccode\x3eenhancer\x3c\/code\x3e的模板为\x3ccode\x3eexport default createStore =\x26gt; (reducer, preloadedState, enhancer) =\x26gt; {...}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e 因为在\x3ccode\x3ecreateStore\x3c\/code\x3e中执行了：\x3ccode\x3ereturn enhancer(createStore)(reducer, preloadedState)\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e 另外，上面的提到的形如\x3ccode\x3e(reducer, preloadedState, enhancer) =\x26gt; {...}\x3c\/code\x3e 这个样子的其实都可以叫做\x3ccode\x3ecreateStore\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e 这也是社区有那么多\x3ccode\x3eenhancer\x3c\/code\x3e的原因，他们可以形成一个\x3ccode\x3eenhancer\x3c\/code\x3e链，我调用你的\x3ccode\x3ecreateStore\x3c\/code\x3e，然后返回我的\x3ccode\x3ecreateStore\x3c\/code\x3e供下一级调用\x3c\/p\x3e\n\x3cp\x3e 所以在自己的\x3ccode\x3ecreateStore\x3c\/code\x3e的函数体中经常能看到诸如\x3ccode\x3evar store = createStore(reducer, preloadedState, enhancer);\x3c\/code\x3e这样的用法，目的就是让自己这一级之前的\x3ccode\x3eenhancer\x3c\/code\x3e产生一个\x3ccode\x3estore\x3c\/code\x3e出来,而之前的\x3ccode\x3eenhancer\x3c\/code\x3e里的\x3ccode\x3ecreateStore\x3c\/code\x3e又会调用之前的，到最尽头，就是\x3ccode\x3eredux\x3c\/code\x3e本身的\x3ccode\x3ecreateStore\x3c\/code\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eapplyMiddleware\x3c\/h2\x3e\n\x3cp\x3e \x3ccode\x3eapplyMiddleware\x3c\/code\x3e的目的是返回一个\x3ccode\x3eenhancer\x3c\/code\x3e，这个\x3ccode\x3eenhancer\x3c\/code\x3e存储了1个或者多个中间件，中间件在上一级的\x3ccode\x3edispatch\x3c\/code\x3e方法的基础上增添自己的逻辑，然后返回自己的\x3ccode\x3edispatch\x3c\/code\x3e方法\x3c\/p\x3e\n\x3cp\x3e 对于中间件而言，中间件的模板为：\x3ccode\x3eexport default store =\x26gt; next =\x26gt; action =\x26gt; {...}\x3c\/code\x3e。有的地方也写成\x3ccode\x3eexport default _ref =\x26gt; next =\x26gt; action =\x26gt; {...}\x3c\/code\x3e或者\x3ccode\x3eexport default ({getState, dispatch}) =\x26gt; next =\x26gt; action =\x26gt; {...}\x3c\/code\x3e，看自己喜好了\x3c\/p\x3e\n\x3cp\x3e 实际的调用顺序如下(定义在\x3ccode\x3eredux\x3c\/code\x3e的\x3ccode\x3eapplyMiddleware.js\x3c\/code\x3e中)：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221. middleware(middlewareAPI);\n\/*\n    var middlewareAPI = {\n      getState: store.getState,\n      dispatch: (action) =\x3e dispatch(action)\n    };\n    \n    chain = middlewares.map(middleware =\x3e middleware(middlewareAPI));\n    dispatch = compose(...chain)(store.dispatch);\n\n    第1步即为第1次执行中间件，用redux自己的dipatch初始化各个中间件里的dispatch（也就是中间件的next参数）和getState。\n    从而确保至少redux本身能够正常工作，中间件的store或者_ref即为这里的middlewareAPI\n* *\/\n\n2. dispatch = compose(...chain)(store.dispatch);\n\/*\n    第2步即为第2次执行中间件\n    即用compose的形式链式调用第1步返回的中间件集合，如果中间件是定义在applyMiddleware的最后一个\n    那么中间件里的next为store.dispatch，否则next为上一个中间件返回的结果，可以理解为上一个中间件\n    返回的是封装了dispatch的自己的dispatch，这里的原理其实和enhancer一模一样\n\n    enhancer的目的是封装多次createStore并用compose的方式进行调用\n    middleware的目的是封装多次dispatch并用compose的方式进行调用\n* *\/\n\n总结：\n\/*\n    所以最后在redux的createStore.js中return的enhancer(createStore)(reducer, preloadedState)的结果就是一个增强\n    版的store，而这个增强版的store中存放的是增强版的dispatch\n* *\/\n\n\/* ××××××××××××××××关于combineReducers×××××××××××××××\n*   从执行上来说，combineReducers实际上最后就是变成对reducers进行深度优先遍历并执行的过程\n*   从结构上来说，combineReducers决定了我们的state状态树的最终结构或者说形状，他是呈一个树型结构的\n*   combineReducers(reducerA, reducerB),reducerA里面嵌套combineReducers(reducerA-child1, reducerA-child2)\n*   实际上对应状态树而已就是第一层有两个节点A，B，而A节点下面有两个子节点A-child1，A-child2\n*\n*   所以在最初设计的时候，我们要设想我们最终的状态树的样子，然后合理划分reducer，就像设计数据库的表结构一样。\n    当然这是比较概括的说法，事实上reducer的设计或者说state的划分有太多太多值得研究的东西，这个我们以后再谈了。\n* *\/\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs asciidoc\x22\x3e\x3ccode\x3e1. middleware(middlewareAPI);\n\/*\n\x3cspan class=\x22hljs-code\x22\x3e    var middlewareAPI = {\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e      getState: store.getState,\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e      dispatch: (action) =\x26gt; dispatch(action)\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    };\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    \x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    chain = middlewares.map(middleware =\x26gt; middleware(middlewareAPI));\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    dispatch = compose(...chain)(store.dispatch);\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-code\x22\x3e    第1步即为第1次执行中间件，用redux自己的dipatch初始化各个中间件里的dispatch（也就是中间件的next参数）和getState。\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    从而确保至少redux本身能够正常工作，中间件的store或者_ref即为这里的middlewareAPI\x3c\/span\x3e\n\x3cspan class=\x22hljs-bullet\x22\x3e* \x3c\/span\x3e\x3cspan class=\x22hljs-strong\x22\x3e*\/\n\n\x3c\/span\x3e2. dispatch = compose(...chain)(store.dispatch);\n\/*\n\x3cspan class=\x22hljs-code\x22\x3e    第2步即为第2次执行中间件\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    即用compose的形式链式调用第1步返回的中间件集合，如果中间件是定义在applyMiddleware的最后一个\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    那么中间件里的next为store.dispatch，否则next为上一个中间件返回的结果，可以理解为上一个中间件\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    返回的是封装了dispatch的自己的dispatch，这里的原理其实和enhancer一模一样\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-code\x22\x3e    enhancer的目的是封装多次createStore并用compose的方式进行调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    middleware的目的是封装多次dispatch并用compose的方式进行调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-bullet\x22\x3e* \x3c\/span\x3e\x3cspan class=\x22hljs-strong\x22\x3e*\/\n\n\x3c\/span\x3e总结：\n\/*\n\x3cspan class=\x22hljs-code\x22\x3e    所以最后在redux的createStore.js中return的enhancer(createStore)(reducer, preloadedState)的结果就是一个增强\x3c\/span\x3e\n\x3cspan class=\x22hljs-code\x22\x3e    版的store，而这个增强版的store中存放的是增强版的dispatch\x3c\/span\x3e\n\x3cspan class=\x22hljs-bullet\x22\x3e* \x3c\/span\x3e\x3cspan class=\x22hljs-strong\x22\x3e*\/\n\n\x3c\/span\x3e\/* ××××××××××××××××关于combineReducers×××××××××××××××\n\x3cspan class=\x22hljs-bullet\x22\x3e*   \x3c\/span\x3e从执行上来说，combineReducers实际上最后就是变成对reducers进行深度优先遍历并执行的过程\n\x3cspan class=\x22hljs-bullet\x22\x3e*   \x3c\/span\x3e从结构上来说，combineReducers决定了我们的state状态树的最终结构或者说形状，他是呈一个树型结构的\n\x3cspan class=\x22hljs-bullet\x22\x3e*   \x3c\/span\x3ecombineReducers(reducerA, reducerB),reducerA里面嵌套combineReducers(reducerA-child1, reducerA-child2)\n\x3cspan class=\x22hljs-bullet\x22\x3e*   \x3c\/span\x3e实际上对应状态树而已就是第一层有两个节点A，B，而A节点下面有两个子节点A-child1，A-child2\n\x3cspan class=\x22hljs-bullet\x22\x3e*\n\x3c\/span\x3e\x3cspan class=\x22hljs-bullet\x22\x3e*   \x3c\/span\x3e所以在最初设计的时候，我们要设想我们最终的状态树的样子，然后合理划分reducer，就像设计数据库的表结构一样。\n\x3cspan class=\x22hljs-code\x22\x3e    当然这是比较概括的说法，事实上reducer的设计或者说state的划分有太多太多值得研究的东西，这个我们以后再谈了。\x3c\/span\x3e\n\x3cspan class=\x22hljs-bullet\x22\x3e* \x3c\/span\x3e\x3cspan class=\x22hljs-strong\x22\x3e*\/\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3ebindActionCreator\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ebindActionCreator\x3c\/code\x3e实际就是给\x3ccode\x3eactionCreator\x3c\/code\x3e外层再添加了一层函数，而这层函数存放了对\x3ccode\x3edispatch\x3c\/code\x3e的引用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function bindActionCreator(actionCreator, dispatch) {\n  return (...args) =\x3e dispatch(actionCreator(...args))\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebindActionCreator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eactionCreator, dispatch\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e...args\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e dispatch(actionCreator(...args))\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以我们可以一般在组件里直接调用\x3ccode\x3ebindActionCreator\x3c\/code\x3e返回的\x3ccode\x3eactionCreator\x3c\/code\x3e，即\x3ccode\x3ethis.props.loadSomething(...)\x3c\/code\x3e。而不用写成\x3ccode\x3edispatch(actionCreator(...args))\x3c\/code\x3e，实际上他们是等价的\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3econnect\x3c\/h2\x3e\n\x3cp\x3e 既然提到了\x3ccode\x3eredux\x3c\/code\x3e，由于目前我是采用\x3ccode\x3ereact\x3c\/code\x3e进行开发，所以不得不提到相关的\x3ccode\x3ereact-redux\x3c\/code\x3e。其中最重要的莫属于\x3ccode\x3econnect\x3c\/code\x3e这个函数了。\x3c\/p\x3e\n\x3cp\x3e 传入\x3ccode\x3econnect\x3c\/code\x3e的组件在挂载到页面上后会调用\x3ccode\x3estore.subscribe\x3c\/code\x3e进行订阅，订阅的目的是我们调用\x3ccode\x3edispatch\x3c\/code\x3e的时候，表明我们的状态树即将发生变化，这个时候我们希望我们的组件对应发生变化，而组件变化的唯一方式就是\x3ccode\x3esetState\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e 订阅就是告诉\x3ccode\x3eredux\x3c\/code\x3e，这个组件是依赖于状态树的某部分工作的，所以当你变化的时候，记得获取最新的\x3ccode\x3estate\x3c\/code\x3e，然后通知我，至于我如何响应，那就是我自己的事了，你只管通知我状态树发生了变化并把它传给我就行了。值得一提的是，\x3ccode\x3econnect\x3c\/code\x3e内部进行了大量的性能优化，避免不必要的渲染，关于此以及\x3ccode\x3emapStateToProps\x3c\/code\x3e和\x3ccode\x3emapDispathToProps\x3c\/code\x3e，我们放到以后再谈。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e 篇幅有限，这一篇文章暂时就先这样啦，更多的内容，我想放在下一篇来分享，同时自己也在不断学习，希望能理解得更好。\x3c\/p\x3e\n\x3cp\x3e 值得一提的是，我们也许会认为我们了解到的redux，mobx，rxjs等等完全不同理念的库，他们的作者也许也是\x22极端\x22的，是排斥他人及理念的。实际上，这是不正确的，早在16年5月，Dan就和mobx的作者在twitter上有过互动，他们达成了共识，那就是和对方一起合作，一起推动自身以及react的发展。\x3c\/p\x3e\n\x3cp\x3e 对于redux-thunk，文档中也许会首先建议使用这个简单的库来处理异步相关的问题。对于复杂的应用，他们也推荐使用redux-saga这样的库去重构自己的代码。在twitter上，Dan也多次提到过库的应用场景的问题，建议大家用之前先了解自己为什么要使用，它解决了哪些痛点，然后再去使用。甚至特意提过\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router-redux\/issues\/257\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eissue\x3c\/a\x3e，来了解react-router-redux的作用。\x3c\/p\x3e\n\x3cp\x3e 除此之外，也提到在时间充裕的情况下，学习react，应该先从本身入手，ES6，webpack，jsx，redux等等和react本身都是没有直接联系的，在学习完react之后，我们知道了他本身的哪些不足，哪些地方需要加强，哪些地方需要引入第三方库去解决，解决的是哪些痛点，我们再去了解这些工具，才能真正体会到他们的威力。\x3c\/p\x3e\n\x3cp\x3e 说到这里，稍微有一点远了，不过我觉得还是有必要提及一下。那就是，我们身处一个浮躁的社会，无论是在现实中对待朋友，亲人，陌生人，由于学习，工作，生活的压力，周遭的浮躁氛围的影响，多多少少也会让自己带着些许暴戾之气。在网络上，由于约束的放宽，我们也许更会将压抑的情感释放给广袤的网络世界，在微博，贴吧，知乎上，我们或多或少书写着，察觉着这样的行为。\x3c\/p\x3e\n\x3cp\x3e 但是，作为一名程序猿，我还是期待能够看到我们这个圈子更多的将时间，精力，努力花费在对现有技术的改进，对未知世界的探索，追寻程序，库，框架，思想的本质，结交志同道合的朋友，一起交流，分享，思考对技术的看法。而不是卷入无休止的撕逼，用了某某而产生的优越，甚至借贬低他人来抬高自己。\x3c\/p\x3e\n\x3cp\x3e 我们可以理解一时的愤懑之情，因为我们大多，真是只是普普通通的社会人，喜怒哀乐再平常不过。但若我们一直保持这种状态，永远在上面这些场景都留下对人不对事的话语，讥讽，甚至谩骂。希望大家能为我们的后代想想。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Redux story-1:who creates it?</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008171909">https://segmentfault.com/a/1190000008171909</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/kn3l7fwd55/" target="_blank">https://alili.tech/archive/kn3l7fwd55/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/t42iv2yle7e/">2016-我的前端之路:工具化与工程化<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/xlhryjzdso/">2016年总结--成长<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/4wvjfeus9ur/">2016年末总结，我的前端之路<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/w7062tmcw3/">3D 视差效果<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5jt1iw1t77b/">AlloyTouch实战--60行代码搞定QQ看点资料卡<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/kquf0fxkw2j/">ES6，你不得不学！<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/r5b6g4133jh/">Emmet-前端开发神器<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5dbaikv4emi/">FreeCodeCamp中级算法题答案<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/iuyeljg6lm/">JSONP是什么<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/23ftsgrtzzc/">JS中的观察者模式(发布订阅)<aside class="dates">2019-01-29</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>