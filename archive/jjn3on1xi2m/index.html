<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="canvas动画—圆形扩散、运动轨迹"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>canvas动画—圆形扩散、运动轨迹 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jjn3on1xi2m/",
				"appid": "1613049289050283", 
				"title": "canvas动画—圆形扩散、运动轨迹 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-25T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/02a6l6a62klg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/h4ufbby1sa/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&text=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&text=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&title=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&is_video=false&description=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&title=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&title=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&title=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjn3on1xi2m%2f&title=canvas%e5%8a%a8%e7%94%bb%e2%80%94%e5%9c%86%e5%bd%a2%e6%89%a9%e6%95%a3%e3%80%81%e8%bf%90%e5%8a%a8%e8%bd%a8%e8%bf%b9"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">canvas动画—圆形扩散、运动轨迹</h1><div class="meta"><div class="postdate"><time datetime="2019-01-25" itemprop="datePublished">2019-01-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e介绍\x3c\/h2\x3e\n\x3cp\x3e在ECharts中看到过这种圆形扩散效果，类似css3，刚好项目中想把它用上，but我又不想引入整个echart.js文件，更重要的是想弄明白它的原理，所以自己动手。在这篇文章中我们就来分析实现这种效果的两种方法，先上效果图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008560574?w=300\x26amp;h=200\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008560574?w=300\x26amp;h=200\x22 alt=\x22圆形扩散\x22 title=\x22圆形扩散\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e实现原理\x3c\/h2\x3e\n\x3cp\x3e通过不断的改变圆的半径大小，不断重叠达到运动的效果，在运动的过程中，设置当前canvas的透明度\x3ccode\x3econtext.globalAlpha=0.95\x3c\/code\x3e，使得canvas上的圆逐渐透明直至为0，从而实现这种扩散、渐变的效果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e实现方法一\x3c\/h2\x3e\n\x3cp\x3e\x3cem\x3e1. 关键技术点\x3c\/em\x3e\x3cbr\x3e\x3ccode\x3econtext.globalAlpha = 0.95\x3c\/code\x3e; \/\/设置主canvas的绘制透明度。\x3cbr\x3e创建临时canvas来缓存主canas的历史图像，再叠加到主canvas上。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e2. 绘制过程\x3c\/em\x3e\x3cbr\x3e首先，我们先来写一个绘制圆的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/画圆\nvar drawCircle = function() {\n    context.beginPath();\n    context.arc(150, 100, radius, 0, Math.PI * 2);\n    context.closePath();\n    context.lineWidth = 2; \/\/线条宽度\n    context.strokeStyle = \x27rgba(250,250,50,1)\x27; \/\/颜色\n    context.stroke();\n    radius \x2b= 0.5; \/\/每一帧半径增加0.5\n\n    \/\/半径radius大于30时，重置为0\n    if (radius \x3e 30) {\n        radius = 0;\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/画圆\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e drawCircle = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    context.beginPath();\n    context.arc(\x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, radius, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    context.closePath();\n    context.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/线条宽度\x3c\/span\x3e\n    context.strokeStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27rgba(250,250,50,1)\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/颜色\x3c\/span\x3e\n    context.stroke();\n    radius \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/每一帧半径增加0.5\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/半径radius大于30时，重置为0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (radius \x26gt; \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e) {\n        radius = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，我们创建一个临时canvas用来缓存主canvas上的历史图像，设置主canvas的透明度\x3ccode\x3econtext.globalAlpha=0.95\x3c\/code\x3e(关键一步)，在每次调用\x3ccode\x3edrawCircle\x3c\/code\x3e方法绘制一个新圆之前都把主canvas上的图像，也就是之前的图像给绘制到临时的canvas中，等到\x3ccode\x3edrawCircle\x3c\/code\x3e方法绘制完新圆后，再把临时canvas的图像绘制回主canvas中。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008560575?w=620\x26amp;h=280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008560575?w=620\x26amp;h=280\x22 alt=\x22绘制流程\x22 title=\x22绘制流程\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e核心代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/创建一个临时canvas来缓存主canvas的历史图像\nvar backCanvas = document.createElement(\x27canvas\x27),\n    backCtx = backCanvas.getContext(\x272d\x27);\n    backCanvas.width = width;\n    backCanvas.height = height;\n\n    \/\/设置主canvas的绘制透明度\n    context.globalAlpha = 0.95;\n\n    \/\/显示即将绘制的图像，忽略临时canvas中已存在的图像\n    backCtx.globalCompositeOperation = \x27copy\x27;\n\nvar render = function() {\n    \/\/1.先将主canvas的图像缓存到临时canvas中\n    backCtx.drawImage(canvas, 0, 0, width, height);\n\n    \/\/2.清除主canvas上的图像\n    context.clearRect(0, 0, width, height);\n\n    \/\/3.在主canvas上画新圆\n    drawCircle();\n\n    \/\/4.等新圆画完后，再把临时canvas的图像绘制回主canvas中\n    context.drawImage(backCanvas, 0, 0, width, height);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/创建一个临时canvas来缓存主canvas的历史图像\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e backCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e),\n    backCtx = backCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n    backCanvas.width = width;\n    backCanvas.height = height;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置主canvas的绘制透明度\x3c\/span\x3e\n    context.globalAlpha = \x3cspan class=\x22hljs-number\x22\x3e0.95\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/显示即将绘制的图像，忽略临时canvas中已存在的图像\x3c\/span\x3e\n    backCtx.globalCompositeOperation = \x3cspan class=\x22hljs-string\x22\x3e\x27copy\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e render = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/1.先将主canvas的图像缓存到临时canvas中\x3c\/span\x3e\n    backCtx.drawImage(canvas, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/2.清除主canvas上的图像\x3c\/span\x3e\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/3.在主canvas上画新圆\x3c\/span\x3e\n    drawCircle();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/4.等新圆画完后，再把临时canvas的图像绘制回主canvas中\x3c\/span\x3e\n    context.drawImage(backCanvas, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e实现方法二\x3c\/h2\x3e\n\x3cp\x3e与上一种方法相比，这种方法更加简单，同样是用到了透明度逐渐减小直到为0的原理，不同的是这里并没有创建临时canvas，而是运用了\x3ccode\x3econtext.globalCompositeOperation\x3c\/code\x3e属性值\x3ccode\x3esource-over\x3c\/code\x3e和\x3ccode\x3edestination-in\x3c\/code\x3e来配合使用，\x3ca href=\x22http:\/\/www.w3school.com.cn\/tags\/canvas_globalcompositeoperation.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e查看globalCompositeOperation属性介绍\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e核心代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var render = function() {\n    \/\/默认值为source-over\n    var prev = context.globalCompositeOperation;\n\n    \/\/只显示canvas上原图像的重叠部分\n    context.globalCompositeOperation = \x27destination-in\x27;\n\n    \/\/设置主canvas的绘制透明度\n    context.globalAlpha = 0.95;\n\n    \/\/这一步目的是将canvas上的图像变的透明\n    context.fillRect(0, 0, width, height);\n\n    \/\/在原图像上重叠新图像\n    context.globalCompositeOperation = prev;\n\n    \/\/在主canvas上画新圆\n    drawCircle();\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e render = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/默认值为source-over\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e prev = context.globalCompositeOperation;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/只显示canvas上原图像的重叠部分\x3c\/span\x3e\n    context.globalCompositeOperation = \x3cspan class=\x22hljs-string\x22\x3e\x27destination-in\x27\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置主canvas的绘制透明度\x3c\/span\x3e\n    context.globalAlpha = \x3cspan class=\x22hljs-number\x22\x3e0.95\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/这一步目的是将canvas上的图像变的透明\x3c\/span\x3e\n    context.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/在原图像上重叠新图像\x3c\/span\x3e\n    context.globalCompositeOperation = prev;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/在主canvas上画新圆\x3c\/span\x3e\n    drawCircle();\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e地图上的应用\x3c\/h2\x3e\n\x3cp\x3e这里我采用的是第二种方式，将扩散、渐变效果运用到了百度地图上，感觉还比较炫，\x3ca href=\x22https:\/\/github.com\/chengquan223\/map-canvas\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e查看更多demo\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/chengquan223.github.io\/map-canvas\/examples\/baidu-map-flashmarker.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e圆形扩散动画\x3c\/a\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008560576?w=620\x26amp;h=280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008560576?w=620\x26amp;h=280\x22 alt=\x22百度地图圆形扩散\x22 title=\x22百度地图圆形扩散\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/chengquan223.github.io\/map-canvas\/examples\/baidu-map-move.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e运动轨迹动画\x3c\/a\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008560577?w=620\x26amp;h=423\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008560577?w=620\x26amp;h=423\x22 alt=\x22百度地图运动轨迹动画\x22 title=\x22百度地图运动轨迹动画\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e方法一、二都能实现同样的效果，如果动画绘制、操作canvas比较频繁，建议采用第一种方式，用临时canvas来缓存历史图像，效率更高。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>canvas动画—圆形扩散、运动轨迹</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008560571">https://segmentfault.com/a/1190000008560571</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jjn3on1xi2m/" target="_blank">https://alili.tech/archive/jjn3on1xi2m/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/t42iv2yle7e/">2016-我的前端之路:工具化与工程化<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/xlhryjzdso/">2016年总结--成长<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/4wvjfeus9ur/">2016年末总结，我的前端之路<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/w7062tmcw3/">3D 视差效果<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5jt1iw1t77b/">AlloyTouch实战--60行代码搞定QQ看点资料卡<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/kquf0fxkw2j/">ES6，你不得不学！<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/r5b6g4133jh/">Emmet-前端开发神器<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5dbaikv4emi/">FreeCodeCamp中级算法题答案<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/iuyeljg6lm/">JSONP是什么<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/23ftsgrtzzc/">JS中的观察者模式(发布订阅)<aside class="dates">2019-01-29</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>