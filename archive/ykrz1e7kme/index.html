<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="循序渐进学习如何在 MariaDB 中配置主从复制"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>循序渐进学习如何在 MariaDB 中配置主从复制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ykrz1e7kme/",
				"appid": "1613049289050283", 
				"title": "循序渐进学习如何在 MariaDB 中配置主从复制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-21T02:30:06"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jhekj5zpwl/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xqmia1o0poq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&text=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&text=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&title=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&is_video=false&description=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&title=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&title=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&title=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykrz1e7kme%2f&title=%e5%be%aa%e5%ba%8f%e6%b8%90%e8%bf%9b%e5%ad%a6%e4%b9%a0%e5%a6%82%e4%bd%95%e5%9c%a8%20MariaDB%20%e4%b8%ad%e9%85%8d%e7%bd%ae%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">循序渐进学习如何在 MariaDB 中配置主从复制</h1><div class="meta"><div class="postdate"><time datetime="2019-01-21" itemprop="datePublished">2019-01-21</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#循序渐进学习如何在-mariadb-中配置主从复制\x22\x3e\x3c\/a\x3e循序渐进学习如何在 MariaDB 中配置主从复制\x3c\/h1\x3e\n\x3cp\x3e在我们前面的教程中，我们已经学习了 \x3ca href=\x22https:\/\/linux.cn\/article-8320-1.html\x22\x3e如何安装和配置 MariaDB\x3c\/a\x3e，也学习了 \x3ca href=\x22https:\/\/linux.cn\/article-9306-1.html\x22\x3e管理 MariaDB 的一些基础命令\x3c\/a\x3e。现在我们来学习，如何在 MariaDB 服务器上配置一个主从复制。\x3c\/p\x3e\n\x3cp\x3e复制是用于为我们的数据库创 建多个副本，这些副本可以在其它数据库上用于运行查询，像一些非常繁重的查询可能会影响主数据库服务器的性能，或者我们可以使用它来做数据冗余，或者兼具以上两个目的。我们可以将这个过程自动化，即主服务器到从服务器的复制过程自动进行。执行备份而不影响在主服务器上的写操作。\x3c\/p\x3e\n\x3cp\x3e因此，我们现在去配置我们的主-从复制，它需要两台安装了 MariaDB 的机器。它们的 IP 地址如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cstrong\x3e主服务器 -\x3c\/strong\x3e 192.168.1.120 \x3cstrong\x3e主机名 -\x3c\/strong\x3e master.ltechlab.com\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3e从服务器 -\x3c\/strong\x3e 192.168.1.130 \x3cstrong\x3e主机名 -\x3c\/strong\x3e slave.ltechlab.com\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eMariaDB 安装到这些机器上之后，我们继续进行本教程。如果你需要安装和配置 MariaDB 的教程，请查看\x3ca href=\x22https:\/\/linux.cn\/article-8320-1.html\x22\x3e\x3cstrong\x3e这个教程\x3c\/strong\x3e\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#第-1-步---主服务器配置\x22\x3e\x3c\/a\x3e第 1 步 - 主服务器配置\x3c\/h3\x3e\n\x3cp\x3e我们现在进入到 MariaDB 中的一个命名为 \x3ccode\x3eimportant\x3c\/code\x3e 的数据库，它将被复制到我们的从服务器。为开始这个过程，我们编辑名为 \x3ccode\x3e\/etc\/my.cnf\x3c\/code\x3e 的文件，它是 MariaDB 的配置文件。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e vi \/etc\/my.cnf\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在这个文件中找到 \x3ccode\x3e[mysqld]\x3c\/code\x3e 节，然后输入如下内容：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3e[mysqld]\nlog-bin\n\x3cspan class=\x22hljs-attribute\x22\x3eserver_id\x3c\/span\x3e=1\n\x3cspan class=\x22hljs-attribute\x22\x3ereplicate-do-db\x3c\/span\x3e=important\n\x3cspan class=\x22hljs-attribute\x22\x3ebind-address\x3c\/span\x3e=192.168.1.120\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e保存并退出这个文件。完成之后，需要重启 MariaDB 服务。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e systemctl restart mariadb\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e接下来，我们登入我们的主服务器上的 Mariadb 实例。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mysql -u root -p\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在它上面创建一个命名为 \x3ccode\x3eslaveuser\x3c\/code\x3e 的为主从复制使用的新用户，然后运行如下的命令为它分配所需要的权限：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eSTOP\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSLAVE\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eGRANT\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eREPLICATION\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSLAVE\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eON\x3c\/span\x3e *.* \x3cspan class=\x22hljs-keyword\x22\x3eTO\x3c\/span\x3e  \x3cspan class=\x22hljs-string\x22\x3e\x27slaveuser\x27\x3c\/span\x3e@\x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eIDENTIFIED\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eBY\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27iamslave\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eFLUSH\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ePRIVILEGES\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eFLUSH\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eTABLES\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eWITH\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eREAD\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eLOCK\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eSHOW\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eMASTER\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSTATUS\x3c\/span\x3e;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3e注意：\x3c\/strong\x3e 我们配置主从复制需要 \x3ccode\x3eMASTER_LOG_FILE\x3c\/code\x3e 和 \x3ccode\x3eMASTER_LOG_POS\x3c\/code\x3e 的值，它可以通过 \x3ccode\x3eshow master status\x3c\/code\x3e 来获得，因此，你一定要确保你记下了它们的值。\x3c\/p\x3e\n\x3cp\x3e这些命令运行完成之后，输入 \x3ccode\x3eexit\x3c\/code\x3e 退出这个会话。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#第-2-步---创建一个数据库备份并将它移动到从服务器上\x22\x3e\x3c\/a\x3e第 2 步 - 创建一个数据库备份，并将它移动到从服务器上\x3c\/h3\x3e\n\x3cp\x3e现在，我们需要去为我们的数据库 \x3ccode\x3eimportant\x3c\/code\x3e 创建一个备份，可以使用 \x3ccode\x3emysqldump\x3c\/code\x3e 命令去备份。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e$ mysqldump -u root -\x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e important \x26gt; important_backup\x3cspan class=\x22hljs-selector-class\x22\x3e.sql\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e备份完成后，我们需要重新登录到 MariaDB 数据库，并解锁我们的表。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mysql -u root -p\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e UNLOCK TABLES;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e然后退出这个会话。现在，我们移动我们刚才的备份到从服务器上，它的 IP 地址是：192.168.1.130。\x3c\/p\x3e\n\x3cp\x3e在主服务器上的配置已经完成了，现在，我们开始配置从服务器。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#第-3-步配置从服务器\x22\x3e\x3c\/a\x3e第 3 步：配置从服务器\x3c\/h3\x3e\n\x3cp\x3e我们再次去编辑（从服务器上的） \x3ccode\x3e\/etc\/my.cnf\x3c\/code\x3e 文件，找到配置文件中的 \x3ccode\x3e[mysqld]\x3c\/code\x3e 节，然后输入如下内容：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ini\x22\x3e\x3cspan class=\x22hljs-section\x22\x3e[mysqld]\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3eserver-id\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3ereplicate-do-db\x3c\/span\x3e=important\n\x3cspan class=\x22hljs-section\x22\x3e[ …]\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e现在，我们恢复我们主数据库的备份到从服务器的 MariaDB 上，运行如下命令：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e$ mysql -u root -\x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e \x26lt; \/data\/ important_backup\x3cspan class=\x22hljs-selector-class\x22\x3e.sql\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e当这个恢复过程结束之后，我们将通过登入到从服务器上的 MariaDB，为数据库 \x3ccode\x3eimportant\x3c\/code\x3e 上的用户 \x27slaveuser\x27 授权。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mysql -u root -p\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eGRANT\x3c\/span\x3e ALL \x3cspan class=\x22hljs-keyword\x22\x3ePRIVILEGES\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eON\x3c\/span\x3e important.* \x3cspan class=\x22hljs-keyword\x22\x3eTO\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27slaveuser\x27\x3c\/span\x3e@\x3cspan class=\x22hljs-string\x22\x3e\x27localhost\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eWITH\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eGRANT\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eOPTION\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eFLUSH\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ePRIVILEGES\x3c\/span\x3e;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e接下来，为了这个变化生效，重启 MariaDB。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e systemctl restart mariadb\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#第-4-步启动复制\x22\x3e\x3c\/a\x3e第 4 步：启动复制\x3c\/h3\x3e\n\x3cp\x3e记住，我们需要 \x3ccode\x3eMASTER_LOG_FILE\x3c\/code\x3e 和 \x3ccode\x3eMASTER_LOG_POS\x3c\/code\x3e 变量的值，它可以通过在主服务器上运行 \x3ccode\x3eSHOW MASTER STATUS\x3c\/code\x3e 获得。现在登入到从服务器上的 MariaDB，然后通过运行下列命令，告诉我们的从服务器它应该去哪里找主服务器。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eSTOP\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSLAVE\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eCHANGE\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eMASTER\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eTO\x3c\/span\x3e MASTER_HOST= \x3cspan class=\x22hljs-string\x22\x3e\x27192.168.1.110′, MASTER_USER=\x27\x3c\/span\x3eslaveuser\x3cspan class=\x22hljs-string\x22\x3e\x27, MASTER_PASSWORD=\x27\x3c\/span\x3eiamslave\x3cspan class=\x22hljs-string\x22\x3e\x27, MASTER_LOG_FILE=\x27\x3c\/span\x3emariadb-\x3cspan class=\x22hljs-keyword\x22\x3ebin\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.000001\x3c\/span\x3e′, MASTER_LOG_POS=\x3cspan class=\x22hljs-number\x22\x3e460\x3c\/span\x3e;\nSLAVE \x3cspan class=\x22hljs-keyword\x22\x3eSTART\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eSHOW\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSLAVE\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSTATUS\x3c\/span\x3e\\G;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3e注意：\x3c\/strong\x3e 请根据你的机器的具体情况来改变主服务器的配置。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#第-5-步测试复制\x22\x3e\x3c\/a\x3e第 5 步：测试复制\x3c\/h3\x3e\n\x3cp\x3e我们将在我们的主服务器上创建一个新表来测试主从复制是否正常工作。因此，登入到主服务器上的 MariaDB。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mysql -u root -p\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e选择数据库为 \x3ccode\x3eimportant\x3c\/code\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs php\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3euse\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eimportant\x3c\/span\x3e;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在这个数据库上创建一个名为 \x3ccode\x3etest\x3c\/code\x3e 的表：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ecreate\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e (c \x3cspan class=\x22hljs-built_in\x22\x3eint\x3c\/span\x3e);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e然后在这个表中插入一些数据：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3einsert\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e (c) \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e检索刚才插入的值是否存在：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eselect\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e你将会看到刚才你插入的值已经在这个新建的表中了。\x3c\/p\x3e\n\x3cp\x3e现在，我们登入到从服务器的数据库中，查看主从复制是否正常工作。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mysql -u root -p\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e use important;\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e select * from \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e你可以看到与前面在主服务器上的命令输出是一样的。因此，说明我们的主从服务工作正常，没有发生任何问题。\x3c\/p\x3e\n\x3cp\x3e我们的教程结束了，请在下面的评论框中留下你的查询\/问题。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22http:\/\/linuxtechlab.com\/creating-master-slave-replication-mariadb\/\x22\x3ehttp:\/\/linuxtechlab.com\/creating-master-slave-replication-mariadb\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22http:\/\/linuxtechlab.com\/author\/shsuain\/\x22\x3eShusain\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/qhwdw\x22\x3eqhwdw\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>循序渐进学习如何在 MariaDB 中配置主从复制</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/step-by-step-guide-for-creating-master-slave-replication-in-mariadb">https://www.zcfy.cc/article/step-by-step-guide-for-creating-master-slave-replication-in-mariadb</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ykrz1e7kme/" target="_blank">https://alili.tech/archive/ykrz1e7kme/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>