<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从单页应用(SPA)到服务器渲染(SSR)"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从单页应用(SPA)到服务器渲染(SSR) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/opjd6p8tmhd/",
				"appid": "1613049289050283", 
				"title": "从单页应用(SPA)到服务器渲染(SSR) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-30T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/q802siw6pd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ozixvh5k6qj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&text=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&text=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&title=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&is_video=false&description=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&title=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&title=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&title=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fopjd6p8tmhd%2f&title=%e4%bb%8e%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%28SPA%29%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b8%b2%e6%9f%93%28SSR%29"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从单页应用(SPA)到服务器渲染(SSR)</h1><div class="meta"><div class="postdate"><time datetime="2019-01-30" itemprop="datePublished">2019-01-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3cp\x3e系列文章:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006435886\x22\x3eVue 2.0 升（cai）级（keng）之旅\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006673171\x22 target=\x22_blank\x22\x3eVuex — The core of Vue application\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e从单页应用(SPA)到服务器渲染(SSR)（本文）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e个人博客之前已经将 vue-router 的模式改为了 \x3ccode\x3ehistory\x3c\/code\x3e，即 url 中不包含 \x3ccode\x3ehash\x3c\/code\x3e，再通过将所有的静态请求转发到 index.html，使它看上去似乎像一个静态多页的网站。\x3c\/p\x3e\n\x3cp\x3e然而，它其实和其他的 SPA (Single Page Application 单页应用)来说没有任何的区别，最终是通过前端的路由去控制页面的显示。单页应用虽然在交互体验上比传统多页更友好，但它也有一个天生的缺陷，就是对搜索引擎不友好，不利于爬虫爬取数据。\x3c\/p\x3e\n\x3cp\x3e正所谓成也萧何，败也萧何。\x3c\/p\x3e\n\x3cp\x3e讲人话就是，搜索引擎搜不到我的博客啊~哭...\x3c\/p\x3e\n\x3cp\x3e那什么对搜索引擎和爬虫友好的哪？答案就是静态页，而非浏览器渲染，这就需要服务器直接渲染，也就 SSR(Server Side Render)。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007753978\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007753978\x22 alt=\x22当然不是这个 SSR\x22 title=\x22当然不是这个 SSR\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eSSR，服务器渲染。简单来说就是，服务器将每个要展示的页面都运行完成后，将整个相应流传送给浏览器，所有的运算在服务器端都已经完成，浏览器只需要解析 HTML 就行。\x3c\/p\x3e\n\x3cp\x3e说起来简单，那到底该如何着手将项目改造成 SSR，和曾经的多页又有什么区别哪？既然自己在 SSR 方面是个小白，自然要先从查资料看文档入手，Vue 2.0 的文档中有一章就是关于 \x3ca href=\x22https:\/\/vuejs.org\/v2\/guide\/ssr.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSSR\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e看了文档之后，它给了我一个新思路，可以在无须大幅修改原先代码的情况下做到 SSR，又不失单页良好的体验。\x3c\/p\x3e\n\x3cp\x3e听上去很酷是不是，具体怎么做继续看下去。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eSSR Architecture\x3c\/h2\x3e\n\x3cp\x3e一个普通的单页应用通常是通过 webpack 将源代码打包后插入到 html 中，当页面请求时，返回 html 再加载打包后的 js 文件，也就是下图中的 Application Code，Webpack build 和 browser 这三大块。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007753979\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007753979\x22 alt=\x22SSR Architecture\x22 title=\x22SSR Architecture\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e剩下的那几部分就是 SSR 需要额外新加的部分，一个个来看。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eServer entry \x26amp; Client entry\x3c\/h3\x3e\n\x3cp\x3eServer entry \x26amp; client entry 两者的有共同的词尾 entry，对应的是 webpack.config 中的 entry，即打包入口文件，也就是分别代表服务器端所运行代码的入口和浏览器端所运行代码的入口文件。\x3c\/p\x3e\n\x3cp\x3e入口文件自然不用多复杂。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eserver entry: 根据路由状态，返回渲染完成后相应的组件\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eclinet entry: 将应用直接挂载到 DOM 上\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eOK。它俩的事就做完啦，是不是很简单。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eWebpack build\x3c\/h3\x3e\n\x3cp\x3e有了不同的 entry，打包的内容也有不同，自然就要两套配置。\x3c\/p\x3e\n\x3cp\x3e配置 webpack 的配置文件的确很麻烦，但有个好消息就是原先的打包文件不需要修改，只需加一个 server 端的配置文件就可以了。server 端的配置文件也相当简单，基本可以沿用客户端的配置，改改 \x3ccode\x3eentry\x3c\/code\x3e 和 \x3ccode\x3eoutput\x3c\/code\x3e 基本就差不多了。\x3c\/p\x3e\n\x3cp\x3e不过，有一点要注意，一定要将 \x3ccode\x3etarget\x3c\/code\x3e 属性设置成 \x3ccode\x3enode\x3c\/code\x3e，不然打包完了也没法在 node 环境下跑。还可以将所有依赖都设置成 \x3ccode\x3eexternals\x3c\/code\x3e（跑在服务器本地嘛，依赖自然都拿得到），这只是个优化点，不加也没有任何问题。\x3c\/p\x3e\n\x3cp\x3e有了配置文件，也就能生成 Server Bundle 了，只剩下最后一块 Bundle Renderer 了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eBundle Renderer\x3c\/h3\x3e\n\x3cp\x3e到这里才要用上 vue 为支持 ssr 所依赖的库 \x3ccode\x3evue-server-renderer\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e通过 \x3ccode\x3evue-server-renderer\x3c\/code\x3e 提供的 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/blob\/dev\/packages\/vue-server-renderer\/README.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAPI\x3c\/a\x3e 就能容易地根据 url 生成对应的组件树，然后将它返回给客户端。\x3c\/p\x3e\n\x3cp\x3e这里要注意，因为用的是 webpack 打包后的文件，所以只能用 \x3ccode\x3ecreateBundleRenderer\x3c\/code\x3e 而不能用 \x3ccode\x3ecreateRenderer\x3c\/code\x3e 来创建 renderer。\x3c\/p\x3e\n\x3cp\x3e创建 renderer 的时候还可以为它配置 cache，方法在 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/blob\/dev\/packages\/vue-server-renderer\/README.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eREADME\x3c\/a\x3e 中也写得很清楚了，由于我个人博客的场景不适合添加 cache 就没有添加。\x3c\/p\x3e\n\x3cp\x3e这样从 SPA 到 SSR 的变更就完成了，通过浏览器访问看看是不是已经将页面整个返回了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eTips\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e遇到控制台 ⚠️\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3eThe client-side rendered virtual DOM tree is not matching server-rendered content.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e当然，可能是你的标签不对应，也有可能是 text node 中的空格字符长度不对应，我个人遇到的都是空格不对应造成的问题，很是尴尬（可能是使用 template 语法造成的）...\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3eMemory-fs\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e在开发环境下，由于使用服务器渲染，自然不能使用 webpack-dev-server，而是要用 webpack-dev-middleware。然而，webpack-dev-middleware 所创建的文件都是在内存里的，server 就无法读到 server bundle 文件，这里就要用到 \x3ca href=\x22https:\/\/github.com\/webpack\/memory-fs\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ememory-fs\x3c\/a\x3e 来从内存中读文件。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3eKOA 2\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e用 koa 2 作为服务器时，在 \x3ccode\x3erenderToString\x3c\/code\x3e 或 \x3ccode\x3erenderToStream\x3c\/code\x3e 时，记得外面要加 \x3ccode\x3eawait\x3c\/code\x3e，否则，程序就不等组件渲染好，就直接跑下个 middleware 去了。\x3c\/p\x3e\n\x3cp\x3e(奉劝大家不要用 koa 作 SSR 服务器，koa 和 webpack-dev-middleware 天生水土不服，不要问我为什么~?)\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3edocument\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e在 Server 端渲染时，node 环境下是没有 document 对象的。当一个界面的显示依赖于 document 对象（比如，页面滚动监听事件），那么，在 node 端运行时就会报错。\x3c\/p\x3e\n\x3cp\x3e这时，有两个解决的办法。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e根据运行时的环境变量，通过添加逻辑来判断是否依赖 document\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用 jsdom mock document 对象（个人偷懒的做法）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e当然，从设计的角度移除对 document 的依赖就最好啦。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e$root._isMounted：组件中可以用这个参数来判断应用是否为第一次挂载\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e完成\x3c\/h3\x3e\n\x3cp\x3e这样当浏览器请求时，返回的页面是服务器渲染之后的，浏览器解析后，页面仍就是一个单页应用。\x3c\/p\x3e\n\x3cp\x3e最后，看效果的戳\x3ca href=\x22http:\/\/discipled.me\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e，看代码的戳\x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e，原先 SPA 的代码依旧保留在了 \x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\/tree\/SPA\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSPA 分支\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e对 Vue SSR 有兴趣的童鞋，一定要看看 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-hackernews-2.0\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue hackernews 2.0\x3c\/a\x3e，大神的水准比我可是高多了。\x3c\/p\x3e\n\x3cp\x3e最后的最后，吐槽下 Daocloud，最近老挂我服务器，枉我一直为它说好话。\x3c\/p\x3e\n\x3cp\x3e自己写完，看看感觉好简单，为什么还搞了那么久...\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007753980\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007753980\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从单页应用(SPA)到服务器渲染(SSR)</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007753975">https://segmentfault.com/a/1190000007753975</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/opjd6p8tmhd/" target="_blank">https://alili.tech/archive/opjd6p8tmhd/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>