<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从零开始搭建vue-ssr系列之五：开始第一个简单的server-render"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从零开始搭建vue-ssr系列之五：开始第一个简单的server-render | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/orojtutt8o/",
				"appid": "1613049289050283", 
				"title": "从零开始搭建vue-ssr系列之五：开始第一个简单的server-render | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-14T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jo63eaaf0gk/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/r5gq8brmlt/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&text=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&text=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&is_video=false&description=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2forojtutt8o%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%bavue-ssr%e7%b3%bb%e5%88%97%e4%b9%8b%e4%ba%94%ef%bc%9a%e5%bc%80%e5%a7%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84server-render"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从零开始搭建vue-ssr系列之五：开始第一个简单的server-render</h1><div class="meta"><div class="postdate"><time datetime="2019-01-14" itemprop="datePublished">2019-01-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e开始一个简单的server-render\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e客户端打包需要的文件是这个：\x3ccode\x3etools\/webpack.js\x3c\/code\x3e，很显然，既然vue在服务端渲染，那就需要有一个服务器的webpack文件，所以有\x3ccode\x3etools\x3c\/code\x3e下面就多出一个\x3ccode\x3ewebpack.server.js\x3c\/code\x3e的文件，里面的内容很简单，如下：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27);\n\/\/  获取项目根目录\nconst projectRoot = path.resolve(__dirname, \x27..\x27);\nmodule.exports = {\n    target: \x27node\x27, \/\/ 这里必须是node，因为打包完成的运行环境是node\n    entry: path.join(projectRoot, \x27src\/server-index.js\x27),\n    output: {\n        libraryTarget: \x27commonjs2\x27, \/\/ !different\n        \/\/ 打包出的路径\n        path: path.join(projectRoot, \x27build\x27),\n        \/\/ 打包最终的文件名\n        filename: \x27bundle.server.js\x27,\n    },\n    module: {\n        \/\/ 因为使用webpack2，这里必须是rules，如果使用use， \n        \/\/ 会报个错：vue this._init is not a function\n        rules: [{\n                test: \/\\.vue$\/,\n                loader: \x27vue-loader\x27,\n            },\n            {\n                test: \/\\.js$\/,\n                loader: \x27babel-loader\x27,\n                include: projectRoot,\n                \/\/ 这里会把node_modules里面的东西排除在外，提高打包效率\n                exclude: \/node_modules\/,\n            }\n        ]\n    },\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/  获取项目根目录\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e projectRoot = path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    target: \x3cspan class=\x22hljs-string\x22\x3e\x27node\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里必须是node，因为打包完成的运行环境是node\x3c\/span\x3e\n    entry: path.join(projectRoot, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/server-index.js\x27\x3c\/span\x3e),\n    output: {\n        libraryTarget: \x3cspan class=\x22hljs-string\x22\x3e\x27commonjs2\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ !different\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打包出的路径\x3c\/span\x3e\n        path: path.join(projectRoot, \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打包最终的文件名\x3c\/span\x3e\n        filename: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.server.js\x27\x3c\/span\x3e,\n    },\n    \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 因为使用webpack2，这里必须是rules，如果使用use， \x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会报个错：vue this._init is not a function\x3c\/span\x3e\n        rules: [{\n                test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n                loader: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n            },\n            {\n                test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n                loader: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e,\n                include: projectRoot,\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里会把node_modules里面的东西排除在外，提高打包效率\x3c\/span\x3e\n                exclude: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e,\n            }\n        ]\n    },\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e注：具体里面的功能，请看注释\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e有了这个webpack.server.js之后，里面的入口文件是\x3ccode\x3eserver-index.js\x3c\/code\x3e，和前端打包一样，服务端打包可得有一个入口文件，里面最主要的内容就是\x3cstrong\x3e你要打包哪个.vue文件\x3c\/strong\x3e，里面的内容是\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 这个文件里面除了定义入口的.vue，其他的都不用配置\nimport Vue from \x27vue\x27;\n\/\/ 引入.vue入口文件\nimport App from \x27.\/component\/List.vue\x27;\nconst app = new Vue(App);\n\/\/ 你问我这块代码是啥意思，其实我也不知道，想要打包server端代码，这个代码块是必须的\n\/\/ 以后会在这段代码里面加入其他一些配置信息\nexport default function (context) {\n    return new Promise((resolve, reject) =\x3e {\n        resolve(app);\n    });\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个文件里面除了定义入口的.vue，其他的都不用配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入.vue入口文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/component\/List.vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue(App);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 你问我这块代码是啥意思，其实我也不知道，想要打包server端代码，这个代码块是必须的\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 以后会在这段代码里面加入其他一些配置信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3econtext\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        resolve(app);\n    });\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e现在你使用\x3ccode\x3ewebpack\x3c\/code\x3e来打包文件，在\x3ccode\x3ebuild\x3c\/code\x3e目录下面会生成一个\x3ccode\x3ebundle.server.js\x3c\/code\x3e文件，详见\x3ccode\x3etools\/dev.js\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e接下来就是比较关健的一步了，如何把\x3ccode\x3ebundle.server.js\x3c\/code\x3e里面的内容，转成HTML。这个项目里面，我们使用的express\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e第一步：我们增加\x3ccode\x3eapp.get(\x27\/\x27, function (req, resp) {...})\x3c\/code\x3e，这样我们就可以在访问localhost:5000时能看到效果\x3c\/li\x3e\n\x3cli\x3e第二步：\x3ccode\x3enpm install vue-server-renderer --save\x3c\/code\x3e，其实这个包我们现在才开始用，\x3cem\x3e*\x3c\/em\x3e注：这个包必须和vue的版本必须一致，目前都是2.3.2，不管哪个版本，版本号必须严格一致，否则会报warning*\x3c\/li\x3e\n\x3cli\x3e第三步：读取\x3ccode\x3ebundle.server.js\x3c\/code\x3e，\x3c\/li\x3e\n\x3cli\x3e第四步：把上面读取的js文件，传递给vue-ssr，代码: \x3ccode\x3econst bundleRenderer = vueServerRenderer.createBundleRenderer(code);\x3c\/code\x3e这步的作用是解析\x3ccode\x3ebundle.server.js\x3c\/code\x3e，然后生成HTML，注：vueServerRenderer提供两个方法，分别为：\x3ccode\x3ecreateBundleRenderer\x3c\/code\x3e和\x3ccode\x3ecreateRenderer\x3c\/code\x3e，使用webpack打包的Component代码，必须作用\x3ccode\x3ecreateBundleRenderer\x3c\/code\x3e这个方法，具体参照：\x3ca href=\x22https:\/\/ssr.vuejs.org\/en\/api.html#createrendereroptions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e，参数就是上面读取的js文件\x3c\/li\x3e\n\x3cli\x3e第五步：渲染，最终生成HTML，\x3ccode\x3ebundleRenderer.renderToString((err, html) =\x26gt; {console.log(html)})\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3eserver.js代码完整版本\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    const filePath = path.join(__dirname, \x27.\/build\/bundle.server.js\x27)\n    const code = fs.readFileSync(filePath, \x27utf8\x27);\n    const bundleRenderer = vueServerRenderer.createBundleRenderer(code);\n    bundleRenderer.renderToString((err, html) =\x3e {\n        if (err) {\n            console.log(err.message);\n            console.log(err.stack);\n        }\n        console.log(html);\n        resp.send(html)\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filePath = path.join(__dirname, \x27.\/build\/bundle.server.js\x27)\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e code = fs.readFileSync(filePath, \x27utf8\x27);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bundleRenderer = vueServerRenderer.createBundleRenderer(code);\n    bundleRenderer.renderToString((\x3cspan class=\x22hljs-keyword\x22\x3eerr\x3c\/span\x3e, html) =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eerr\x3c\/span\x3e) {\n            console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eerr\x3c\/span\x3e.message);\n            console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eerr\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3estack\x3c\/span\x3e);\n        }\n        console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(html);\n        resp.send(html)\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e总结下生成HTML的步骤\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e1.有一个你想打包.vue文件的入口文件，就是\x3ccode\x3esrc\/server-index.js\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e2.在webpack的配置文件中，把入口文件指向他\x3c\/li\x3e\n\x3cli\x3e3.使用webpack对文件进行打包，会生成\x3ccode\x3ebuild\/bundle.server.js\x3c\/code\x3e文件\x3c\/li\x3e\n\x3cli\x3e4.使用\x3ccode\x3evue-server-renderer\x3c\/code\x3e包解析这个文件，最终渲染成HTML\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e最终效果(浏览器端)：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVN4gw?w=675\x26amp;h=444\x22 src=\x22https:\/\/static.alili.tech\/img\/bVN4gw?w=675\x26amp;h=444\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e最终效果（console端）：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV8s6J?w=904\x26amp;h=249\x22 src=\x22https:\/\/static.alili.tech\/img\/bV8s6J?w=904\x26amp;h=249\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/sunhaikuo\/vue-ssr-3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e码上GitHub\x3c\/a\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3cblockquote\x3eVue-SSR系列目录\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009352740\x22\x3e从零开始搭建vue-ssr系列之一：写在前面的话\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009372772\x22 target=\x22_blank\x22\x3e从零开始搭建vue-ssr系列之二：纯client端渲染以及webpack2\x2bvue2注意事项\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009373793\x22\x3e从零开始搭建vue-ssr系列之三：服务器渲染的奥秘\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009452832\x22 target=\x22_blank\x22\x3e从零开始搭建vue-ssr系列之四：Vuex详解\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009510509\x22\x3e从零开始搭建vue-ssr系列之五：开始第一个简单的server-render\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009554693\x22 target=\x22_blank\x22\x3e从零开始搭建vue-ssr系列之六：一个完整的项目\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从零开始搭建vue-ssr系列之五：开始第一个简单的server-render</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009510509">https://segmentfault.com/a/1190000009510509</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/orojtutt8o/" target="_blank">https://alili.tech/archive/orojtutt8o/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/t42iv2yle7e/">2016-我的前端之路:工具化与工程化<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/xlhryjzdso/">2016年总结--成长<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/4wvjfeus9ur/">2016年末总结，我的前端之路<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/w7062tmcw3/">3D 视差效果<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5jt1iw1t77b/">AlloyTouch实战--60行代码搞定QQ看点资料卡<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/kquf0fxkw2j/">ES6，你不得不学！<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/r5b6g4133jh/">Emmet-前端开发神器<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5dbaikv4emi/">FreeCodeCamp中级算法题答案<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/iuyeljg6lm/">JSONP是什么<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/23ftsgrtzzc/">JS中的观察者模式(发布订阅)<aside class="dates">2019-01-29</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>