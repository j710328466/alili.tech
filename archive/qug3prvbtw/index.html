<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="钉钉微应用的开发——主前端"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>钉钉微应用的开发——主前端 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qug3prvbtw/",
				"appid": "1613049289050283", 
				"title": "钉钉微应用的开发——主前端 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-10T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4x3v8agrcx/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qy3d0n9lih/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&text=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&text=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&title=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&is_video=false&description=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&title=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&title=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&title=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqug3prvbtw%2f&title=%e9%92%89%e9%92%89%e5%be%ae%e5%ba%94%e7%94%a8%e7%9a%84%e5%bc%80%e5%8f%91%e2%80%94%e2%80%94%e4%b8%bb%e5%89%8d%e7%ab%af"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">钉钉微应用的开发——主前端</h1><div class="meta"><div class="postdate"><time datetime="2019-01-10" itemprop="datePublished">2019-01-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch5\x3e经济基础决定上层建筑。\x3c\/h5\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e开发环境\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3eChrome Latest Version\x3c\/li\x3e\n\x3cli\x3eiOS钉钉最新版、Android钉钉开发最新版\x3c\/li\x3e\n\x3cli\x3e其实我一直想实现电脑Chrome可以调试手机内部APP，苦于尝试多次没有成功，所以还是电脑和手机同时测试，为了开发时间，只能先委屈一下自己了。因为舒适的测试环境也是开发的一个重要先决条件。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e开发目的\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e企业微应用。\x3c\/li\x3e\n\x3cli\x3e产品需求是在手机端钉钉上开发一个微应用，用来给公司员工填写反馈信息。\x3c\/li\x3e\n\x3cli\x3e产品要求nickname是通过钉钉接口获取用户的昵称，获取之后不允许用户修改。这便涉及到钉钉的接口用需要鉴权的dd.config。\x3c\/li\x3e\n\x3cli\x3e目的具体至实现钉钉企业微应用的鉴权，获取简单的用户信息，顺便提一下免登陆。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVQabE?w=1200\x26amp;h=779\x22 src=\x22https:\/\/static.alili.tech\/img\/bVQabE?w=1200\x26amp;h=779\x22 alt=\x22页面以及控制台\x22 title=\x22页面以及控制台\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\n\x3c\/li\x3e\n\x3cli\x3e看完页面图会发现，这个需求简直算是前端开发里面最简单的需求了吧。实际上也是很简单，如果不是去第一次开发钉钉微应用的话。哈哈哈哈哈哈哈哈哈。。。。。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e开发进度\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e页面布局、样式按下不表。\x3c\/li\x3e\n\x3cli\x3e页面需要后端人员接进钉钉页面，即进度从打开钉钉微应用能够进来这个页面开始。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e开发思路\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e首先，借用公司的agentId和微应用的url（一般由你司企业钉钉管理员提供）通过后台提供的API接口获取到实时的鉴权信息（agentId，corpId，timeStamp，nonceStr，signature）；\x3c\/li\x3e\n\x3cli\x3e然后，用这个鉴权信息区配置钉钉api接口的dd.config，然后去操作钉钉部分需要安全鉴定的api;\x3c\/li\x3e\n\x3cli\x3e之后，用钉钉api的biz.user.get获取用户信息；\x3c\/li\x3e\n\x3cli\x3e（题外）免登需要dd.runtime.permission.requestAuthCode先获取authCode，然后去请求后台提供的API，由后台返回更加安全的用户信息；\x3c\/li\x3e\n\x3cli\x3e最后，拿到用户信息之后，将nickname赋值进输入框，然后提交给后台即可。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVQajv?w=1582\x26amp;h=1176\x22 src=\x22https:\/\/static.alili.tech\/img\/bVQajv?w=1582\x26amp;h=1176\x22 alt=\x22官方的思路图\x22 title=\x22官方的思路图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e嘿嘿，借用\x3ca href=\x22https:\/\/g.alicdn.com\/dingding\/opendoc\/docs\/_guide\/tab3.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方爸爸的微应用开发\x3c\/a\x3e思路图，真的很一目了然，从五个鉴权信息开始都是前端的操作了哦。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eDEMO\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/Huooo\/demo-collections\/blob\/master\/20170701-dd-jsapi-m-demo.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGITHUB\x3c\/a\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e开发步骤\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e第一步，这个地方如果当做一般的数据请求来看，没有什么要说的，用jquery或者zepto的ajax请求都可以很快速实现。就说一下我在这个踩的坑，我在使用ajax异步请求的时候，忽略了异步加载然而同步加载不停止的问题。深入这个话题我也还需要去学去实践，所以只是简单说明我的问题，后面会提供链接去深入学习。下面的代码，由于我没实现手机电脑联调，所以只能退而其次用alert测试，见谅。js在加载的时候，会先全部同步顺序加载，但是ajax请求不会影响同步加载，因而，会按照123的alert弹出，而非顺序弹出312。由于的我浅薄理解，导致我后面还没拿到ajax请求到的_config，就开始执行函数DDConfig(_config)配置钉钉，所以一直不弹出任何弹窗。这个问题我开始解决的方案是将这段ajax单独放在一个script标签里面，最先引入，然后再配置钉钉鉴权信息，这个在Android上测试时正常的，然而只是侥幸，iOS不买这个账。所以使用ajax的complete函数，在这里面执行DDConfig(_config)，可看源代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var _config = null; \/\/ 定义全局变量_config，初始值为null，用来接收API获取到的签名信息\nvar getConfig = $.ajax({\n    type: \x27POST\x27,\n    url: \x27获取企业签名的API，后台提供\x27,\n    data: {\n        agentId: 109243825,\n        url: \x27这是你开发微应用页面的线上地址，一般是由钉钉管理员配置的。\x27,\n    },\n    dataType: \x27json\x27,\n    success: function(data){\n        console.log(\x27---success-post-dingInfo---\x27);\n        if(data.status){\n            _config = data.data;\n            alert(\x273. API获取签名信息：\x27\x2bJSON.stringify(_config));\n            \/\/ 开始配置钉钉\n            DDConfig(_config);\n        }else{\n            alert(\x27请求信息出错\x27);\n        }\n    },\n    error: function(data){\n        console.log(---error-post-dingInfo---);\n    }\n});\nalert(\x271. API请求开始：\x27\x2bJSON.stringify(getConfig));\nalert(\x272. 全局输出_config：\x27\x2bJSON.stringify(_config));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _config = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义全局变量_config，初始值为null，用来接收API获取到的签名信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e getConfig = $.ajax({\n    \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27获取企业签名的API，后台提供\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eagentId\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e109243825\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27这是你开发微应用页面的线上地址，一般是由钉钉管理员配置的。\x27\x3c\/span\x3e,\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3edataType\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esuccess\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27---success-post-dingInfo---\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(data.status){\n            _config = data.data;\n            alert(\x3cspan class=\x22hljs-string\x22\x3e\x273. API获取签名信息：\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(_config));\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开始配置钉钉\x3c\/span\x3e\n            DDConfig(_config);\n        }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n            alert(\x3cspan class=\x22hljs-string\x22\x3e\x27请求信息出错\x27\x3c\/span\x3e);\n        }\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(---error-post-dingInfo---);\n    }\n});\nalert(\x3cspan class=\x22hljs-string\x22\x3e\x271. API请求开始：\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(getConfig));\nalert(\x3cspan class=\x22hljs-string\x22\x3e\x272. 全局输出_config：\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(_config));\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e第二步，这里官方给出很详细的步骤\x3ca href=\x22https:\/\/open-doc.dingtalk.com\/docs\/doc.htm?spm=a219a.7629140.0.0.bG1Wbm\x26amp;treeId=171\x26amp;articleId=104910\x26amp;docType=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉移动jsapi开发\x3c\/a\x3e，你需要使用的api放进dd.config的jsApiList里面即可。其实钉钉的jsapi思路是这样的。引入dingtalk.js（官方文档有提供）这个js会给你提供一个全局变量dd，你可以在Chrome的控制台打印出来看看是个什么东西，里面可以识别钉钉版本，手机系统，以及提供一个个api。\x3ca href=\x22https:\/\/open-doc.dingtalk.com\/docs\/doc.htm?treeId=171\x26amp;articleId=106834\x26amp;docType=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉移动jsapi\x3c\/a\x3e里面介绍所有的api，分为无需鉴权api和需要鉴权api，无需鉴权api可以再引入dingtalk.js之后全局使用；鉴权api就需要走后端接口以保证安全性，且鉴权通过才可以使用这部分api。思路就是这样。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e问题1：如果你发现你的dd.ready\/dd.error都没执行，那可能是我上一步遇见的问题，即没开始配置dd.config，却执行了dd.ready和dd.error，因为dd是全局变量，不受函数和异步限制，所以写法上面没有错，但是就是什么都不反应，很痛苦。还有一个很粗暴的方法去review你的代码，那就是清空js代码，不做ajax请求，直接开始钉钉鉴权，即dd.config、dd.ready、dd.error，这个时候你可以先用固定的鉴权信息（agentId，corpId，timeStamp，nonceStr，signature）去配置，这个时候因为不是实时的鉴权信息，所以肯定要直接进dd.error来提示校验失败，那么你就应该知道怎么一点点去排查你的错误了。\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e问题2：如果你发现dd.error被执行了，先恭喜你一下，至少你进入钉钉的api了，哈哈哈哈哈哈哈哈。。。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e这个时候报错，说明你的dd.config里面有信息是错误的。那就去一个个打印出来检查。\x3c\/li\x3e\n\x3cli\x3e还有可能是上一步中的url的问题，比如说我的微应用的链接是\x3ca href=\x22https:\/\/open-doc.dingtalk.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/open-doc.dingtalk.com\/\x3c\/a\x3e；那么url也必须完全一样，注意https也不能错的哦。可看前辈们的问题集锦\x3ca href=\x22http:\/\/blog.csdn.net\/yangzai928\/article\/details\/51262703\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉开放平台“常见问题常见问题常见问题\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e第三步，应该不用说了，只要鉴权通过，就可以直接用钉钉api\x3ca href=\x22https:\/\/open-doc.dingtalk.com\/docs\/doc.htm?treeId=171\x26amp;articleId=105417\x26amp;docType=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e获取用户的信息\x3c\/a\x3e，只是这个信息很简单，不怎么涉及安全问题。可看源码。\x3c\/li\x3e\n\x3cli\x3e第四步，题外话。这个免登，是需要你在通过钉钉api拿到authcode之后再去找后端API请求，告诉他你需要免登获取更多用户的信息\x3ca href=\x22https:\/\/g.alicdn.com\/dingding\/opendoc\/docs\/_guide\/tab3.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉免登\x3c\/a\x3e，这些都是涉及到安全性的了，所有涉及安全的问题都要走后端API。这个我也没做，暂时还没用到，以后若是开发有坑还会继续说。钉钉的生态说不上很稳定，但是由于公司用的多，所以很多东西不管是官方还是前辈们都写的有详细文档和代码，可以多搜搜。\x3c\/li\x3e\n\x3cli\x3e提交操作，可看源码。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e最最最坑\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e这次最大的坑是我对异步同步的理解不够到位；\x3c\/li\x3e\n\x3cli\x3e说实话，所有的坑，都还是源于基础。开篇即说“经济基础决定上层建筑”，尤其是技术上，基础决定你未来的路可以走多宽多远多一马平川而不至于坑坑洼洼。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e推荐知识\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/open-doc.dingtalk.com\/?spm=a219a.7629140.0.0.g5erQv\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方爸爸\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/caohaijiang.github.io\/2017\/04\/17\/dingtalk-start\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉开发指南-前端全栈入门篇\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/yangzai928\/article\/details\/51262703\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉开放平台“常见问题常见问题常见问题\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/bbs.aliyun.com\/simple\/t263685.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e钉钉缓存可能引起的调用JSAPI不成功\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e感谢他们。尤其是第二位大神，提供了很多知识点可以学习。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3chr\x3e\n\x3cp\x3e——好记性不如难笔头。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>钉钉微应用的开发——主前端</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010010464">https://segmentfault.com/a/1190000010010464</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qug3prvbtw/" target="_blank">https://alili.tech/archive/qug3prvbtw/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/dc9tmbt89lc/">CSS3 巧妙实现聊天气泡<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/awfhylei7vr/">Element 一套优雅的 Vue 2 组件库是如何开发的<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/5n6e7oj31zb/">Ionic2入坑基础教程和安装指南<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/k9uktrr2ck/">JavaScript arguments 对象全面介绍<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/d31ygsiurr7/">JavaScript 版俄罗斯方块——重构<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f1goxj498pc/">JavaScript中this绑定详解<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/fpk9tyls8sb/">Markcook2.0，使用Vue2.0和Vuex2.0进行完全重构升级<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/rnj4z8l02t/">N3-components - 强劲的 Vue UI组件库<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/7njdijhy2um/">Node.js &#43; React Native 毕设：农业物联网监测系统的开发手记<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f8zzbybr4tl/">Redux、Flux、Vuex<aside class="dates">2019-02-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>