<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用flow.js提升前端开发的体验"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用flow.js提升前端开发的体验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/rnibkn0txo8/",
				"appid": "1613049289050283", 
				"title": "用flow.js提升前端开发的体验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-03T02:30:39"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/plt5cffmwj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/6gz4mzqh6c4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&text=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&text=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&title=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&is_video=false&description=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&title=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&title=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&title=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frnibkn0txo8%2f&title=%e7%94%a8flow.js%e6%8f%90%e5%8d%87%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%9a%84%e4%bd%93%e9%aa%8c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用flow.js提升前端开发的体验</h1><div class="meta"><div class="postdate"><time datetime="2019-02-03" itemprop="datePublished">2019-02-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在小心翼翼维护项目代码的时候经常会看到这种代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nfunction main(){\n   \/\/fn1函数获取了一个数据\n   var object = fn1()\n   \/\/fn2根据获数据，产生一个结果\n   var result = fn2(object)\n\n   return result\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\nfunction main(){\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/fn1函数获取了一个数据\x3c\/span\x3e\n   \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eobject\x3c\/span\x3e \x3c\/span\x3e= fn1()\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/fn2根据获数据，产生一个结果\x3c\/span\x3e\n   \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = fn2(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eobject\x3c\/span\x3e)\x3c\/span\x3e\n\n   \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很明显，这个过程非常的‘黑’，如果你想知道object包含什么数据的话，可以\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e打印一下 console.log(object)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e查看fn1的注释，并且保佑它的注释是正确，全面的\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e或结合1，2，然后仔细查看fn1的源码，希望它不是很复杂\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e被上述步骤折磨完之后，终于能真正的写点代码了，但是依旧得非常小心，因为这里还有另一个函数：fn2。\x3c\/p\x3e\n\x3cp\x3e在修改代码的时候，得保证result这个结果没有被影响，那么如何保证呢？\x3c\/p\x3e\n\x3cp\x3e很简单，重复上面的步骤，搞清楚result包含的数据，在测试的时候确保其数据跟原先的相同。\x3c\/p\x3e\n\x3cp\x3e…\x3c\/p\x3e\n\x3cp\x3e是时候彻底优化这个烦人的问题了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e引入类型系统\x3c\/h3\x3e\n\x3cp\x3e其实问题的根源就是因为javascript太灵活了，在代码运行期间几乎可以做任何的修改，\x3c\/p\x3e\n\x3cp\x3e没有东西可以在代码运行前就保证 某个变量，某个函数 跟预期的一致。\x3c\/p\x3e\n\x3cp\x3e所以要加入类型系统来确保代码的可靠性，在后期维护的时候同样能够传达出有效的信息。\x3c\/p\x3e\n\x3cp\x3efacebook出品的flow.js 做的就是这种事情。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e使用flow.js\x3c\/h3\x3e\n\x3cp\x3egit 仓库：\x3ca href=\x22https:\/\/github.com\/facebook\/flow\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/facebook\/flow\x3c\/a\x3e\x3cbr\x3eflow 官方文档：\x3ca href=\x22https:\/\/flowtype.org\/docs\/quick-reference.html#primitives\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/flowtype.org\/docs\/qui...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e方便体验，这里有一个搭好的case集合\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3egit clone git@github.com:JavascriptTips\/flow-examples.git\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e基础类型检测\x3c\/h4\x3e\n\x3cp\x3eflow.js 中定义了的5种最简单的类型,（warning：都是小写），其中void对应js中的undefined\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eboolean\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3enumber\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3estring\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3enull\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3evoid\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e要想加入到javascript中，只需要在关键的地方声明想要的类型。其它时间我们的代码还是熟悉的javascript，代码如下（flow-examples工程中也有对应js文件）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/flow-examples\/src\/primitives.js\n\n\/\/在文件的头部加入,用注释加入 `@flow` 声明，这样flow.js才会检查这个文件。\n\/\/@flow\n\n\/\/在声明变量时，在变量名加入 `:[Type]` 来表明变量的类型,其它类型同理。\n\/\/这个语法非常像flash的ActionScript，咦？好像暴露了什么。\nvar num:number = 1;\nvar str:string = \x27a\x27;\n\n\/\/当然，也可以不加类型，这样就跟原来的js一样了。\nvar variable = \x27zz\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/flow-examples\/src\/primitives.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/在文件的头部加入,用注释加入 `@flow` 声明，这样flow.js才会检查这个文件。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/@flow\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/在声明变量时，在变量名加入 `:[Type]` 来表明变量的类型,其它类型同理。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/这个语法非常像flash的ActionScript，咦？好像暴露了什么。\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e num:number = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e str:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/当然，也可以不加类型，这样就跟原来的js一样了。\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3evariable\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27zz\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e复杂类型检测\x3c\/h4\x3e\n\x3cp\x3e主要有：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eObject\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eArray\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e函数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e自定义Class\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e这几个类型比较复杂，而且可以相互嵌套。在flow.js中这几种类型有非常多的检查语法，在这里简单的展示几项，具体见\x3ca href=\x22https:\/\/github.com\/JavascriptTips\/flow-examples\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e代码\x3c\/a\x3e代码和官方文档。\x3c\/p\x3e\n\x3ch5\x3e对象：Object\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/flow-examples\/src\/object.js\n\/\/@flow\n\n\/\/Object大写的O\nvar o:Object = {\n  hello:\x27h\x27\n};\n\n\/\/声明了Object的key\nvar o2:{key:string} = {\n  key:\x27z233\x27\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/flow-examples\/src\/object.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/@flow\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/Object大写的O\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o:\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e = {\n  hello:\x3cspan class=\x22hljs-string\x22\x3e\x27h\x27\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/声明了Object的key\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o2:{key:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e} = {\n  key:\x3cspan class=\x22hljs-string\x22\x3e\x27z233\x27\x3c\/span\x3e\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e数组：Array\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/flow-examples\/src\/array.js\n\/\/@flow\n\n\n\/\/基于基本类似的数组，数组内都是相同类型\nvar numberArr:number[] = [12,3,4,5,2];\n\/\/另一个写法\nvar numberAr2r:Array\x3cnumber\x3e = [12,3,2,3];\n\nvar stringArr:string[] = [\x2712\x27,\x27a\x27,\x27cc\x27];\nvar booleanArr:boolean[] = [true,true,false];\nvar nullArr:null[] = [null,null,null];\nvar voidArr:void[] = [ , , undefined,void(0)];\n\n\n\/\/数组内包含各个不同的类型数据\n\/\/第4个原素没有声明，则可以是任意类型\nvar arr:[number,string,boolean] = [1,\x27a\x27,true,function(){},];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/flow-examples\/src\/array.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/@flow\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/基于基本类似的数组，数组内都是相同类型\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e numberArr:\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e[] = [\x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/另一个写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e numberAr2r:\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e\x26lt;\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e\x26gt; = [\x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stringArr:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e[] = [\x3cspan class=\x22hljs-string\x22\x3e\x2712\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27cc\x27\x3c\/span\x3e];\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e booleanArr:\x3cspan class=\x22hljs-built_in\x22\x3eboolean\x3c\/span\x3e[] = [\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e];\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nullArr:\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e[] = [\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e];\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e voidArr:\x3cspan class=\x22hljs-built_in\x22\x3evoid\x3c\/span\x3e[] = [ , , \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3evoid\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)];\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/数组内包含各个不同的类型数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/第4个原素没有声明，则可以是任意类型\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr:[\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eboolean\x3c\/span\x3e] = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{},];\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e函数\x3c\/h5\x3e\n\x3cp\x3e函数比较特殊，因为函数的核心在于参数和返回值，函数作文类型本身并没有作用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/flow-examples\/src\/function.js\n\/\/@flow\n\n\/**\n * 声明带类型的函数\n * 这里是声明一个函数fn，规定了自己需要的参数类型和返回值类型。\n *\/\nfunction fn(arg:number,arg2:string):Object{\n  return {\n    arg,\n    arg2\n  }\n}\n\/\/同理，ES2015箭头函数的写法\nvar fn2 = (arg:number,arg2:string):Object =\x3e {\n  return {\n    arg,\n    arg2\n  }\n}\n\n\/**\n * 这里是声明变量fn2，规定了它所需的函数的特征:\n * 参数： (arg:string,arg2:number)\n * 返回值：Object\n *\/\nvar fn3:(arg:string,arg2:number)=\x3eObject = function(){\n  return {}\n}\n\n\/**\n * 对比下面这种写法,\n * 两者的声明的地方不一样，造成的意义也不同。\n *\/\nvar fn4 = function(arg:string,arg2:Object):number{\n  return 1;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/flow-examples\/src\/function.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/@flow\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 声明带类型的函数\n * 这里是声明一个函数fn，规定了自己需要的参数类型和返回值类型。\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efn\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg:\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e,arg2:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\x3c\/span\x3e):\x3cspan class=\x22hljs-title\x22\x3eObject\x3c\/span\x3e\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    arg,\n    arg2\n  }\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/同理，ES2015箭头函数的写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fn2 = (arg:\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e,arg2:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e):\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eObject\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    arg,\n    arg2\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 这里是声明变量fn2，规定了它所需的函数的特征:\n * 参数： (arg:string,arg2:number)\n * 返回值：Object\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fn3:\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3earg:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e,arg2:\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {}\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 对比下面这种写法,\n * 两者的声明的地方不一样，造成的意义也不同。\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fn4 = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e,arg2:\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e\x3c\/span\x3e):\x3cspan class=\x22hljs-title\x22\x3enumber\x3c\/span\x3e\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e自定义的class\x3c\/h5\x3e\n\x3cp\x3e声明一个自定义类，然后用法如同基本类型\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/flow-examples\/src\/class.js\n\/\/@flow\n\nclass MyClass{\n  name:string;\n  constructor(n){\n    this.name = n;\n  }\n}\n\nvar myClass : MyClass = new MyClass(\x27abc\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/flow-examples\/src\/class.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/@flow\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e MyClass{\n  name:\x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3en\x3c\/span\x3e){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = n;\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myClass : MyClass = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e MyClass(\x3cspan class=\x22hljs-string\x22\x3e\x27abc\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e引入flow.js\x3c\/h3\x3e\n\x3cp\x3e可以看到加入flow.js语法后，正常的js引擎肯定是不能跑的。\x3c\/p\x3e\n\x3cp\x3e这时就要借助万能的babel编译这些js。\x3c\/p\x3e\n\x3cp\x3e1.如果是正经的带webpack \x2b babel 的前端项目,可以无缝集成，加入babel插件即可：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3ebabel-plugin-transform-flow-strip-types\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e2.如果只是跑一下测试这些js，可以直接在\x3ca href=\x22https:\/\/github.com\/JavascriptTips\/flow-examples\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eflow-examples\x3c\/a\x3e工程中，如下：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3enpm run fnode src\/object.js\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e其它跑起来的方法，可以在\x3ca href=\x22https:\/\/flowtype.org\/docs\/running.html#using-the-offline-transform-tool\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e查看\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e结论\x3c\/h3\x3e\n\x3cp\x3e这里只是介绍了flow.js一部分的特性，在引入flow.js之后，js只需要很小的改动就能得到增强，在关键的地方确保逻辑的准确性。\x3c\/p\x3e\n\x3cp\x3e更进一步，再结合js的函数式编程特性，以类型和函数驱动开发，感觉很cool.\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e一点微小的疑问\x3c\/h3\x3e\n\x3cp\x3e这里2个小问题，\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e为什么是flow.js 而不是其它编译到js的强类型语言，如TypeScript ? \x3c\/p\x3e\n\x3cp\x3e答：我非常喜欢js的灵活性，它为编程带来极大便捷。而且flow.js对工程的侵入性很小，无需大量的额外工作就能使用起来。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cblockquote\x3e\x3cp\x3e为什么不加强注释，完善注释，而是再加入一个工具？\x3cbr\x3e答：因为写注释很烦，并且有无注释不会影响代码执行。flow.js则是一种基本保障，确保检查无误才能运行。\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用flow.js提升前端开发的体验</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006983211">https://segmentfault.com/a/1190000006983211</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/rnibkn0txo8/" target="_blank">https://alili.tech/archive/rnibkn0txo8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/sj57jxyoook/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/qsw902j95k/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（下）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/nnpmjlot58j/">IndexedDB使用与出坑指南<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/alvlbas9oai/">JS事件模型<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/u0pzym8k36o/">JS练习实例--编写经典小游戏俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/khwpyk5yz8q/">JavaScript 事件代理和委托<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/kuocl6lc3n/">JavaScript 版俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/n8bk54lyrf/">Promise学习:基础入门<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/7bk7u30qncb/">Redux 入坑进阶 - 源码解析<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/853kqfmqmf7/">Snap.svg 基本知识入门<aside class="dates">2019-02-03</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>