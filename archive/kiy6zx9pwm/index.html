<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="手把手教你从零写一个简单的 VUE--模板篇"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>手把手教你从零写一个简单的 VUE--模板篇 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/kiy6zx9pwm/",
				"appid": "1613049289050283", 
				"title": "手把手教你从零写一个简单的 VUE--模板篇 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-05T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/n4u4sitw68q/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/mxmhvbsens/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&is_video=false&description=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkiy6zx9pwm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE--%e6%a8%a1%e6%9d%bf%e7%af%87"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">手把手教你从零写一个简单的 VUE--模板篇</h1><div class="meta"><div class="postdate"><time datetime="2019-01-05" itemprop="datePublished">2019-01-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e教程目录\x3cbr\x3e1.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009846314\x22\x3e手把手教你从零写一个简单的 VUE\x3c\/a\x3e\x3cbr\x3e2.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010611308\x22 target=\x22_blank\x22\x3e手把手教你从零写一个简单的 VUE--模板篇\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eHello，我又回来了，上一次的文章教会了大家如何书写一个简单 VUE，里面实现了VUE 的数据驱动视图渲染模板，更新到页面的过程，简单的带大家了解了类似 VUE 这样子的数据驱动视图框架的工作流程，今天我来给大家讲一讲作为一个前端框架最为核心的部分---模板，代码还是放在文章的最后，请随意下载\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e模板的分类\x3c\/h3\x3e\n\x3cp\x3e在介绍我们实现的模板语言之前，我们先来了解下，现在市面上比较流行的模板语言：\x3c\/p\x3e\n\x3ch4\x3ePHP\/ASP\/JSP风格\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   \x3c%if(list.length ){%\x3e   \x3col\x3e\n      \x3c%for(n = 0; n \x3c list.length; \x2b\x2bn ){%\x3e\n        \x3cli\x3e\n          \x3c%=list[n]%\x3e\n        \x3c\/li\x3e\n      \x3c%}%\x3e   \n     \x3c\/ol\x3e \n   \x3c%}%\x3e \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs erb\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e%\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(list.length ){\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e%\x26gt;\x3c\/span\x3e   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eol\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e%\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(n = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; n \x26lt; list.length; \x2b\x2bn ){\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e%\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e%=\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22ruby\x22\x3elist[n]\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e%\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e%\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22ruby\x22\x3e}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e%\x26gt;\x3c\/span\x3e   \n     \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eol\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e%\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22ruby\x22\x3e}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e%\x26gt;\x3c\/span\x3e \x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这种是最接近于 js 变成语言的语法，比较直观，但是由于存在\x3ccode\x3e\x26lt; \x26gt;\x3c\/code\x3e的分隔符，对 IDE不太友好，不太好进行格式化处理\x3c\/p\x3e\n\x3ch4\x3emustcache风格\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x22{{\x22#if list.length\x22}}\x22  \n    \x3col\x3e\n    \x22{{\x22#each list item\x22}}\x22\n      \x3cli\x3e\n        \x22{{\x22item\x22}}\x22\n      \x3c\/li\x3e\n    \x22{{\x22\/each\x22}}\x22   \n    \x3c\/ol\x3e \n    \x22{{\x22\/if\x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs handlebars\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e    \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e list.length\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e  \n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eol\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eeach\x3c\/span\x3e\x3c\/span\x3e list item\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22item\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eeach\x3c\/span\x3e\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e   \n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eol\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n    \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3c\/code\x3e\x3cspan class=\x22xml\x22\x3e\x3c\/span\x3e\x3c\/pre\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这种是\x3ccode\x3eartTemplate\x3c\/code\x3e默认的语法，高级语法有限，通常难自定义拓展\x3c\/p\x3e\n\x3ch4\x3e\n\x3ccode\x3eDSL\x3c\/code\x3e风格语法\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \x3col dsl-if=\x26quot;list.length\x26quot;\x3e   \n    \x3cli dsl-for=\x26quot;item in list\x26quot;\x3e\n    \n    \x3c\/li\x3e \n  \x3c\/ol\x3e \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3eol\x3c\/span\x3e dsl-\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22list.length\x22\x3c\/span\x3e\x26gt;   \n    \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3eli\x3c\/span\x3e dsl-\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item in list\x22\x3c\/span\x3e\x26gt;\n    \n    \x26lt;\/li\x26gt; \n  \x26lt;\/ol\x26gt; \x3c\/code\x3e\x3c\/pre\x3e\x3c\/blockquote\x3e\n\x3cp\x3e首先介绍下什么是\x3ccode\x3eDSL\x3c\/code\x3e， \x3ccode\x3eDSL\x3c\/code\x3e全称是\x3ccode\x3eDomain Specific Language\/DSL\x3c\/code\x3e\x3cstrong\x3e领域专用语言\x3c\/strong\x3e,其基本思想是\x3cstrong\x3e求专不求全\x3c\/strong\x3e，用于解决一个类型，一个领域的问题。比如\x3ccode\x3eVue\x3c\/code\x3e里面的\x3ccode\x3ev-xxx\x3c\/code\x3e，\x3ccode\x3eVue\x3c\/code\x3e称之为\x3ccode\x3e指令\x3c\/code\x3e，其实就是一个DSL，用于解决模板语法等问题，这种模板由于在\x3ccode\x3ehtml\x3c\/code\x3e语法里面相当于标签的属性，所以对\x3ccode\x3eIDE\x3c\/code\x3e友好，不会影响格式化操作。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eVue\x3c\/code\x3e的模板语法相当于结合了 \x3ccode\x3eDSL\x3c\/code\x3e语法和 mustcache风格， 逻辑控制部分使用\x3ccode\x3eDSL\x3c\/code\x3e语法，输出展示部分使用 mustcache风格\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e模板引擎设计思路\x3c\/h3\x3e\n\x3cp\x3e下面是这个模板引擎的思路：\x3c\/p\x3e\n\x3ch4\x3e字符串模板语法定义\x3c\/h4\x3e\n\x3cp\x3e首先我们要定义一种模板语法，按照上一节的说明，我们使用\x3ccode\x3eDSL风格语法\x3c\/code\x3e，下面是我们测试用的模板\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDqb?w=850\x26amp;h=456\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDqb?w=850\x26amp;h=456\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e我们采用最简单的将模板写在\x3ccode\x3escript\x3c\/code\x3e标签的配置方式，可以看到我们定义了几个\x3ccode\x3eDSL\x3c\/code\x3e,分别是\x3ccode\x3edsl-if\x3c\/code\x3e,\x3ccode\x3edsl-for\x3c\/code\x3e,\x3ccode\x3edsl-html\x3c\/code\x3e,分别用于判断，循环和直接输出 html，还有使用\x3ccode\x3emustcache\x3c\/code\x3e作为字符串输出语法。当然这个只是一个简单的模板\x3ccode\x3eDSL\x3c\/code\x3e语言，主要为了讲解思路，真正的模板需要更加多的模板语法，具体可以参照 \x3ccode\x3eVUE\x3c\/code\x3e文档\x3c\/p\x3e\n\x3ch4\x3e模板解析成为 AST\x3c\/h4\x3e\n\x3cp\x3e首先解释下什么是\x3ccode\x3eAST\x3c\/code\x3e，AST 全称为\x3ccode\x3eabstract syntax tree(抽象语法树)\x3c\/code\x3e，是源代码的抽象语法结构的树状表现形式，每种源码都可以被抽象成为\x3ccode\x3eAST\x3c\/code\x3e，比如我们常用的 js，css，json 等，都可以解析成为 AST\x3cbr\x3e把模板解析成为\x3ccode\x3eAST\x3c\/code\x3e,就是将模板的 html 结构进行解析，变成一颗附带结构、关系、属性的抽象树，这样做方便与后面我们多次对模板进行处理，减少了多次解析字符串带来的损耗，同时变成一颗树的数据结构之后更加方便于我们的遍历，关于\x3ccode\x3eAST\x3c\/code\x3e的优点缺点大家可以执行搜索，这里就不展开说明了\x3cbr\x3e上面的字符串模板解析完成之后，会变成以下的一个\x3ccode\x3eAST\x3c\/code\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDyH?w=743\x26amp;h=440\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDyH?w=743\x26amp;h=440\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到字符串模板变成了一个object数组，每个 obj 代表一个节点，里面包含了这个 obj 的属性，类型，父子关系，用到的\x3ccode\x3eDSL\x3c\/code\x3e等等。这个可以看成是我们的模板的一个中间态，为我们进行进一步处理打下了基础。\x3c\/p\x3e\n\x3ch4\x3eAST 转换成为 模板函数\x3c\/h4\x3e\n\x3cp\x3e联系上一篇文章，其实模板函数的构造都大同小异，基本是都是通过拼接函数字符串，然后通过\x3ccode\x3eFunction\x3c\/code\x3e对象转换成一个函数，变成一个函数之后，只要传入对应的数据，函数就会返回一个模板数据渲染好的 html 字符串。下面是例子中通过\x3ccode\x3eAST\x3c\/code\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDGS?w=588\x26amp;h=439\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDGS?w=588\x26amp;h=439\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e这是个函数体，然后使用\x3ccode\x3enew Function\x3c\/code\x3e，就变成一个真正的函数了，至于这个函数体的解释，我将放在下面具体实现进行讲解\x3c\/p\x3e\n\x3ch4\x3e数据与模板函数结合生成 html\x3c\/h4\x3e\n\x3cp\x3e由于本文主要是讲模板的实现，因此数据部分还是使用延续上一篇文章的绑定，在初始化或者数据发生改变的时候，响应的函数会对数据所关联的模板函数进行重新调用，生成新的html，重新进行渲染。\x3c\/p\x3e\n\x3cp\x3e模板的开发思路我们就在上面都说明了，主要总结下就是将字符串模板变成 ast，ast 变成模板函数，然后就可以结合数据进行 html 生成及渲染了\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e具体实现方法\x3c\/h3\x3e\n\x3cp\x3e首先说明下本教程的方法是对思路的实现，并非完全使用 vue 的实现方法，vue 是一个完整的框架，里面涉及的东西比较多，我们的实现是为了让大家更好的了解 vue 的原理，而非完全实现\x3c\/p\x3e\n\x3ch4\x3e字符串模板变成\x3ccode\x3eAST\x3c\/code\x3e部分\x3c\/h4\x3e\n\x3cp\x3e1.模板预处理：\x3cbr\x3e由于字符串模板是人为处理的，因此书写的时候可能会出现标签不配对，标签未关闭等问题，因此我们要先做些预处理，来去除这些干扰，做法有很多种，比如通过一些语法分析的工具进行解析，这里我们使用一种比较简单的方式进行处理，代码如下(\x3ccode\x3e\/src\/core\/render.js\x3c\/code\x3e)：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDKU?w=1184\x26amp;h=354\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDKU?w=1184\x26amp;h=354\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到我创建了一个\x3ccode\x3ediv\x3c\/code\x3e标签，然后将字符串模板放进去里面，这样子浏览器会对模板进行解析处理，然后我们再通过\x3ccode\x3einnerHTML\x3c\/code\x3e去除前后空格之后拿出来，这样就对字符串模板进行了处理。\x3cbr\x3e备注：我们按照 vue 的规则，一个模板只有一个根节点，所以我们取了\x3ccode\x3echildNodes[0]\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e2.生成 ast：\x3cbr\x3e上面我们对字符串模板进行了预处理，接下去我们要将字符串模板转换成ast,代码比较长，大家有兴趣可以看下\x3ccode\x3e\/src\/compiler\/ast\/parse.js\x3c\/code\x3e,下面说下解析思路\x3cbr\x3e解析通过正则表达式配合 \x3ccode\x3eString.replace(regExt,fn)\x3c\/code\x3e，正则表达式为\x3ccode\x3e\/\x26lt;(?:\x22[^\x22]*\x22[\x27\x22]*|\x27[^\x27]*\x27[\x27\x22]*|[^\x27\x22\x26gt;])\x2b\x26gt;\/g\x3c\/code\x3e,解析出来标签和标签上面的属性，然后按照需求进行存储，就生成 ast\x3c\/p\x3e\n\x3ch4\x3east 生成模板函数\x3c\/h4\x3e\n\x3cp\x3e生成模板函数的思路就是递归遍历ast 树，对不同的类型节点，不同的\x3ccode\x3eNSL\x3c\/code\x3e，调用不同的生成函数，最后组合成为模板函数字符串，代码如下(\/src\/compiler\/compiler-helper.js)：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDUo?w=901\x26amp;h=918\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDUo?w=901\x26amp;h=918\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到，处理的函数对 \x3ccode\x3eDSL\x3c\/code\x3e还有不同的标签类型进行处理，然后都返回了一个辅助函数的调用，比如\x3ccode\x3e_i,_f,_c\x3c\/code\x3e等等，这里的辅助函数是在模板函数被调用的时候才真正的被调用的,下面我们举例说明一个辅助函数\x3ccode\x3e_c\x3c\/code\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSDXw?w=494\x26amp;h=296\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSDXw?w=494\x26amp;h=296\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e这个辅助函数的功能是用于生成节点，可以看到调用了这个函数之后，对应的 ast 里面的节点被真正生成，变成\x3ccode\x3edom\x3c\/code\x3e节点，并且会把孩子节点进行插入，通过很多辅助函数的递归嵌套调用，最终模板函数一调用，就可以结合数据渲染出来真实的dom节点\x3c\/p\x3e\n\x3cp\x3e下面说一个比较细的知识点，就是辅助函数的调用，我们知道上面的辅助函数调用在生成的时候，其实都是字符串，然后通过\x3ccode\x3enew Function\x3c\/code\x3e让他变成真正的函数，那么问题就来了，我们知道\x3ccode\x3enew Function\x3c\/code\x3e是的作用域和运行时的代码是隔离的，是调用不到外面的\x3ccode\x3e_c,_f\x3c\/code\x3e等辅助函数的，那是如何实现调用的呢，这里用了一个我们很少使用的关键字\x3ccode\x3ewith\x3c\/code\x3e，这个关键字在很多书籍里面都不推荐使用，因为他的作用是修改\x3ccode\x3ewith\x3c\/code\x3e包含代码块的作用域，如果滥用会导致代码的逻辑不可控，但是在模板函数里面这个关键字有奇效，他可以方便的规定把当前的代码作用域传到模板函数里面，从而使得模板函数里面可以调用到运行时作用域的函数。大家可以看下上一小节生成的模板函数字符串，会发现就是用整个\x3ccode\x3ewith(that){}\x3c\/code\x3e包裹起来的，在模板函数运行时，将当前作用域直接传入即可,代码如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSD1l?w=559\x26amp;h=250\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSD1l?w=559\x26amp;h=250\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e结合数据运行\x3c\/h4\x3e\n\x3cp\x3e至此，我们已经生成了模板函数，通过传入数据运行模板函数，就可以生成 dom，代码如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVSD2j?w=551\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/bVSD2j?w=551\x26amp;h=160\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以我们直接把\x3ccode\x3ecompiler_helper\x3c\/code\x3e附带上 data 作为作用域，直接调用了模板函数，就可以生成dom，再结合我们第一篇文章写的数据监听，就可以实现简单的数据驱动视图\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e后话\x3c\/h3\x3e\n\x3cp\x3e至此，我们的VUE模板的基本实现已经介绍完成了，这里主要是介绍如何去实现一个模板引擎的思路，所以功能上上面的实现不是完整的，只是实现了一些简单的语法，大家可以下下代码继续补充。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e思考\x3c\/h3\x3e\n\x3cp\x3e细心的人可能会发现，我们上面的模板有个问题，就是如果改了数据中的其中一个数值，那么整个模板都得重新编译，重新渲染，这其实是非常损耗性能的，这其实就是我下一篇文章要讲的，模板渲染的效率问题，先提出几个关键词 \x3ccode\x3e虚拟dom，diff 算法，最小化渲染\x3c\/code\x3e，吊吊大家的胃口，哈哈，下一篇文章我会进行全面的介绍，相信学习完下一篇文章，大家会对现有市面上的数据驱动框架的模板部分有个全面的了解~下一篇文章更加精彩哦~~求关注\x3cbr\x3e最后附上源码\x3ca href=\x22https:\/\/github.com\/qbright\/QV\/tree\/article-2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点我点我\x3c\/a\x3e，各位客官给个 star 呗~~\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>手把手教你从零写一个简单的 VUE&ndash;模板篇</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010611308">https://segmentfault.com/a/1190000010611308</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/kiy6zx9pwm/" target="_blank">https://alili.tech/archive/kiy6zx9pwm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>