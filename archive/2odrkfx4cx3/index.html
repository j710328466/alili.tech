<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用 nuxt 开发部署一个 v2ex"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用 nuxt 开发部署一个 v2ex | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/2odrkfx4cx3/",
				"appid": "1613049289050283", 
				"title": "用 nuxt 开发部署一个 v2ex | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/06vt3zsyb6y8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/arf9pdmnf5n/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&text=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&text=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&title=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&is_video=false&description=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&title=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&title=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&title=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2odrkfx4cx3%2f&title=%e7%94%a8%20nuxt%20%e5%bc%80%e5%8f%91%e9%83%a8%e7%bd%b2%e4%b8%80%e4%b8%aa%20v2ex"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用 nuxt 开发部署一个 v2ex</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009842523?w=1200\x26amp;h=639\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009842523?w=1200\x26amp;h=639\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e先放出Github地址：\x3ca href=\x22https:\/\/github.com\/OrangeXC\/n2ex\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/OrangeXC\/n2ex\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e里面有线上网站的链接，因为链接随时可能变，在这里不直接给网站链接。\x3c\/p\x3e\n\x3cp\x3e之前写过一篇 nuxt 入门级的文章 \x3ca href=\x22http:\/\/orangexc.xyz\/2016\/12\/27\/Vue-nuxt-based-ssr\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue 基于 NUXT 的 SSR\x3c\/a\x3e，主要说一下 nuxt 是什么，以及为什么使用。\x3c\/p\x3e\n\x3cp\x3e这里声明一下，不建议去阅读上一篇文章，因为当时写博文的时候是 0.8.0 版本，目前是 1.0.0alpha4，已经有一部分改动，建议去看最新的\x3ca href=\x22https:\/\/nuxtjs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enuxt文档\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e了解 nuxt 后，就可以轻松的看下文了，简单易懂，也没写什么复杂的项目。\x3c\/p\x3e\n\x3cp\x3e本着自己学习的目的分享给大家，因为上篇文章之后有好多读者问 orange，怎么开发，怎么部署到服务器。\x3c\/p\x3e\n\x3cp\x3e下面进入正题\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e环境搭建\x3c\/h2\x3e\n\x3cp\x3enuxt 相关的脚手架已经集成到了 vue-cli，同时提供 starter、express、koa、adonuxt\x3c\/p\x3e\n\x3cp\x3e这里我们用的是 koa2（脚手架会询问使用 koa1 或 koa2）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22vue init nuxt\/koa \x3cproject-name\x3e\ncd \x3cproject-name\x3e # move to your project\nnpm install # or yarn install*[see note below]\nnpm run dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3evue init nuxt\/koa \x26lt;project-name\x26gt;\n\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e \x26lt;project-name\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e# move to your project\x3c\/span\x3e\nnpm install \x3cspan class=\x22hljs-comment\x22\x3e# or yarn install*[see note below]\x3c\/span\x3e\nnpm run dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e此时监听 3000 端口，如果有 bug，别犹豫，先升级 node 版本到最新。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e项目跑起来之后，有一个简单的轮廓，两个页面，index 和 about。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3ev2ex API\x3c\/h2\x3e\n\x3cp\x3e写一个三方 API 项目时，首先要看看人家都支持什么 API，才能决定我们如何展示页面。\x3c\/p\x3e\n\x3cp\x3e来看看\x3ca href=\x22https:\/\/www.v2ex.com\/p\/7v9TEc53\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方 API 文档\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e这个文档说来仔细，但是仅仅提供了 4 个 API，对于我们来说远远不够，那本站的 API 从哪里来的呢\x3c\/p\x3e\n\x3cp\x3eGithub 的确是个好网站，我找到了这个项目下的一个文件：\x3ca href=\x22https:\/\/github.com\/ochapman\/v2ex\/blob\/master\/v2ex.go\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ochapman\/v...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e不会 go 语言的没关系，我也不熟悉 go 语言，读一读会发现给出了比官方文档更多的 API，当然还有更详细的 API 暂且不谈。\x3c\/p\x3e\n\x3cp\x3e本项目取的就是这个文件里（隐藏）的 API\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e热门话题\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e最新话题\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e节点列表\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e节点信息\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e话题详情\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e话题评论\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用户详情\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用户话题\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们也就实现了上面列表这么多接口的前端展示\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e路由结构\x3c\/h2\x3e\n\x3cp\x3enuxt 的特点之一就是以目录结构划分路由。\x3c\/p\x3e\n\x3cp\x3erouter 由 pages 目录决定，那么分析接口可以得到以下目录结构\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22pages\n  |\n  |-- member\n  |    |\n  |    |-- _name.vue\n  |\n  |-- node\n  |    |\n  |    |-- _name.vue\n  |\n  |-- topic\n  |   |\n  |   |-- _id.vue\n  |\n  |-- index.vue\n  |\n  |-- new.vue\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gherkin\x22\x3e\x3ccode\x3epages\n  |\x3cspan class=\x22hljs-string\x22\x3e\n  \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-- member\n  \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e    \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e    \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-- _name.vue\n  \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e-- node\n  \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e    \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e    \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-- _name.vue\n  \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e-- topic\n  \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e   \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e   \x3c\/span\x3e|\x3cspan class=\x22hljs-string\x22\x3e-- _id.vue\n  \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e-- index.vue\n  \x3c\/span\x3e|\n  |\x3cspan class=\x22hljs-string\x22\x3e-- new.vue\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很清晰的可以看出我们的路由结构，细心的会发现 params 有的是 name 有的是 id，为什么？\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e这里详细解释下，v2ex 接口提供了 id 和 name 两种 url 传参形式，任何一种查询都可以匹配结果，唯独 topic 只能 id 查询，因为 name 不唯一，那用户和节点也提供了 id 查询啊，这里的坑就在评论的 \x3ccode\x3e@\x3c\/code\x3e 部分，当 @ 一个人时，在评论可以直接链到个人详情页，v2ex 在评论里默认解析的就是 username 对应的链接，所以为了统一，其它地方也用的 name，另外无形当中提供了 search，在对应 url 后面替换成要查找的节点或用户名就可以直接跳转过去。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e组件\x3c\/h2\x3e\n\x3cp\x3e这里只说两个最应该抽离的业务组件\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e话题 list\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e评论 list\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e话题 list 几乎每个列表页面里都有，而评论 list 在每个详情页里都有\x3c\/p\x3e\n\x3cp\x3e基础组件用的是 \x3ca href=\x22https:\/\/github.com\/museui\/muse-ui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emuse-ui\x3c\/a\x3e，比较喜欢 Material 整体的设计风格，刚好在 muse-ui 的 2.0.3 版本支持了 SSR。\x3c\/p\x3e\n\x3cp\x3e下面说下引入三方库相关的问题\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e引入三方库\x3c\/h2\x3e\n\x3cp\x3emuse-ui 建议使用 plugins 的方式引入，因为涉及到 Vue.use 挂载方法\x3c\/p\x3e\n\x3cp\x3e在 plugins 下新建 muse-ui.js 如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport MuseUI from \x27muse-ui\x27\n\nVue.use(MuseUI)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e MuseUI \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27muse-ui\x27\x3c\/span\x3e\n\nVue.use(MuseUI)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在 nuxt.config.js 里面加上\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22plugins: [\n  { src: \x27~plugins\/muse-ui.js\x27, ssr: true }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eplugins: [\n  { \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27~plugins\/muse-ui.js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3essr\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外值得注意的是，需要全局引入 google 字体库，这里我直接插入到了 head 的 link 标签里\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22link: [\n  { rel: \x27stylesheet\x27, href: \x27https:\/\/fonts.googleapis.com\/css?family=Roboto:300,400,500,700,400italic\x27 },\n  { rel: \x27stylesheet\x27, href: \x27https:\/\/fonts.googleapis.com\/icon?family=Material\x2bIcons\x27 }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3elink: [\n  { \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27stylesheet\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/fonts.googleapis.com\/css?family=Roboto:300,400,500,700,400italic\x27\x3c\/span\x3e },\n  { \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27stylesheet\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/fonts.googleapis.com\/icon?family=Material\x2bIcons\x27\x3c\/span\x3e }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ehttp 请求用的是前后端同构的 axios 库\x3c\/p\x3e\n\x3cp\x3e打包的时候注意要在配置文件加进去\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22build: {\n  vendor: [\x27axios\x27]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ebuild: {\n  \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e异步请求\x3c\/h2\x3e\n\x3cp\x3enuxt 提供了 asyncData，可以在页面加载之前请求数据。\x3c\/p\x3e\n\x3cp\x3e在这里使用 es7 的 async\/await 来实现数据请求\x3c\/p\x3e\n\x3cp\x3e例如：pages\/index.vue\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22async asyncData () {\n  try {\n    const { data } = await axios.get(`https:\/\/proxy-uuptfgaypk.now.sh\/topics\/hot.json`)\n\n    return {\n      hotList: data\n    }\n  } catch (err) {\n    console.error(err)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e asyncData () {\n  \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { data } = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e axios.get(\x3cspan class=\x22hljs-string\x22\x3e`https:\/\/proxy-uuptfgaypk.now.sh\/topics\/hot.json`\x3c\/span\x3e)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3ehotList\x3c\/span\x3e: data\n    }\n  } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (err) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可读性还是挺高的，请求回来的 object，取到里面的 data 赋值给 hotList，省去了 \x3ccode\x3e.then\x3c\/code\x3e 的操作\x3c\/p\x3e\n\x3cp\x3e在详情页需要同时得到话题详细内容和评论，走的是两个接口\x3c\/p\x3e\n\x3cp\x3e那么问题来了，怎么才能同时请求多个资源，当多个资源全部请求完成时才返回。\x3c\/p\x3e\n\x3cp\x3eawait 只能顺次请求，promis \x2b await ？？？\x3c\/p\x3e\n\x3cp\x3e不不不，只要 promis 的 all 方法就可以了，axios 有相应的封装\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22asyncData ({ params, error }) {\n  return axios.all([\n    axios.get(`https:\/\/proxy-uuptfgaypk.now.sh\/topics\/show.json?id=${params.id}`),\n    axios.get(`https:\/\/proxy-uuptfgaypk.now.sh\/replies\/show.json?topic_id=${params.id}`)\n  ])\n  .then(axios.spread(function (detail, comments) {\n    return {\n      detail: detail.data[0],\n      comments: comments.data\n    }\n  }))\n  .catch(error =\x3e console.log(error))\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3easyncData ({ params, error }) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e axios.all([\n    axios.get(\x3cspan class=\x22hljs-string\x22\x3e`https:\/\/proxy-uuptfgaypk.now.sh\/topics\/show.json?id=\x3cspan class=\x22hljs-subst\x22\x3e${params.id}\x3c\/span\x3e`\x3c\/span\x3e),\n    axios.get(\x3cspan class=\x22hljs-string\x22\x3e`https:\/\/proxy-uuptfgaypk.now.sh\/replies\/show.json?topic_id=\x3cspan class=\x22hljs-subst\x22\x3e${params.id}\x3c\/span\x3e`\x3c\/span\x3e)\n  ])\n  .then(axios.spread(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edetail, comments\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3edetail\x3c\/span\x3e: detail.data[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e],\n      \x3cspan class=\x22hljs-attr\x22\x3ecomments\x3c\/span\x3e: comments.data\n    }\n  }))\n  .catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(error))\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一来解决了同时请求多个接口的问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eCORS\x3c\/h2\x3e\n\x3cp\x3e跨域 http 请求，在这里不详细解释，给大家 \x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/HTTP\/Access_control_CORS\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN 链接\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e细心的小伙伴发现上文代码的 url 是 \x3ccode\x3ehttp:\/\/proxy...\x3c\/code\x3e，为什么不是官方给的 \x3ccode\x3ehttps:\/\/www.v2ex.com\/api\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e那是因为跨域请求时浏览器限制请求跨域资源，正常走官方的请求会报错，信息如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22XMLHttpRequest cannot load https:\/\/www.v2ex.com\/api\/topics\/latest.json. No \x27Access-Control-Allow-Origin\x27 header is present on the requested resource. Origin \x27localhost:3000\x27 is therefore not allowed access.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eXMLHttpRequest cannot \x3cspan class=\x22hljs-keyword\x22\x3eload\x3c\/span\x3e https:\/\/www.v2ex.com\/api\/topics\/latest.json. \x3cspan class=\x22hljs-keyword\x22\x3eNo\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Access-Control-Allow-Origin\x27\x3c\/span\x3e header \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3epresent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e the requested resource. Origin \x3cspan class=\x22hljs-string\x22\x3e\x27localhost:3000\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e therefore \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e allowed access.\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e报错很明显没有 \x3ccode\x3eAccess-Control-Allow-Origin\x3c\/code\x3e 返回头，打开控制台发现有数据返回，但是被浏览器拦截了，并没有加载到页面中去\x3c\/p\x3e\n\x3cp\x3e初次玩服务端渲染的还会遇到的问题就是我什么首屏刷新不会报错，而路由跳转的请求会报错呢？\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e这要从服务端渲染机制说起，首屏的请求是在服务端完成，服务端不存在跨域问题，而接下来的交互操作和页面跳转是在浏览器端进行，所以产生了类似的问题。够简单直接吧，不相信的可以自己打 console，看是在终端控制台输出还是浏览器控制台输出。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e找到了问题接下来就需要解决问题，上面有说在服务端不存在跨域请求的问题。\x3c\/p\x3e\n\x3cp\x3e那么我们就自己写一层 proxy 就好啦，写一个 node 服务，转发请求，然后在返回头里加上，\x3ccode\x3eAccess-Control-Allow-Origin: *\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e这个服务实际上不到十行的代码，用到两个依赖，express 和 request\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const express = require(\x27express\x27)\nconst request = require(\x27request\x27)\nconst app = express()\n\napp.use(\x27\/\x27, function(req, res) {\n  const url = \x27https:\/\/www.v2ex.com\/api\x27 \x2b req.url\n  req.pipe(request(url)).pipe(res.set(\x27Access-Control-Allow-Origin\x27, \x27*\x27))\n})\n\napp.listen(process.env.PORT || 3001)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27request\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app = express()\n\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e url = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/www.v2ex.com\/api\x27\x3c\/span\x3e \x2b req.url\n  req.pipe(request(url)).pipe(res.set(\x3cspan class=\x22hljs-string\x22\x3e\x27Access-Control-Allow-Origin\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e))\n})\n\napp.listen(process.env.PORT || \x3cspan class=\x22hljs-number\x22\x3e3001\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e开发环境下先启动代理服务，然后将 url 指向本地服务就可以了\x3c\/p\x3e\n\x3cp\x3e上面的方法呢，说实话有点蠢，实际项目当中呢可以直接让后端返回的接口支持跨域，当然了任何人都可以使用你们的 API，不是十分合理\x3c\/p\x3e\n\x3cp\x3e再有就是 nuxt 官方有个 modules 组件库不知道大家有没有注意，地址：\x3ca href=\x22https:\/\/github.com\/nuxt\/modules\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/nuxt\/modules\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e里面其中有 axios 和 proxy 的封装，意在解决 axios 的 baseUrl 和 proxy 跨域限制，安装配置都十分方便，本次为什么没用？\x3c\/p\x3e\n\x3cp\x3e好问题，因为存在未知的坑，代码没有丝毫报错，就是不生效，只能静等 nuxt 官方修复主库与插件之间的 bug。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e部署\x3c\/h2\x3e\n\x3cp\x3e怎么部署是大家最关心的问题，项目倒是好写，只要你会 vue 看看文档就可以写。\x3c\/p\x3e\n\x3cp\x3e部署实际上官方提供了两个命令，打包和运行\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm run build\nnpm start\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3enpm run build\nnpm start\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里需要一个安装了 node 的服务器，可以安装一个 \x3ca href=\x22https:\/\/github.com\/Unitech\/pm2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epm2\x3c\/a\x3e 来跑 node 服务\x3c\/p\x3e\n\x3cp\x3e当然喜欢 docker，也可以用 docker 去部署\x3c\/p\x3e\n\x3cp\x3e之前又有人问了，看了这两个东西，依旧不会部署，那我也无能为力了，只能说，科学上网，教程一大堆。\x3c\/p\x3e\n\x3cp\x3e如果就是想跑一个自己的 DEMO 玩玩，不想单独买服务器，也不涉及到企业项目部署和安全问题\x3c\/p\x3e\n\x3cp\x3e那么好！给两个可以免费跑 node 服务的供应商 heroku 和 now.sh\x3c\/p\x3e\n\x3cp\x3enuxt 项目怎么如何跑在这两个服务上官网有写 \x3ca href=\x22https:\/\/zh.nuxtjs.org\/faq\/heroku-deployment\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/zh.nuxtjs.org\/faq\/her...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本项目是跑在 now.sh 上的，这也就解释了为什么说这个在线链接打开速度超级慢，因为我们用的是三方的免费服务，为了提高服务器资源的利用率，减小服务器压力，当一段时间没人访问网站时，会自动把网站设置为 frozen\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22The deployment n2ex-yrgirchtae.now.sh was frozen\nThe deployment proxy-uuptfgaypk.now.sh was frozen\nThe deployment n2ex-nzkjwvytxe.now.sh was unfrozen\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eThe deployment n2ex-yrgirchtae\x3cspan class=\x22hljs-selector-class\x22\x3e.now\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.sh\x3c\/span\x3e was frozen\nThe deployment proxy-uuptfgaypk\x3cspan class=\x22hljs-selector-class\x22\x3e.now\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.sh\x3c\/span\x3e was frozen\nThe deployment n2ex-nzkjwvytxe\x3cspan class=\x22hljs-selector-class\x22\x3e.now\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.sh\x3c\/span\x3e was unfrozen\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这是我控制台的最新报告，当有人访问时会切换到 unfrozen，算了下默认 frozen 时间是 15min 内无访问后。\x3c\/p\x3e\n\x3cp\x3e不知道 heroku 是不是也有类似问题\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e未来\x3c\/h2\x3e\n\x3cp\x3e这个项目会持续更新，逐步加新的功能，大家感兴趣的可以提 issue，或者直接提 pr 给我。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e从项目分析到开发部署上线，一个 nuxt 项目就这样完成了，开发遇到的坑也随着项目递进渗透进去了，项目十分简单，没使用 vuex，写到这里，依旧不推荐大家深入使用，但是十分推荐玩一玩，抛开了 SSR 复杂的那一面，用着还是挺爽的。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e文章出自 orange 的 个人博客 \x3ca href=\x22http:\/\/orangexc.xyz\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/orangexc.xyz\/\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用 nuxt 开发部署一个 v2ex</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009842518">https://segmentfault.com/a/1190000009842518</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/2odrkfx4cx3/" target="_blank">https://alili.tech/archive/2odrkfx4cx3/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>