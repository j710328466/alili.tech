<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="webpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>webpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/cev3tal9sj/",
				"appid": "1613049289050283", 
				"title": "webpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/80q2lggkmm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gv6jxtrb8oh/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&text=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&text=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&is_video=false&description=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcev3tal9sj%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e5%9b%9b%ef%bc%89%ef%bc%9aNo%e5%a4%8d%e5%88%b6%e7%b2%98%e8%b4%b4%ef%bc%81%e5%a4%9a%e9%a1%b9%e7%9b%ae%e5%85%b1%e7%94%a8%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">webpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e本文首发于\x3cem\x3eArray_Huang\x3c\/em\x3e的技术博客——\x3ccode\x3e实用至上\x3c\/code\x3e，非经作者同意，请勿转载。\x3cbr\x3e原文地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007301770\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007301770\x3c\/code\x3e\x3c\/a\x3e\x3cbr\x3e如果您对本系列文章感兴趣，欢迎关注订阅这里：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/array_huang\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/blog\/array_huang\x3c\/code\x3e\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e本文介绍如何在多项目间共用同一套\x3cstrong\x3e基础设施\x3c\/strong\x3e，又或是某种层次的\x3cstrong\x3e框架\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e基础设施是什么？\x3c\/h3\x3e\n\x3cp\x3e一个完整的网站，不可能只包含一个jQuery，或是某个MVVM框架，其中必定包含了许多解决方案，例如：如何上传？如何兼容IE？如何跨域？如何使用本地存储？如何做用户信息反馈？又或者具体到如何选择日期？等等等等……这里面必定包含了UI框架、JS框架、各种小工具库，不论是第三方的还是自己团队研发的。而以上所述的种种，就构成了一套完整的解决方案，也称\x3cstrong\x3e基础设施\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e基础设施有个重要的特征，那就是与业务逻辑无关，不论是OA还是CMS又或是CRM，只要整体产品形态类似，我们就可以使用同一套基础设施。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e框架\x3c\/h3\x3e\n\x3cp\x3e框架这个概念很泛，泛得让人心生困惑，但抽象出来说，框架就是一套定义代码在哪里写、怎么写的规则。不能说我们要怎么去\x3cstrong\x3e用\x3c\/strong\x3e框架，反倒是框架\x3cstrong\x3e控制\x3c\/strong\x3e我们怎么去\x3cstrong\x3e填\x3c\/strong\x3e代码。\x3c\/p\x3e\n\x3cp\x3e本系列前面的十来篇文章，分开来看是不同的\x3cstrong\x3e点\x3c\/strong\x3e，但如果所有文章合起来，并连同示例项目（\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e），实际上阐述的就是一套完整的多页应用框架（或称架构）。这套框架规定了整个应用的方方面面，举几个例子：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e每个页面的文件放在哪个目录？\x3c\/li\x3e\n\x3cli\x3e页面的HTML、入口文件、css、图片等等应该怎么放？\x3c\/li\x3e\n\x3cli\x3e编码规范（由ESLint来保证）。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e当然，这只是我的框架，我希望你们可以看懂了，然后根据自己的需求来调整，变成\x3cstrong\x3e你们的框架\x3c\/strong\x3e。甚至说，我自己在做不同类型的项目时，整体架构也都会有不少的变化。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e为什么要共用基础设施\/框架\/架构？\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e缘起\x3c\/h3\x3e\n\x3cp\x3e数月前，我找同事要了一个他自己写的地区选择器，拉回来一看遍地都是ESLint的报错（他负责的项目没有用ESLint，比较随意），我这人有强迫症的怎么看得过眼，卷起袖子就开始改，改好也就正常使用了。过了一段时间，来了新需求，同事在他那改好了地区选择器又发了一份给我，我一看头都大了，又是满地报错，这不是又要我再改一遍吗？当时我就懵了，只好按着他的思路，对我的版本做了修改。从此，也确立了我们公司会有两份外观功能都一致，但是实现却不一样的地区选择器。\x3c\/p\x3e\n\x3cp\x3e很坑爹是吧？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e多项目共享架构变动\x3c\/h3\x3e\n\x3cp\x3e上面说的是组件级的，下面我们来说架构级别的。\x3c\/p\x3e\n\x3cp\x3e我在公司主要负责的项目有两个，在我的不懈努力下，已经做到跟我的脚手架项目\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e大体上同构了。但维持同构显然是要付出代价的，我在脚手架项目试验过的改进，小至改个目录路径，大至引入个plugin啊loader啊什么的，都要分别在公司的两个项目里各做一遍，超烦哒（嫌弃脸\x3c\/p\x3e\n\x3cp\x3e试想只是两个项目就已经这样了，如果是三个、四个，甚至六个、七个呢？堪忧啊堪忧啊！\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e快速创建新项目\x3c\/h3\x3e\n\x3cp\x3e不知道你们有没有这样子的经验：接到新项目时，灵机一动“这不就是我的XX项目吗？”，然后赶紧搬出XX项目的源码，然后删掉业务逻辑，保留可复用的基础设施。\x3c\/p\x3e\n\x3cp\x3e也许你会说，这不已经比从零开始要好多了吗？总体上来说，是吧，但还不够好：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e你需要花时间重温整个项目的架构，搞清楚哪些要删、哪些要留。\x3c\/li\x3e\n\x3cli\x3e毕竟是快刀斩乱麻，清理好的架构比不上原先的思路那么清晰。\x3c\/li\x3e\n\x3cli\x3e清理完代码想着跑跑看，结果一大堆报错，一个一个来调烦的要命，而且还很可能是删错了什么了不得的东西，还要去原先额项目里搬回来。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e以上这些问题，你每创建一个新项目都要经历一遍，我问你怕了没有。\x3c\/p\x3e\n\x3ch4\x3e脚手架不是可以帮助快速创建新项目吗？\x3c\/h4\x3e\n\x3cp\x3e是的没错，脚手架本身就算是一整套基础设施了，但依然有下列问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e维护一套脚手架你知道有多麻烦吗？公司项目一忙起来，加班都做不完，哪顾得上脚手架啊。最后新建项目的时候发现脚手架已经落后N多了，你到底是用呢还是不用呢？\x3c\/li\x3e\n\x3cli\x3e甭跟我提Github上开源的脚手架，像我这么有个性的人，会直接用那些\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e妖艳贱货\x3c\/a\x3e吗？\x3c\/li\x3e\n\x3cli\x3e不同类型的项目技术选型不一样，比如说：需不需要兼容低版本IE；是web版的还是Hybrid App的；是前台还是后台。每一套技术选型就是一套脚手架，难道你要维护这么多套脚手架吗？\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e上述问题，通过\x3cstrong\x3e共用基础设施\x3c\/strong\x3e，都能解决\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e既然共用了基础设施，要怎么改肯定都是所有项目一起共享的了，不论是组件层面的还是架构本身。\x3c\/li\x3e\n\x3cli\x3e假设你每个不同类型的项目都已经准备好了与其它项目共用基础设施，那么，你根本不需要花费多余的维护成本，创建新项目的时候看准了跟之前哪个项目是属于同一类型的，凑一脚就行了呗，轻松。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e怎么实现多项目共用一套基础设施呢？\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e示例项目\x3c\/h3\x3e\n\x3cp\x3e在之前的文章里，我使用的一直都是\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e这个脚手架项目作为示例，而为了实践\x3cstrong\x3e多项目共用基础设施\x3c\/strong\x3e，我对该项目的架构做了较大幅度的调整，升级为\x3cstrong\x3e2.0.0\x3c\/strong\x3e版本。为免大家看前面的文章时发现示例项目货不对板，感到困惑，我新开了一个repo来存放调整后的脚手架：\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed-v2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed-v2\x3c\/a\x3e(\x3ccode\x3ehttps:\/\/github.com\/Array-Huang\/webpack-seed-v2\x3c\/code\x3e)，并且，我在两个项目的README里我都注明了相应的内容，大家可不要混淆了哈。\x3c\/p\x3e\n\x3cp\x3e下面就以从\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e到\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed-v2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed-v2\x3c\/a\x3e的改造过程来介绍如何实现多项目共用基础设施。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e改造思路\x3c\/h3\x3e\n\x3cp\x3e改造思路其实很简单，就是\x3cstrong\x3e把预想中多个项目都能用得上的部分从现有项目里抽离出来\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e如何抽离\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e抽离\x3c\/strong\x3e的说法是针对原项目的，如果单纯从文件系统的角度来说，只不过是\x3cstrong\x3e移动\x3c\/strong\x3e了某些文件和目录。\x3c\/p\x3e\n\x3cp\x3e移动到哪里了呢？自然是移动到与项目目录同级的地方，这样就方便多个项目引用这个\x3cstrong\x3e核心\x3c\/strong\x3e了。\x3c\/p\x3e\n\x3cp\x3e如果你跟我一样，在原项目中定义了大量路径和alias的话，移动这些文件\/目录就只是个改变量的活了：\x3c\/p\x3e\n\x3cp\x3e选自\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\/blob\/master\/webpack-config\/base\/dir-vars.config.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ewebpack-seed\/webpack-config\/base\/dir-vars.config.js\x3c\/code\x3e\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27);\nvar moduleExports = {};\n\n\/\/ 源文件目录\nmoduleExports.staticRootDir = path.resolve(__dirname, \x27..\/..\/\x27); \/\/ 项目根目录\nmoduleExports.srcRootDir = path.resolve(moduleExports.staticRootDir, \x27.\/src\x27); \/\/ 项目业务代码根目录\nmoduleExports.vendorDir = path.resolve(moduleExports.staticRootDir, \x27.\/vendor\x27); \/\/ 存放所有不能用npm管理的第三方库\nmoduleExports.dllDir = path.resolve(moduleExports.srcRootDir, \x27.\/dll\x27); \/\/ 存放由各种不常改变的js\/css打包而来的dll\nmoduleExports.pagesDir = path.resolve(moduleExports.srcRootDir, \x27.\/pages\x27); \/\/ 存放各个页面独有的部分，如入口文件、只有该页面使用到的css、模板文件等\nmoduleExports.publicDir = path.resolve(moduleExports.srcRootDir, \x27.\/public-resource\x27); \/\/ 存放各个页面使用到的公共资源\nmoduleExports.logicDir = path.resolve(moduleExports.publicDir, \x27.\/logic\x27); \/\/ 存放公用的业务逻辑\nmoduleExports.libsDir = path.resolve(moduleExports.publicDir, \x27.\/libs\x27);  \/\/ 与业务逻辑无关的库都可以放到这里\nmoduleExports.configDir = path.resolve(moduleExports.publicDir, \x27.\/config\x27); \/\/ 存放各种配置文件\nmoduleExports.componentsDir = path.resolve(moduleExports.publicDir, \x27.\/components\x27); \/\/ 存放组件，可以是纯HTML，也可以包含js\/css\/image等，看自己需要\nmoduleExports.layoutDir = path.resolve(moduleExports.publicDir, \x27.\/layout\x27); \/\/ 存放UI布局，组织各个组件拼起来，因应需要可以有不同的布局套路\n\n\/\/ 生成文件目录\nmoduleExports.buildDir = path.resolve(moduleExports.staticRootDir, \x27.\/build\x27); \/\/ 存放编译后生成的所有代码、资源（图片、字体等，虽然只是简单的从源目录迁移过来）\n\nmodule.exports = moduleExports;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e moduleExports = {};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 源文件目录\x3c\/span\x3e\nmoduleExports.staticRootDir = path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目根目录\x3c\/span\x3e\nmoduleExports.srcRootDir = path.resolve(moduleExports.staticRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目业务代码根目录\x3c\/span\x3e\nmoduleExports.vendorDir = path.resolve(moduleExports.staticRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/vendor\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放所有不能用npm管理的第三方库\x3c\/span\x3e\nmoduleExports.dllDir = path.resolve(moduleExports.srcRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dll\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放由各种不常改变的js\/css打包而来的dll\x3c\/span\x3e\nmoduleExports.pagesDir = path.resolve(moduleExports.srcRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/pages\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放各个页面独有的部分，如入口文件、只有该页面使用到的css、模板文件等\x3c\/span\x3e\nmoduleExports.publicDir = path.resolve(moduleExports.srcRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/public-resource\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放各个页面使用到的公共资源\x3c\/span\x3e\nmoduleExports.logicDir = path.resolve(moduleExports.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/logic\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放公用的业务逻辑\x3c\/span\x3e\nmoduleExports.libsDir = path.resolve(moduleExports.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/libs\x27\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 与业务逻辑无关的库都可以放到这里\x3c\/span\x3e\nmoduleExports.configDir = path.resolve(moduleExports.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/config\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放各种配置文件\x3c\/span\x3e\nmoduleExports.componentsDir = path.resolve(moduleExports.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/components\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放组件，可以是纯HTML，也可以包含js\/css\/image等，看自己需要\x3c\/span\x3e\nmoduleExports.layoutDir = path.resolve(moduleExports.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/layout\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放UI布局，组织各个组件拼起来，因应需要可以有不同的布局套路\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成文件目录\x3c\/span\x3e\nmoduleExports.buildDir = path.resolve(moduleExports.staticRootDir, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/build\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放编译后生成的所有代码、资源（图片、字体等，虽然只是简单的从源目录迁移过来）\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = moduleExports;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e选自\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\/blob\/master\/webpack-config\/resolve.config.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ewebpack-seed\/webpack-config\/resolve.config.js\x3c\/code\x3e\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27);\nvar dirVars = require(\x27.\/base\/dir-vars.config.js\x27);\nmodule.exports = {\n  \/\/ 模块别名的配置，为了使用方便，一般来说所有模块都是要配置一下别名的\n  alias: {\n    \/* 各种目录 *\/\n    iconfontDir: path.resolve(dirVars.publicDir, \x27iconfont\/\x27),\n    configDir: dirVars.configDir,\n\n    \/* vendor *\/\n    \/* bootstrap 相关 *\/\n    metisMenu: path.resolve(dirVars.vendorDir, \x27metisMenu\/\x27),\n\n    \/* libs *\/\n    withoutJqueryModule: path.resolve(dirVars.libsDir, \x27without-jquery.module\x27),\n    routerModule: path.resolve(dirVars.libsDir, \x27router.module\x27),\n\n    libs: path.resolve(dirVars.libsDir, \x27libs.module\x27),\n\n    \/* less *\/\n    lessDir: path.resolve(dirVars.publicDir, \x27less\x27),\n\n    \/* components *\/\n\n    \/* layout *\/\n    layout: path.resolve(dirVars.layoutDir, \x27layout\/html\x27),\n    \x27layout-without-nav\x27: path.resolve(dirVars.layoutDir, \x27layout-without-nav\/html\x27),\n\n    \/* logic *\/\n    cm: path.resolve(dirVars.logicDir, \x27common.module\x27),\n    cp: path.resolve(dirVars.logicDir, \x27common.page\x27),\n\n    \/* config *\/\n    configModule: path.resolve(dirVars.configDir, \x27common.config\x27),\n    bootstrapConfig: path.resolve(dirVars.configDir, \x27bootstrap.config\x27),\n  },\n\n  \/\/ 当require的模块找不到时，尝试添加这些后缀后进行寻找\n  extentions: [\x27\x27, \x27js\x27],\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dirVars = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/base\/dir-vars.config.js\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模块别名的配置，为了使用方便，一般来说所有模块都是要配置一下别名的\x3c\/span\x3e\n  alias: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 各种目录 *\/\x3c\/span\x3e\n    iconfontDir: path.resolve(dirVars.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27iconfont\/\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3econfigDir\x3c\/span\x3e: dirVars.configDir,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* vendor *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* bootstrap 相关 *\/\x3c\/span\x3e\n    metisMenu: path.resolve(dirVars.vendorDir, \x3cspan class=\x22hljs-string\x22\x3e\x27metisMenu\/\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* libs *\/\x3c\/span\x3e\n    withoutJqueryModule: path.resolve(dirVars.libsDir, \x3cspan class=\x22hljs-string\x22\x3e\x27without-jquery.module\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3erouterModule\x3c\/span\x3e: path.resolve(dirVars.libsDir, \x3cspan class=\x22hljs-string\x22\x3e\x27router.module\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-attr\x22\x3elibs\x3c\/span\x3e: path.resolve(dirVars.libsDir, \x3cspan class=\x22hljs-string\x22\x3e\x27libs.module\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* less *\/\x3c\/span\x3e\n    lessDir: path.resolve(dirVars.publicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27less\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* components *\/\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* layout *\/\x3c\/span\x3e\n    layout: path.resolve(dirVars.layoutDir, \x3cspan class=\x22hljs-string\x22\x3e\x27layout\/html\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-string\x22\x3e\x27layout-without-nav\x27\x3c\/span\x3e: path.resolve(dirVars.layoutDir, \x3cspan class=\x22hljs-string\x22\x3e\x27layout-without-nav\/html\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* logic *\/\x3c\/span\x3e\n    cm: path.resolve(dirVars.logicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27common.module\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3ecp\x3c\/span\x3e: path.resolve(dirVars.logicDir, \x3cspan class=\x22hljs-string\x22\x3e\x27common.page\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* config *\/\x3c\/span\x3e\n    configModule: path.resolve(dirVars.configDir, \x3cspan class=\x22hljs-string\x22\x3e\x27common.config\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3ebootstrapConfig\x3c\/span\x3e: path.resolve(dirVars.configDir, \x3cspan class=\x22hljs-string\x22\x3e\x27bootstrap.config\x27\x3c\/span\x3e),\n  },\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当require的模块找不到时，尝试添加这些后缀后进行寻找\x3c\/span\x3e\n  extentions: [\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\x27\x3c\/span\x3e],\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e抽离对象\x3c\/h3\x3e\n\x3cp\x3e抽离的方法很简单，那么关键就看到底是哪些部分可以抽离、需要抽离了，这一点看我\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed-v2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e抽离后的成果\x3c\/a\x3e就比较清晰了：\x3c\/p\x3e\n\x3cp\x3e先来看根目录：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├─ core # 抽离出来的基础设施，或称“核心”\n├─ example-admin-1 # 示例项目1，被抽离后剩下的\n├─ example-admin-2 # 示例项目2，嗯，简单起见，直接复制了example-admin-1，不过还是要做一点调整的，比如说配置\n├─ npm-scripts # 没想到npm-scripts也能公用吧？\n├─ vendor # 无法在npm上找到的第三方库\n├─ .eslintrc # ESLint的配置文件\n├─ package.json # 所有的npm库依赖建议都写到这里，不建议写到具体项目的package.json里\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e├─ core \x3cspan class=\x22hljs-comment\x22\x3e# 抽离出来的基础设施，或称“核心”\x3c\/span\x3e\n├─ example-admin-1 \x3cspan class=\x22hljs-comment\x22\x3e# 示例项目1，被抽离后剩下的\x3c\/span\x3e\n├─ example-admin-2 \x3cspan class=\x22hljs-comment\x22\x3e# 示例项目2，嗯，简单起见，直接复制了example-admin-1，不过还是要做一点调整的，比如说配置\x3c\/span\x3e\n├─ npm-scripts \x3cspan class=\x22hljs-comment\x22\x3e# 没想到npm-scripts也能公用吧？\x3c\/span\x3e\n├─ vendor \x3cspan class=\x22hljs-comment\x22\x3e# 无法在npm上找到的第三方库\x3c\/span\x3e\n├─ .eslintrc \x3cspan class=\x22hljs-comment\x22\x3e# ESLint的配置文件\x3c\/span\x3e\n├─ package.json \x3cspan class=\x22hljs-comment\x22\x3e# 所有的npm库依赖建议都写到这里，不建议写到具体项目的package.json里\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再来看看\x3ccode\x3ecore\x3c\/code\x3e目录\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├─ _webpack.dev.config.js # 整理好公用的开发环境webpack配置，以备继承\n├─ _webpack.product.config.js # 整理好公用的生产环境webpack配置，以备继承\n├─ webpack-dll.config.js # 用来编译Dll文件用的webpack配置文件\n├─ manifest.json # Dll文件的资源目录\n├─ package.json # 没有什么实质内容，我这里就放了个编译Dll用的npm script\n├─components # 各种UI组件\n│  ├─footer\n│  ├─header\n│  ├─side-menu\n│  └─top-nav\n├─config # 公共配置，有些是提供给具体项目的配置来继承的，有些本身就有用（比如说“核心”部分本身需要的配置）\n├─dll # 之前的文章里就说过，我建议把各种第三方库（包括npm库也包括非npm库）都打包成Dll来加速webpack编译过程，这部分明显就属于基础设施了\n├─iconfont # 字体图标能不能公用，这点我也是比较犹豫的，看项目实际需要吧，不折腾的话还是推荐公用\n├─layout # 布局，既然是同类型项目，布局肯定是基本一样的\n│  ├─layout\n│  └─layout-without-nav\n├─less # 样式基础，在我这项目里就是针对bootstrap的SB-Admin主题做了修改\n│  ├─base-dir\n│  └─components-dir\n├─libs # 自己团队研发的一些公共的方法\/库，又或是针对第三方库的适配器（比如说对alert库封装一层，后面要更换库的时候就方便了）\n├─npm-scripts # 与根目录下的npm-scripts目录不一样，这里的不是用来公用的，而是“核心”使用到的script，比如我在这里就放了编译dll的npm script\n└─webpack-config # 公用的webpack配置，尤其是关系到“核心”部分的配置，比如说各第三方库的alias。这里的配置是用来给具体项目来继承的，老实说我现在继承的方法也比较复杂，回头看看有没有更简单的方法。\n    ├─base\n    ├─inherit\n    └─vendor\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e├─ _webpack.dev.config.js \x3cspan class=\x22hljs-comment\x22\x3e# 整理好公用的开发环境webpack配置，以备继承\x3c\/span\x3e\n├─ _webpack.product.config.js \x3cspan class=\x22hljs-comment\x22\x3e# 整理好公用的生产环境webpack配置，以备继承\x3c\/span\x3e\n├─ webpack-dll.config.js \x3cspan class=\x22hljs-comment\x22\x3e# 用来编译Dll文件用的webpack配置文件\x3c\/span\x3e\n├─ manifest.json \x3cspan class=\x22hljs-comment\x22\x3e# Dll文件的资源目录\x3c\/span\x3e\n├─ package.json \x3cspan class=\x22hljs-comment\x22\x3e# 没有什么实质内容，我这里就放了个编译Dll用的npm script\x3c\/span\x3e\n├─components \x3cspan class=\x22hljs-comment\x22\x3e# 各种UI组件\x3c\/span\x3e\n│  ├─footer\n│  ├─header\n│  ├─side-menu\n│  └─top-nav\n├─config \x3cspan class=\x22hljs-comment\x22\x3e# 公共配置，有些是提供给具体项目的配置来继承的，有些本身就有用（比如说“核心”部分本身需要的配置）\x3c\/span\x3e\n├─dll \x3cspan class=\x22hljs-comment\x22\x3e# 之前的文章里就说过，我建议把各种第三方库（包括npm库也包括非npm库）都打包成Dll来加速webpack编译过程，这部分明显就属于基础设施了\x3c\/span\x3e\n├─iconfont \x3cspan class=\x22hljs-comment\x22\x3e# 字体图标能不能公用，这点我也是比较犹豫的，看项目实际需要吧，不折腾的话还是推荐公用\x3c\/span\x3e\n├─layout \x3cspan class=\x22hljs-comment\x22\x3e# 布局，既然是同类型项目，布局肯定是基本一样的\x3c\/span\x3e\n│  ├─layout\n│  └─layout-without-nav\n├─less \x3cspan class=\x22hljs-comment\x22\x3e# 样式基础，在我这项目里就是针对bootstrap的SB-Admin主题做了修改\x3c\/span\x3e\n│  ├─base-dir\n│  └─components-dir\n├─libs \x3cspan class=\x22hljs-comment\x22\x3e# 自己团队研发的一些公共的方法\/库，又或是针对第三方库的适配器（比如说对alert库封装一层，后面要更换库的时候就方便了）\x3c\/span\x3e\n├─npm-scripts \x3cspan class=\x22hljs-comment\x22\x3e# 与根目录下的npm-scripts目录不一样，这里的不是用来公用的，而是“核心”使用到的script，比如我在这里就放了编译dll的npm script\x3c\/span\x3e\n└─webpack-config \x3cspan class=\x22hljs-comment\x22\x3e# 公用的webpack配置，尤其是关系到“核心”部分的配置，比如说各第三方库的alias。这里的配置是用来给具体项目来继承的，老实说我现在继承的方法也比较复杂，回头看看有没有更简单的方法。\x3c\/span\x3e\n    ├─base\n    ├─inherit\n    └─vendor\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后总结一下，是哪些资源被抽离出来了：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ewebpack配置中属于架构的部分，比如说各种loader、plugin、“核心”部分的alias。\x3c\/li\x3e\n\x3cli\x3e“核心”部分所需的配置，比如我这项目里为了定制bootstrap而建的配置。\x3c\/li\x3e\n\x3cli\x3e各种与UI相关的资源，比如UI框架\/样式、UI组件、字体图标。\x3c\/li\x3e\n\x3cli\x3e第三方库，以Dll文件的形式存在。\x3c\/li\x3e\n\x3cli\x3e自研库\/适配器。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e结构图\x3c\/h2\x3e\n\x3cp\x3e上传上来以后发现图被压小了，请到这里看\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed-v2\/blob\/master\/Array-Huang-webpack-seed-v2%20%E7%BB%93%E6%9E%84%E5%9B%BE.png\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原图\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVENFq?w=824\x26amp;h=1255\x22 src=\x22https:\/\/static.alili.tech\/img\/bVENFq?w=824\x26amp;h=1255\x22 alt=\x22Array-Huang-webpack-seed-v2 结构图\x22 title=\x22Array-Huang-webpack-seed-v2 结构图\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e附系列文章目录（同步更新）\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006843916\x22\x3ewebpack多页应用架构系列（一）：一步一步解决架构痛点：\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006843916\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006863968\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（二）：webpack配置常用部分有哪些？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006863968\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006871991\x22\x3ewebpack多页应用架构系列（三）：怎么打包公共代码才能避免重复？：\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006871991\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006887523\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（四）：老式jQuery插件还不能丢，怎么兼容？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006887523\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006897458\x22\x3ewebpack多页应用架构系列（五）：听说webpack连less\/css也能打包？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006897458\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006907701\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（六）：听说webpack连图片和字体也能打包？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006907701\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006952432\x22\x3ewebpack多页应用架构系列（七）：开发环境、生产环境傻傻分不清楚？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006952432\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006992218\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（八）：教练我要写ES6！webpack怎么整合Babel？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006992218\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007030775\x22\x3ewebpack多页应用架构系列（九）：总有刁民想害朕！ESLint为你阻击垃圾代码:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007030775\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007043716\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十）：如何打造一个自定义的bootstrap:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007043716\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007104372\x22\x3ewebpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007104372\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007126268\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十二）：利用webpack生成HTML普通网页\x26amp;页面模板:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007126268\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007159115\x22\x3ewebpack多页应用架构系列（十三）：构建一个简单的模板布局系统:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007159115\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007301770\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007301770\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000008203380\x22\x3ewebpack多页应用架构系列（十五）：论前端如何在后端渲染开发模式下夹缝生存\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010317802\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十六）：善用浏览器缓存，该去则去，该留则留\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e本文首发于\x3cem\x3eArray_Huang\x3c\/em\x3e的技术博客——\x3ccode\x3e实用至上\x3c\/code\x3e，非经作者同意，请勿转载。\x3cbr\x3e原文地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007301770\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007301770\x3c\/code\x3e\x3c\/a\x3e\x3cbr\x3e如果您对本系列文章感兴趣，欢迎关注订阅这里：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/array_huang\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/blog\/array_huang\x3c\/code\x3e\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>webpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007301770">https://segmentfault.com/a/1190000007301770</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/cev3tal9sj/" target="_blank">https://alili.tech/archive/cev3tal9sj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>