<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="关于javascript 中的高级定时器的若干问题"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>关于javascript 中的高级定时器的若干问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/6e7bbbs7o5w/",
				"appid": "1613049289050283", 
				"title": "关于javascript 中的高级定时器的若干问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-29T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tf1cfvqz1qq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/taly8stynj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&text=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&text=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&title=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&is_video=false&description=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&title=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&title=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&title=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6e7bbbs7o5w%2f&title=%e5%85%b3%e4%ba%8ejavascript%20%e4%b8%ad%e7%9a%84%e9%ab%98%e7%ba%a7%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">关于javascript 中的高级定时器的若干问题</h1><div class="meta"><div class="postdate"><time datetime="2019-01-29" itemprop="datePublished">2019-01-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e看到评论里有仁兄建议我试试箭头函数，真是受宠若惊，本来写这篇文章也只是想记录写要点给自己日后看的。今天早上看到一篇总结\x3ccode\x3ejavascript\x3c\/code\x3e中\x3ccode\x3ethis\x3c\/code\x3e的文章\x3ca href=\x22https:\/\/qiutc.me\/post\/this-this-this-in-javascript.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 中的 this !\x3c\/a\x3e,也同样提到了箭头函数中\x3ccode\x3ethis\x3c\/code\x3e的指向问题，所以，又对这篇文章进行了完善。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e一、问题的起源\x3c\/h3\x3e\n\x3cp\x3e论坛上看到这样一道js编程题：\x3ccode\x3e要求用闭包实现每隔5s输出0-9之间的十个数字\x3c\/code\x3e。这里先给出我写的最终实现方案，如下图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHk8Q?w=713\x26amp;h=338\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHk8Q?w=713\x26amp;h=338\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e毫无疑问，这里必须要用到定时器\x3ccode\x3esetTimeout\x3c\/code\x3e或者\x3ccode\x3esetInterval\x3c\/code\x3e，但是考虑到\x3ccode\x3esetInterval\x3c\/code\x3e存在的两个问题：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3e某些间隔会被跳过\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e多个定时器的代码执行之间的间隔可能会比预期的小\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3e所以，用到\x3ccode\x3esetInterval\x3c\/code\x3e的地方一般都是用递归调用\x3ccode\x3esetTimeout\x3c\/code\x3e的方式来替代，但是关于这两个定时函数中的\x3ccode\x3ethis\x3c\/code\x3e我之前的理解有些偏差，我知道这里的\x3ccode\x3ethis\x3c\/code\x3e指的是全局对象\x3ccode\x3ewindow\x3c\/code\x3e，因为\x3ccode\x3esetTimeout\x3c\/code\x3e和\x3ccode\x3esetInterval\x3c\/code\x3e都是作为全局函数，也就是\x3ccode\x3ewindow\x3c\/code\x3e对象的方法存在的。但是这里有两个\x3ccode\x3ethis\x3c\/code\x3e：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e第一个\x3ccode\x3ethis\x3c\/code\x3e：setTimeout(\x3ccode\x3ethis\x3c\/code\x3e.func, times)\x3c\/p\x3e\n\x3cp\x3e第二个\x3ccode\x3ethis\x3c\/code\x3e: setTimeout(function(){ alert(\x3ccode\x3ethis\x3c\/code\x3e)},times);\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e那到底哪一个\x27this\x27始终指向的是\x3ccode\x3ewindow\x3c\/code\x3e呢？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e二、执行环境、活动对象、变量对象、作用域链、this\x3c\/h3\x3e\n\x3cp\x3e首先澄清一下几个概念。\x3c\/p\x3e\n\x3ch4\x3e执行环境\x3c\/h4\x3e\n\x3cblockquote\x3e\n\x3cp\x3e执行环境定义了变量和函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个与之关联的\x3ccode\x3e变量对象\x3c\/code\x3e，环境中定义的所有变量和函数都保存在这个\x3ccode\x3e变量对象\x3c\/code\x3e中。\x3c\/p\x3e\n\x3cp\x3e全局执行环境是最外围的一个执行环境。根据ECMAScript实现所在的宿主环境不同，表示全局执行环境的对象也不一样。在web浏览器中，全局执行环境被认为是\x3ccode\x3ewindow\x3c\/code\x3e对象，因为所有的全局变量和函数都是作为\x3ccode\x3ewindow\x3c\/code\x3e对象的属性和方法创建的。某个执行环境中的代码执行完毕后，该环境就会被销毁，保存在其中的所有变量和函数也随之销毁（全局执行环境直到应用程序退出时才会销毁）\x3c\/p\x3e\n\x3cp\x3e每个函数都有自己的执行环境。当执行流进入一个函数时，该函数的执行环境就会被推入一个环境栈中。而在函数执行后，栈将其环境弹出，把控制权返回给之前的执行环境。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch4\x3e作用域链\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e当代码在一个环境中执行时，会创建\x3ccode\x3e变量对象\x3c\/code\x3e的一个\x3ccode\x3e作用域链\x3c\/code\x3e。\x3cbr\x3e作用域链本质上是一个指向\x3ccode\x3e变量对象\x3c\/code\x3e的指针列表，它只引用，但不实际包含\x3ccode\x3e变量对象\x3c\/code\x3e。\x3cbr\x3e作用域链的作用，是保证对执行环境有权访问的所有变量和函数的有序性。作用域链的最前端，始终都是当前执行的代码所在环境的变量对象。如果这个环境是函数，则将其\x3ccode\x3e活动对象\x3c\/code\x3e作为\x3ccode\x3e变量对象\x3c\/code\x3e，活动对象在最开始时只包含一个变量，即arguments对象（这个对象在全局环境中是不存在的）。作用域链中的下一个变量对象来自包含（外部）环境，而再下一个变量对象则来自再下一个包含环境。这样一直延续到全局执行环境；全局执行环境的变量对象始终是作用域链中的最后一个对象。\x3cbr\x3e标识符解析就是沿着作用域链一级一级地搜索标识符的过程。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3ethis\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3ethis是一个对象，this对象是在运行时基于函数的执行环境绑定的。\x3cbr\x3e在全局函数中，\x3ccode\x3ethis\x3c\/code\x3e等于\x3ccode\x3ewindow\x3c\/code\x3e；而当函数作为某个对象的方法调用时，\x3ccode\x3ethis\x3c\/code\x3e等于那个对象。\x3cbr\x3e匿名函数的执行环境具有全局性，其\x3ccode\x3ethis\x3c\/code\x3e通常指向\x3ccode\x3ewindow\x3c\/code\x3e。这是因为，每个函数再被调用时都会自动取得两个特殊变量：\x3ccode\x3ethis\x3c\/code\x3e和\x3ccode\x3earguments\x3c\/code\x3e内部函数在搜索这两个变量时，只会搜索到其活动对象为止，因此永远不可能访问到外部函数中的这两个变量。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e闭包\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e闭包是指有权访问另一个函数作用域中的变量的函数\x3cbr\x3e当某个函数被调用时，会创建一个执行环境及相应的作用域链。然后用arguments和其他的命名参数的值来初始化函数的活动对象。\x3cbr\x3e闭包的主要用途有：模仿块级作用域和私用变量。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e变量对象\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e变量对象中保存了当前执行环境中定义的所有变量和函数。\x3cbr\x3e变量对象是和执行环境绑定的，而\x3ccode\x3ethis\x3c\/code\x3e是和函数运行时所在的执行环境绑定的。比如对于一个全局执行环境，其中的\x27this\x27指的是该函数运行时所在的全局执行环境，也就是\x3ccode\x3ewindow\x3c\/code\x3e；而变量对象隶属于这个函数创建的局部执行环境。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e三、 \x3ccode\x3esetTimeout\x3c\/code\x3e和\x3ccode\x3esetInterval\x3c\/code\x3e中的\x3ccode\x3ethis\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3ch4\x3e测试一\x3c\/h4\x3e\n\x3cp\x3e我们先来做几个测试\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试1\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlvk?w=732\x26amp;h=240\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlvk?w=732\x26amp;h=240\x22 alt=\x22测试1\x22 title=\x22测试1\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\n\x3cp\x3e第\x3ccode\x3e10\x3c\/code\x3e行，\x3ccode\x3esetTimeout(this.method,500)\x3c\/code\x3e，此时调用的是构造函数内的\x3ccode\x3emethod\x3c\/code\x3e方法,也就是说这里的第一个\x27this\x27指向的是构造函数生成的对象，即是根据\x3ccode\x3esetTimeout\x3c\/code\x3e调用时所在的执行环境确定的。\x3c\/p\x3e\n\x3cp\x3e尽管调用的是对象的\x3ccode\x3emethod\x3c\/code\x3e方法，但是方法内的\x3ccode\x3ethis\x3c\/code\x3e（第二个\x3ccode\x3ethis\x3c\/code\x3e）等于\x3ccode\x3ewindow\x3c\/code\x3e。为什么会是这样呢？在看下面一个测试\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHool?w=652\x26amp;h=223\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHool?w=652\x26amp;h=223\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e其实，\x3ccode\x3esetTimeout\x3c\/code\x3e 也只是一个函数而已，函数必然有可能需要参数，我们把 \x3ccode\x3ethis.a\x3c\/code\x3e 当作一个参数传给 \x3ccode\x3esetTimeout\x3c\/code\x3e 这个函数，就像它需要一个 \x3ccode\x3efun\x3c\/code\x3e 参数，在传入参数的时候，其实做了个这样的操作 \x3ccode\x3efun = this.a\x3c\/code\x3e，看到没有，这里我们直接把 \x3ccode\x3efun\x3c\/code\x3e 指向 \x3ccode\x3ethis.a\x3c\/code\x3e 的引用；执行的时候其实是执行了 \x3ccode\x3efun()\x3c\/code\x3e 所以已经和 \x3ccode\x3eobj\x3c\/code\x3e 无关了，它是被当作普通函数直接调用的，因此 \x3ccode\x3ethis\x3c\/code\x3e 指向全局对象。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试2\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlvA?w=752\x26amp;h=217\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlvA?w=752\x26amp;h=217\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\n\x3cp\x3e第\x3ccode\x3e10\x3c\/code\x3e行，\x3ccode\x3esetTimeout(method,500)\x3c\/code\x3e，此时调用的是全局函数\x3ccode\x3emethod\x3c\/code\x3e。因为，虽然仍在构造函数的局部执行环境内，但是局部执行环境的\x3ccode\x3e变量对象\x3c\/code\x3e中并没有\x3ccode\x3emethod\x3c\/code\x3e方法，所以，在进行标识符解析时，沿着作用域链在全局执行环境中找到了\x3ccode\x3emethod\x3c\/code\x3e方法。\x3c\/p\x3e\n\x3cp\x3e要注意通过第\x3ccode\x3e6\x3c\/code\x3e句\x3ccode\x3ethis.method=...\x3c\/code\x3e声明的这个方法属于构造函数生成的对象，而不属于构造函数的\x3ccode\x3e变量对象\x3c\/code\x3e，也就是说，并不存在于作用域链中。\x3c\/p\x3e\n\x3cp\x3e第二个\x3ccode\x3ethis\x3c\/code\x3e仍然等于\x3ccode\x3ewindow\x3c\/code\x3e。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试3\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlzr?w=692\x26amp;h=247\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlzr?w=692\x26amp;h=247\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e第\x3ccode\x3e10\x3c\/code\x3e行，\x3ccode\x3esetTimeout(method,500)\x3c\/code\x3e，此时调用的是构造函数\x3ccode\x3emethod\x3c\/code\x3e。\x3cbr\x3e第二个\x3ccode\x3ethis\x3c\/code\x3e仍然等于\x3ccode\x3ewindow\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试4\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlwl?w=718\x26amp;h=165\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlwl?w=718\x26amp;h=165\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3esetTimeout\x3c\/code\x3e第一个参数是\x3ccode\x3ejavascript\x3c\/code\x3e代码字符串时，第二个\x3ccode\x3ethis\x3c\/code\x3e仍然等于\x3ccode\x3ewindow\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试5\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlwo?w=658\x26amp;h=161\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlwo?w=658\x26amp;h=161\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3esetTimeout\x3c\/code\x3e第一个参数是匿名函数时，第二个\x3ccode\x3ethis\x3c\/code\x3e仍然等于\x3ccode\x3ewindow\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e结论一\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e根据以上测试，可以得出以下结论：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3esetTimeout\x3c\/code\x3e 中的延迟执行函数中的\x3ccode\x3ethis\x3c\/code\x3e (也就是第二个\x3ccode\x3ethis\x3c\/code\x3e)始终指向\x3ccode\x3ewindow\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3esetTimeout(this.method, minsec)\x3c\/code\x3e这种形式的\x3ccode\x3ethis\x3c\/code\x3e(也就是第一个\x3ccode\x3ethis\x3c\/code\x3e)，其指向是根据上下文的执行环境确定的。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e测试二\x3c\/h4\x3e\n\x3cp\x3e该测试的目的是确定\x3ccode\x3esetTimeout\x3c\/code\x3e 中的延迟执行函数中的变量是如何沿着作用域链搜索的。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e测试6\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlAe?w=697\x26amp;h=201\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlAe?w=697\x26amp;h=201\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e测试7\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlAL?w=684\x26amp;h=318\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlAL?w=684\x26amp;h=318\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e测试8\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlAP?w=725\x26amp;h=341\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlAP?w=725\x26amp;h=341\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\n\x3cp\x3e测试\x3ccode\x3e6\x3c\/code\x3e和测试\x3ccode\x3e7\x3c\/code\x3e本质上是相同的，因为函数名只是一个指针，指向函数对象。\x3cbr\x3e测试测试\x3ccode\x3e6\x3c\/code\x3e和测试\x3ccode\x3e7\x3c\/code\x3e中，\x3ccode\x3econsole.log(value)\x3c\/code\x3e中的\x3ccode\x3evalue\x3c\/code\x3e都是构造函数局部执行环境中的\x3ccode\x3evalue\x3c\/code\x3e值，而\x3ccode\x3econsole.log(this.value)\x3c\/code\x3e中的\x3ccode\x3evalue\x3c\/code\x3e都是全局执行环境中的\x3ccode\x3evalue\x3c\/code\x3e值。\x3c\/p\x3e\n\x3cp\x3e测试\x3ccode\x3e8\x3c\/code\x3e中的\x3ccode\x3etest\x3c\/code\x3e指向的是全局执行环境中的\x3ccode\x3etest\x3c\/code\x3e,相应的的\x3ccode\x3evalue\x3c\/code\x3e都是全局执行环境中的\x3ccode\x3evalue\x3c\/code\x3e值。\x3c\/p\x3e\n\x3cp\x3e延迟函数中的变量也是根据其所在的执行环境上下文来确定的，符合作用域链的标识符解析过程。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e测试9\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHlBl?w=719\x26amp;h=221\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHlBl?w=719\x26amp;h=221\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e两个\x3ccode\x3evalue\x3c\/code\x3e都指向的是全局执行环境中的\x3ccode\x3evalue\x3c\/code\x3e值，因为\x3ccode\x3econsole.log(value)\x3c\/code\x3e语句所在的局部执行环境上下文并没有\x3ccode\x3evalue\x3c\/code\x3e值。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e结论二\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3esetTimeout\x3c\/code\x3e 中的延迟执行函数中的变量也是根据其所在的执行环境上下文来确定的，符合作用域链的标识符解析过程。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e四、严格模式下的\x3ccode\x3ethis\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e除了正常运行模式，\x3ccode\x3eECMAscript 5\x3c\/code\x3e添加了第二种运行模式：\x22严格模式\x22（\x3ccode\x3etrict mode\x3c\/code\x3e）。顾名思义，这种模式使得\x3ccode\x3eJavascript\x3c\/code\x3e在更严格的条件下运行。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e关于严格模式的介绍，请移步这里\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2013\/01\/javascript_strict_mode.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavascript 严格模式详解\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e严格模式所带来的语法和行为的改变大致有以下 条：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e1.全局变量显示声明\x3c\/p\x3e\n\x3cp\x3e2.静态绑定\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e(1).禁止使用\x3ccode\x3ewith\x3c\/code\x3e语句\x3c\/p\x3e\n\x3cp\x3e(2).创设\x3ccode\x3eeval\x3c\/code\x3e作用域\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e3.增强的安全措施\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e(1).禁止\x3ccode\x3ethis\x3c\/code\x3e关键字指向全局对象\x3c\/p\x3e\n\x3cp\x3e(2).禁止在函数内遍历调用栈，主要是指\x3ccode\x3ecaller\x3c\/code\x3e和\x3ccode\x3earguments\x3c\/code\x3e这两个函数对象属性。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e4.禁止删除变量，只有configurable（不懂这个的去看看《javascript高级教程》中关于\x3ccode\x3e数据属性\x3c\/code\x3e和\x3ccode\x3e访问器属性\x3c\/code\x3e的介绍）设置为true的对象属性，才能被删除。\x3c\/p\x3e\n\x3cp\x3e5.显示报错\x3c\/p\x3e\n\x3cp\x3e6.重名错误\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e(1).对象不能有重名属性\x3c\/p\x3e\n\x3cp\x3e(2).函数不能有重名参数\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e7.禁止八进制表示法\x3c\/p\x3e\n\x3cp\x3e8.对\x3ccode\x3earguments\x3c\/code\x3e对象的限制\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e(1).不允许对\x3ccode\x3earguments\x3c\/code\x3e赋值\x3c\/p\x3e\n\x3cp\x3e(2).\x3ccode\x3earguments\x3c\/code\x3e不再追踪参数的变化\x3c\/p\x3e\n\x3cp\x3e(3).禁止使用\x3ccode\x3earguments.callee\x3c\/code\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e9.只允许在全局作用域或函数作用域的顶层声明函数\x3c\/p\x3e\n\x3cp\x3e10.保留字\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在严格模式的情况下执行纯粹的函数调用，那么这里的的 \x3ccode\x3ethis\x3c\/code\x3e 并不会指向全局，而是\x3ccode\x3eundefined\x3c\/code\x3e.请看如下测试：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHomU?w=656\x26amp;h=209\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHomU?w=656\x26amp;h=209\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e在这个测试例子中，匿名的自执行函数都返回\x3ccode\x3e1\x3c\/code\x3e，目的是避免函数返回\x3ccode\x3eundefined\x3c\/code\x3e造成误解，要知道\x3ccode\x3ejs\x3c\/code\x3e的函数在没有明确指定返回值的情况下默认是返回\x3ccode\x3eundefined\x3c\/code\x3e,用\x3ccode\x3enew\x3c\/code\x3e调用的构造函数除外。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e在严格模式下，\x3ccode\x3esetTimeout\x3c\/code\x3e 方法在调用传入函数的时候，如果这个函数没有指定了的 \x3ccode\x3ethis\x3c\/code\x3e，那么它会做一个隐式的操作—-自动地注入全局上下文，等同于调用 \x3ccode\x3efoo.apply(window)\x3c\/code\x3e 而非 \x3ccode\x3efoo()\x3c\/code\x3e;因此延迟执行函数中的\x3ccode\x3ethis\x3c\/code\x3e仍然指向\x3ccode\x3ewindow\x3c\/code\x3e，而不是\x3ccode\x3eundefined\x3c\/code\x3e.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当然，如果我们在传入函数的时候已经指定\x3ccode\x3ethis\x3c\/code\x3e，那么就不会被注入全局对象，比如： \x3ccode\x3esetTimeout(foo.bind(obj), 1)\x3c\/code\x3e;请看如下测试。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHonT?w=667\x26amp;h=272\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHonT?w=667\x26amp;h=272\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e五、箭头函数中的\x3ccode\x3ethis\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e在 ES6 的新规范中，加入了箭头函数(想了解更多，请移步这里\x3ca href=\x22http:\/\/es6.ruanyifeng.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 6 入门\x3c\/a\x3e)，它和普通函数最不一样的一点就是 \x3ccode\x3ethis\x3c\/code\x3e 的指向.\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e箭头函数中的 \x3ccode\x3ethis\x3c\/code\x3e 只和定义它的时候所在的作用域的 \x3ccode\x3ethis\x3c\/code\x3e 有关，而与在哪里以及如何调用它无关，同时它的 this 指向是不可改变的。请看如下测试。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHop4?w=610\x26amp;h=180\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHop4?w=610\x26amp;h=180\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e\n\x3cp\x3e在执行 \x3ccode\x3esetTimeout\x3c\/code\x3e 时候，我们先是定义了一个匿名的箭头函数，关键点就在这，箭头函数内的 \x3ccode\x3ethis\x3c\/code\x3e 执行定义时所在的对象，就是指向定义这个箭头函数时作用域内的 \x3ccode\x3ethis\x3c\/code\x3e，也就是\x3ccode\x3eobj.foo\x3c\/code\x3e中的\x3ccode\x3ethis\x3c\/code\x3e(不要误解为是 \x3ccode\x3esetTimeout\x3c\/code\x3e中的\x3ccode\x3ethis\x3c\/code\x3e啊，只不过是它的实参而已。)，即 \x3ccode\x3eobj\x3c\/code\x3e;所以在执行箭头函数的时候，它的 \x3ccode\x3ethis -\x26gt; obj.foo\x3c\/code\x3e 中的 \x3ccode\x3ethis -\x26gt; obj\x3c\/code\x3e;\x3c\/p\x3e\n\x3cp\x3e利用闭包这种固化\x3ccode\x3ethis\x3c\/code\x3e的特性，可以完美的解决之前必须用闭包才能给延迟执行函数绑定\x3ccode\x3ethis\x3c\/code\x3e的问题。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e箭头函数内的\x3ccode\x3ethis\x3c\/code\x3e指向不可改变。请看如下测试。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVHosU?w=655\x26amp;h=267\x22 src=\x22https:\/\/static.alili.tech\/img\/bVHosU?w=655\x26amp;h=267\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e六、参考\x3c\/h3\x3e\n\x3cp\x3e1.\x3ca href=\x22http:\/\/www.cnblogs.com\/yuqingfamily\/p\/5816560.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e谈谈setTimeout的作用域以及this的指向问题\x3c\/a\x3e\x3cbr\x3e2.\x3ca\x3ehttp:\/\/www.jb51.net\/article\/30858.htm\x3c\/a\x3e\x3cbr\x3e3.javascript高级教程\x3cbr\x3e4.\x3ca href=\x22https:\/\/qiutc.me\/post\/this-this-this-in-javascript.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 中的 this ! \x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>关于javascript 中的高级定时器的若干问题</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007908814">https://segmentfault.com/a/1190000007908814</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/6e7bbbs7o5w/" target="_blank">https://alili.tech/archive/6e7bbbs7o5w/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>