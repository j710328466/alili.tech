<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="探网络系列（1）-TCP三次握手&amp;Render Tree页面渲染=&gt;从输入URL到页面显示的过程？"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>探网络系列（1）-TCP三次握手&amp;Render Tree页面渲染=&gt;从输入URL到页面显示的过程？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/c8k8bsi368w/",
				"appid": "1613049289050283", 
				"title": "探网络系列（1）-TCP三次握手&amp;Render Tree页面渲染=&gt;从输入URL到页面显示的过程？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-03T02:30:40"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6yow8y6qofn/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/fg9m4gkkc7f/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&text=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&text=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&title=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&is_video=false&description=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&title=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&title=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&title=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc8k8bsi368w%2f&title=%e6%8e%a2%e7%bd%91%e7%bb%9c%e7%b3%bb%e5%88%97%ef%bc%881%ef%bc%89-TCP%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%26Render%20Tree%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%3d%3e%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">探网络系列（1）-TCP三次握手&amp;Render Tree页面渲染=&gt;从输入URL到页面显示的过程？</h1><div class="meta"><div class="postdate"><time datetime="2019-02-03" itemprop="datePublished">2019-02-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e最近工作之余一直在\x3ca href=\x22https:\/\/xiaohuazheng.github.io\/tags\/#\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e温故js系列\x3c\/a\x3e，想知新，想提升，以小技术点为节奏去回顾。今天突然想到回顾一下这个http知识，http知识有太多深层次需要学习，今天简要回顾，浅析下这个技术点。\x3cbr\x3e主要通过五个步骤浅析这个过程，有错误的地方，烦请斧正，互相学习。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e1、发送URL，请求IP地址\x3c\/h3\x3e\n\x3cp\x3e当发送一个URL请求时，不管这个URL是Web页面的URL还是Web页面上每个资源的URL，浏览器都会开启一个线程来处理这个请求，同时在远程DNS服务器上启动一个DNS查询，让浏览器获得请求对应的IP地址。\x3cbr\x3e（这儿涉及的“DNS 查询和通过 Socket 发送数据”知识点见链接文章）\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e2、TCP三次握手\x3c\/h3\x3e\n\x3cp\x3e浏览器与远程 Web 服务器通过 TCP 三次握手协商来建立一个 TCP\/IP 连接。该握手包括一个同步报文，一个同步-应答报文和一个应答报文，这三个报文在 浏览器和服务器之间传递。该握手首先由客户端尝试建立起通信，而后服务器应答并接受客户端的请求，最后由客户端发出该请求已经被接受的报文。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVDcBf?w=719\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/bVDcBf?w=719\x26amp;h=800\x22 alt=\x22握手挥手图解\x22 title=\x22握手挥手图解\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ACK: ACK=1表示该报文段中有确认号需要处理。\nSYN: SYN=1 ACK=0表明是建立连接请求报文段，SYN=1 ACK=1表明同意建立连接报文。\nFIN: FIN=1表示对端的数据已经发送完毕，要求释放连接。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nix\x22\x3e\x3ccode\x3eACK: \x3cspan class=\x22hljs-attr\x22\x3eACK=1表示该报文段中有确认号需要处理。\x3c\/span\x3e\nSYN: \x3cspan class=\x22hljs-attr\x22\x3eSYN=1\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eACK=0表明是建立连接请求报文段，SYN=1\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eACK=1表明同意建立连接报文。\x3c\/span\x3e\nFIN: \x3cspan class=\x22hljs-attr\x22\x3eFIN=1表示对端的数据已经发送完毕，要求释放连接。\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e第一次握手：建立连接\x3c\/h4\x3e\n\x3cp\x3e客户端发送连接请求报文段，将SYN值设为1，\x3ccode\x3eSequence Number\x3c\/code\x3e为x。客户端进入\x3ccode\x3eSYN_SEND\x3c\/code\x3e状态，等待服务器的确认。\x3c\/p\x3e\n\x3ch4\x3e第二次握手：服务器收到SYN报文段\x3c\/h4\x3e\n\x3cp\x3e服务器收到客户端SYN报文段，需要对这个SYN报文段进行确认，设置\x3ccode\x3eAcknowledgment Number\x3c\/code\x3e为x\x2b1(\x3ccode\x3eSequence Number\x2b1\x3c\/code\x3e)。同时，自己自己还要发送SYN请求信息，将SYN值设为1，\x3ccode\x3eSequence Number\x3c\/code\x3e设为y。服务器端将上述所有信息放到一个报文段（即SYN\x2bACK报文段）中，一并发送给客户端，服务器进入\x3ccode\x3eSYN_RECV\x3c\/code\x3e状态。\x3c\/p\x3e\n\x3ch4\x3e第三次握手：客户端收到SYN\x2bACK报文段\x3c\/h4\x3e\n\x3cp\x3e客户端收到服务器的SYN\x2bACK报文段后将\x3ccode\x3eAcknowledgment Number\x3c\/code\x3e设置为y\x2b1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入\x3ccode\x3eESTABLISHED\x3c\/code\x3e状态，完成TCP三次握手。\x3c\/p\x3e\n\x3cp\x3e完成三次握手，客户端与服务器开始传送数据，在上述过程中，还有一些重要的概念： \x3c\/p\x3e\n\x3cp\x3e未连接队列：在三次握手协议中，服务器维护一个未连接队列，该队列为每个客户端的SYN包（\x3ccode\x3esyn=j\x3c\/code\x3e）开设一个条目，该条目表明服务器已收到SYN包，并向客户发出确认，正在等待客户的确认包。这些条目所标识的连接在服务器处于\x3ccode\x3eSyn_RECV\x3c\/code\x3e状态，当服务器收到客户的确认包时，删除该条目，服务器进入\x3ccode\x3eESTABLISHED\x3c\/code\x3e状态。 \x3ccode\x3eBacklog参数\x3c\/code\x3e：表示未连接队列的最大容纳数目。 \x3c\/p\x3e\n\x3cp\x3eSYN-ACK 重传次数：服务器发送完\x3ccode\x3eSYN－ACK\x3c\/code\x3e包，如果未收到客户确认包，服务器进行首次重传，等待一段时间仍未收到客户确认包，进行第二次重传，如果重传次数超过系统规定的最大重传次数，系统将该连接信息从未连接队列中删除。注意，每次重传等待的时间不一定相同。 \x3c\/p\x3e\n\x3cp\x3e未连接存活时间：是指未连接队列的条目存活的最长时间，也即服务从收到SYN包到确认这个报文无效的最长时间，该时间值是所有重传请求包的最长等待时间总和。有时我们也称未连接存活时间为Timeout时间、\x3ccode\x3eSYN_RECV\x3c\/code\x3e存活时间。\x3c\/p\x3e\n\x3ch4\x3e为什么是3次握手？\x3c\/h4\x3e\n\x3cp\x3e图片及问题转自jimmy_thr的\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004569460#articleHeader1\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004569460\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e很简单呀，因为3次就够了,干嘛用4次。23333. 举个例子吧，假如是2次的话， 可能会出现这样一个情况。\x3c\/p\x3e\n\x3cp\x3e当客户端发送一次请求A后，但是A在网络延迟了很久， 接着客户端又发送了一次B，但是此时A已经无效了。 接着服务器相应了B，并返回TCP连接头，建立连接(这里就2次哈)。 然后，A 历经千山万水终于到服务器了， 服务器一看有请求来了，则接受，由于一开始A带着的TCP格式都是正确的，那么服务器，理所应当的也返回成功连接的flag，但是，此时客户端已经判断该次请求无效，废弃了。 然后服务器，就这么一直挂着(浪费资源)，造成的一个问题是，md, 这个锅是谁的？ 所以，为了保险起见，再补充一次连接就可以了。所以3次是最合适的。在Chinese中，以3为起称为多，如果你用4，5，6，7，8...次的话，这不更浪费吗？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e3、服务器响应200\x3c\/h3\x3e\n\x3cp\x3eTCP\/IP 连接建立后，浏览器会通过该连接向远程服务器发送 HTTP 的 GET 请求。远程服务器找到资源并使用 HTTP 响应返回该资源，值为200的 HTTP 响应状态表示一个正确的响应。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4、生成Render Tree\x3c\/h3\x3e\n\x3cp\x3e客户端开始下载资源。请求返回后，便进入了我们关注的前端模块。浏览器会解析 HTML 成树形的数据结构DOM，生成 \x3ccode\x3eDOM Tree\x3c\/code\x3e，浏览器将CSS代码解析成树形的数据结构CSSOM，生成 \x3ccode\x3eCSS Rule Tree\x3c\/code\x3e。\x3cbr\x3eDOM 和 CSSOM 都是以 \x3ccode\x3eBytes → characters → tokens → nodes → object model\x3c\/code\x3e 这样的方式生成最终的数据。DOM树的构建过程是一个深度遍历过程：当前节点的所有子节点都构建好后才会去构建当前节点的下一个兄弟节点。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVsaO8\x22 src=\x22https:\/\/static.alili.tech\/img\/bVsaO8\x22 alt=\x22tree\x22 title=\x22tree\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eDOM Tree\x3c\/code\x3e和\x3ccode\x3eCSS Rule Tree\x3c\/code\x3e结合生成\x3ccode\x3eRender Tree\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVsaPc\x22 src=\x22https:\/\/static.alili.tech\/img\/bVsaPc\x22 alt=\x22tree\x22 title=\x22tree\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3edisplay:none 的节点不会被加入Render Tree，而visibility: hidden 则会。\x3cbr\x3e•    display : 隐藏对应的元素但不挤占该元素原来的空间。\x3cbr\x3e•    visibility: 隐藏对应的元素并且挤占该元素原来的空间\x3cbr\x3e所以，如果某个节点最开始是不显示的，设为display:none是更优的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e5、渲染页面\x3c\/h3\x3e\n\x3ch4\x3e布局\x3c\/h4\x3e\n\x3cp\x3e有了Render Tree，浏览器知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系。接着就开始布局，计算出每个节点在屏幕中的位置。\x3c\/p\x3e\n\x3ch4\x3e渲染\x3c\/h4\x3e\n\x3cp\x3e浏览器已经知道了哪些节点要显示、每个节点的CSS属性是什么、每个节点在屏幕中的位置是哪里。就进入了最后一步，按照算出来的规则，通过显卡，把内容画到屏幕上。\x3c\/p\x3e\n\x3cp\x3e而 javascript 又可以根据 DOM API 操作DOM。比如JS修改了DOM或者CSS属性，也会重新触发布局和渲染的执行过程。\x3c\/p\x3e\n\x3cp\x3e关于这个问题到这儿就可以结束了......图已放，情未了，那顺便把TCP四次挥手也写这，结合图去分析。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e遗留：TCP四次挥手\x3c\/h3\x3e\n\x3ch4\x3e第一次挥手：客户端想分手\x3c\/h4\x3e\n\x3cp\x3e假设客户端想要关闭连接，客户端发送一个 FIN 标志位置为1的包\x3ccode\x3e(FIN=1，seq=x)\x3c\/code\x3e，表示自己已经没有数据可以发送了，但是仍然可以接受数据。\x3cbr\x3e发送完毕后，客户端进入 FIN_WAIT_1 状态。\x3c\/p\x3e\n\x3ch4\x3e第二次挥手：服务端也想分手\x3c\/h4\x3e\n\x3cp\x3e服务器端确认客户端的 FIN包，发送一个确认包\x3ccode\x3e(ACK=1，ACKnum=x\x2b1)\x3c\/code\x3e，表明自己接受到了客户端关闭连接的请求，但还没有准备好关闭连接。\x3cbr\x3e发送完毕后，服务器端进入 CLOSE_WAIT 状态，客户端接收到这个确认包之后，进入FIN_WAIT_2 状态，等待服务器端关闭连接。\x3c\/p\x3e\n\x3ch4\x3e第三次挥手：服务端准备好分手\x3c\/h4\x3e\n\x3cp\x3e服务器端准备好关闭连接时，向客户端发送结束连接请求，FIN置为1\x3ccode\x3e(FIN=1，seq=y)\x3c\/code\x3e。\x3cbr\x3e发送完毕后，服务器端进入 LAST_ACK 状态，等待来自客户端的最后一个ACK。\x3c\/p\x3e\n\x3ch4\x3e第四次挥手：分手\x3c\/h4\x3e\n\x3cp\x3e客户端接收到来自服务器端的关闭请求，发送一个确认包\x3ccode\x3e(ACK=1，ACKnum=y\x2b1)\x3c\/code\x3e，并进入 TIME_WAIT状态，等待可能出现的要求重传的 ACK包。\x3cbr\x3e服务器端接收到这个确认包之后，关闭连接，进入 CLOSED 状态。\x3cbr\x3e客户端等待2MSL（2MSL，2 Maximum Segment Lifetime）之后，没有收到回复，确保服务器端确实是关闭了，客户端也关闭连接，进入 CLOSED状态。\x3c\/p\x3e\n\x3cp\x3e学知识不会是为了面试，因为面试会一层层的深入，不知道的就是不知道，不能逞强，最后坑了自己。多研究研究，才是真理。\x3ccode\x3ecome on , basketball.\x3c\/code\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>探网络系列（1）-TCP三次握手&amp;Render Tree页面渲染=&gt;从输入URL到页面显示的过程？</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006921322">https://segmentfault.com/a/1190000006921322</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/c8k8bsi368w/" target="_blank">https://alili.tech/archive/c8k8bsi368w/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/sj57jxyoook/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/qsw902j95k/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（下）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/nnpmjlot58j/">IndexedDB使用与出坑指南<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/alvlbas9oai/">JS事件模型<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/u0pzym8k36o/">JS练习实例--编写经典小游戏俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/khwpyk5yz8q/">JavaScript 事件代理和委托<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/kuocl6lc3n/">JavaScript 版俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/n8bk54lyrf/">Promise学习:基础入门<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/7bk7u30qncb/">Redux 入坑进阶 - 源码解析<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/853kqfmqmf7/">Snap.svg 基本知识入门<aside class="dates">2019-02-03</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>