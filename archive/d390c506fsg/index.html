<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="webpack2的那些事儿 ------ 生成的文件是怎么运行的"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>webpack2的那些事儿 ------ 生成的文件是怎么运行的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/d390c506fsg/",
				"appid": "1613049289050283", 
				"title": "webpack2的那些事儿 ------ 生成的文件是怎么运行的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qd7id14s35o/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/sufgz1vmdd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&text=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&text=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&title=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&is_video=false&description=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&title=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&title=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&title=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd390c506fsg%2f&title=webpack2%e7%9a%84%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf%20------%20%e7%94%9f%e6%88%90%e7%9a%84%e6%96%87%e4%bb%b6%e6%98%af%e6%80%8e%e4%b9%88%e8%bf%90%e8%a1%8c%e7%9a%84"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">webpack2的那些事儿 ------ 生成的文件是怎么运行的</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e谢谢你们看我扯技术，最近在对\x3ccode\x3ewebpack2\x3c\/code\x3e进行的配置进行梳理和学习，\x3ccode\x3ewebpack\x3c\/code\x3e是在去年使用\x3ccode\x3evue\x3c\/code\x3e开始接触的，个人感觉\x3ccode\x3ewebpack\x3c\/code\x3e 融入到编程过程中，提供了模块化，将各种类型的文件都看成模块，通过不同的 \x3ccode\x3eloader\x3c\/code\x3e 进行处理和代码组织，是一个比较新颖的编程体验，应该说\x3ccode\x3ewebpack\x3c\/code\x3e的编程适用场景比较广泛，能够比较方便的引入第三方的各种 npm 模块进行使用， 方便快速开发工作。\x3cbr\x3e打算写几篇文章（如果能坚持的话= =）来总结下 \x3ccode\x3ewebpack\x3c\/code\x3e，文章不是教你怎么使用\x3ccode\x3ewebpack\x3c\/code\x3e，而是让你更好的了解你在使用的\x3ccode\x3ewebpack\x3c\/code\x3e是怎么去运行的 ，想来想去，第一篇就先介绍下\x3ccode\x3ewebpack\x3c\/code\x3e生成的文件，是怎么去执行的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3ewebpack 的生成信息\x3c\/h3\x3e\n\x3cp\x3e首先我们要先通过 webpack 去生成文件（好一句废话），文章所有的代码都会在文章最后面给出链接，下面是本文章使用的代码的目录：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJy3T?w=314\x26amp;h=402\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJy3T?w=314\x26amp;h=402\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们现在只要关注\x3ccode\x3ejs\x3c\/code\x3e目录，里面有两个入口 \x3ccode\x3eapp.js\x3c\/code\x3e、\x3ccode\x3ebar.js\x3c\/code\x3e，然后会引用 es5，es6中的各种测试模块，具体大家可以看代码。然后代码一跑！只见命令行蹭蹭蹭跑出来了好多信息，像下面一样：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJy7u?w=624\x26amp;h=197\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJy7u?w=624\x26amp;h=197\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e首先我们来看下生成的信息:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eAsset\x3c\/code\x3e : 这个一看就明白是生成的文件相对于配置中\x3ccode\x3eoutput.path\x3c\/code\x3e的路径，可以看到图中生成的文件都是在 \x3ccode\x3eoutput.path\x3c\/code\x3e底下的;然后我们仔细看下文件名，比如第一个\x3ccode\x3e0.fb6d7f4.js\x3c\/code\x3e,是由\x3ccode\x3e[name\/chunkname].[hash\/chunkhash].js\x3c\/code\x3e组成的，这个可以在\x3ccode\x3eoutput.filename\x3c\/code\x3e 中配置,关于\x3ccode\x3ehash\x3c\/code\x3e和\x3ccode\x3echunkhash\x3c\/code\x3e的区别，这个后面会专门通过一篇文章进行简介。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eSize\x3c\/code\x3e : 这个就没啥好说的，就是生成文件的大小\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eChunks\x3c\/code\x3e : 我们会看到有些 \x3ccode\x3eChunks\x3c\/code\x3e是两个数字，有些是一个，其实还可能出现更多，经过我的一堆实验= =，发现\x3ccode\x3eChunks\x3c\/code\x3e中的第一个数字，就是这个文件的 \x3ccode\x3eChunkId\x3c\/code\x3e，而后面的是当前这个文件依赖的文件的\x3ccode\x3eChunkId\x3c\/code\x3e，从图中我们可以看到，第一个文件的\x3ccode\x3eChunkId\x3c\/code\x3e是\x3ccode\x3e0\x3c\/code\x3e,它依赖的是\x3ccode\x3eChunkId\x3c\/code\x3e为\x3ccode\x3e3\x3c\/code\x3e的\x3ccode\x3emanifest.a890c12.js\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eChunk Names\x3c\/code\x3e : 这个就是这个生成文件的\x3ccode\x3echunkName\x3c\/code\x3e,可以用于文件命名，可以看到如果没有在\x3ccode\x3eentry\x3c\/code\x3e中指定，那么\x3ccode\x3echunkName\x3c\/code\x3e会等于\x3ccode\x3echunkId\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e程序加载流程\x3c\/h3\x3e\n\x3cp\x3e了解了生成的信息，接下来我们把项目跑起来(可以用 \x3ccode\x3eanywhere\x3c\/code\x3e 跑项目),通过\x3ccode\x3echrome developer tool\x3c\/code\x3e可以看到请求情况\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJIVh?w=2304\x26amp;h=430\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJIVh?w=2304\x26amp;h=430\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到请求了页面html之后，按顺序分别加载了 \x3ccode\x3emanifest\x3c\/code\x3e,\x3ccode\x3eindex\x3c\/code\x3e,\x3ccode\x3e0\x3c\/code\x3e,\x3ccode\x3e2\x3c\/code\x3e文件，这里我们先来分析下文件的分割和加载流程。\x3c\/p\x3e\n\x3ch4\x3e分割\x3c\/h4\x3e\n\x3cp\x3e可以看到页面的 js 被分割成为了4个文件，通常来说，一个项目定义了一个 \x3ccode\x3eentry point\x3c\/code\x3e,\x3cbr\x3e\x3ccode\x3ewebpack\x3c\/code\x3e会以这个\x3ccode\x3eentry point\x3c\/code\x3e作为入口，进行代码回溯，如果存在\x3ccode\x3eSystem.import\x3c\/code\x3e或者是\x3ccode\x3erequire.ensure\x3c\/code\x3e的异步模块调用，\x3ccode\x3ewebpack\x3c\/code\x3e会对使用的模块进行单独打包，比如文件中的\x3ccode\x3e0\x3c\/code\x3e、\x3ccode\x3e2\x3c\/code\x3e这两个 js，如果没有异步模块调用，那么会将所有的代码生成在一个文件中，\x3ccode\x3ewebpack\x3c\/code\x3e 为了使得打包的代码进行优化，可以使用\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e插件对代码进行处理，将库文件单独打包，通过规则生成对应的 \x3ccode\x3echunk\x3c\/code\x3e 文件，其中的\x3ccode\x3emanifest\x3c\/code\x3e为 默认的 \x3ccode\x3echunk\x3c\/code\x3e,其中包含了打包文件的\x3ccode\x3eruntime\x3c\/code\x3e信息，还有\x3ccode\x3ewebpackJsonp\x3c\/code\x3e模块加载的封装库，所有的生成模块都是采用\x3ccode\x3ewebpackJsonp\x3c\/code\x3e进行封装的。\x3c\/p\x3e\n\x3ch4\x3emanifest\x3c\/h4\x3e\n\x3cp\x3e从上面的图中可以看到，浏览器按顺序分别加载了 \x3ccode\x3emanifest\x3c\/code\x3e,\x3ccode\x3eindex\x3c\/code\x3e,\x3ccode\x3e0\x3c\/code\x3e,\x3ccode\x3e2\x3c\/code\x3e文件，其中\x3ccode\x3emanifest\x3c\/code\x3e相当于\x3ccode\x3ewebpack\x3c\/code\x3e的\x3ccode\x3eruntime\x3c\/code\x3e工具，用于做模块加载，其他文件是逻辑文件; \x3ccode\x3emanifest\x3c\/code\x3e中封装了\x3ccode\x3ewebpackJsonpCallback\x3c\/code\x3e方法和\x3ccode\x3e__webpack_require__\x3c\/code\x3e方法，下面我们来进行分析:\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\n\x3cp\x3e\x3ccode\x3ewebpackJsonpCallback(chunkIds, moreModules, executeModule)\x3c\/code\x3e:\x3ccode\x3ewebpackJsonpCallback\x3c\/code\x3e是chunk封装的包装方法，\x3ccode\x3ewebpack\x3c\/code\x3e在生成每一个\x3ccode\x3echunk\x3c\/code\x3e的时候都是通过这个方法进行包装的，我们在上面看到的 \x3ccode\x3echunksId\x3c\/code\x3e，会作为第一个参数，被包含进这个\x3ccode\x3echunk\x3c\/code\x3e的\x3ccode\x3emodule\x3c\/code\x3e会被以数组的形式传入第二个参数\x3ccode\x3emoreModules\x3c\/code\x3e中，如果这个\x3ccode\x3echunk\x3c\/code\x3e中包含可以执行的\x3ccode\x3emodules\x3c\/code\x3e，需要将 \x3ccode\x3emoduleId\x3c\/code\x3e传入第三个参数 \x3ccode\x3eexecuteModule\x3c\/code\x3e中，下面是 这个方法的代码片段：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMzn?w=1708\x26amp;h=904\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMzn?w=1708\x26amp;h=904\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e这个方法主要做了下面几件事：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ch4\x3e加载chunk\x3c\/h4\x3e\n\x3cp\x3e我们可以看到这个方法用第一个循环分别将\x3ccode\x3echunkIds\x3c\/code\x3e处理进入\x3ccode\x3einstalledChunks\x3c\/code\x3e对象中，\x3ccode\x3einstalledChunks\x3c\/code\x3e对象用于记录\x3ccode\x3echunk\x3c\/code\x3e的加载情况，分别用\x3ccode\x3e0\x3c\/code\x3e表示当前的\x3ccode\x3echunkId\x3c\/code\x3e已经加载完成，用一个长度为3的数组表示当前的\x3ccode\x3echunk\x3c\/code\x3e正在加载中，数据中其实存储着加载过程中的\x3ccode\x3eresolve\x3c\/code\x3e方法、\x3ccode\x3ereject\x3c\/code\x3e方法和\x3ccode\x3epormise\x3c\/code\x3e对象，这种只在通过\x3ccode\x3erequire.ensure\x3c\/code\x3e或者是\x3ccode\x3eSystem.import\x3c\/code\x3e才会出现。因此我们可以看到，第一个\x3ccode\x3efor\x3c\/code\x3e循环中判断如果\x3ccode\x3echunkId\x3c\/code\x3e在 installedChunks 中存在且不为0，则判断是异步加载的模块已经加载成功，将\x3ccode\x3echunk\x3c\/code\x3e的\x3ccode\x3eresolve\x3c\/code\x3e方法传入\x3ccode\x3eresolves\x3c\/code\x3e数组，然后后面运行，然后将\x3ccode\x3echunk\x3c\/code\x3e对应的状态设置为\x3ccode\x3e0\x3c\/code\x3e。如果判断之后不存在，这认为这是一个同步加载的\x3ccode\x3echunk\x3c\/code\x3e，直接设置为\x3ccode\x3e0\x3c\/code\x3e，表示\x3ccode\x3echunk\x3c\/code\x3e已经加载完毕。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ch4\x3e加载 module\x3c\/h4\x3e\n\x3cp\x3e加载 \x3ccode\x3emodule\x3c\/code\x3e 的逻辑比较简单，判断纯不存在这个\x3ccode\x3emodule\x3c\/code\x3e之后，将 其写入\x3ccode\x3emodules\x3c\/code\x3e参数之中\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ch4\x3e运行需要执行的\x3ccode\x3emodule\x3c\/code\x3e\n\x3c\/h4\x3e\n\x3cp\x3e如果\x3ccode\x3eexecuteModule\x3c\/code\x3e存在，则对其中对应\x3ccode\x3emoduleId\x3c\/code\x3e的模块进行运行\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cul\x3e\x3cli\x3e\n\x3cp\x3e\x3ccode\x3e__webpack_require__\x3c\/code\x3e: 这个对象包含了多个方法，主要用于\x3ccode\x3emodule\x3c\/code\x3e和\x3ccode\x3echunk\x3c\/code\x3e的加载，处理和运行，下面我们一个一个分析：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__(moduleId)\x3c\/code\x3e :代码如下\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMHk?w=1480\x26amp;h=786\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMHk?w=1480\x26amp;h=786\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e 这个方法接收一个\x3ccode\x3emoduleId\x3c\/code\x3e，构建一个 module 对象存入\x3ccode\x3einstalledModules\x3c\/code\x3e中，并且初始化这个 \x3ccode\x3emodule\x3c\/code\x3e, 最后返回\x3ccode\x3emodule.export\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.e(chunkId)\x3c\/code\x3e : 这个方法用于通过异步的方式加载 chunk 文件，代码如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMHM?w=2056\x26amp;h=1408\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMHM?w=2056\x26amp;h=1408\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e这个方法总体来说就是加载一个 \x3ccode\x3escript\x3c\/code\x3e 文件,生成一个 \x3ccode\x3epromise\x3c\/code\x3e对象，当 script 加载完成后运行，又会执行前面的\x3ccode\x3ewebpackJsonpCallback\x3c\/code\x3e注册\x3ccode\x3echunk\x3c\/code\x3e,然后\x3ccode\x3epromise.resolve\x3c\/code\x3e。这里面需要注意的是红框里面的东西，这个涉及到一个优化点，如果没有在使用\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e单独打包\x3ccode\x3emanifest\x3c\/code\x3e，那么一般来说他会和你指定的其他库通过\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e打包在一起,那么你会发现即使你只是修改了库之外的逻辑，库文件生成的文件的\x3ccode\x3ehash\x3c\/code\x3e或者是\x3ccode\x3echunkhash\x3c\/code\x3e也是会变的，原因就在于\x3ccode\x3emanifest\x3c\/code\x3e中红框部分是动态生成的，导致文件的 hash 产生变化，不利于缓存，因此建议单独打包\x3ccode\x3emanifest\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.oe\x3c\/code\x3e:定义一个统一的错误处理函数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.p\x3c\/code\x3e:这个是和\x3ccode\x3ewebpack\x3c\/code\x3e的\x3ccode\x3eoutput.publicPath\x3c\/code\x3e对应的值\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.o\x3c\/code\x3e:\x3ccode\x3e Object.prototype.hasOwnProperty\x3c\/code\x3e的封装\x3cbr\x3e前面几个方法在 \x3ccode\x3eES5\x3c\/code\x3e的情景下面已经足够运行这个模块系统，我们都知道\x3ccode\x3ewebpack2\x3c\/code\x3e加入了对\x3ccode\x3eES6 MODULE\x3c\/code\x3e的支持，下面几个\x3ccode\x3e__webpack_require__\x3c\/code\x3e是为\x3ccode\x3eES6\x3c\/code\x3e使用的：\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.d\x3c\/code\x3e:代码如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMLz?w=1020\x26amp;h=316\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMLz?w=1020\x26amp;h=316\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e这个是用于\x3ccode\x3eES6\x3c\/code\x3e中命名的\x3ccode\x3eexport\x3c\/code\x3e比如 \x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMMp?w=718\x26amp;h=128\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMMp?w=718\x26amp;h=128\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e webpack 遇到这种\x3ccode\x3eexport\x3c\/code\x3e，会对其用\x3ccode\x3e__webpack_require__.d\x3c\/code\x3e进行包装，变成: \x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJMMx?w=1268\x26amp;h=166\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJMMx?w=1268\x26amp;h=166\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e__webpack_require__.i\x3c\/code\x3e:用于返回一个正确的上下文的函数回去，针对的是\x3ccode\x3eexport\x3c\/code\x3e直接为一个可运行方法的时候\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e以上就是\x3ccode\x3ewebpack manifest\x3c\/code\x3e中的大部分重要的函数，其实主要就是通过\x3ccode\x3ewebpackJsonpCallback\x3c\/code\x3e来注册载入对应的\x3ccode\x3echunk\x3c\/code\x3e文件，通过\x3ccode\x3e__webpack_require__\x3c\/code\x3e来处理模块的关系。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3e整个\x3ccode\x3ewebpack\x3c\/code\x3e 的在运行时都是通过 \x3ccode\x3emanifest\x3c\/code\x3e去做控制处理的， \x3ccode\x3ewebpackJsonpCallback\x3c\/code\x3e对应的是对加载的\x3ccode\x3echunk\x3c\/code\x3e文件的处理，\x3ccode\x3e__webpack_require__\x3c\/code\x3e是对加载模块的处理，了解这些可以使我们更好的去优化我们的代码，帮助我们去调试代码，帮助我们在复杂情况下去解决问题提供一些其他的思路。\x3c\/p\x3e\n\x3cp\x3e最后附上代码：先介绍下,\x3ccode\x3ewebpack-base\x3c\/code\x3e是我在使用\x3ccode\x3ewebpack\x3c\/code\x3e的过程中自己总结的一套脚手架，文档还没有完善，如果需要文档可以在\x3ccode\x3eissue\x3c\/code\x3e里面提，本次的项目在分支上面开发，代码\x3ca href=\x22https:\/\/github.com\/qbright\/webpack2-base\/tree\/branch\/webpack2-how-webpack-file-work\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点击这里\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>webpack2的那些事儿 &mdash;&mdash; 生成的文件是怎么运行的</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008490316">https://segmentfault.com/a/1190000008490316</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/d390c506fsg/" target="_blank">https://alili.tech/archive/d390c506fsg/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>