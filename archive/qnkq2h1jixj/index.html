<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用 canvas 实现精灵动画"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用 canvas 实现精灵动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qnkq2h1jixj/",
				"appid": "1613049289050283", 
				"title": "使用 canvas 实现精灵动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-06T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/icrl3xarhp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/intcmuqtk4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&text=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&text=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&title=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&is_video=false&description=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&title=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&title=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&title=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqnkq2h1jixj%2f&title=%e4%bd%bf%e7%94%a8%20canvas%20%e5%ae%9e%e7%8e%b0%e7%b2%be%e7%81%b5%e5%8a%a8%e7%94%bb"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用 canvas 实现精灵动画</h1><div class="meta"><div class="postdate"><time datetime="2019-01-06" itemprop="datePublished">2019-01-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e文章首发于个人博客：\x3ca href=\x22http:\/\/heavenru.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/heavenru.com\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e在最近项目中需要实现一个精灵动画，素材方只提供了一个短视频素材，所以在实现精灵动画之前先介绍两个工具来帮助我们更好的实现需求。在这篇文章中，主要是介绍两个命令行工具来实现将一个短视频文件转化成一张 sprite 图片与如何使用 canvas 绘制精灵动画\x3c\/p\x3e\n\x3cp\x3e两个工具官方地址如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.ffmpeg.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3effmpeg\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.imagemagick.org\/script\/montage.php\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emontage\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e1、ffmpeg 视频转图片工具\x3c\/h2\x3e\n\x3cp\x3effmpeg 是「一个完整的跨平台解决方案，用于记录，转换和流式传输音频和视频的工具」，它的作用原不止于这篇文章中所介绍的，有兴趣的同学可以自己去官方网站了解更多。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e将视频转成图片输出\x3c\/h3\x3e\n\x3ch4\x3e基本用法\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\/ffmpeg -i jellyfish.mp4 -vf scale=138:-1 -r 8 %04d.png\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e.\/ffmpeg -i jellyfish.mp4 -vf scale=138:-1 -r 8 %04d.png\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-i\x3c\/code\x3e 视频流输入 URL\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-vf\x3c\/code\x3e 创建由过滤器指定的过滤器，并使用它过滤流，过滤器是要应用于流的过滤器的描述，并且必须具有相同类型流的单个输入和单个输出。对应的过滤器参数必须跟在这个之后，不然无法生效\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3escale\x3c\/code\x3e 视频缩放，\x3ccode\x3escale=width:height\x3c\/code\x3e 其中，如果 \x3ccode\x3eheight=-1\x3c\/code\x3e ，则表示自适应高度，按照视频的宽高比输出,后面紧接这 \x3ccode\x3escale=width:height,setar=16:9\x3c\/code\x3e 则可以指定输出宽高比\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-r\x3c\/code\x3e 视频输出 \x3ccode\x3efps\x3c\/code\x3e 值, 值越大，则以越高的 \x3ccode\x3efps\x3c\/code\x3e 切片视频，别名 \x3ccode\x3e-framerate\x3c\/code\x3e，比如我们想以 60fps 去裁剪视频导出图片，则使用 \x3ccode\x3e-r 60\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-aspect\x3c\/code\x3e 视频输出宽高比，比如常用的 \x3ccode\x3e4:3\x3c\/code\x3e、\x3ccode\x3e16:9\x3c\/code\x3e 都是规范的参数用法\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-ss\x3c\/code\x3e 裁剪开始位置，表示从视频的某个时间开始裁剪，是一个非常有用的参数，该参数使用位置放在 \x3ccode\x3e-i\x3c\/code\x3e 前面，参数格式 \x3ccode\x3ehh:mm:ss\x3c\/code\x3e 表示时分秒\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-t\x3c\/code\x3e 持续时间，表示需要裁剪的视频长度，通常配合 \x3ccode\x3e-ss\x3c\/code\x3e 一起使用，就能实现裁剪任意视频时间段的内容了，比如我们需要裁剪 \x3ccode\x3e5-10\x3c\/code\x3e 秒的视频导出，可以这么配合使用 \x3ccode\x3effmgeg -ss 00:00:05 -t 00:00:10\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-vframes\x3c\/code\x3e 设定输出视频帧数，它是 \x3ccode\x3e-frames:v\x3c\/code\x3e 的别名\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-qscale:v 2\x3c\/code\x3e 指定输出图片质量，取值范围\x3ccode\x3e2-31\x3c\/code\x3e，值越大，质量越差，建议取值 \x3ccode\x3e2-5\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e综合应用：\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 截取 60 秒处的一张图片\nffmpeg -ss 60 -i input.mp4 -qscale:v 2 -vframes 1 output.jpg\n\n\/\/ 将视频按照 60fps 的速度导出所有图片\nffmpeg -i input.mp4 -r 60 %04d.png\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs tap\x22\x3e\x3ccode\x3e\/\/ 截取\x3cspan class=\x22hljs-number\x22\x3e 60 \x3c\/span\x3e秒处的一张图片\nffmpeg -ss\x3cspan class=\x22hljs-number\x22\x3e 60 \x3c\/span\x3e-i input.mp4 -qscale:v\x3cspan class=\x22hljs-number\x22\x3e 2 \x3c\/span\x3e-vframes\x3cspan class=\x22hljs-number\x22\x3e 1 \x3c\/span\x3eoutput.jpg\n\n\/\/ 将视频按照 60fps 的速度导出所有图片\nffmpeg -i input.mp4 -r\x3cspan class=\x22hljs-number\x22\x3e 60 \x3c\/span\x3e%04d.png\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e2、合并多个图片为一张图片 montage\x3c\/h2\x3e\n\x3cp\x3e通过上面介绍的工具，我们能很轻易的将一个视频转化为一系列的图片文件，那么这个时候，我们就可以使用 \x3ca href=\x22http:\/\/www.imagemagick.org\/script\/montage.php\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emontage\x3c\/a\x3e 工具将前面导出的 n 张图片合并为一张图片\x3c\/p\x3e\n\x3ch4\x3e基本用法：\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22montage -border 0 -geometry 138x -tile 89x -quality 100% *.png myvideo.jpg\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3emontage -border 0 -geometry 138x -tile 89x -quality 100% *.png myvideo.jpg\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-tile\x3c\/code\x3e 代表需要合并的一行图片数量，当超出这个数字的时候，将换行合并\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e-quality\x3c\/code\x3e 代表合成图片质量，取值范围 \x3ccode\x3e0 - 100%\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e3、绘制 canvas 精灵动画\x3c\/h2\x3e\n\x3cp\x3e在开始编辑代码之前，我们整理一下需求：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e动画需要能循环播放\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e动画需要能指定从某一帧开始渲染\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e指定渲染多少帧动画\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e动画需要能控制渲染帧率\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当精灵图片不是单行的时候，要能实现自动换行渲染\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eOK，明白了我们的需求之后，我们开始编写代码。先来一个简易的参数合并工具方法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var _extends = Object.assign || function (target) {\n  for (var i = 1; i \x3c arguments.length; i\x2b\x2b) {\n    var source = arguments[i];\n    for (var key in source) { \/\/ 遍历传入的对象的属性\n      if (Object.prototype.hasOwnProperty.call(source, key)) { \/\/ 只操作该实例上的属性和方法, 避免循环原型\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _extends = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign || \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etarget\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e source = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[i];\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e source) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 遍历传入的对象的属性\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.prototype.hasOwnProperty.call(source, key)) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只操作该实例上的属性和方法, 避免循环原型\x3c\/span\x3e\n        target[key] = source[key];\n      }\n    }\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e target;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来是我们的 canvas 精灵对象\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Sprite(canvas, opts) {\n  var defaults = {\n    loop: false,  \/\/ 是否循环播放\n    frameIndex: 0,  \/\/ 当前第几帧\n    startFrameIndex: 0, \/\/ 其实渲染位置\n    tickCount: 0, \/\/ 每个时间段内计数器\n    ticksPerFrame: 1, \/\/ 每个渲染时间段帧数，通过这个来控制动画的渲染速度\n    numberOfFrames: 1, \/\/ 动画总帧数\n    numberOfPerLine: undefined, \/\/ 每行动画帧数\n    width: 0, \/\/ 画布宽度\n    height: 0, \/\/ 画屏高度\n    sprite: undefined  \/\/ 图片 image 对象\n  };\n\n  var params = opts || {};\n  this.canvas = canvas;\n  this.ctx = canvas.getContext(\x272d\x27);\n  this.options = _extends({}, defaults, params);\n\n  if (this.image) throw new Error(\x27请传入图片对象\x27);\n\n  \/\/ 这里的取 Math.min() 的原因是，在 safari 下面，如果图片的大小超过了画布的大小，那么将不会渲染任何图像\n  \/\/ 所以在这里，我们去画布和图片中的小者。\n  this.options.width = Math.min(this.canvas.width, this.options.sprite.width);\n  this.options.height = Math.min(this.canvas.height, this.options.sprite.height);\n  if (!this.options.numberOfPerLine) {\n    this.options.numberOfPerLine = this.options.numberOfFrames || 9999;\n  }\n}\n\nSprite.prototype.render = function () {\n  this.ctx.clearRect(0, 0, this.options.width, this.options.height);\n  \/\/ 核心绘制代码，主要使用了 canvas.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) API\n  \/\/ this.options.frameIndex % this.options.numberOfPerLine 每次求余数，判断是否换行\n  \/\/ Math.floor(this.options.frameIndex \/ this.options.numberOfPerLine)\n  this.ctx.drawImage(this.options.sprite, this.options.width * (this.options.frameIndex % this.options.numberOfPerLine), this.options.height * Math.floor(this.options.frameIndex \/ this.options.numberOfPerLine), this.options.width, this.options.height, 0, 0, this.options.width, this.options.height);\n}\n\nSprite.prototype.update = function () {\n  this.options.tickCount\x2b\x2b;\n  \/\/ 控制帧率的核心部分，在每个绘制时间点，判断当前的计数器是否大于我们传入的值\n  if (this.options.tickCount \x3e this.options.ticksPerFrame) {\n    this.options.tickCount = 0;\n\n    \/\/ 动画循环判断\n    if (this.options.frameIndex \x3c this.options.numberOfFrames - 1) {\n      this.options.frameIndex\x2b\x2b;\n    } else if (this.options.loop) {\n      \/\/ 每次循环都从给定的 startFrameIndex 开始\n      this.options.frameIndex = this.options.startFrameIndex;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSprite\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecanvas, opts\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e defaults = {\n    \x3cspan class=\x22hljs-attr\x22\x3eloop\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否循环播放\x3c\/span\x3e\n    frameIndex: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前第几帧\x3c\/span\x3e\n    startFrameIndex: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其实渲染位置\x3c\/span\x3e\n    tickCount: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每个时间段内计数器\x3c\/span\x3e\n    ticksPerFrame: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每个渲染时间段帧数，通过这个来控制动画的渲染速度\x3c\/span\x3e\n    numberOfFrames: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动画总帧数\x3c\/span\x3e\n    numberOfPerLine: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每行动画帧数\x3c\/span\x3e\n    width: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 画布宽度\x3c\/span\x3e\n    height: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 画屏高度\x3c\/span\x3e\n    sprite: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片 image 对象\x3c\/span\x3e\n  };\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e params = opts || {};\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.canvas = canvas;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ctx = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options = _extends({}, defaults, params);\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.image) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27请传入图片对象\x27\x3c\/span\x3e);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里的取 Math.min() 的原因是，在 safari 下面，如果图片的大小超过了画布的大小，那么将不会渲染任何图像\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所以在这里，我们去画布和图片中的小者。\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.width = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.canvas.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.sprite.width);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.height = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.canvas.height, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.sprite.height);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfPerLine) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfPerLine = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfFrames || \x3cspan class=\x22hljs-number\x22\x3e9999\x3c\/span\x3e;\n  }\n}\n\nSprite.prototype.render = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ctx.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.height);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 核心绘制代码，主要使用了 canvas.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) API\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.options.frameIndex % this.options.numberOfPerLine 每次求余数，判断是否换行\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Math.floor(this.options.frameIndex \/ this.options.numberOfPerLine)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ctx.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.sprite, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.width * (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.frameIndex % \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfPerLine), \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.height * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.frameIndex \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfPerLine), \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.height, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.height);\n}\n\nSprite.prototype.update = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.tickCount\x2b\x2b;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 控制帧率的核心部分，在每个绘制时间点，判断当前的计数器是否大于我们传入的值\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.tickCount \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.ticksPerFrame) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.tickCount = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动画循环判断\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.frameIndex \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.numberOfFrames - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.frameIndex\x2b\x2b;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.loop) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每次循环都从给定的 startFrameIndex 开始\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.frameIndex = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options.startFrameIndex;\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里，我们的精灵类基本完成了，接下来看下具体在业务代码中如何使用它\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var spriteCanvas = document.getElementById(\x27spriteCanvas\x27);\nspriteCanvas.width = 138;\nspriteCanvas.height = 308;\nvar isSpriteLoaded = false;\nvar spriteImage = new Image();\nvar sprite;\n\n\/\/ 这里有个 IE 下的 BUG，如果我们的 sprite 在图片没有加载完全就执行\n\/\/ 那么在 IE 下面会抛出一个 DOM Exception\n\/\/ 因此我们将 Sprite 初始化放在了 image.onlaod 回调函数中执行\nsprite.onload = function () {\n  sprite = new Sprite(spriteCanvas, {\n    sprite: spriteImage,\n    loop: true,\n    numberOfFrames: 92,\n    ticksPerFrame: 3\n  });\n\n  spriteAnimate();\n}\n\nsprite.src = \x27xxxxx\/sprite.jpg\x27;\n\nfunction spriteAnimate() {\n  requestAnimationFrame(spriteAnimate);\n  sprite.render();\n  sprite.update();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spriteCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27spriteCanvas\x27\x3c\/span\x3e);\nspriteCanvas.width = \x3cspan class=\x22hljs-number\x22\x3e138\x3c\/span\x3e;\nspriteCanvas.height = \x3cspan class=\x22hljs-number\x22\x3e308\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isSpriteLoaded = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spriteImage = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e sprite;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里有个 IE 下的 BUG，如果我们的 sprite 在图片没有加载完全就执行\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 那么在 IE 下面会抛出一个 DOM Exception\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 因此我们将 Sprite 初始化放在了 image.onlaod 回调函数中执行\x3c\/span\x3e\nsprite.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  sprite = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Sprite(spriteCanvas, {\n    \x3cspan class=\x22hljs-attr\x22\x3esprite\x3c\/span\x3e: spriteImage,\n    \x3cspan class=\x22hljs-attr\x22\x3eloop\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3enumberOfFrames\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e92\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eticksPerFrame\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n  });\n\n  spriteAnimate();\n}\n\nsprite.src = \x3cspan class=\x22hljs-string\x22\x3e\x27xxxxx\/sprite.jpg\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3espriteAnimate\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  requestAnimationFrame(spriteAnimate);\n  sprite.render();\n  sprite.update();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e文章到这里基本完成了，想要看具体效果的同学，可以去这里查看\x3cbr\x3e传送门： \x3ca href=\x22https:\/\/www.meizu.com\/pro7\/fenetre\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e水母动画\x3c\/a\x3e， \x3ca href=\x22https:\/\/www.meizu.com\/pro7\/summary\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e蜂鸟动画\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e参考资料\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/CanvasRenderingContext2D\/drawImage\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/CanvasRenderingContext2D\/drawImage\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.williammalone.com\/articles\/create-html5-canvas-javascript-sprite-animation\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.williammalone.com\/articles\/create-html5-canvas-javascript-sprite-animation\/\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用 canvas 实现精灵动画</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010435543">https://segmentfault.com/a/1190000010435543</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qnkq2h1jixj/" target="_blank">https://alili.tech/archive/qnkq2h1jixj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/sj57jxyoook/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/qsw902j95k/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（下）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/nnpmjlot58j/">IndexedDB使用与出坑指南<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/alvlbas9oai/">JS事件模型<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/u0pzym8k36o/">JS练习实例--编写经典小游戏俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/khwpyk5yz8q/">JavaScript 事件代理和委托<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/kuocl6lc3n/">JavaScript 版俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/n8bk54lyrf/">Promise学习:基础入门<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/7bk7u30qncb/">Redux 入坑进阶 - 源码解析<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/853kqfmqmf7/">Snap.svg 基本知识入门<aside class="dates">2019-02-03</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>