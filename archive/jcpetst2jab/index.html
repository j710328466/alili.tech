<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="react开发教程（五）生命周期"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>react开发教程（五）生命周期 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jcpetst2jab/",
				"appid": "1613049289050283", 
				"title": "react开发教程（五）生命周期 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-16T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/nmyfcsv40zd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/e6ndmck91n9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&text=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&text=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&title=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&is_video=false&description=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&title=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&title=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&title=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjcpetst2jab%2f&title=react%e5%bc%80%e5%8f%91%e6%95%99%e7%a8%8b%ef%bc%88%e4%ba%94%ef%bc%89%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">react开发教程（五）生命周期</h1><div class="meta"><div class="postdate"><time datetime="2019-01-16" itemprop="datePublished">2019-01-16</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在组件的整个生命周期中，随着该组件的props或者state发生改变，其DOM表现也会有相应的变化。一个组件就是一个状态机，对于特定地输入，它总返回一致的输出。\x3c\/p\x3e\n\x3cp\x3e一个React组件的生命周期分为三个部分：实例化、存在期和销毁时。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e实例化\x3c\/h1\x3e\n\x3cp\x3e当组件在客户端被实例化，第一次被创建时，以下方法依次被调用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3egetDefaultProps 设置属性的默认值。  es6对应  deftaultProps\x3c\/li\x3e\n\x3cli\x3egetInitialState 用来初始化每个实例的state。 es6 对应 constructor函数中的this.state\x3c\/li\x3e\n\x3cli\x3ecomponentWillMount 渲染前\x3c\/li\x3e\n\x3cli\x3erender  渲染\x3c\/li\x3e\n\x3cli\x3ecomponentDidMount  渲染后\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e当组件在服务端被实例化，首次被创建时，以下方法依次被调用：\x3c\/p\x3e\n\x3cp\x3e1、getDefaultProps  \x3cbr\x3e2、getInitialState\x3cbr\x3e3、componentWillMount\x3cbr\x3e4、render\x3c\/p\x3e\n\x3cp\x3ecomponentDidMount 不会在服务端被渲染的过程中调用。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3egetDefaultProps\x3c\/h2\x3e\n\x3cp\x3e对于每个组件实例来讲，这个方法只会调用一次，该组件类的所有后续应用，getDefaultPops 将不会再被调用，其返回的对象可以用于设置默认的 props(properties的缩写) 值。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3egetInitialState\x3c\/h2\x3e\n\x3cp\x3e对于组件的每个实例来说，这个方法的调用有且只有一次，用来初始化每个实例的 state，在这个方法里，可以访问组件的 props。每一个React组件都有自己的 state，其与 props 的区别在于 state只存在组件的内部，props 在所有实例中共享。\x3c\/p\x3e\n\x3cp\x3egetInitialState 和 getDefaultPops 的调用是有区别的，getDefaultPops 是对于组件类来说只调用一次，后续该类的应用都不会被调用，而 getInitialState 是对于每个组件实例来讲都会调用，并且只调一次。\x3c\/p\x3e\n\x3cp\x3e每次修改 state，都会重新渲染组件，实例化后通过 state 更新组件，会依次调用下列方法：\x3cbr\x3e1、shouldComponentUpdate\x3cbr\x3e2、componentWillUpdate\x3cbr\x3e3、render\x3cbr\x3e4、componentDidUpdate\x3c\/p\x3e\n\x3cp\x3e但是不要直接修改 this.state，要通过 this.setState 方法来修改。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3ecomponentWillMount\x3c\/h2\x3e\n\x3cp\x3e该方法在首次渲染之前调用，也是再 render 方法调用之前修改 state 的最后一次机会。\x3c\/p\x3e\n\x3cp\x3erender\x3cbr\x3e该方法会创建一个虚拟DOM，用来表示组件的输出。对于一个组件来讲，render方法是唯一一个必需的方法。render方法需要满足下面几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e只能通过 this.props 和 this.state 访问数据（不能修改）\x3c\/li\x3e\n\x3cli\x3e可以返回 null,false 或者任何React组件\x3c\/li\x3e\n\x3cli\x3e只能出现一个顶级组件，不能返回一组元素\x3c\/li\x3e\n\x3cli\x3e不能改变组件的状态\x3c\/li\x3e\n\x3cli\x3e不能修改DOM的输出\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3erender方法返回的结果并不是真正的DOM元素，而是一个虚拟的表现，类似于一个DOM tree的结构的对象。react之所以效率高，就是这个原因。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3ecomponentDidMount\x3c\/h2\x3e\n\x3cp\x3e该方法不会在服务端被渲染的过程中调用。该方法被调用时，已经渲染出真实的 DOM，可以在该方法中通过 this.refs 访问到真实的 DOM。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\n\nclass App extends Component {\n  static defaultProps = {\n    name:\x26quot;默认值\x26quot;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        num : 0\n    };\n    this.addNum = this.addNum.bind(this);\n  }\n\n  addNum(e) {\n    e.preventDefault();\n    var num = \x2b\x2bthis.state.num;\n    this.setState({\n        num:num\n    })\n  }\n\n  componentWillMount() {\n    this.setState({\n        num:10\n    })\n  }\n  render() {\n\n    return (\n      \x3cdiv className=\x26quot;App\x26quot;\x3e\n        \x3cdiv className=\x26quot;App-header\x26quot; ref=\x26quot;header\x26quot;\x3e\n          \x3cimg src={logo} className=\x26quot;App-logo\x26quot; alt=\x26quot;logo\x26quot; \/\x3e\n          \x3ch2\x3eWelcome to React{this.props.name}\x3c\/h2\x3e\n        \x3c\/div\x3e\n        \x3cp className=\x26quot;App-intro\x26quot;\x3e\n          To get started, edit \x3ccode\x3esrc\/App.js\x3c\/code\x3e and save to reload.\n        \x3c\/p\x3e\n        \x3cbutton onClick={this.addNum}\x3e{this.state.num}\x3c\/button\x3e\n      \x3c\/div\x3e\n    );\n  }\n\n  componentDidMount() {\n    console.log(this.refs.header)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3e\n\n\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e defaultProps = {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22默认值\x22\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n        \x3cspan class=\x22hljs-attr\x22\x3enum\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.addNum = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.addNum.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n  }\n\n  addNum(e) {\n    e.preventDefault();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e num = \x2b\x2b\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.num;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        \x3cspan class=\x22hljs-attr\x22\x3enum\x3c\/span\x3e:num\n    })\n  }\n\n  componentWillMount() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        \x3cspan class=\x22hljs-attr\x22\x3enum\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n    })\n  }\n  render() {\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App-header\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22header\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{logo}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App-logo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22logo\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3eWelcome to React{this.props.name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App-intro\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          To get started, edit \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3esrc\/App.js\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3e and save to reload.\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.addNum}\x3c\/span\x3e\x26gt;\x3c\/span\x3e{this.state.num}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n\n  componentDidMount() {\n    console.log(this.refs.header)\n  }\n}\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，由于 this.refs.[refName] 属性获取的是真实 DOM ，所以必须等到虚拟 DOM 插入文档以后，才能使用这个属性，否则会报错。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3e存在期\x3c\/h1\x3e\n\x3cp\x3e此时组件已经渲染好并且用户可以与它进行交互，比如鼠标点击，手指点按，或者其它的一些事件，导致应用状态的改变，你将会看到下面的方法依次被调用\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ecomponentWillReceiveProps   props在父组件改变时执行\x3c\/li\x3e\n\x3cli\x3eshouldComponentUpdate    如果你确定组件的 props 或者 state 的改变不需要重新渲染，可以通过在这个方法里通过返回 false 来阻止组件的重新渲染，返回 `false 则不会执行 render 以及后面的 componentWillUpdate，componentDidUpdate 方法\x3c\/li\x3e\n\x3cli\x3ecomponentWillUpdate    这个方法和 componentWillMount 类似，在组件接收到了新的 props 或者 state 即将进行重新渲染前，componentWillUpdate(object nextProps, object nextState) 会被调用，\x3cstrong\x3e注意不要在此方面里再去更新 props 或者 state。\x3c\/strong\x3e\n\x3c\/li\x3e\n\x3cli\x3erender\x3c\/li\x3e\n\x3cli\x3ecomponentDidUpdate    这个方法和 \x26lt;kdb\x26gt;componentDidMount\x26lt;／kdb\x26gt; 类似，在组件重新被渲染之后，componentDidUpdate(object prevProps, object prevState) 会被调用。可以在这里访问并修改 DOM。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e销毁时\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3ecomponentWillUnmount\x3c\/h2\x3e\n\x3cp\x3e每当React使用完一个组件，这个组件必须从 DOM 中卸载后被销毁，此时 componentWillUnmout 会被执行，完成所有的清理和销毁工作，在 componentDidMount 中添加的任务都需要再该方法中撤销，如创建的定时器或事件监听器。\x3c\/p\x3e\n\x3cp\x3e当再次装载组件时，以下方法会被依次调用：\x3c\/p\x3e\n\x3cp\x3e1、getInitialState\x3cbr\x3e2、componentWillMount\x3cbr\x3e3、render\x3cbr\x3e4、componentDidMount\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3ecreateClass和ES6的不同\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3eES6 class\x3c\/strong\x3e\x3cbr\x3estatic propTypes\x3cbr\x3estatic defaultProps\x3cbr\x3econstructor (this.state)\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e对应createClass\x3c\/strong\x3e\x3cbr\x3epropTypes\x3cbr\x3egetDefaultProps\x3cbr\x3egetInitialState\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e整体流程\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3eES6 class\x3c\/h2\x3e\n\x3cblockquote\x3e\n\x3cp\x3estatic propTypes props值的类型检查 static defaultProps   设置属性的默认值\x3cbr\x3econstructor ( this.state )   初始化每个实例的state\x3c\/p\x3e\n\x3cp\x3ecomponentWillMount   该方法在首次渲染之前调用，也是再 render 方法调用之前修改 state 的最后一次机会。\x3cbr\x3ecomponentDidMount    该方法被调用时，已经渲染出真实的 DOM，可以在该方法中通过 this.refs 访问到真实的\x3cbr\x3eDOM。\x3c\/p\x3e\n\x3cp\x3ecomponentWillUnmount  每当React使用完一个组件，这个组件必须从 DOM 中卸载后被销毁，此时会被执行\x3cbr\x3ecomponentWillReceiveProps  props在父组件改变时执行 shouldComponentUpdate \x3cbr\x3e如果你确定组件的 props 或者 state 的改变不需要重新渲染，可以通过在这个方法里通过返回 false 来阻止组件的重新渲染，返回\x3cbr\x3e`false 则不会执行 render 以及后面的 componentWillUpdate，componentDidUpdate 方法\x3c\/p\x3e\n\x3cp\x3ecomponentWillUpdate  这个方法和 componentWillMount 类似，在组件接收到了新的 props 或者\x3cbr\x3estate 即将进行重新渲染前， componentDidUpdate   这个方法和\x3cbr\x3e\x26lt;kdb\x26gt;componentDidMount\x26lt;／kdb\x26gt; 类似，在组件重新被渲染之后，会被调用。可以在这里访问并修改 DOM。 render\x3cbr\x3e渲染组件\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e上一篇：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009139532\x22\x3ereact开发教程（四）React数据流\x3c\/a\x3e\x3cbr\x3e下一篇：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010593738\x22 target=\x22_blank\x22\x3ereact开发教程（六）React与DOM\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>react开发教程（五）生命周期</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009153245">https://segmentfault.com/a/1190000009153245</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jcpetst2jab/" target="_blank">https://alili.tech/archive/jcpetst2jab/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>