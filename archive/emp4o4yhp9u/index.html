<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript专题之跟着 underscore 学节流"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript专题之跟着 underscore 学节流 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/emp4o4yhp9u/",
				"appid": "1613049289050283", 
				"title": "JavaScript专题之跟着 underscore 学节流 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9nl40hbsqrp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/s4h2hdhgjmk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&text=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&text=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&title=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&is_video=false&description=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&title=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&title=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&title=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2femp4o4yhp9u%2f&title=JavaScript%e4%b8%93%e9%a2%98%e4%b9%8b%e8%b7%9f%e7%9d%80%20underscore%20%e5%ad%a6%e8%8a%82%e6%b5%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript专题之跟着 underscore 学节流</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3eJavaScript 专题系列第二篇，讲解节流，带你从零实现一个 underscore 的 throttle 函数\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/issues\/22\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《JavaScript专题之跟着underscore学防抖》\x3c\/a\x3e中，我们了解了为什么要限制事件的频繁触发，以及如何做限制：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3edebounce 防抖\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ethrottle 节流\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e今天重点讲讲节流的实现。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e节流\x3c\/h2\x3e\n\x3cp\x3e节流的原理很简单：\x3c\/p\x3e\n\x3cp\x3e如果你持续触发事件，每隔一段时间，只执行一次事件。\x3c\/p\x3e\n\x3cp\x3e根据首次是否执行以及结束后是否执行，效果有所不同，实现的方式也有所不同。\x3cbr\x3e我们用 leading 代表首次是否执行，trailing 代表结束后是否再执行一次。\x3c\/p\x3e\n\x3cp\x3e关于节流的实现，有两种主流的实现方式，一种是使用时间戳，一种是设置定时器。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e使用时间戳\x3c\/h2\x3e\n\x3cp\x3e让我们来看第一种方法：使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。\x3c\/p\x3e\n\x3cp\x3e看了这个表述，是不是感觉已经可以写出代码了…… 让我们来写第一版的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 第一版\nfunction throttle(func, wait) {\n    var context, args;\n    var previous = 0;\n\n    return function() {\n        var now = \x2bnew Date();\n        context = this;\n        args = arguments;\n        if (now - previous \x3e wait) {\n            func.apply(context, args);\n            previous = now;\n        }\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第一版\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethrottle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, wait\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e context, args;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e previous = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e now = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n        context = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        args = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (now - previous \x26gt; wait) {\n            func.apply(context, args);\n            previous = now;\n        }\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e例子依然是用讲 debounce 中的例子，如果你要使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22container.onmousemove = throttle(getUserAction, 1000);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3econtainer.onmousemove = throttle(getUserAction, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e效果演示如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle1.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle1.gif\x22 alt=\x22使用时间戳\x22 title=\x22使用时间戳\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以看到：当鼠标移入的时候，事件立刻执行，每过 1s 会执行一次，如果在 4.2s 停止触发，以后不会再执行事件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e使用定时器\x3c\/h2\x3e\n\x3cp\x3e接下来，我们讲讲第二种实现方式，使用定时器。\x3c\/p\x3e\n\x3cp\x3e当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 第二版\nfunction throttle(func, wait) {\n    var timeout;\n    var previous = 0;\n\n    return function() {\n        context = this;\n        args = arguments;\n        if (!timeout) {\n            timeout = setTimeout(function(){\n                timeout = null;\n                func.apply(context, args)\n            }, wait)\n        }\n\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第二版\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethrottle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, wait\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timeout;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e previous = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        context = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        args = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!timeout) {\n            timeout = setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n                timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n                func.apply(context, args)\n            }, wait)\n        }\n\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了让效果更加明显，我们设置 wait 的时间为 3s，效果演示如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle2.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle2.gif\x22 alt=\x22使用定时器\x22 title=\x22使用定时器\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以看到：当鼠标移入的时候，事件不会立刻执行，晃了 3s 后终于执行了一次，此后每 3s 执行一次，当数字显示为 3 的时候，立刻移出鼠标，相当于大约 9.2s 的时候停止触发，但是依然会在第 12s 的时候执行一次事件。\x3c\/p\x3e\n\x3cp\x3e所以比较两个方法：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e第一种事件会立刻执行，第二种事件会在 n 秒后第一次执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第一种事件停止触发后没有办法再执行事件，第二种事件停止触发后依然会再执行一次事件\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e双剑合璧\x3c\/h2\x3e\n\x3cp\x3e那我们想要一个什么样的呢？\x3c\/p\x3e\n\x3cp\x3e有人就说了：我想要一个有头有尾的！就是鼠标移入能立刻执行，停止触发的时候还能再执行一次！\x3c\/p\x3e\n\x3cp\x3e所以我们综合两者的优势，然后双剑合璧，写一版代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 第三版\nfunction throttle(func, wait) {\n    var timeout, context, args, result;\n    var previous = 0;\n\n    var later = function() {\n        previous = \x2bnew Date();\n        timeout = null;\n        func.apply(context, args)\n    };\n\n    var throttled = function() {\n        var now = \x2bnew Date();\n        \/\/下次触发 func 剩余的时间\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n         \/\/ 如果没有剩余的时间了或者你改了系统时间\n        if (remaining \x3c= 0 || remaining \x3e wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n        } else if (!timeout) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    return throttled;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第三版\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethrottle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, wait\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timeout, context, args, result;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e previous = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e later = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        previous = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n        timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        func.apply(context, args)\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e throttled = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e now = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/下次触发 func 剩余的时间\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e remaining = wait - (now - previous);\n        context = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        args = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e;\n         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果没有剩余的时间了或者你改了系统时间\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (remaining \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || remaining \x26gt; wait) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timeout) {\n                clearTimeout(timeout);\n                timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n            }\n            previous = now;\n            func.apply(context, args);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!timeout) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e throttled;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e效果演示如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle3.gif\x22 src=\x22https:\/\/static.alili.techhttps:\/\/github.com\/mqyqingfeng\/Blog\/raw\/master\/Images\/throttle\/throttle3.gif\x22 alt=\x22throttle3\x22 title=\x22throttle3\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以看到：鼠标移入，事件立刻执行，晃了 3s，事件再一次执行，当数字变成 3 的时候，也就是 6s 后，我们立刻移出鼠标，停止触发事件，9s 的时候，依然会再执行一次事件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e优化\x3c\/h2\x3e\n\x3cp\x3e但是我有时也希望无头有尾，或者有头无尾，这个咋办？\x3c\/p\x3e\n\x3cp\x3e那我们设置个 options 作为第三个参数，然后根据传的值判断到底哪种效果，我们约定:\x3c\/p\x3e\n\x3cp\x3eleading：false 表示禁用第一次执行\x3cbr\x3etrailing: false 表示禁用停止触发的回调\x3c\/p\x3e\n\x3cp\x3e我们来改一下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 第四版\nfunction throttle(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n        var now = new Date().getTime();\n        if (!previous \x26amp;\x26amp; options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining \x3c= 0 || remaining \x3e wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout \x26amp;\x26amp; options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    return throttled;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第四版\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethrottle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, wait, options\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timeout, context, args, result;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e previous = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!options) options = {};\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e later = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        previous = options.leading === \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().getTime();\n        timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        func.apply(context, args);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!timeout) context = args = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e throttled = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e now = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().getTime();\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!previous \x26amp;\x26amp; options.leading === \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e) previous = now;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e remaining = wait - (now - previous);\n        context = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        args = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (remaining \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || remaining \x26gt; wait) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timeout) {\n                clearTimeout(timeout);\n                timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n            }\n            previous = now;\n            func.apply(context, args);\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!timeout) context = args = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!timeout \x26amp;\x26amp; options.trailing !== \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e throttled;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e取消\x3c\/h2\x3e\n\x3cp\x3e在 debounce 的实现中，我们加了一个 cancel 方法，throttle 我们也加个 cancel 方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 第五版 非完整代码，完整代码请查看最后的演示代码链接\n...\nthrottled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = null;\n}\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第五版 非完整代码，完整代码请查看最后的演示代码链接\x3c\/span\x3e\n...\nthrottled.cancel = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    clearTimeout(timeout);\n    previous = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    timeout = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n}\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e注意\x3c\/h2\x3e\n\x3cp\x3e我们要注意 underscore 的实现中有这样一个问题：\x3c\/p\x3e\n\x3cp\x3e那就是 \x3ccode\x3eleading：false\x3c\/code\x3e 和 \x3ccode\x3etrailing: false\x3c\/code\x3e 不能同时设置。\x3c\/p\x3e\n\x3cp\x3e如果同时设置的话，比如当你将鼠标移出的时候，因为 trailing 设置为 false，停止触发的时候不会设置定时器，所以只要再过了设置的时间，再移入的话，就会立刻执行，就违反了 leading: false，bug 就出来了，所以，这个 throttle 只有三种用法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22container.onmousemove = throttle(getUserAction, 1000);\ncontainer.onmousemove = throttle(getUserAction, 1000, {\n    leading: false\n});\ncontainer.onmousemove = throttle(getUserAction, 1000, {\n    trailing: false\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3econtainer.onmousemove = throttle(getUserAction, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\ncontainer.onmousemove = throttle(getUserAction, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3eleading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n});\ncontainer.onmousemove = throttle(getUserAction, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3etrailing\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e至此我们已经完整实现了一个 underscore 中的 throttle 函数，恭喜，撒花！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e演示代码\x3c\/h2\x3e\n\x3cp\x3e相关的代码可以在 \x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/tree\/master\/demos\/throttle\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGithub 博客仓库\x3c\/a\x3e 中找到\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e专题系列\x3c\/h2\x3e\n\x3cp\x3eJavaScript专题系列目录地址：\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/mqyqingfeng\/Blog\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3eJavaScript专题系列预计写二十篇左右，主要研究日常开发中一些功能点的实现，比如防抖、节流、去重、类型判断、拷贝、最值、扁平、柯里、递归、乱序、排序等，特点是研(chao)究(xi) underscore 和 jQuery 的实现方式。\x3c\/p\x3e\n\x3cp\x3e如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎 star，对作者也是一种鼓励。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript专题之跟着 underscore 学节流</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009831691">https://segmentfault.com/a/1190000009831691</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/emp4o4yhp9u/" target="_blank">https://alili.tech/archive/emp4o4yhp9u/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>