<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="给你的网站穿上外衣 － HTTPS 免费部署指南"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>给你的网站穿上外衣 － HTTPS 免费部署指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/eq3kff3zi9/",
				"appid": "1613049289050283", 
				"title": "给你的网站穿上外衣 － HTTPS 免费部署指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-03T02:30:39"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/8txeuyn3gb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ce5g8qy34sf/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&text=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&text=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&title=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&is_video=false&description=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&title=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&title=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&title=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feq3kff3zi9%2f&title=%e7%bb%99%e4%bd%a0%e7%9a%84%e7%bd%91%e7%ab%99%e7%a9%bf%e4%b8%8a%e5%a4%96%e8%a1%a3%20%ef%bc%8d%20HTTPS%20%e5%85%8d%e8%b4%b9%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">给你的网站穿上外衣 － HTTPS 免费部署指南</h1><div class="meta"><div class="postdate"><time datetime="2019-02-03" itemprop="datePublished">2019-02-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e前言\x3c\/h3\x3e\n\x3cp\x3e随着国内各大网站纷纷开启全站 HTTPS 时代，HTTPS 已不再是支付等敏感操作过程的专属，开启 HTTPS 对于个人网站或者小型网站也不再遥不可及。 今天博主就以自己的网站 www.rapospectre.com 为例叙述一下为自己网站点亮 HTTPS 小绿锁的过程。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eHTTP 和 HTTPS\x3c\/h3\x3e\n\x3cp\x3eHTTPS（ Hypertext Transfer Protocol over Secure Socket Layer ），是以安全为目标的 HTTP 通道，简单讲是 HTTP 的安全版。即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL ，因此加密的详细内容就需要 SSL 。 它是一个 URI scheme（ 抽象标识符体系 ），句法类同 http :体系。用于安全的 HTTP 数据传输。 \x3ca href=\x22https:URL\x22\x3ehttps:URL\x3c\/a\x3e 表明它使用了 HTTP，但 HTTPS 存在不同于 HTTP 的默认端口及一个加密\/身份验证层（在 HTTP 与 TCP 之间）。这个系统的最初研发由网景公司进行，提供了身份验证与加密通讯方法，现在它被广泛用于万维网上安全敏感的通讯，例如交易支付方面。\x3c\/p\x3e\n\x3cp\x3eHTTP 超文本传输协议 ( HTTP-Hypertext transfer protocol ) 是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。\x3c\/p\x3e\n\x3cp\x3e从概念里可以看到，要开启 HTTPS  至关重要的一点就是 ssl 层的身份验证，而身份验证需要用到 ssl 证书，以前少有免费 ssl 证书，所以小站基本不会选择 https ，而现在网上提供个人免费 ssl 证书的机构越来越多，这使得免费升级站点为 https 成为可能。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1. 申请 SSL 证书\x3c\/h3\x3e\n\x3cp\x3e网上已经有不少机构提供个人免费 ssl 证书，有效期几个月到几年不等，博主使用的是 \x3ca href=\x22https:\/\/www.startssl.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eStartSSL\x3c\/a\x3e, 申请成功后有效期 3 年，到期后可免费续租。 具体申请过程不复杂，注册后根据提示验证网站 \x2b 生成证书即可，如果不清楚可以 \x3ca href=\x22https:\/\/www.google.com\/search\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGoogle 一下\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e要注意 StartSSL 验证网站拥有者时是给域名所有者的邮箱发验证邮件，如果域名开启了隐私保护请暂时关闭。\x3c\/p\x3e\n\x3cp\x3e然后在自己服务器中生成 SSL 证书的 csr ，记住生成输入的秘密，之后要用到：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22openssl req -new -sha256 -key rapospectre.com_secure.key -out rapospectre.com.csr\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eopenssl req -new -sha256 -key rapospectre\x3cspan class=\x22hljs-selector-class\x22\x3e.com_secure\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.key\x3c\/span\x3e -out rapospectre\x3cspan class=\x22hljs-selector-class\x22\x3e.com\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.csr\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e假设以上文件生成在 \x3ccode\x3e\/var\/tmp\x3c\/code\x3e 文件夹下\x3c\/p\x3e\n\x3cp\x3e在 StartSSL 填写 csr 文件内容，生成 SSL 证书并下载， 生成成果后如图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ocwt4ikj4.bkt.clouddn.com\/2BFB5197.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ocwt4ikj4.bkt.clouddn.com\/2BFB5197.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击 Retrieve 下载证书，解压缩后包含各种服务器的 crt ，博主使用 nginx 做反代，所以选择 nginxserver 解压缩后得到 \x3ccode\x3ewww.rapospectre.com_bundle.crt\x3c\/code\x3e 将此文件上传到服务器，假设传到 \x3ccode\x3e\/var\/tmp\/\x3c\/code\x3e 文件夹\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e2. 配置服务器\x3c\/h3\x3e\n\x3cp\x3e以 nginx 为例，打开 \x3ccode\x3e\/etc\/nginx\/nginx.conf\x3c\/code\x3e，加入配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 server {\n        listen       443 ssl;\n        ssl_certificate \/var\/tmp\/www.rapospectre.com_bundle.crt;\n        ssl_certificate_key \/var\/tmp\/rapospectre.com_secure.key;\n        ssl_prefer_server_ciphers on;\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        #选择特定的加密方式, 避免已知的漏洞\n        ssl_ciphers \x27kEECDH\x2bECDSA\x2bAES128 kEECDH\x2bECDSA\x2bAES256 kEECDH\x2bAES128 kEECDH\x2bAES256 kEDH\x2bAES128 kEDH\x2bAES256 DES-CBC3-SHA \x2bSHA !aNULL !eNULL !LOW !MD5 !EXP !DSS !PSK !SRP !kECDH !CAMELLIA !RC4 !SEED\x27;\n        #让浏览器记住直接访问 https 的网址, 不再去 http 重定向。\n        add_header Strict-Transport-Security \x27max-age=31536000; preload\x27;\n        add_header X-Frame-Options DENY;\n        ssl_session_cache   shared:SSL:10m;\n        ssl_session_timeout 10m;\n        keepalive_timeout 70;\n        ssl_dhparam \/var\/tmp\/dhparam2048.pem;\n        #禁止服务器自动解析资源类型\n        add_header X-Content-Type-Options nosniff;\n        #防XSS攻擊\n        add_header X-Xss-Protection 1;\n        server_name  www.rapospectre.com rapospectre.com;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nginx\x22\x3e\x3ccode class=\x22shell\x22\x3e \x3cspan class=\x22hljs-section\x22\x3eserver\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3elisten\x3c\/span\x3e       \x3cspan class=\x22hljs-number\x22\x3e443\x3c\/span\x3e ssl;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_certificate\x3c\/span\x3e \/var\/tmp\/www.rapospectre.com_bundle.crt;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_certificate_key\x3c\/span\x3e \/var\/tmp\/rapospectre.com_secure.key;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_prefer_server_ciphers\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_protocols\x3c\/span\x3e TLSv1 TLSv1.\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e TLSv1.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e#选择特定的加密方式, 避免已知的漏洞\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_ciphers\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27kEECDH\x2bECDSA\x2bAES128 kEECDH\x2bECDSA\x2bAES256 kEECDH\x2bAES128 kEECDH\x2bAES256 kEDH\x2bAES128 kEDH\x2bAES256 DES-CBC3-SHA \x2bSHA !aNULL !eNULL !LOW !MD5 !EXP !DSS !PSK !SRP !kECDH !CAMELLIA !RC4 !SEED\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e#让浏览器记住直接访问 https 的网址, 不再去 http 重定向。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eadd_header\x3c\/span\x3e Strict-Transport-Security \x3cspan class=\x22hljs-string\x22\x3e\x27max-age=31536000; preload\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eadd_header\x3c\/span\x3e X-Frame-Options DENY;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_session_cache\x3c\/span\x3e   shared:SSL:\x3cspan class=\x22hljs-number\x22\x3e10m\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_session_timeout\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e10m\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ekeepalive_timeout\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e70\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3essl_dhparam\x3c\/span\x3e \/var\/tmp\/dhparam2048.pem;\n        \x3cspan class=\x22hljs-comment\x22\x3e#禁止服务器自动解析资源类型\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eadd_header\x3c\/span\x3e X-Content-Type-Options nosniff;\n        \x3cspan class=\x22hljs-comment\x22\x3e#防XSS攻擊\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eadd_header\x3c\/span\x3e X-Xss-Protection \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eserver_name\x3c\/span\x3e  www.rapospectre.com rapospectre.com;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在之前的 80 端口进行重定向配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22server {\n    listen 80;\n    server_name rapospectre.com www.rapospectre.com;\n    return 301 https:\/\/www.rapospectre.com$request_uri;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nginx\x22\x3e\x3ccode class=\x22shell\x22\x3e\x3cspan class=\x22hljs-section\x22\x3eserver\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3elisten\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eserver_name\x3c\/span\x3e rapospectre.com www.rapospectre.com;\n    \x3cspan class=\x22hljs-attribute\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e301\x3c\/span\x3e https:\/\/www.rapospectre.com\x3cspan class=\x22hljs-variable\x22\x3e$request_uri\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e3. HTTP 替换\x3c\/h3\x3e\n\x3cp\x3e将网站所有以 http 方式获取的资源全部改为 https 方式或自动方式获取, eg：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript src=\x26quot;http:\/\/xx.cdn.com\/jquery.js\x26quot;\x3e\x3c\/script\x3e\n改为\n\x3cscript src=\x26quot;https:\/\/xx.cdn.com\/jquery.js\x26quot;\x3e\x3c\/script\x3e\n或\n\x3cscript src=\x26quot;\/\/xx.cdn.com\/jquery.js\x26quot;\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22shell\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/xx.cdn.com\/jquery.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n改为\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/xx.cdn.com\/jquery.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n或\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\/xx.cdn.com\/jquery.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e重启服务器，提示输入之前生成 csr 的密码，输入密码，重启成功，访问 \x3ca href=\x22https:\/\/www.rapospectre.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.rapospectre.com\x3c\/a\x3e 可以看到 HTTPS 已经正常工作！\x3c\/p\x3e\n\x3cp\x3e顺手来一发 \x3ca href=\x22https:\/\/www.ssllabs.com\/ssltest\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSSLLABS\x3c\/a\x3e测试，wtf 只有 F？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ocwt4ikj4.bkt.clouddn.com\/60FBAB7C.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ocwt4ikj4.bkt.clouddn.com\/60FBAB7C.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看图发现因为\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eThis server is vulnerable to the OpenSSL Padding Oracle vulunerability ( CVE-2016-2107 )\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e原来是 OpenSSL 漏洞的锅，升级 OpenSSL 到 1.0.2h 版 （ 后续版本应该也可以，博主一开始升级到了最新的 1.1.0a 结果服务器挂了 ） 即可修复漏洞：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/gist.github.com\/ArturT\/bc8836d3bedff801dc324ac959050d12\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFix OpenSSL Padding Oracle vulnerability (CVE-2016-2107) - Ubuntu 14.04\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ArturT\/bc8836d3bedff801dc324ac959050d12\x22 data-typeid=\x221\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# Based on http:\/\/fearby.com\/article\/update-openssl-on-a-digital-ocean-vm\/\n\n$ apt-get update\n$ apt-get dist-upgrade\n\n$ wget ftp:\/\/ftp.openssl.org\/source\/old\/1.0.2\/openssl-1.0.2h.tar.gz\n$ tar -xvzf openssl-1.0.2h.tar.gz\n$ cd openssl-1.0.2h\n$ .\/config --prefix=\/usr\/\n$ make depend\n$ sudo make install\n$ openssl version\n# OpenSSL 1.0.2h  3 May 2016\n\n# now restart your nginx or other server\n$ nginx -s reload\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs elixir\x22\x3e\x3ccode class=\x22shell\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e# Based on http:\/\/fearby.com\/article\/update-openssl-on-a-digital-ocean-vm\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3eapt-get update\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3eapt-get dist-upgrade\n\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3ewget \x3cspan class=\x22hljs-symbol\x22\x3eftp:\x3c\/span\x3e\/\x3cspan class=\x22hljs-regexp\x22\x3e\/ftp.openssl.org\/source\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/old\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\/openssl-\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3eh.tar.gz\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3etar -xvzf openssl-\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3eh.tar.gz\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3ecd openssl-\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3eh\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3e.\/config --prefix=\x3cspan class=\x22hljs-regexp\x22\x3e\/usr\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3emake depend\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3esudo make install\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3eopenssl version\n\x3cspan class=\x22hljs-comment\x22\x3e# OpenSSL 1.0.2h  3 May 2016\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# now restart your nginx or other server\x3c\/span\x3e\n\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3enginx -s reload\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e4. HTTP2\x3c\/h3\x3e\n\x3cp\x3e开启 http2 ，nginx 在 1.9.5 以后的版本才开始支持 http2 ，之前一直使用的是 spdy 而 ubuntu 自带的 nginx 是 1.4.6 的古董， 所以需要重新编译安装新版的 nginx ，博主选择了安装最新的 nginx 1.11.4:\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 下载 nginx 到 \x3ccode\x3e\/var\/tmp\/nginx\x3c\/code\x3e:\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22wget http:\/\/nginx.org\/download\/nginx-1.11.4.tar.gz\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ewget http:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3enginx.org\x3cspan class=\x22hljs-regexp\x22\x3e\/download\/\x3c\/span\x3enginx-\x3cspan class=\x22hljs-number\x22\x3e1.11\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e.tar.gz\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 解压nginx-1.11.4.tar.gz文件\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22tar zxvf nginx-1.11.4.tar.gz\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3etar\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3ezxvf\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3enginx-1\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.11\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.4\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.tar\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.gz\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. 进入ngixn-1.11.4文件夹\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd nginx-1.2.5\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ecd\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3enginx-1\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.2\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.5\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 查看nginx原来的配置\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22nginx -V\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ebnf\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3enginx -V\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的命令将输出类似如下信息:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22--with-cc-opt=\x27-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2\x27 --with-ld-opt=\x27-Wl,-Bsymbolic-functions -Wl,-z,relro\x27 --prefix=\/usr\/share\/nginx --conf-path=\/etc\/nginx\/nginx.conf --http-log-path=\/var\/log\/nginx\/access.log --error-log-path=\/var\/log\/nginx\/error.log --lock-path=\/var\/lock\/nginx.lock --pid-path=\/run\/nginx.pid --http-client-body-temp-path=\/var\/lib\/nginx\/body --http-fastcgi-temp-path=\/var\/lib\/nginx\/fastcgi --http-proxy-temp-path=\/var\/lib\/nginx\/proxy --http-scgi-temp-path=\/var\/lib\/nginx\/scgi --http-uwsgi-temp-path=\/var\/lib\/nginx\/uwsgi --with-debug --with-pcre-jit --with-ipv6 --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_addition_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_sub_module --with-http_xslt_module --with-mail --with-mail_ssl_module\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xl\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e--\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-cc-opt=\x3cspan class=\x22hljs-string\x22\x3e\x27-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2\x27\x3c\/span\x3e --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-ld-opt=\x3cspan class=\x22hljs-string\x22\x3e\x27-Wl,-Bsymbolic-functions -Wl,-z,relro\x27\x3c\/span\x3e --\x3cspan class=\x22hljs-keyword\x22\x3eprefix\x3c\/span\x3e=\/usr\/share\/nginx --conf-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/etc\/nginx\/nginx.conf --http-\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e\/nginx\/access.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e --error-\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e\/nginx\/error.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e --lock-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lock\/nginx.lock --pid-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/run\/nginx.pid --http-client-body-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/body --http-fastcgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/fastcgi --http-proxy-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/proxy --http-scgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/scgi --http-uwsgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/uwsgi --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-debug --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-pcre-jit --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-ipv6 --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_ssl_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_stub_status_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_realip_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_addition_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_dav_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_geoip_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_gzip_static_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_image_filter_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_sub_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_xslt_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-mail --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-mail_ssl_module\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在后面加上 http2 模块与 上一步中 openssl 源码（ 是源码路径不是安装 ）路径：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22--with-http_v2_module --with-openssl=\/var\/tmp\/ssl\/openssl-1.0.2h\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crystal\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e--\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_v2_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-openssl=\x3cspan class=\x22hljs-regexp\x22\x3e\/var\/tmp\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/ssl\/openssl\x3c\/span\x3e-\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3eh\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意，如果以上信息内包含 \x3ccode\x3e--with-spdy_module\x3c\/code\x3e 请去除，nginx 1.9.5 之后已弃用 spdy\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e5. 执行configure命令，后面跟上原来nginx的配置\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\/configure --with-cc-opt=\x27-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2\x27 --with-ld-opt=\x27-Wl,-Bsymbolic-functions -Wl,-z,relro\x27 --prefix=\/usr\/share\/nginx --conf-path=\/etc\/nginx\/nginx.conf --http-log-path=\/var\/log\/nginx\/access.log --error-log-path=\/var\/log\/nginx\/error.log --lock-path=\/var\/lock\/nginx.lock --pid-path=\/run\/nginx.pid --http-client-body-temp-path=\/var\/lib\/nginx\/body --http-fastcgi-temp-path=\/var\/lib\/nginx\/fastcgi --http-proxy-temp-path=\/var\/lib\/nginx\/proxy --http-scgi-temp-path=\/var\/lib\/nginx\/scgi --http-uwsgi-temp-path=\/var\/lib\/nginx\/uwsgi --with-debug --with-pcre-jit --with-ipv6 --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_addition_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_sub_module --with-http_xslt_module --with-mail --with-mail_ssl_module --with-http_v2_module --with-openssl=\/var\/tmp\/ssl\/openssl-1.0.2h\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xl\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e.\/configure --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-cc-opt=\x3cspan class=\x22hljs-string\x22\x3e\x27-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2\x27\x3c\/span\x3e --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-ld-opt=\x3cspan class=\x22hljs-string\x22\x3e\x27-Wl,-Bsymbolic-functions -Wl,-z,relro\x27\x3c\/span\x3e --\x3cspan class=\x22hljs-keyword\x22\x3eprefix\x3c\/span\x3e=\/usr\/share\/nginx --conf-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/etc\/nginx\/nginx.conf --http-\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e\/nginx\/access.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e --error-\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e\/nginx\/error.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e --lock-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lock\/nginx.lock --pid-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/run\/nginx.pid --http-client-body-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/body --http-fastcgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/fastcgi --http-proxy-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/proxy --http-scgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/scgi --http-uwsgi-temp-\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e=\/var\/lib\/nginx\/uwsgi --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-debug --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-pcre-jit --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-ipv6 --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_ssl_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_stub_status_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_realip_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_addition_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_dav_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_geoip_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_gzip_static_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_image_filter_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_sub_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_xslt_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-mail --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-mail_ssl_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-http_v2_module --\x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e-openssl=\/var\/tmp\/ssl\/openssl-\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3eh\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3econfigure时可能遇到的几个错误:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e--with-http_xslt_module 时提示 the HTTP XSLT module requires the libxml2\/libxslt libraries\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22apt-get install libxml2 libxml2-dev libxslt-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eapt-\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e install libxml2 libxml2-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e libxslt-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e--with-http_image_filter_module 时提示 the HTTP image filter module requires the GD library.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22apt-get install libgd2-xpm-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eapt-\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e install libgd2-xpm-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e--with-http_geoip_module 时提示 the GeoIP module requires the GeoIP library.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22apt-get install geoip-database libgeoip-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eapt-\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e install geoip-database libgeoip-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e.\/configure: error: the HTTP rewrite module requires the PCRE library.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22apt-get install libpcre3 libpcre3-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eapt-\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e install libpcre3 libpcre3-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e再次执行 configure 命令， 然后\x3ccode\x3emake \x26amp;\x26amp; make install\x3c\/code\x3e。 编译好以后objs目录下多出一个nginx文件，用它替换旧的 nginx 文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22mv \/usr\/sbin\/nginx \/usr\/sbin\/nginx-backup\ncp objs\/nginx \/usr\/sbin\/nginx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3emv \x3cspan class=\x22hljs-regexp\x22\x3e\/usr\/\x3c\/span\x3esbin\x3cspan class=\x22hljs-regexp\x22\x3e\/nginx \/u\x3c\/span\x3esr\x3cspan class=\x22hljs-regexp\x22\x3e\/sbin\/\x3c\/span\x3enginx-backup\ncp objs\x3cspan class=\x22hljs-regexp\x22\x3e\/nginx \/u\x3c\/span\x3esr\x3cspan class=\x22hljs-regexp\x22\x3e\/sbin\/\x3c\/span\x3enginx\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行\/usr\/sbin\/nginx -t 命令检查配置文件返回下面的信息:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22nginx: the configuration file \/etc\/nginx\/nginx.conf syntax is ok\nnginx: configuration file \/etc\/nginx\/nginx.conf test is successful\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3enginx: the configuration \x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e \/etc\/nginx\/nginx.\x3cspan class=\x22hljs-keyword\x22\x3econf\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esyntax\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e ok\nnginx: configuration \x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e \/etc\/nginx\/nginx.\x3cspan class=\x22hljs-keyword\x22\x3econf\x3c\/span\x3e test \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e successful\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e表示 nginx 升级成功，修改 nginx 配置，加入 http2 支持:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22listen       443 ssl http2 fastopen=3 reuseport;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-section\x22\x3elisten\x3c\/span\x3e       \x3cspan class=\x22hljs-number\x22\x3e443\x3c\/span\x3e ssl http2 fastopen=\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e reuseport;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e重启 nginx 访问正常后再测一发：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ocwt4ikj4.bkt.clouddn.com\/9A062216.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ocwt4ikj4.bkt.clouddn.com\/9A062216.jpg?watermark\/2\/text\/cmFwb3NwZWN0cmU=\/font\/5b6u6L2v6ZuF6buR\/fontsize\/500\/fill\/I0VGRUZFRg==\/dissolve\/100\/gravity\/SouthEast\/dx\/10\/dy\/10\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e搞定，个人网站加入 HTTPS 并且 SSLABS 评分 A\x2b 。 快来试试吧～\x3c\/p\x3e\n\x3cp\x3e( 博主网站图片上传到七牛，而七牛免费似乎账户不支持 https 链接，所以有些文章比如说这篇会提示网页内有不安全的内容 )\x3c\/p\x3e\n\x3cp\x3e原文地址：\x3ca href=\x22https:\/\/www.rapospectre.com\/blog\/https-deploy-guide\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.rapospectre.com\/b...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/www.rapospectre.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3erapospectre\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>给你的网站穿上外衣 － HTTPS 免费部署指南</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007024673">https://segmentfault.com/a/1190000007024673</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/eq3kff3zi9/" target="_blank">https://alili.tech/archive/eq3kff3zi9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/sj57jxyoook/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/qsw902j95k/">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（下）<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/nnpmjlot58j/">IndexedDB使用与出坑指南<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/alvlbas9oai/">JS事件模型<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/u0pzym8k36o/">JS练习实例--编写经典小游戏俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/khwpyk5yz8q/">JavaScript 事件代理和委托<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/kuocl6lc3n/">JavaScript 版俄罗斯方块<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/n8bk54lyrf/">Promise学习:基础入门<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/7bk7u30qncb/">Redux 入坑进阶 - 源码解析<aside class="dates">2019-02-03</aside></a></li><li><a href="/archive/853kqfmqmf7/">Snap.svg 基本知识入门<aside class="dates">2019-02-03</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>