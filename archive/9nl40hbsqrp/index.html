<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React系列——react中使用webpack2的import()异步加载组件的实现"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React系列——react中使用webpack2的import()异步加载组件的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9nl40hbsqrp/",
				"appid": "1613049289050283", 
				"title": "React系列——react中使用webpack2的import()异步加载组件的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/c7v1i5n387j/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/emp4o4yhp9u/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&text=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&text=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&is_video=false&description=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9nl40hbsqrp%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%e4%b8%ad%e4%bd%bf%e7%94%a8webpack2%e7%9a%84import%28%29%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React系列——react中使用webpack2的import()异步加载组件的实现</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e你还在用require.ensure()？？？\x3c\/p\x3e\n\x3cp\x3elow了！！\x3c\/p\x3e\n\x3cp\x3eimport()的大名听过没？？\x3c\/p\x3e\n\x3cp\x3e下面隆重介绍webpack代码切割新方案。\x3c\/p\x3e\n\x3cp\x3e官网教程在这里：\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/code-splitting-async\/#system-import-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/code-splitting-async\/#system-import-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/doc.webpack-china.org...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e先别去看官网教程，因为webpack官网教程通常都比较不靠谱，写的云里雾里。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3ewebpack中，从v1到v2，v3暂且不提，一共有3种代码切割加载的方案。\x3c\/p\x3e\n\x3cp\x3e1、System.import()； 已废除，不推荐\x3c\/p\x3e\n\x3cp\x3e2、require.ensure()； v1和v2均可使用\x3c\/p\x3e\n\x3cp\x3e3、import()；v2支持，v1不支持\x3c\/p\x3e\n\x3ch4\x3eSystem.import()\x3c\/h4\x3e\n\x3cp\x3e已废除，就不做介绍了\x3c\/p\x3e\n\x3ch4\x3erequire.ensure()\x3c\/h4\x3e\n\x3cp\x3e从v1时代，使用过webpack的同学对这种用法应该不会陌生，比较网上可以搜到很多关于require.ensure()的用法的demo。\x3c\/p\x3e\n\x3cp\x3e在百度输入require.ensure()，搜到几个关键的教程。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.css88.com\/doc\/webpack2\/guides\/code-splitting-require\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack2.2文档关于require.ensure使用的介绍\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e简单介绍下require.ensure的经典使用方法，你若是没用过，别担心，看下面的代码就足够了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const Foo = require.ensure([], () =\x3e {\n    require(\x26quot;a\x26quot;);\n}, err =\x3e {\n    console.error(\x26quot;We failed to load chunk: \x26quot; \x2b err);\n}, \x26quot;chunk-name\x26quot;);\n\n\/\/react-router2 or 3\n\x3cRoute path=\x26quot;\/xx\x26quot; getComponent={Foo} \/\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Foo = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22a\x22\x3c\/span\x3e);\n}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x22We failed to load chunk: \x22\x3c\/span\x3e \x2b err);\n}, \x3cspan class=\x22hljs-string\x22\x3e\x22chunk-name\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/react-router2 or 3\x3c\/span\x3e\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/xx\x22\x3c\/span\x3e getComponent={Foo} \/\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eimport()\x3c\/h4\x3e\n\x3cp\x3e这是我们今天的主角，使用场景是react-router4，你会发现在react-router4中，route的getComponent不见了。\x3c\/p\x3e\n\x3cp\x3e怎么办，这时候你可以去看一下最上面给你的官方代码切割教程，列举了3种使用情况。\x3c\/p\x3e\n\x3cp\x3e1、导入局部模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function determineDate() {\n  import(\x27moment\x27).then(function(moment) {\n    console.log(moment().format());\n  }).catch(function(err) {\n    console.log(\x27Failed to load moment\x27, err);\n  });\n}\n\ndetermineDate();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scilab\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edetermineDate\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e {\x3c\/span\x3e\n  import(\x3cspan class=\x22hljs-string\x22\x3e\x27moment\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(moment)\x3c\/span\x3e {\x3c\/span\x3e\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(moment().format());\n  }).\x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(err)\x3c\/span\x3e {\x3c\/span\x3e\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Failed to load moment\x27\x3c\/span\x3e, err);\n  });\n}\n\ndetermineDate();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、导入整个模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import(\x27.\/component\x27).then(Component =\x3e \/* ... *\/);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/component\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eComponent\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/* ... *\/\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3、使用await\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22async function determineDate() {\n  const moment = await import(\x27moment\x27);\n  return moment().format(\x27LLLL\x27);\n}\n\ndetermineDate().then(str =\x3e console.log(str));\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edetermineDate\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e moment = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27moment\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e moment().format(\x3cspan class=\x22hljs-string\x22\x3e\x27LLLL\x27\x3c\/span\x3e);\n}\n\ndetermineDate().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(str));\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这3个官方例子都有一个共同点，那就是：import(name) -\x26gt; Promise\x3c\/p\x3e\n\x3cp\x3e我们发现import()方法返回的是一个Promise，啥？Promise？有人会问，Promise咋了。我直接赋给变量就可以用了啊。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const Foo = import(\x26quot;.\/xx\x26quot;) \/\/ 错误的写法\n\n\x3cRoute path=\x26quot;\/xx\x26quot; component={import(\x26quot;.\/xxx\x26quot;)} \/\x3e \/\/错误的写法\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cpp\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Foo = \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22.\/xx\x22\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 错误的写法\x3c\/span\x3e\n\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/xx\x22\x3c\/span\x3e component={\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22.\/xxx\x22\x3c\/span\x3e)} \/\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e\/\/错误的写法\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e少年，别太天真，Promise的返回值只能通过then()来读取，所以你会发现官方的3种使用场景全都是在then()里面操作，那怎么办？我想把import()获取到的组件赋给一个变量或常量。\x3c\/p\x3e\n\x3cp\x3e通过我坚持不懈的chrome，终于发现了一个“惊天函数”。\x3c\/p\x3e\n\x3cp\x3e懂行的人也许会问，react-router4官网文档不是有个\x3ca href=\x22https:\/\/reacttraining.cn\/web\/guides\/code-splitting\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBundle组件\x3c\/a\x3e可以实现代码切割吗？\x3c\/p\x3e\n\x3cp\x3e是啊，官方的这个方法我复制过来使用了之后，一堆红色报错啊，被欺骗的❤️。\x3c\/p\x3e\n\x3cp\x3e不废话，直接上可用代码。\x3c\/p\x3e\n\x3cp\x3e1、asyncComponent函数（惊天函数）：函数很好理解，loadComponent参数表示需要代码切割的路径，函数返回值是一个react组件，组件内部帮你做好了then()方法的操作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nexport const asyncComponent = loadComponent =\x3e (\n    class AsyncComponent extends React.Component {\n        state = {\n            Component: null,\n        }\n\n        componentWillMount() {\n            if (this.hasLoadedComponent()) {\n                return;\n            }\n\n            loadComponent()\n                .then(module =\x3e module.default)\n                .then((Component) =\x3e {\n                    this.setState({ Component });\n                })\n                .catch((err) =\x3e {\n                    console.error(`Cannot load component in \x3cAsyncComponent \/\x3e`);\n                    throw err;\n                });\n        }\n\n        hasLoadedComponent() {\n            return this.state.Component !== null;\n        }\n\n        render() {\n            const { Component } = this.state;\n            return (Component) ? \x3cComponent {...this.props} \/\x3e : null;\n        }\n    }\n);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e const asyncComponent = loadComponent =\x26gt; (\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAsyncComponent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e {\x3c\/span\x3e\n        state = {\n            Component: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n        }\n\n        componentWillMount() {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hasLoadedComponent()) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n            }\n\n            loadComponent()\n                .\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e =\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e)\n                .\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(Component)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({ Component });\n                })\n                .\x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(err)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(`\x3cspan class=\x22javascript\x22\x3eCannot load component \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x26lt;AsyncComponent \/\x26gt;\x3c\/span\x3e`);\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err;\n                });\n        }\n\n        hasLoadedComponent() {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.Component !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        }\n\n        render() {\n            const { Component } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (Component) ? \x26lt;Component {...\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props} \/\x26gt; : \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        }\n    }\n);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、在react中使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { asyncComponent } from \x27.\/AsyncComponent\x27\n\nconst Foo = asyncComponent(() =\x3e import(\/* webpackChunkName: \x26quot;foo\x26quot; *\/ \x26quot;.\/foo\x26quot;))\n\n\x3cRoute path=\x26quot;\/xx\x26quot; component={Foo} \/\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { asyncComponent } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/AsyncComponent\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Foo = asyncComponent(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-comment\x22\x3e\/* webpackChunkName: \x22foo\x22 *\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/foo\x22\x3c\/span\x3e))\n\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/xx\x22\x3c\/span\x3e component={Foo} \/\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3、好了，这样你就成功了，但是，请注意下面几个问题：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3ewebpack2的配置文件中，需要配置chunkName。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22chunkFilename: \x27[name].js\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3echunkFilename:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e如果你的异步加载组件有导入样式，请把样式移植到全局js文件导入。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e好了，本文到此结束。\x3c\/p\x3e\n\x3cp\x3e“小朋友，等等，你有demo吗？看文字我看不懂啊！”\x3c\/p\x3e\n\x3cp\x3e我回头问道：“你想看demo？那就请看 \x3ca href=\x22https:\/\/github.com\/hyy1115\/react-redux-webpack2\/blob\/master\/src\/App.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e二月的import()切割实现\x3c\/a\x3e，感兴趣可以持续关注，如果webpack出了更好的玩意，我会持续跟进应用到项目中。”\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e如果文章对你有帮助，请点击一下推荐。\x3c\/strong\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React系列——react中使用webpack2的import()异步加载组件的实现</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009820646">https://segmentfault.com/a/1190000009820646</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9nl40hbsqrp/" target="_blank">https://alili.tech/archive/9nl40hbsqrp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>