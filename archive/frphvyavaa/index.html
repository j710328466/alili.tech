<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="高性能迷你React框架anu在低版本IE的实践"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>高性能迷你React框架anu在低版本IE的实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/frphvyavaa/",
				"appid": "1613049289050283", 
				"title": "高性能迷你React框架anu在低版本IE的实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/o58nr3sms9j/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/i5bik3mp29m/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&text=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&text=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&title=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&is_video=false&description=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&title=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&title=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&title=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffrphvyavaa%2f&title=%e9%ab%98%e6%80%a7%e8%83%bd%e8%bf%b7%e4%bd%a0React%e6%a1%86%e6%9e%b6anu%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%acIE%e7%9a%84%e5%ae%9e%e8%b7%b5"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">高性能迷你React框架anu在低版本IE的实践</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e理想是丰满的，现实是骨感的，react早期的版本虽然号称支持IE8，但是页面总会不自觉切换到奇异模式下，导致报错。因此必须让react连IE6，7都支持，这才是最安全。但React本身并不支持IE6，7，因此anu使有用武之地了。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/RubyLouvre\/anu\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/RubyLouvre...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e但光是anu不行，兼容IE是一个系统性的工程，涉及到打包压缩，各种polyfill垫片。\x3c\/p\x3e\n\x3cp\x3e首先说一下anu如何支持低版本浏览器。anu本身没有用到太高级的API，像Object.defineProperty, Object.seal, Object.freeze, Proxy, WeakMap等无法 模拟的新API，anu一个也没有用，而const, let, 箭头函数，es6模块，通过babel编译就可以搞定了。\x3c\/p\x3e\n\x3cp\x3e而框架用到的一些es5,es6方法，我已经提供了一个叫polyfill的文件为大家准备好，大家也可以使用bable.polyfill实现兼容。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eArray.prototype.forEach\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFunction.prototype.bind\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eJSON\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewindow.console\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eObject.keys\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eObject.is\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eObject.assign\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eArray.isArray\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/RubyLouvre\/anu\/blob\/master\/dist\/polyfill.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/RubyLouvre...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e剩下就是\x3cstrong\x3e事件系统\x3c\/strong\x3e的兼容。React为了实现一个全能的事件系统，3万行的react-dom，有一半是在搞事件的。事件系统之所以这么难写，是因为React要实现整个标准事件流，从捕获阶段到target阶段再到冒泡阶段。如果能获取事件源对象到document这一路经过的所有元素，就能实现事件流了。但是在IE下，只有冒泡阶段，并且许多重要的表单事件不支持冒泡到document。为了事件冒泡，自jQuery时代起，前端高手们已经摸索出一套方案了。使用另一个相似的事件来伪装不冒泡事件，冒泡到document后，然后变成原来的事件触发对应的事件。\x3c\/p\x3e\n\x3cp\x3e比如说IE下，使用focusin冒充focus, focusout冒充blur。chrome下，则通过addEventListener的第三个参加为true，强制让focus, blur被document捕获到。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/Ie6-9\nif(msie \x3c 9){\n  eventHooks.onFocus = function(dom) {\n    addEvent(dom, \x26quot;focusin\x26quot;, function(e) {\n      addEvent.fire(dom, \x26quot;focus\x26quot;);\n    });\n  };\n  eventHooks.onBlur = function(dom) {\n    addEvent(dom, \x26quot;blurout\x26quot;, function(e) {\n      addEvent.fire(dom, \x26quot;blur\x26quot;);\n    });\n  };\n}else{\neventHooks.onFocus = function(dom) {\n  addEvent(\n    dom,\n    \x26quot;focus\x26quot;,\n    function(e) {\n      addEvent.fire(dom, \x26quot;focus\x26quot;);\n    },\n    true\n  );\n};\neventHooks.onBlur = function(dom) {\n  addEvent(\n    dom,\n    \x26quot;blur\x26quot;,\n    function(e) {\n      addEvent.fire(dom, \x26quot;blur\x26quot;);\n    },\n    true\n  );\n};\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/Ie6-9\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(msie \x26lt; \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e){\n  eventHooks.onFocus = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n    addEvent(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22focusin\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n      addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22focus\x22\x3c\/span\x3e);\n    });\n  };\n  eventHooks.onBlur = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n    addEvent(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22blurout\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n      addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22blur\x22\x3c\/span\x3e);\n    });\n  };\n}\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\neventHooks.onFocus = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n  addEvent(\n    dom,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22focus\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n      addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22focus\x22\x3c\/span\x3e);\n    },\n    \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  );\n};\neventHooks.onBlur = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n  addEvent(\n    dom,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22blur\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n      addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22blur\x22\x3c\/span\x3e);\n    },\n    \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  );\n};\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e低版本的oninput， onchange事件是一个麻烦，它们最多冒泡到form元素上。并且IE也没有oninput，只有一个相似的onpropertychange事件。IE9,IE10的oninput其实也有许多BUG，但大家要求放低些，我们也不用理会IE9,IE10的oninput事件。IE6－8的oninput事件，我们是直接在元素上绑定onpropertychange事件，然后触发一个datasetchanged 事件冒泡到document上，并且这个datasetchanged事件对象带有一个__type__属性，用来说明它原先冒充的事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function fixIEInput(dom, name) {\n  addEvent(dom, \x26quot;propertychange\x26quot;, function(e) {\n    if (e.propertyName === \x26quot;value\x26quot;) {\n      addEvent.fire(dom, \x26quot;input\x26quot;);\n    }\n  });\n}\n\naddEvent.fire = function dispatchIEEvent(dom, type, obj) {\n    try {\n      var hackEvent = document.createEventObject();\n      if (obj) {\n        Object.assign(hackEvent, obj);\n      }\n      hackEvent.__type__ = type;\n      \/\/IE6-8触发事件必须保证在DOM树中,否则报\x26quot;SCRIPT16389: 未指明的错误\x26quot;\n      dom.fireEvent(\x26quot;ondatasetchanged\x26quot;, hackEvent);\n    } catch (e) {}\n  };\n\n\nfunction dispatchEvent(e) {\/\/document上绑定的事件派发器\n  var __type__ = e.__type__ || e.type;\n  e = new SyntheticEvent(e);\n  var target = e.target;\n  var paths = [];\/\/获取整个冒泡的路径\n  do {\n    var events = target.__events;\n    if (events) {\n      paths.push({ dom: target, props: events });\n    }\n  } while ((target = target.parentNode) \x26amp;\x26amp; target.nodeType === 1);\n  \/\/ ...略\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efixIEInput\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom, name\x3c\/span\x3e) \x3c\/span\x3e{\n  addEvent(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22propertychange\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.propertyName === \x3cspan class=\x22hljs-string\x22\x3e\x22value\x22\x3c\/span\x3e) {\n      addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22input\x22\x3c\/span\x3e);\n    }\n  });\n}\n\naddEvent.fire = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edispatchIEEvent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom, type, obj\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hackEvent = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createEventObject();\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (obj) {\n        \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(hackEvent, obj);\n      }\n      hackEvent.__type__ = type;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/IE6-8触发事件必须保证在DOM树中,否则报\x22SCRIPT16389: 未指明的错误\x22\x3c\/span\x3e\n      dom.fireEvent(\x3cspan class=\x22hljs-string\x22\x3e\x22ondatasetchanged\x22\x3c\/span\x3e, hackEvent);\n    } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {}\n  };\n\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edispatchEvent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/\/document上绑定的事件派发器\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e __type__ = e.__type__ || e.type;\n  e = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e SyntheticEvent(e);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e target = e.target;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e paths = [];\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取整个冒泡的路径\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3edo\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e events = target.__events;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (events) {\n      paths.push({ \x3cspan class=\x22hljs-attr\x22\x3edom\x3c\/span\x3e: target, \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: events });\n    }\n  } \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e ((target = target.parentNode) \x26amp;\x26amp; target.nodeType === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...略\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eaddEvent.fire这个方法在不同浏览器的实现是不一样的，这里显示的IE6－8的版本，IE9及标准浏览器是使用document.createEvent,  initEvent, dispatchEvent等API来创建事件对象与触发事件。在IE6－8中，则需要用document.createEventObject创建事件对象，fireEvent来触发事件。\x3c\/p\x3e\n\x3cp\x3eondatasetchanged事件是IE一个非常偏门的事件，因为IE的 fireEvent只能触发它官网上列举的几十个事件，不能触发自定义事件。而ondatasetchanged事件在IE9，chrome, firefox等浏览器中是当成一个自定义事件来对待，但那时它是使用elem.dispatchEvent来触发了。ondatasetchanged是一个能冒泡的事件，只是充作\x3cstrong\x3e信使\x3c\/strong\x3e，将我们要修改的属性带到document上。\x3c\/p\x3e\n\x3cp\x3e此是其一，onchange事件也要通过ondatasetchanged也冒充，因为IE下它也不能冒泡到document。onchange事件在IE还是有许多BUG（或叫差异点）。checkbox, radio的onchange事件必须在失去焦点时才触发，因此我们在内部用onclick来触发，而select元素在单选时候下，用户选中了某个option, select.value会变成option的value值，但在IE6－8下它竟然不会发生改变。最绝的是select元素也不让你修改value值，后来我奠出修改HTMLSelectElement原型链的大招搞定它。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  try {\n    Object.defineProperty(HTMLSelectElement.prototype, \x26quot;value\x26quot;, {\n      set: function(v) {\n        this._fixIEValue = v;\n      },\n      get: function() {\n        return this._fixIEValue;\n      }\n    });\n  } catch (e) {}\n\nfunction fixIEChange(dom, name) {\n  \/\/IE6-8, radio, checkbox的点击事件必须在失去焦点时才触发\n  var eventType = dom.type === \x26quot;radio\x26quot; || dom.type === \x26quot;checkbox\x26quot;\n    ? \x26quot;click\x26quot;\n    : \x26quot;change\x26quot;;\n  addEvent(dom, eventType, function(e) {\n    if (dom.type === \x26quot;select-one\x26quot;) {\n      var idx = dom.selectedIndex,\n        option,\n        attr;\n      if (idx \x3e -1) {\n        \/\/IE 下select.value不会改变\n        option = dom.options[idx];\n        attr = option.attributes.value;\n        dom.value = attr \x26amp;\x26amp; attr.specified ? option.value : option.text;\n      }\n    }\n    addEvent.fire(dom, \x26quot;change\x26quot;);\n  });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n    Object.defineProperty(HTMLSelectElement.prototype, \x3cspan class=\x22hljs-string\x22\x3e\x22value\x22\x3c\/span\x3e, {\n      \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(v)\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._fixIEValue = v;\n      },\n      \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._fixIEValue;\n      }\n    });\n  } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efixIEChange\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(dom, name)\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/IE6-8, radio, checkbox的点击事件必须在失去焦点时才触发\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e eventType = dom.type === \x3cspan class=\x22hljs-string\x22\x3e\x22radio\x22\x3c\/span\x3e || dom.type === \x3cspan class=\x22hljs-string\x22\x3e\x22checkbox\x22\x3c\/span\x3e\n    ? \x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e\n    : \x3cspan class=\x22hljs-string\x22\x3e\x22change\x22\x3c\/span\x3e;\n  addEvent(dom, eventType, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (dom.type === \x3cspan class=\x22hljs-string\x22\x3e\x22select-one\x22\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e idx = dom.selectedIndex,\n        option,\n        attr;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (idx \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/IE 下select.value不会改变\x3c\/span\x3e\n        option = dom.options[idx];\n        attr = option.attributes.value;\n        dom.value = attr \x26amp;\x26amp; attr.specified ? option.value : option.text;\n      }\n    }\n    addEvent.fire(dom, \x3cspan class=\x22hljs-string\x22\x3e\x22change\x22\x3c\/span\x3e);\n  });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此外，滚动事件的兼容性也非常多，但在React官网中，统一大家用onWheel接口来调用，在内部实现则需要我们根据浏览器分别用onmousewheel, onwheel, DOMMouseScroll来模拟了。\x3c\/p\x3e\n\x3cp\x3e当然还有很多很多细节，这里就不一一列举了。为了防止像React那样代码膨胀，针对旧版本的事件兼容，我都移到ieEvent.js文件中。然后基于它，打包了一个专门针对旧版本IE的ReactIE\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/RubyLouvre\/anu\/tree\/master\/dist\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/RubyLouvre...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e大家也可以通过npm安装，1.0.2就拥有这个文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install anujs\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cmake\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e anujs\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面通过一个示例介绍如何使用ReactIE.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n    \x3cmeta name=\x26quot;viewport\x26quot; content=\x26quot;width=device-width\x26quot;\x3e\n\n    \x3cscript src=\x26quot;.\/dist\/polyfill.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript src=\x26quot;.\/dist\/ReactIE.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript src=\x26quot;.\/dist\/index9.js\x26quot;\x3e\x3c\/script\x3e\n\n\x3c\/head\x3e\n\n\x3cbody\x3e\n\n    \x3cdiv\x3e这个默认会被清掉\x3c\/div\x3e\n    \x3cdiv id=\x27example\x27\x3e\x3c\/div\x3e\n\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22width=device-width\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/dist\/polyfill.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/dist\/ReactIE.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/dist\/index9.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e这个默认会被清掉\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e首先建立一个页面，里面有三个JS，其实前两个文件也能单独打包的。\x3c\/p\x3e\n\x3cp\x3eindex.js的源码是这样的，业务线开发时是直接上JSX与es6，为了兼容IE6－8，请不要在业务代码上用Object.defineProperty与Proxy\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Select extends React.Component{\n     constructor() {\n        super()\n        this.state = {\n            value: \x27bbb\x27\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n    onChange(e){\n       console.log(e.target.value)\n       this.setState({\n           value: e.target.value\n       })\n    }\n    render() {\n        return \x3cdiv\x3e\x3cselect  value={this.state.value} onChange={this.onChange}\x3e\n            \x3coption value=\x27aaa\x27\x3eaaa\x3c\/option\x3e\n            \x3coption value=\x27bbb\x27\x3ebbb\x3c\/option\x3e\n            \x3coption value=\x27ccc\x27\x3eccc\x3c\/option\x3e\n        \x3c\/select\x3e\x3cp\x3e{this.state.value}\x3c\/p\x3e\x3c\/div\x3e\n    }\n}\nclass Input extends React.Component{\n     constructor() {\n        super()\n        this.state = {\n            value: \x27input\x27\n        }\n        this.onInput = this.onInput.bind(this)\n    }\n    onInput(e){\n       this.setState({\n           value: e.target.value\n       })\n    }\n    render() {\n        return \x3cdiv\x3e\x3cinput value={this.state.value} onInput={this.onInput} \/\x3e{this.state.value}\x3c\/div\x3e\n    }\n}\nclass Radio extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: this.props.value\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n    onChange(e){\n        console.log(e.target.value)\n       this.setState({\n           value: e.target.value\n       })\n    }\n    render() {\n        return \x3cspan\x3e\x3cinput type=\x27radio\x27 name={this.props.name} value={this.props.value}  onChange={this.onChange} \/\x3e{this.state.value\x2b\x27\x27}\x3c\/span\x3e\n    }\n}\nclass Playground extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27请上下滚动鼠标滚轮\x27\n        }\n        this.onWheel = this.onWheel.bind(this)\n    }\n    onWheel(e){\n       this.setState({\n           value: e.wheelDelta\n       })\n    }\n    render() {\n        return \x3cdiv style=\x22{{\x22width:300,height:300,backgroundColor:\x27red\x27,display:\x27inline-block\x27\x22}}\x22 onWheel={this.onWheel} \x3e{this.state.value}\x3c\/div\x3e\n    }\n}\nclass MouseMove extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27请在绿色区域移动\x27\n        }\n        this.onMouseMove = this.onMouseMove.bind(this)\n    }\n    onMouseMove(e){\n       var v = e.pageX\x2b\x27 \x27\x2be.pageY;\n       this.setState({\n           value: v\n       })\n    }\n    render() {\n        return \x3cdiv style=\x22{{\x22width:300,height:300,backgroundColor:\x27#a9ea00\x27,display:\x27inline-block\x27\x22}}\x22 onMouseMove={this.onMouseMove} \x3e{this.state.value}\x3c\/div\x3e\n    }\n}\nclass FocusEl extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27点我\x27\n        }\n        this.onFocus = this.onFocus.bind(this)\n    }\n    onFocus(e){\n       console.log(e.target.title)\n    }\n    render() {\n        return \x3cinput  title={this.props.title} onKeyUp={(e)=\x3e{console.log(e.which)\x22}}\x22 style=\x22{{\x22width:100,height:50,backgroundColor:\x27green\x27,display:\x27inline-block\x27\x22}}\x22 onFocus={this.onFocus} \/\x3e\n    }\n}\nwindow.onload = function(){\n    window.s = ReactDOM.render( \x3cdiv\x3e\x3cSelect \/\x3e\x3cInput \/\x3e\x3cRadio name=\x27sex\x27 value=\x26quot;男\x26quot; \/\x3e\x3cRadio name=\x27sex\x27 value=\x27女\x27\/\x3e\n    \x3cp\x3e\x3cPlayground \/\x3e \x3cMouseMove \/\x3e\x3cFocusEl title=\x26quot;aaa\x26quot; \/\x3e\x3cFocusEl title=\x26quot;bbb\x26quot; \/\x3e\x3c\/p\x3e\n    \n    \x3c\/div\x3e, document.getElementById(\x27example\x27))\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSelect\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n     \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e() {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e()\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bbb\x27\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.onChange = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.onChange.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n    }\n    onChange(e){\n       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e.target.value)\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n           \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: e.target.value\n       })\n    }\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eselect\x3c\/span\x3e  \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.state.value}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonChange\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.onChange}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27aaa\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3eaaa\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27bbb\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3ebbb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27ccc\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3eccc\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eoption\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eselect\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e{this.state.value}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    }\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eInput\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n     \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e() {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e()\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27input\x27\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.onInput = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.onInput.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n    }\n    onInput(e){\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n           \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: e.target.value\n       })\n    }\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;div\x26gt;\x26lt;input value={this.state.value} onInput={this.onInput} \/\x26gt;{this.state.value}\x26lt;\/div\x26gt;\n    }\n}\nclass Radio extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: this.props.value\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n    onChange(e){\n        console.log(e.target.value)\n       this.setState({\n           value: e.target.value\n       })\n    }\n    render() {\n        return \x26lt;span\x26gt;\x26lt;input type=\x27radio\x27 name={this.props.name} value={this.props.value}  onChange={this.onChange} \/\x26gt;{this.state.value\x2b\x27\x27}\x26lt;\/span\x26gt;\n    }\n}\nclass Playground extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27请上下滚动鼠标滚轮\x27\n        }\n        this.onWheel = this.onWheel.bind(this)\n    }\n    onWheel(e){\n       this.setState({\n           value: e.wheelDelta\n       })\n    }\n    render() {\n        return \x26lt;div style=\x22{{\x22width:300,height:300,backgroundColor:\x27red\x27,display:\x27inline-block\x27\x22}}\x22 onWheel={this.onWheel} \x26gt;{this.state.value}\x26lt;\/div\x26gt;\n    }\n}\nclass MouseMove extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27请在绿色区域移动\x27\n        }\n        this.onMouseMove = this.onMouseMove.bind(this)\n    }\n    onMouseMove(e){\n       var v = e.pageX\x2b\x27 \x27\x2be.pageY;\n       this.setState({\n           value: v\n       })\n    }\n    render() {\n        return \x26lt;div style=\x22{{\x22width:300,height:300,backgroundColor:\x27#a9ea00\x27,display:\x27inline-block\x27\x22}}\x22 onMouseMove={this.onMouseMove} \x26gt;{this.state.value}\x26lt;\/div\x26gt;\n    }\n}\nclass FocusEl extends React.Component{\n     constructor(props) {\n        super(props)\n        this.state = {\n            value: \x27点我\x27\n        }\n        this.onFocus = this.onFocus.bind(this)\n    }\n    onFocus(e){\n       console.log(e.target.title)\n    }\n    render() {\n        return \x26lt;input  title={this.props.title} onKeyUp={(e)=\x26gt;{console.log(e.which)\x22}}\x22 style=\x22{{\x22width:100,height:50,backgroundColor:\x27green\x27,display:\x27inline-block\x27\x22}}\x22 onFocus={this.onFocus} \/\x26gt;\n    }\n}\nwindow.onload = function(){\n    window.s = ReactDOM.render( \x26lt;div\x26gt;\x26lt;Select \/\x26gt;\x26lt;Input \/\x26gt;\x26lt;Radio name=\x27sex\x27 value=\x22男\x22 \/\x26gt;\x26lt;Radio name=\x27sex\x27 value=\x27女\x27\/\x26gt;\n    \x26lt;p\x26gt;\x26lt;Playground \/\x26gt; \x26lt;MouseMove \/\x26gt;\x26lt;FocusEl title=\x22aaa\x22 \/\x26gt;\x26lt;FocusEl title=\x22bbb\x22 \/\x26gt;\x26lt;\/p\x26gt;\n    \n    \x26lt;\/div\x26gt;, document.getElementById(\x27example\x27))\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们建一个webpack.config.js，用的是webpack1\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x26quot;webpack\x26quot;);\nconst path = require(\x26quot;path\x26quot;);\nconst fs = require(\x26quot;fs\x26quot;);\nvar es3ifyPlugin = require(\x27es3ify-webpack-plugin\x27);\n\nmodule.exports = {\n  context: __dirname,\n  entry: {\n    index9: \x26quot;.\/src\/index9.js\x26quot;\n  },\n  output: {\n    path: __dirname \x2b \x26quot;\/dist\/\x26quot;,\n    filename: \x26quot;[name].js\x26quot;\n  },\n  plugins: [new es3ifyPlugin()],\n  module: {\n    loaders: [\n      {\n        test: \/\\.jsx?$\/,\n        loader: \x26quot;babel-loader\x26quot;,\n        exclude: path.resolve(__dirname, \x26quot;node_modules\x26quot;)\n      }\n    ]\n  },\n\n  resolve: {\n    \/\/如果不使用anu，就可以把这里注释掉\n    alias: {\n      react: \x26quot;anujs\/dist\/ReactIE.js\x26quot;,\n      \x26quot;react-dom\x26quot;: \x26quot;anujs\/dist\/ReactIE.js\x26quot;\n    }\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22path\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22fs\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e es3ifyPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27es3ify-webpack-plugin\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: __dirname,\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eindex9\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22.\/src\/index9.js\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: __dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22\/dist\/\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22[name].js\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e es3ifyPlugin()],\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.jsx?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22babel-loader\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22node_modules\x22\x3c\/span\x3e)\n      }\n    ]\n  },\n\n  \x3cspan class=\x22hljs-attr\x22\x3eresolve\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果不使用anu，就可以把这里注释掉\x3c\/span\x3e\n    alias: {\n      \x3cspan class=\x22hljs-attr\x22\x3ereact\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22anujs\/dist\/ReactIE.js\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22react-dom\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22anujs\/dist\/ReactIE.js\x22\x3c\/span\x3e\n    }\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ees3ify-webpack-plugin是专门将es5代码转换为es3代码，因为es5是允许用关键字，保留字作为对象的方法与属性，而es3不能。万一碰上module.default，我们就坑大了。es3ify是一个利器。\x3c\/p\x3e\n\x3cp\x3ebabel是通过.babelrc来配置，里面用到一个\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 {\n     \x26quot;presets\x26quot;: [\n         [\x26quot;es2015\x26quot;, { \x26quot;modules\x26quot;: false }], \x26quot;react\x26quot;\n     ],\n     \x26quot;plugins\x26quot;: [\n         [\n             \x26quot;transform-es2015-classes\x26quot;, {\n                 \x26quot;loose\x26quot;: true\n             }\n         ]\n     ]\n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e {\n     \x3cspan class=\x22hljs-attr\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n         [\x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3e\x22modules\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }], \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e\n     ],\n     \x3cspan class=\x22hljs-attr\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n         [\n             \x3cspan class=\x22hljs-string\x22\x3e\x22transform-es2015-classes\x22\x3c\/span\x3e, {\n                 \x3cspan class=\x22hljs-attr\x22\x3e\x22loose\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n             }\n         ]\n     ]\n }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ebabel-plugin-transform-es2015-classes记使用loose模式。\x3c\/p\x3e\n\x3cp\x3ebabel-preset-es2015后面这样设置是禁用生成\x3cstrong\x3e \x22use strict\x22\x3c\/strong\x3e,也建议直接换成\x3cstrong\x3ebabel-preset-avalon\x3c\/strong\x3e，这是个preset生成的代码兼容性更好。\x3c\/p\x3e\n\x3cp\x3e如果大家用 uglify-js进行代码上线，这也要注意一下，这里有许多坑，它默认会把es3ify干的活全部白做了。详见 \x3ca href=\x22https:\/\/github.com\/zuojj\/fedlab\/issues\/5\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/zuojj\/fedl...\x3c\/a\x3e 这篇文章\x3c\/p\x3e\n\x3cp\x3e最后大家可以通过加Q 79641290 联系我。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>高性能迷你React框架anu在低版本IE的实践</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009751424">https://segmentfault.com/a/1190000009751424</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/frphvyavaa/" target="_blank">https://alili.tech/archive/frphvyavaa/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5fmk2pl6rab/">2016年前端开发者深度调研，看看别人使用什么技术体系<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/stp6408xnu/">Bootstrap使用模态框modal实现表单提交弹出框<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/fu7a86e9uyh/">CSS水平垂直居中总结<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/r0w29esklr/">JS 里怎么给数组填充默认值<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/i00hiszlr1/">JavaScript - EventEmitter 背后的秘密<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/u2la0cn9do/">JavaScript 精度丢失问题<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/3txhfn3ejcb/">Nodejs进阶：如何玩转子进程（child_process）<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/yr7v8e9fao/">Promise介绍--规范篇<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/9lyxyz4wc6g/">QQ音乐API整理<aside class="dates">2019-01-30</aside></a></li><li><a href="/archive/84zzlljmes4/">SegmentFault 技术周刊 Vol.14 - 进阶 Vue 2.0<aside class="dates">2019-01-30</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>