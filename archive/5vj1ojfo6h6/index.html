<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/5vj1ojfo6h6/",
				"appid": "1613049289050283", 
				"title": "[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-28T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/m02hlm4bzh/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/shv09bbtbfd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&text=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&text=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&title=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&is_video=false&description=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&title=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&title=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&title=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5vj1ojfo6h6%2f&title=%5b2016%e5%b9%b4%e6%9c%ab%e5%b7%a8%e7%8c%ae%5d%20%e2%80%94%20HTML5%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%88%e7%ac%ac%e4%ba%8c%e5%ad%a3%ef%bc%9a%e5%b8%9d%e9%83%bd%e8%bf%9b%e9%98%b6%e7%89%88%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）</h1><div class="meta"><div class="postdate"><time datetime="2019-01-28" itemprop="datePublished">2019-01-28</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3cp\x3e两个月前（是的，两个月过去了，岁月如梭），哥帮小弟做的“\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007186026\x22\x3eHTML5魔都地铁拖拖乐\x3c\/a\x3e”打了下广告，没想到一炮而红，好评如潮。现在的年轻人，还是很上进的，一被表扬，动力无穷。年底虽然忙得眼底发黑，小弟硬是忙里偷闲又做了一个帝都的版本。\x3c\/p\x3e\n\x3cp\x3e这个版本，不光是换成了帝都的地铁图，还增加了很多听起来就很能“变现”的功能：线路规划、站点告警展示、站点内部电路图、站点三维呈现……在这个信息过剩的年代，多数人都是涉猎很广却学而不精，小弟这种对问题进行深度挖掘的精神，哥真的很佩服。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e------------------------------------------------下面进入正题-----------------------------------------------------------\x3c\/p\x3e\n\x3cp\x3e一些基本功能这里不再赘述，大家可以查看\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007186026\x22 target=\x22_blank\x22\x3e上一篇\x3c\/a\x3e有关魔都地铁图的文章。哥今天主要给大家介绍新增功能。\x3c\/p\x3e\n\x3cp\x3e我们先来看一下小弟做的帝都地铁图的效果，基本上是参照baidu的地铁图来复现的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971922?w=1270\x26amp;h=778\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971922?w=1270\x26amp;h=778\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e依然是纯矢量、可交互、有动态效果、无失真缩放的拓扑图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971923?w=400\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971923?w=400\x26amp;h=300\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可视化效果具体就不展开了，拿到过拖拖乐的兄弟们都了解。下面主要还是说说这次新增的功能点，怎么形容呢？杀很大噢~\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e选中线路会发光\x3c\/h1\x3e\n\x3cp\x3e鼠标点击某条地铁线路，选中的线路会以发光的形式突出显示出来。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971924?w=400\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971924?w=400\x26amp;h=300\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e小弟说之所以要增加这个功能，是因为现在的地铁线路太多了，想查看单条线路的时候经常会看串……也是，虽然交通部门在设计地铁线路图的时候已经尽量用不同的颜色去标注每条线路，但是挡不住地铁十几二十条地往上加，要想查看单条线路还真是费劲。有了这个功能，顿时清爽了很多有木有？ 哥必须为这个功能点个赞……\x3c\/p\x3e\n\x3cp\x3e实现代码其实很简单：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function changeAlpha(lineNumber,alpha){\n        alpha = alpha || 1;\n        var list = lines[lineNumber];\n        list.forEach(function(li){\n            li.setStyle(\x27whole.alpha\x27,alpha);\n            li.s(\x27outer.style\x27, alpha \x3c 1 ? \x27none\x27:\x27glow\x27);\n            li.s(\x27label.shadowable\x27, alpha \x3e= 1 );\n        });\n        list = stations[lineNumber];\n        list.forEach(function(li){\n            li.setStyle(\x27whole.alpha\x27,alpha);\n            li.s(\x27outer.style\x27, alpha \x3c 1 ? \x27none\x27:\x27glow\x27);\n            li.s(\x27label.shadowable\x27, alpha \x3e= 1 );\n        });\n    }\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3efunction changeAlpha(lineNumber,\x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e || 1;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e = lines[lineNumber];\n        \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(function(\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e){\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.setStyle(\x27whole.\x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e\x27,\x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3es\x3c\/span\x3e(\x27outer.style\x27, \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e \x26lt; 1 ? \x27none\x27:\x27glow\x27);\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3es\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-keyword\x22\x3elabel\x3c\/span\x3e.shadowable\x27, \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e \x26gt;= 1 );\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e = stations[lineNumber];\n        \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(function(\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e){\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.setStyle(\x27whole.\x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e\x27,\x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3es\x3c\/span\x3e(\x27outer.style\x27, \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e \x26lt; 1 ? \x27none\x27:\x27glow\x27);\n            \x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3es\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-keyword\x22\x3elabel\x3c\/span\x3e.shadowable\x27, \x3cspan class=\x22hljs-keyword\x22\x3ealpha\x3c\/span\x3e \x26gt;= 1 );\n        });\n    }\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为啥这么好的想法，地图厂商都不提供呢？如果你对仍然体会不是很深刻的话，看看下面这张图，相信你会觉得这个功能是多么赏心悦目……\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971417?w=800\x26amp;h=554\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971417?w=800\x26amp;h=554\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e高亮显示两站点间的路线\x3c\/h1\x3e\n\x3cp\x3e用鼠标右键点击同一条线路上的两个站点，这两个站点之间的路线会高亮显示。小弟说，从用户角度来说，这个功能可以用来进行路线的规划。不过一般我们不会在前端做路线规划，只需要把计算好的路线结果显示出来就可以了。小弟做这个功能的另一个目的是为了方便运维人员查看某一段线路上的告警站点。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971418?w=1268\x26amp;h=859\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971418?w=1268\x26amp;h=859\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e告警站点一目了然\x3c\/h1\x3e\n\x3cp\x3e说到告警，才进入了这次的重点。\x3c\/p\x3e\n\x3cp\x3e地铁因运量大、速度快、无堵车等优点，已经成为众多上班族的首选出行方式。一旦地铁发生故障，会导致大量乘客滞留。因此，对于地铁运维人员来说，能够快速发现故障站点并及时排除故障就显得尤为重要。\x3c\/p\x3e\n\x3cp\x3e我们可以看到，小弟做的这张帝都地铁图，与普通地铁图最大的不同是上面增加了许多五颜六色的告警标识，告警站点一目了然，上面还标明了告警的数量以及告警级别。这样，地铁运维人员就可以快速掌握各地铁站点的告警情况，合理安排故障排查的优先级。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971419?w=600\x26amp;h=255\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971419?w=600\x26amp;h=255\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因为我们公司是做企业应用的嘛，这个功能是很容易放上去的，代码也不复杂。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Util.addAlarm(\x26quot;alarm\x26quot; \x2b p[\x27-sid\x27], n, twaver.AlarmSeverity.severities.get(random), box.getAlarmBox(),random);\naddAlarm: function (alarmID, staNode, alarmSeverity, alarmBox,random) {\n  var alarm = new twaver.Alarm(alarmID, staNode.getId(), alarmSeverity);\n  alarm.setClient(\x26quot;MAPPINGID\x26quot;,this.alarmCode[random]);\n  alarm.setClient(\x26quot;raisedTime\x26quot;,new Date());\n  alarm.setClient(\x26quot;platform\x26quot;,staNode.getName());\n  alarm.setAcked(Math.random()* 10 \x3e 5? true:false);\n  alarmBox.add(alarm);\n}                             \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3eUtil.addAlarm(\x3cspan class=\x22hljs-string\x22\x3e\x22alarm\x22\x3c\/span\x3e \x2b p[\x3cspan class=\x22hljs-string\x22\x3e\x27-sid\x27\x3c\/span\x3e], n, twaver.AlarmSeverity.severities.\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3erandom\x3c\/span\x3e), \x3cspan class=\x22hljs-built_in\x22\x3ebox\x3c\/span\x3e.getAlarmBox(),\x3cspan class=\x22hljs-built_in\x22\x3erandom\x3c\/span\x3e);\naddAlarm: function (alarmID, staNode, alarmSeverity, alarmBox,\x3cspan class=\x22hljs-built_in\x22\x3erandom\x3c\/span\x3e) {\n  var alarm = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e twaver.Alarm(alarmID, staNode.getId(), alarmSeverity);\n  alarm.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x22MAPPINGID\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.alarmCode[\x3cspan class=\x22hljs-built_in\x22\x3erandom\x3c\/span\x3e]);\n  alarm.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x22raisedTime\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Date());\n  alarm.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x22platform\x22\x3c\/span\x3e,staNode.getName());\n  alarm.setAcked(Math.\x3cspan class=\x22hljs-built_in\x22\x3erandom\x3c\/span\x3e()* \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e? \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e);\n  alarmBox.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(alarm);\n}                             \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e轨线告警数据展示\x3c\/h1\x3e\n\x3cp\x3e双击一条线路，会弹出该线路的所有告警数据，包括告警站台、告警级别、告警发生时间等详细信息。这里用的是现成的表格组件。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971925?w=400\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971925?w=400\x26amp;h=300\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e实现也很简单，首先两行代码将表格和DataBox关联：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var table = new twaver.controls.Table(box.getAlarmBox());\nvar tablePane = new twaver.controls.TablePane(table);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e table = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3etwaver\x3c\/span\x3e.controls.Table(box.getAlarmBox());\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tablePane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3etwaver\x3c\/span\x3e.controls.TablePane(table);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后用以下代码实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var alarmSeverity = {\n        Critical: \x26quot;严重\x26quot;,\n        Major:\x27主要\x27,\n        WARNING:\x27警告\x27,\n    } \n    table.onCellRendered = function (params) {\n        if (params.column.getName() === \x27告警级别\x27) {\n            params.div.style.backgroundColor = params.data.getAlarmSeverity().color;\n        }\n    };\n    var column = createColumn(table, \x27站台\x27, \x27platform\x27, \x27client\x27, \x27string\x27,100,40);\n    column.setHorizontalAlign(\x27center\x27);\n    var column = createColumn(table, \x27告警级别\x27, \x27alarmSeverity\x27, \x27accessor\x27, \x27string\x27, true);\n    column.setWidth(80);\n    column.setHorizontalAlign(\x27center\x27);\n    var setValue = column.setValue;\n    column.setValue = function (data, value, view) {\n        value = twaver.AlarmSeverity.getByName(value);\n        setValue.call(column, data, value, view);\n    };\n    column.setEnumInfo(twaver.AlarmSeverity.severities.toArray());\n    var column = createColumn(this.table, \x27告警码\x27, \x27MAPPINGID\x27, \x27client\x27,\x27string\x27,166);\n    column.setHorizontalAlign(\x27center\x27);\n    var column = createColumn(this.table, \x27告警问题\x27, \x27alarmque\x27, \x27client\x27);\n    column.setHorizontalAlign(\x27center\x27);\n    var timeColumn = createColumn(table, \x27告警发生时间\x27, \x27raisedTime\x27, \x27client\x27);\n    timeColumn.setWidth(167);\n    timeColumn.setHorizontalAlign(\x27center\x27);\n    timeColumn.renderCell = function (params) {\n        var span = document.createElement(\x27span\x27);\n        span.innerHTML = formatDate(params.value, \x27yyyy-MM-dd hh:mm:ss\x27);\n        span.style.whiteSpace = \x27nowrap\x27;\n        params.div.appendChild(span);\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e alarmSeverity = {\n        Critical: \x3cspan class=\x22hljs-string\x22\x3e\x22严重\x22\x3c\/span\x3e,\n        Major:\x3cspan class=\x22hljs-string\x22\x3e\x27主要\x27\x3c\/span\x3e,\n        WARNING:\x3cspan class=\x22hljs-string\x22\x3e\x27警告\x27\x3c\/span\x3e,\n    } \n    table.onCellRendered = function (\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.column.getName() === \x3cspan class=\x22hljs-string\x22\x3e\x27告警级别\x27\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.div.style.backgroundColor = \x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.data.getAlarmSeverity().color;\n        }\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e column = createColumn(table, \x3cspan class=\x22hljs-string\x22\x3e\x27站台\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27platform\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27client\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e);\n    column.setHorizontalAlign(\x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e column = createColumn(table, \x3cspan class=\x22hljs-string\x22\x3e\x27告警级别\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27alarmSeverity\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27accessor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n    column.setWidth(\x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e);\n    column.setHorizontalAlign(\x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e setValue = column.setValue;\n    column.setValue = function (data, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, view) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e = twaver.AlarmSeverity.getByName(\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e);\n        setValue.call(column, data, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, view);\n    };\n    column.setEnumInfo(twaver.AlarmSeverity.severities.toArray());\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e column = createColumn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.table, \x3cspan class=\x22hljs-string\x22\x3e\x27告警码\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MAPPINGID\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27client\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e166\x3c\/span\x3e);\n    column.setHorizontalAlign(\x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e column = createColumn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.table, \x3cspan class=\x22hljs-string\x22\x3e\x27告警问题\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27alarmque\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27client\x27\x3c\/span\x3e);\n    column.setHorizontalAlign(\x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timeColumn = createColumn(table, \x3cspan class=\x22hljs-string\x22\x3e\x27告警发生时间\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27raisedTime\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27client\x27\x3c\/span\x3e);\n    timeColumn.setWidth(\x3cspan class=\x22hljs-number\x22\x3e167\x3c\/span\x3e);\n    timeColumn.setHorizontalAlign(\x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e);\n    timeColumn.renderCell = function (\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e span = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27span\x27\x3c\/span\x3e);\n        span.innerHTML = formatDate(\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27yyyy-MM-dd hh:mm:ss\x27\x3c\/span\x3e);\n        span.style.whiteSpace = \x3cspan class=\x22hljs-string\x22\x3e\x27nowrap\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.div.appendChild(span);\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e站点信息展示\x3c\/h1\x3e\n\x3cp\x3e单击站点，会弹出一个功能菜单，现在有展示、告警、电路等模块。小弟说还可以根据需要，定制更多功能模块，全方位展示站点信息。我们一一来看几个菜单都展示了些啥。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971926?w=800\x26amp;h=600\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971926?w=800\x26amp;h=600\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e单个站点告警\x3c\/h2\x3e\n\x3cp\x3e点击“告警”，弹出站点告警数据，还可以查看该站点的历史告警数据。\x3c\/p\x3e\n\x3cp\x3e小弟说，前几天他去看了一个很高大上的轨道交通技术展会，了解到每个站点内就有大量的设备，像电力设备、环控设备、屏蔽门设备、电梯设备、门禁设备、广播和闭路电视设备、通讯设备等等。因此，每个站点也必须要有集中的告警展示。当然，现在做的还比较简单，如果有真实数据，就能做得更好看了，反正菜单定义都很方便。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971420?w=1270\x26amp;h=838\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971420?w=1270\x26amp;h=838\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e站点内部拓扑图展示\x3c\/h2\x3e\n\x3cp\x3e地铁里的通信系统还是比较复杂的，据我了解，除了有专用的通信系统外，还要提供民用的通信系统，以及专用的电源管理、广播、视频监控等等子系统。这就必须要咱们擅长的拓扑图上场了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971927?w=800\x26amp;h=600\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971927?w=800\x26amp;h=600\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击“图纸”按钮，弹出站点内部设备的拓扑图。所有的图元都可以拖拽、缩放，告警、分组这些该有的功能都有，如果拓扑图有多个层级，不停往下加layer就好了。\x3c\/p\x3e\n\x3cp\x3e代码稍复杂：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nbutton.onclick = function (e) {\n    var dialog = document.getElementById(id);\n    dialog \x26amp;\x26amp; document.body.removeChild(dialog);\n    var box2 = new twaver.ElementBox();\n    var network2 = new twaver.vector.Network(box2);\n    var view = network2.getView();\n    var autoLayouter = new twaver.layout.AutoLayouter(box2);\n        \/\/ network2.setZoomManager(new twaver.vector.MixedZoomManager(network2,false));\n        var items = Util.topo_data;\n        var i,item;\n        for(i = 0;i \x3c items.length; i\x2b\x2b){\n            item = items[i];\n            Util.createElement(box2, item);\n        }\n        var self = this;\n        var hGap=80;\n        autoLayouter.getDimension=function (node) {\n            if (node instanceof twaver.Group \x26amp;\x26amp; node.getChildrenSize() \x3e 0) {\n                var rect = null;\n                for (var i = 0, n = node.getChildrenSize(); i \x3c n; i\x2b\x2b) {\n                    var child = node.getChildAt(i);\n                    if (child instanceof twaver.Node) {\n                        if (rect) {\n                            rect = _twaver.math.unionRect(rect, child.getRect());\n                        } else {\n                            rect = child.getRect();\n                        }\n                    }\n                }\n                if (rect) {\n                    return { width: rect.width\x2bhGap, height: rect.height };\n                } else {\n                    return null;\n                }\n            } else {\n                return { width: node.getWidth()\x2bhGap, height: node.getHeight() };\n            }\n        },\n        autoLayouter.doLayout(\x27hierarchic\x27, function(){\n            network2.zoomOverview();\n        });\n        var left = e.clientX, top = e.clientY;\n        var width = 760, height = 360;\n        Util.showTopo(\x27dialog_topo\x27,element,network2,width\x2b\x26quot;px\x26quot;,height\x2b\x26quot;px\x26quot;,\x27260px\x27,\x270px\x27,\x27图纸\x27);\n        Util.changeState();\n        $(\x27#dialog_topo\x27).animate({\n            top:\x27100px\x27,\n        },\x27normal\x27,\x27swing\x27,function(){\n        });\n    }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\nbutton.onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e dialog = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(id);\n    dialog \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.removeChild(dialog);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e box2 = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e twaver.ElementBox();\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e network2 = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e twaver.vector.Network(box2);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e view = network2.getView();\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e autoLayouter = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e twaver.layout.AutoLayouter(box2);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ network2.setZoomManager(new twaver.vector.MixedZoomManager(network2,false));\x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e items = Util.topo_data;\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i,item;\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i \x26lt; items.length; i\x2b\x2b){\n            item = items[i];\n            Util.createElement(box2, item);\n        }\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e hGap=\x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e;\n        autoLayouter.getDimension=\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3enode\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (node \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e twaver.Group \x26amp;\x26amp; node.getChildrenSize() \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, n = node.getChildrenSize(); i \x26lt; n; i\x2b\x2b) {\n                    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e child = node.getChildAt(i);\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (child \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e twaver.Node) {\n                        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e) {\n                            \x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e = _twaver.math.unionRect(\x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e, child.getRect());\n                        } \x3cspan class=\x22hljs-title\x22\x3eelse\x3c\/span\x3e {\n                            \x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e = child.getRect();\n                        }\n                    }\n                }\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e.width\x2bhGap, \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erect\x3c\/span\x3e.height };\n                } \x3cspan class=\x22hljs-title\x22\x3eelse\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n                }\n            } \x3cspan class=\x22hljs-title\x22\x3eelse\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: node.getWidth()\x2bhGap, \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: node.getHeight() };\n            }\n        },\n        autoLayouter.doLayout(\x3cspan class=\x22hljs-string\x22\x3e\x27hierarchic\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            network2.zoomOverview();\n        });\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e left = e.clientX, top = e.clientY;\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e width = \x3cspan class=\x22hljs-number\x22\x3e760\x3c\/span\x3e, height = \x3cspan class=\x22hljs-number\x22\x3e360\x3c\/span\x3e;\n        Util.showTopo(\x3cspan class=\x22hljs-string\x22\x3e\x27dialog_topo\x27\x3c\/span\x3e,element,network2,width\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e,height\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27260px\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27图纸\x27\x3c\/span\x3e);\n        Util.changeState();\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27#dialog_topo\x27\x3c\/span\x3e).animate({\n            \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27100px\x27\x3c\/span\x3e,\n        },\x3cspan class=\x22hljs-string\x22\x3e\x27normal\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27swing\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        });\n    }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e站点三维展示\x3c\/h2\x3e\n\x3cp\x3e这个功能可谓是很赶时髦的，点击“展示”模块，跳出当前站点的三维展示图，重点标识了几个出口的位置。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971928?w=800\x26amp;h=533\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971928?w=800\x26amp;h=533\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e小弟说现在地铁站的出口示意图一般都是平面图，或者是假3D图，身边有些妹子经常表示看不太懂，尤其在一些比较复杂的换乘站点，所以整了个3D示意图，还可以任意角度旋转、缩放什么的。整个过程我的注意力就被“妹子”吸引了，不得不说为了妹子，小弟的这个地铁站可是像模像样的。\x3c\/p\x3e\n\x3cp\x3e模型内部也可以进入，用来展示一些消防用具的位置。不过这地铁内部，我越看越觉得像某部丧尸片呢……\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971421?w=600\x26amp;h=400\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971421?w=600\x26amp;h=400\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e电路展示\x3c\/h2\x3e\n\x3cp\x3e最后，点击“电路”模块，弹出站点内部电路图。如果对接上地铁的供配电系统，那还是这个展示平台上相当不错的一个亮点。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007971929?w=800\x26amp;h=533\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007971929?w=800\x26amp;h=533\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e功能介绍到这里就基本结束了。\x3c\/p\x3e\n\x3cp\x3e总结一下，上次小弟主要是在可视化方面下了功夫，而这次是从乘客、监控和运维的角度去设计的功能。尽管很多功能只是点到为止，但真要在实际项目中用起来，相信又是一个亮点工程了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e2016总结\x3c\/h1\x3e\n\x3cp\x3e看到今天sfgg有\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007917925\x22\x3e2016总结\x3c\/a\x3e活动呢，那哥也来总结一把。\x3c\/p\x3e\n\x3cp\x3e还得先说2015年，哥初来sfgg，斗胆发了几篇文章，认识了不少朋友，也给了不少建议。2016年，项目进展顺利，很多精力都投入在非技术领域，自然文章也写的不勤快了。除了一篇3D机房的文章，后来就开始沾我小弟的光了。不过这也没啥，江山代有小弟出，团队就怕缺牛人。从技术走向管理的路，大多也是如此吧。\x3c\/p\x3e\n\x3cp\x3e最后祝大家：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e \n\x3chtml\x3e \n\x3chead\x3e \n\x3ctitle\x3e\x3c\/title\x3e \n\x3cbody\x3e \n\x3cp\x3eHappy New Year!\x3c\/p\x3e \n\x3c\/body\x3e \n\x3c\/html\x3e \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3eHappy New Year!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e索取代码照旧：tw-service@servasoft.com\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007971411">https://segmentfault.com/a/1190000007971411</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/5vj1ojfo6h6/" target="_blank">https://alili.tech/archive/5vj1ojfo6h6/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>