<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用 vue2 和 webpack 快速建构 NW.js 项目(3)"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用 vue2 和 webpack 快速建构 NW.js 项目(3) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/pvp1m0q8mc/",
				"appid": "1613049289050283", 
				"title": "用 vue2 和 webpack 快速建构 NW.js 项目(3) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7zzxkgxprp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/iuqi9p06vbg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&text=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&text=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&title=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&is_video=false&description=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&title=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&title=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&title=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpvp1m0q8mc%2f&title=%e7%94%a8%20vue2%20%e5%92%8c%20webpack%20%e5%bf%ab%e9%80%9f%e5%bb%ba%e6%9e%84%20NW.js%20%e9%a1%b9%e7%9b%ae%283%29"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用 vue2 和 webpack 快速建构 NW.js 项目(3)</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e阅读本文需要一点 JS 基础和阅读的耐心，我特么自己写完后发现这文章咋这么长啊。。。如果你认真看完算我输！  \x3c\/p\x3e\n\x3cp\x3e另我专门做了个 \x3ca href=\x22https:\/\/github.com\/anchengjian\/vue-nw-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-nw-seed\x3c\/a\x3e 项目，里面包含了我这篇文章里的所有的点和一些别的优化，方便大家快速开发。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e一、最小侵入性使用  \x3ccode\x3evuejs-templates\x3c\/code\x3e 建构 \x3ccode\x3eNW.js\x3c\/code\x3e 应用\x3c\/h2\x3e\n\x3cp\x3e在 Vue 圈里，最方便的项目建构方式应该是 \x3ccode\x3evue-cli\x3c\/code\x3e ，这整个生态里面最便捷的又应该是 \x3ca href=\x22https:\/\/github.com\/vuejs-templates\/webpack\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack\x3c\/a\x3e 这个模板。再对这个模板比较熟悉了后，就开始想能不能根据这个模板快速构建我们需要的 NW.js 项目呢？\x3c\/p\x3e\n\x3cp\x3e蛤蛤，答案当然是可以的。\x3c\/p\x3e\n\x3cp\x3e最开始的思路比较笨重，如果你时间多，可以去看看我以前的思路 \x3ca href=\x22https:\/\/github.com\/anchengjian\/anchengjian.github.io\/blob\/master\/posts\/2017\/vuejs-webpack-nwjs.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e用 vue2 和 webpack 快速建构 NW.js 项目(1)\x3c\/a\x3e 2333。在我连续加班一个月后整出了我们 \x3ccode\x3e豆豆数学\x3c\/code\x3e 第一版后，稍微有了点空闲时间，就重新翻看了一下 NW.js 的文档，有点小发现啊。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eManifest Format\x3c\/code\x3e 清单文件中的小发现\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3emain\x3c\/strong\x3e\x3cbr\x3e{String} which HTML page should be opened or which JavaScript file should be executed when NW.js starts.\x3cbr\x3eYou can specify a URL here. You can also specify just a filename (such as index.html or script.js) or a path (relative to the directory where your package.json resides).\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3enode-remote\x3c\/strong\x3e\x3cbr\x3e{Array} or {String} Enable calling Node in remote pages. The value controls for which sites this feature should be turned on. Each item in the array follows the match patterns used in Chrome extension.\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e这个意思是说中说 \x3ccode\x3emain\x3c\/code\x3e 字段可以写一个 \x3ccode\x3eURL\x3c\/code\x3e ，也能写 \x3ccode\x3eindex.html\x3c\/code\x3e 或者 \x3ccode\x3escript.js\x3c\/code\x3e 文件， \x3ccode\x3enode-remote\x3c\/code\x3e 字段说允许哪些远程页面调用 Node 方法。\x3c\/p\x3e\n\x3cp\x3e这组合起来就可以完全无侵入的使用 \x3ccode\x3evuejs-templates\x3c\/code\x3e 建构 \x3ccode\x3eNW.js\x3c\/code\x3e 应用！\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e整体思路\x3c\/strong\x3e就是设置 \x3ccode\x3epackage.json\x3c\/code\x3e 的 main 字段为 vue 项目的起始地址，然后把 node-remote 设置为 \x3ccode\x3e\x26lt;all_urls\x26gt;\x3c\/code\x3e 允许全部的 JS 调用 Node 。\x3c\/p\x3e\n\x3cp\x3e先上个效果\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLEeW?w=1112\x26amp;h=766\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLEeW?w=1112\x26amp;h=766\x22 alt=\x22seed-npm-run-dev\x22 title=\x22seed-npm-run-dev\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1、先安装 NW 的开发依赖\x3c\/h3\x3e\n\x3cp\x3e依然推荐 \x3ca href=\x22https:\/\/github.com\/nwjs\/npm-installer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enwjs\/npm-installer\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install nw --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install nw --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e网络不要的情况下，请参考之前写的文章中关于 \x3ca href=\x22https:\/\/github.com\/anchengjian\/anchengjian.github.io\/blob\/master\/posts\/2017\/vuejs-webpack-nwjs.md#2-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e用 npm 安装 NW.js\x3c\/a\x3e 部分。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e2、配置 webpack\x3c\/h3\x3e\n\x3cp\x3e相对于第一版，这次对于模板标配的建构配置改动相当小。  \x3c\/p\x3e\n\x3cp\x3e把 build\/webpack.base.conf.js 中新加个 \x3ccode\x3etarget\x3c\/code\x3e 字段就搞定。大概就是这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  entry: { ... },\n  output: { ... },\n  target: \x27node-webkit\x27,\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: { ... },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: { ... },\n  \x3cspan class=\x22hljs-attr\x22\x3etarget\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27node-webkit\x27\x3c\/span\x3e,\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简单吧。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e3、修改 \x3ccode\x3epackage.json\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e添加或者修改 \x3ccode\x3emain\x3c\/code\x3e 字段为你的 vue 项目启动地址，再添加 \x3ccode\x3enode-remote\x3c\/code\x3e 为 \x3ccode\x3e\x26lt;all_urls\x26gt;\x3c\/code\x3e 在配置下 NW.js 的 window 或者其他配置就行，大概就是这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;: \x26quot;vue-nw-seed\x26quot;,\n  \x26quot;version\x26quot;: \x26quot;0.1.0\x26quot;,\n  \/\/ ...\n  \x26quot;main\x26quot;: \x26quot;http:\/\/localhost:8080\x26quot;,\n  \x26quot;window\x26quot;: {\n    \x26quot;title\x26quot;: \x26quot;vue-nw-seed\x26quot;,\n    \x26quot;toolbar\x26quot;: true,\n    \x26quot;width\x26quot;: 800,\n    \x26quot;height\x26quot;: 500,\n    \x26quot;min_width\x26quot;: 800,\n    \x26quot;min_height\x26quot;: 500,\n    \x26quot;resizable\x26quot;: true,\n    \x26quot;frame\x26quot;: true,\n    \x26quot;kiosk\x26quot;: false,\n    \x26quot;icon\x26quot;: \x26quot;\/static\/logo.png\x26quot;,\n    \x26quot;show_in_taskbar\x26quot;: true\n  },\n  \x26quot;nodejs\x26quot;: true,\n  \x26quot;js-flags\x26quot;: \x26quot;--harmony\x26quot;,\n  \x26quot;node-remote\x26quot;: \x26quot;\x3call_urls\x3e\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vue-nw-seed\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22version\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x220.1.0\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22main\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/localhost:8080\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22window\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22title\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vue-nw-seed\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22toolbar\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22width\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22height\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22min_width\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22min_height\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22resizable\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22frame\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22kiosk\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22icon\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/static\/logo.png\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22show_in_taskbar\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-string\x22\x3e\x22nodejs\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22js-flags\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22--harmony\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22node-remote\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x26lt;all_urls\x26gt;\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e4、修改 \x3ccode\x3enpm run dev\x3c\/code\x3e 打开浏览器为打开 NW.js\x3c\/h3\x3e\n\x3cp\x3e这一部应该是最复杂的一步，但实际上，相当简单。\x3cbr\x3e增加 \x3ccode\x3ebuild\/dev-nw.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var exec = require(\x27child_process\x27).exec\nvar path = require(\x27path\x27)\nvar fs = require(\x27fs\x27)\nvar nwPath = require(\x27nw\x27).findpath()\nvar rootPath = path.resolve(__dirname, \x27..\/\x27)\nvar packageJsonPath = path.resolve(rootPath, \x27.\/package.json\x27)\n\nmodule.exports = runNwDev\n\nfunction runNwDev(uri = \x27\x27) {\n  if (uri \x26amp;\x26amp; (uri \x2b \x27\x27).trim()) {\n    tmpJson = require(packageJsonPath)\n    tmpJson.main = uri\n    fs.writeFileSync(packageJsonPath, JSON.stringify(tmpJson, null, \x27  \x27), \x27utf-8\x27)\n  }\n\n  var closed\n  var nwDev = exec(nwPath \x2b \x27 \x27 \x2b rootPath, { cwd: rootPath }, function(err, stdout, stderr) {\n    process.exit(0)\n    closed = true\n  })\n\n  nwDev.stdout.on(\x27data\x27, console.log)\n  nwDev.stdout.on(\x27error\x27, console.error)\n\n  \/\/ 退出时也关闭 NW 进程\n  process.on(\x27exit\x27, exitHandle)\n  process.on(\x27uncaughtException\x27, exitHandle)\n\n  function exitHandle(e) {\n    if (!closed) nwDev.kill()\n    console.log(e || \x27233333, bye~~~\x27)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e exec = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27child_process\x27\x3c\/span\x3e).exec\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27fs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nwPath = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27nw\x27\x3c\/span\x3e).findpath()\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rootPath = path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e packageJsonPath = path.resolve(rootPath, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/package.json\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = runNwDev\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erunNwDev\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3euri = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (uri \x26amp;\x26amp; (uri \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e).trim()) {\n    tmpJson = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(packageJsonPath)\n    tmpJson.main = uri\n    fs.writeFileSync(packageJsonPath, \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(tmpJson, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27  \x27\x3c\/span\x3e), \x3cspan class=\x22hljs-string\x22\x3e\x27utf-8\x27\x3c\/span\x3e)\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e closed\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nwDev = exec(nwPath \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e \x2b rootPath, { \x3cspan class=\x22hljs-attr\x22\x3ecwd\x3c\/span\x3e: rootPath }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stdout, stderr\x3c\/span\x3e) \x3c\/span\x3e{\n    process.exit(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n    closed = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  })\n\n  nwDev.stdout.on(\x3cspan class=\x22hljs-string\x22\x3e\x27data\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log)\n  nwDev.stdout.on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error)\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 退出时也关闭 NW 进程\x3c\/span\x3e\n  process.on(\x3cspan class=\x22hljs-string\x22\x3e\x27exit\x27\x3c\/span\x3e, exitHandle)\n  process.on(\x3cspan class=\x22hljs-string\x22\x3e\x27uncaughtException\x27\x3c\/span\x3e, exitHandle)\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eexitHandle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!closed) nwDev.kill()\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e || \x3cspan class=\x22hljs-string\x22\x3e\x27233333, bye~~~\x27\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e并修改 \x3ccode\x3ebuild\/dev-server.js\x3c\/code\x3e 文件中打开浏览器的那部分代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/ when env is testing, don\x27t need open it\n  if (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x27testing\x27) {\n    require(\x27.\/dev-nw\x27)(uri)\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ when env is testing, don\x27t need open it\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (autoOpenBrowser \x26amp;\x26amp; process\x3cspan class=\x22hljs-selector-class\x22\x3e.env\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.NODE_ENV\x3c\/span\x3e !== \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e) {\n    require(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dev-nw\x27\x3c\/span\x3e)(uri)\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e至此，整个开发建构就完成了，是不是几乎无侵入性。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e二、打包 NW.js 应用\x3c\/h2\x3e\n\x3cp\x3e推荐使用官方的包 \x3ca href=\x22https:\/\/github.com\/nwjs\/nw-builder\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enw-builder\x3c\/a\x3e ，虽然好久都没咋更新过了。。。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e整体思路\x3c\/strong\x3e ：先打包 vue 项目，再用 Node.js 整理形成一个 \x3ccode\x3epackage.json\x3c\/code\x3e 文件到 dist 目录中去。再用 nw-builder 打包出 NW 应用。\x3c\/p\x3e\n\x3cp\x3e先看效果，增加信心。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLEe5?w=1112\x26amp;h=766\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLEe5?w=1112\x26amp;h=766\x22 alt=\x22seed-npm-run-build\x22 title=\x22seed-npm-run-build\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e1、安装 nw-builder\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install nw-builder --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install nw-builder --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个过程仅仅是安装了打包 NW 的包装器，其要用到的 runtime 要在使用的时候才下载。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e如果网络不好\x3c\/strong\x3e。。。可以自己先想个办法直接复制一份 runtime 到 cacheDir 目录中。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e2、增加 config\x3c\/h3\x3e\n\x3cp\x3e配置大于约定，2333。  \x3cbr\x3e增加 manifest 要被整理的字段，最终从 \x3ccode\x3e.\/package.json\x3c\/code\x3e 整理到 \x3ccode\x3e.\/dist\/package.json\x3c\/code\x3e 中。\x3cbr\x3e增加 builder 字段，可以参照 \x3ca href=\x22https:\/\/github.com\/nwjs\/nw-builder\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enw-builder\x3c\/a\x3e 文档来配置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\nvar path = require(\x27path\x27)\n\nfunction resolve(dir) {\n  return path.join(__dirname, \x27..\x27, dir)\n}\n\nmodule.exports = {\n  build: {\n    \/\/ ...\n    nw: {\n      \/\/ manifest for nw\n      \/\/ the fileds will merge with `.\/package.json` and build to `.\/dist\/package.json` for NW.js\n      \/\/ Manifest Format: http:\/\/docs.nwjs.io\/en\/latest\/References\/Manifest%20Format\/\n      manifest: [\x27name\x27, \x27appName\x27, \x27version\x27, \x27description\x27, \x27author\x27, { main: \x27.\/index.html\x27 }, \x27window\x27, \x27nodejs\x27, \x27js-flags\x27, \x27node-remote\x27],\n      \/\/ see document: https:\/\/github.com\/nwjs\/nw-builder\n      builder: {\n        files: [resolve(\x27.\/dist\/**\x27)],\n        platforms: [\x27win32\x27],\n        version: \x270.14.7\x27,\n        flavor: \x27normal\x27,\n        cacheDir: resolve(\x27.\/node_modules\/_nw-builder-cache\/\x27),\n        buildDir: resolve(\x27.\/output\x27),\n        zip: true,\n        winIco: resolve(\x27.\/static\/favicon.ico\x27),\n        buildType: \x27versioned\x27\n      }\n    }\n  },\n  dev: {\n    \/\/...\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eresolve\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3ebuild\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    nw: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ manifest for nw\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ the fileds will merge with `.\/package.json` and build to `.\/dist\/package.json` for NW.js\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Manifest Format: http:\/\/docs.nwjs.io\/en\/latest\/References\/Manifest%20Format\/\x3c\/span\x3e\n      manifest: [\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27appName\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27version\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27description\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27author\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3emain\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/index.html\x27\x3c\/span\x3e }, \x3cspan class=\x22hljs-string\x22\x3e\x27window\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27nodejs\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js-flags\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27node-remote\x27\x3c\/span\x3e],\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ see document: https:\/\/github.com\/nwjs\/nw-builder\x3c\/span\x3e\n      builder: {\n        \x3cspan class=\x22hljs-attr\x22\x3efiles\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\/**\x27\x3c\/span\x3e)],\n        \x3cspan class=\x22hljs-attr\x22\x3eplatforms\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27win32\x27\x3c\/span\x3e],\n        \x3cspan class=\x22hljs-attr\x22\x3eversion\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x270.14.7\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eflavor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27normal\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ecacheDir\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/node_modules\/_nw-builder-cache\/\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildDir\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/output\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3ezip\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ewinIco\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/static\/favicon.ico\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildType\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27versioned\x27\x3c\/span\x3e\n      }\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3edev\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e3、增加 \x3ccode\x3e.\/build\/build-nw.js\x3c\/code\x3e 文件\x3c\/h3\x3e\n\x3cp\x3e这个文件主要做的事情就是整理出 NW.js 用的 package.json，然后再调用 nw-builder 进行打包\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var exec = require(\x27child_process\x27).exec\nvar path = require(\x27path\x27)\nvar fs = require(\x27fs\x27)\nvar util = require(\x27util\x27)\n\nvar rootPath = path.resolve(__dirname, \x27..\/\x27)\n\n\/\/ get config\nvar config = require(path.resolve(rootPath, \x27config\x27))\n\n\/\/ `.\/package.json`\nvar tmpJson = require(path.resolve(rootPath, \x27.\/package.json\x27))\nvar manifestPath = path.resolve(config.build.assetsRoot, \x27.\/package.json\x27)\n\n\/\/ manifest for `.\/dist\/package.json`\nvar manifest = {}\nconfig.build.nw.manifest.forEach(function(v, i) {\n  if (util.isString(v)) manifest[v] = tmpJson[v]\n  else if (util.isObject(v)) manifest = util._extend(manifest, v)\n})\n\nfs.writeFile(manifestPath, JSON.stringify(manifest, null, \x27  \x27), \x27utf-8\x27, function(err, data) {\n  if (err) throw err\n\n  \/\/ start build app\n  if (!config.build.nw.builder) return\n  var NwBuilder = require(\x27nw-builder\x27)\n  var nw = new NwBuilder(config.build.nw.builder)\n  nw.build(function(err, data) {\n    if (err) console.log(err)\n    console.log(\x27build nw done!\x27)\n  })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e exec = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27child_process\x27\x3c\/span\x3e).exec\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27fs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e util = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27util\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rootPath = path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ get config\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(path.resolve(rootPath, \x3cspan class=\x22hljs-string\x22\x3e\x27config\x27\x3c\/span\x3e))\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ `.\/package.json`\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tmpJson = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(path.resolve(rootPath, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/package.json\x27\x3c\/span\x3e))\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e manifestPath = path.resolve(config.build.assetsRoot, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/package.json\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ manifest for `.\/dist\/package.json`\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e manifest = {}\nconfig.build.nw.manifest.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ev, i\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (util.isString(v)) manifest[v] = tmpJson[v]\n  \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (util.isObject(v)) manifest = util._extend(manifest, v)\n})\n\nfs.writeFile(manifestPath, \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(manifest, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27  \x27\x3c\/span\x3e), \x3cspan class=\x22hljs-string\x22\x3e\x27utf-8\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, data\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ start build app\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!config.build.nw.builder) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e NwBuilder = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27nw-builder\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nw = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e NwBuilder(config.build.nw.builder)\n  nw.build(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27build nw done!\x27\x3c\/span\x3e)\n  })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e4、在 \x3ccode\x3e.\/build\/build.js\x3c\/code\x3e 中增加打包入口\x3c\/h3\x3e\n\x3cp\x3e增加下面这一行代码在 webpack 打包完成的回调中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ start build nw.js app\n    require(\x27.\/build-nw.js\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ start build nw.js app\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build-nw.js\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简单 4 部就完成了打包，是不是异常清晰和简单。蛤\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e三、打包 windows 下的 setup.exe 文件\x3c\/h2\x3e\n\x3cp\x3e这个部分，我之前也写了一篇文章 \x3ca href=\x22https:\/\/github.com\/anchengjian\/anchengjian.github.io\/blob\/master\/posts\/2017\/pack-your-nw-app-and-setup-files.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e打包NW.js应用和制作windows安装文件\x3c\/a\x3e 里面有比较详细的打包介绍。\x3c\/p\x3e\n\x3cp\x3e但，在我们借助了 nw-builder 做了 NW 的打包后，仅仅打安装包就比较简单了，所以今天我就\x3cstrong\x3e简写\x3c\/strong\x3e，节约大家的时间和生命。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e主要思路\x3c\/strong\x3e：用 Node.js 操作 iss 文件，再借助官方推荐的 innosetup 进行打包。\x3c\/p\x3e\n\x3cp\x3e继续录一个 打包 exe 文件的 demo\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLEe0?w=1112\x26amp;h=766\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLEe0?w=1112\x26amp;h=766\x22 alt=\x22seed-npm-run-build\x22 title=\x22seed-npm-run-build\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e1、安装相关依赖\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install iconv-lite innosetup-compiler --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install iconv-lite innosetup-compiler --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e2、创建 \x3ccode\x3e.\/config\/setup.iss\x3c\/code\x3e 打包配置文件\x3c\/h3\x3e\n\x3cp\x3e踩坑注意，不要用 utf8 存这个文件，\x3cstrong\x3e用 ansi 格式存这个配置文件\x3c\/strong\x3e， 不然打出来的安装包是乱码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22; Script generated by the Inno Setup Script Wizard.\n; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!\n; This CWD is the directory where the `setup.iss`, pay attention to join the relative directory!\n; 该执行目录为 `setup.iss` 所在的目录，请注意拼接相对目录\n\n#define MyAppName \x26quot;_name_\x26quot;\n#define MyAppAliasName \x26quot;_appName_\x26quot;\n#define MyAppVersion \x26quot;_version_\x26quot;\n#define MyAppPublisher \x26quot;_appPublisher_\x26quot;\n#define MyAppURL \x26quot;_appURL_\x26quot;\n#define MyAppExeName \x26quot;_name_.exe\x26quot;\n#define OutputPath \x26quot;_outputPath_\x26quot;\n#define OutputFileName \x26quot;_outputFileName_\x26quot;\n#define SourceMain \x26quot;_filesPath_\\_name_.exe\x26quot;\n#define SourceFolder \x26quot;_filesPath_\\*\x26quot;\n#define LicenseFilePath \x26quot;_resourcesPath_\\license.txt\x26quot;\n#define SetupIconFilePath \x26quot;_resourcesPath_\\logo.ico\x26quot;\n#define MyAppId \x26quot;_appId_\x26quot;\n\n[Setup]\n; NOTE: The value of AppId uniquely identifies this application.\n; Do not use the same AppId value in installers for other applications.\n; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)\nAppId={#MyAppId}\nAppName={#MyAppName}\nAppVersion={#MyAppVersion}\nAppVerName={#MyAppAliasName}\nAppPublisher={#MyAppPublisher}\nAppPublisherURL={#MyAppURL}\nAppSupportURL={#MyAppURL}\nAppUpdatesURL={#MyAppURL}\nDefaultDirName={pf}\\{#MyAppName}\nLicenseFile={#LicenseFilePath}\nOutputDir={#OutputPath}\nOutputBaseFilename={#OutputFileName}\nSetupIconFile={#SetupIconFilePath}\nCompression=lzma\nSolidCompression=yes\nPrivilegesRequired=admin\nUninstallable=yes\nUninstallDisplayName={#MyAppAliasName}\nDefaultGroupName={#MyAppAliasName}\n\n[Tasks]\nName: \x26quot;desktopicon\x26quot;; Description: \x26quot;{cm:CreateDesktopIcon}\x26quot;; GroupDescription: \x26quot;{cm:AdditionalIcons}\x26quot;; Flags: checkedonce\n\n[Files]\nSource: {#SourceMain}; DestDir: \x26quot;{app}\x26quot;; Flags: ignoreversion\nSource: {#SourceFolder}; DestDir: \x26quot;{app}\x26quot;; Flags: ignoreversion recursesubdirs createallsubdirs\n\n[Messages]\nSetupAppTitle={#MyAppAliasName} setup wizard\nSetupWindowTitle={#MyAppAliasName} setup wizard\n\n[Icons]\nName: \x26quot;{commondesktop}\\{#MyAppAliasName}\x26quot;; Filename: \x26quot;{app}\\{#MyAppExeName}\x26quot;; Tasks: desktopicon\nName: \x26quot;{group}\\{#MyAppAliasName}\x26quot;; Filename: \x26quot;{app}\\{#MyAppExeName}\x26quot;\nName: \x26quot;{group}\\uninstall {#MyAppAliasName}\x26quot;; Filename: \x26quot;{uninstallexe}\x26quot;\n\n[Run]\nFilename: \x26quot;{app}\\{#MyAppExeName}\x26quot;; Description: \x26quot;{cm:LaunchProgram,{#StringChange(MyAppName, \x27\x26amp;\x27, \x27\x26amp;\x26amp;\x27)\x22}}\x22\x26quot;; Flags: nowait postinstall skipifsilent\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode class=\x22iss\x22\x3e; Script generated by the Inno Setup Script Wizard.\n; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!\n; This CWD is the directory where the `setup.iss`, pay attention to join the relative directory!\n; 该执行目录为 `setup.iss` 所在的目录，请注意拼接相对目录\n\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppName \x3cspan class=\x22hljs-string\x22\x3e\x22_name_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppAliasName \x3cspan class=\x22hljs-string\x22\x3e\x22_appName_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppVersion \x3cspan class=\x22hljs-string\x22\x3e\x22_version_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppPublisher \x3cspan class=\x22hljs-string\x22\x3e\x22_appPublisher_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppURL \x3cspan class=\x22hljs-string\x22\x3e\x22_appURL_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppExeName \x3cspan class=\x22hljs-string\x22\x3e\x22_name_.exe\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e OutputPath \x3cspan class=\x22hljs-string\x22\x3e\x22_outputPath_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e OutputFileName \x3cspan class=\x22hljs-string\x22\x3e\x22_outputFileName_\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e SourceMain \x3cspan class=\x22hljs-string\x22\x3e\x22_filesPath_\\_name_.exe\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e SourceFolder \x3cspan class=\x22hljs-string\x22\x3e\x22_filesPath_\\*\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e LicenseFilePath \x3cspan class=\x22hljs-string\x22\x3e\x22_resourcesPath_\\license.txt\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e SetupIconFilePath \x3cspan class=\x22hljs-string\x22\x3e\x22_resourcesPath_\\logo.ico\x22\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e#\x3cspan class=\x22hljs-meta-keyword\x22\x3edefine\x3c\/span\x3e MyAppId \x3cspan class=\x22hljs-string\x22\x3e\x22_appId_\x22\x3c\/span\x3e\x3c\/span\x3e\n\n[Setup]\n; NOTE: The value of AppId uniquely identifies this application.\n; Do not use the same AppId value in installers for other applications.\n; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)\nAppId={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppId}\x3c\/span\x3e\nAppName={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppName}\x3c\/span\x3e\nAppVersion={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppVersion}\x3c\/span\x3e\nAppVerName={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppAliasName}\x3c\/span\x3e\nAppPublisher={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppPublisher}\x3c\/span\x3e\nAppPublisherURL={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppURL}\x3c\/span\x3e\nAppSupportURL={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppURL}\x3c\/span\x3e\nAppUpdatesURL={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppURL}\x3c\/span\x3e\nDefaultDirName={pf}\\{\x3cspan class=\x22hljs-meta\x22\x3e#MyAppName}\x3c\/span\x3e\nLicenseFile={\x3cspan class=\x22hljs-meta\x22\x3e#LicenseFilePath}\x3c\/span\x3e\nOutputDir={\x3cspan class=\x22hljs-meta\x22\x3e#OutputPath}\x3c\/span\x3e\nOutputBaseFilename={\x3cspan class=\x22hljs-meta\x22\x3e#OutputFileName}\x3c\/span\x3e\nSetupIconFile={\x3cspan class=\x22hljs-meta\x22\x3e#SetupIconFilePath}\x3c\/span\x3e\nCompression=lzma\nSolidCompression=yes\nPrivilegesRequired=admin\nUninstallable=yes\nUninstallDisplayName={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppAliasName}\x3c\/span\x3e\nDefaultGroupName={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppAliasName}\x3c\/span\x3e\n\n[Tasks]\n\x3cspan class=\x22hljs-symbol\x22\x3eName:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22desktopicon\x22\x3c\/span\x3e; Description: \x3cspan class=\x22hljs-string\x22\x3e\x22{cm:CreateDesktopIcon}\x22\x3c\/span\x3e; GroupDescription: \x3cspan class=\x22hljs-string\x22\x3e\x22{cm:AdditionalIcons}\x22\x3c\/span\x3e; Flags: checkedonce\n\n[Files]\n\x3cspan class=\x22hljs-symbol\x22\x3eSource:\x3c\/span\x3e {\x3cspan class=\x22hljs-meta\x22\x3e#SourceMain}; DestDir: \x3cspan class=\x22hljs-string\x22\x3e\x22{app}\x22\x3c\/span\x3e; Flags: ignoreversion\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3eSource:\x3c\/span\x3e {\x3cspan class=\x22hljs-meta\x22\x3e#SourceFolder}; DestDir: \x3cspan class=\x22hljs-string\x22\x3e\x22{app}\x22\x3c\/span\x3e; Flags: ignoreversion recursesubdirs createallsubdirs\x3c\/span\x3e\n\n[Messages]\nSetupAppTitle={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppAliasName} setup wizard\x3c\/span\x3e\nSetupWindowTitle={\x3cspan class=\x22hljs-meta\x22\x3e#MyAppAliasName} setup wizard\x3c\/span\x3e\n\n[Icons]\n\x3cspan class=\x22hljs-symbol\x22\x3eName:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22{commondesktop}\\{#MyAppAliasName}\x22\x3c\/span\x3e; Filename: \x3cspan class=\x22hljs-string\x22\x3e\x22{app}\\{#MyAppExeName}\x22\x3c\/span\x3e; Tasks: desktopicon\n\x3cspan class=\x22hljs-symbol\x22\x3eName:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22{group}\\{#MyAppAliasName}\x22\x3c\/span\x3e; Filename: \x3cspan class=\x22hljs-string\x22\x3e\x22{app}\\{#MyAppExeName}\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3eName:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22{group}\\uninstall {#MyAppAliasName}\x22\x3c\/span\x3e; Filename: \x3cspan class=\x22hljs-string\x22\x3e\x22{uninstallexe}\x22\x3c\/span\x3e\n\n[Run]\n\x3cspan class=\x22hljs-symbol\x22\x3eFilename:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22{app}\\{#MyAppExeName}\x22\x3c\/span\x3e; Description: \x3cspan class=\x22hljs-string\x22\x3e\x22{cm:LaunchProgram,{#StringChange(MyAppName, \x27\x26amp;\x27, \x27\x26amp;\x26amp;\x27)\x22}}\x22\x22\x3c\/span\x3e; Flags: nowait postinstall skipifsilent\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e细心的你可能已经发现了这里面好多 \x3ccode\x3e_name_\x3c\/code\x3e 之类的东西，这玩意将要被 Node.js 替换成项目配置的信息，不需要每次手动改写这个复杂的 iss 文件。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e2、继续加配置\x3c\/h3\x3e\n\x3cp\x3e那句话咋说的来着，配置大于约定。23333333\x3cbr\x3e在 \x3ccode\x3e.\/config\/index.js\x3c\/code\x3e 文件中加上 \x3ccode\x3ebuild.nw.setup\x3c\/code\x3e 字段，来配置要打包出来的应用的信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    nw: {\n      \/\/ ...\n      setup: {\n        issPath: resolve(\x27.\/config\/setup.iss\x27),  \/\/ 就是上面那个 iss\n        files: path.resolve(\x27.\/output\x27, tmpJson.name \x2b \x27 - v\x27 \x2b tmpJson.version),  \/\/ 要打包的文件目录\n        outputPath: resolve(\x27.\/output\/setup\/\x27),\n        outputFileName: \x27${name}-${version}-${platform}-setup\x27,  \/\/ 提供 name、version、platform 三个字段进行自定义输出文件名配置\n        resourcesPath: resolve(\x27.\/build\/setup_resources\x27),  \/\/ 上面没说的打包用的 license 和 logo。参见 https:\/\/github.com\/anchengjian\/vue-nw-seed\/tree\/master\/build\/setup_resources\n        appPublisher: \x27vue-nw-seed, Inc.\x27,\n        appURL: \x27https:\/\/github.com\/anchengjian\/vue-nw-seed\x27,\n        appId: \x27\x22{{\x22A448363D-3A2F-4800-B62D-8A1C4D8F1115}\x27  \/\/ 如果有就写上\n      }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    nw: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n      setup: {\n        \x3cspan class=\x22hljs-attr\x22\x3eissPath\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/config\/setup.iss\x27\x3c\/span\x3e),  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 就是上面那个 iss\x3c\/span\x3e\n        files: path.resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/output\x27\x3c\/span\x3e, tmpJson.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27 - v\x27\x3c\/span\x3e \x2b tmpJson.version),  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 要打包的文件目录\x3c\/span\x3e\n        outputPath: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/output\/setup\/\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3eoutputFileName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27${name}-${version}-${platform}-setup\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提供 name、version、platform 三个字段进行自定义输出文件名配置\x3c\/span\x3e\n        resourcesPath: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build\/setup_resources\x27\x3c\/span\x3e),  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 上面没说的打包用的 license 和 logo。参见 https:\/\/github.com\/anchengjian\/vue-nw-seed\/tree\/master\/build\/setup_resources\x3c\/span\x3e\n        appPublisher: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-nw-seed, Inc.\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eappURL\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/github.com\/anchengjian\/vue-nw-seed\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eappId\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x22{{\x22A448363D-3A2F-4800-B62D-8A1C4D8F1115}\x27\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果有就写上\x3c\/span\x3e\n      }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e3、新增 \x3ccode\x3e.\/build\/build-win-setup.js\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e这个文件就是用来打包 windows 下安装包的。。。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var innosetupCompiler = require(\x27innosetup-compiler\x27)\nvar path = require(\x27path\x27)\nvar fs = require(\x27fs\x27)\nvar iconv = require(\x27iconv-lite\x27)\n\nvar rootPath = path.resolve(__dirname, \x27..\/\x27)\n\n\/\/ `.\/package.json`\nvar tmpJson = require(path.resolve(rootPath, \x27.\/package.json\x27))\n\n\/\/ get config\nvar config = require(path.resolve(rootPath, \x27config\x27))\nvar setupOptions = config.build.nw.setup\n\nfs.readdir(setupOptions.files, function(err, files) {\n  if (err) throw err\n\n  files.forEach(function(fileName) {\n    if (!~fileName.indexOf(\x27win\x27)) return\n\n    const curPath = path.resolve(setupOptions.files, fileName)\n    fs.stat(curPath, function(err, stats) {\n      if (err || stats.isFile()) return\n      if (stats.isDirectory()) {\n        makeExeSetup(Object.assign({}, setupOptions, { files: curPath, platform: fileName }))\n      }\n    })\n  })\n})\n\nfunction makeExeSetup(opt) {\n  const { issPath, files, outputPath, outputFileName, resourcesPath, appPublisher, appURL, appId, platform } = opt\n  const { name, appName, version } = tmpJson\n  const tmpIssPath = path.resolve(path.parse(issPath).dir, \x27_tmp.iss\x27)\n\n  return new Promise(function(resolve, reject) {\n    \/\/ rewrite name, version to iss\n    fs.readFile(issPath, null, function(err, text) {\n      if (err) return reject(err)\n\n      let str = iconv.decode(text, \x27gbk\x27)\n        .replace(\/_name_\/g, name)\n        .replace(\/_appName_\/g, appName)\n        .replace(\/_version_\/g, version)\n        .replace(\/_outputPath_\/g, outputPath)\n        .replace(\/_outputFileName_\/g, getOutputName(outputFileName, { name, version, platform }))\n        .replace(\/_filesPath_\/g, files)\n        .replace(\/_resourcesPath_\/g, resourcesPath)\n        .replace(\/_appPublisher_\/g, appPublisher)\n        .replace(\/_appURL_\/g, appURL)\n        .replace(\/_appId_\/g, appId)\n\n\n      fs.writeFile(tmpIssPath, iconv.encode(str, \x27gbk\x27), null, function(err) {\n        if (err) return reject(err)\n\n        \/\/ inno setup start\n        innosetupCompiler(tmpIssPath, { gui: false, verbose: true }, function(err) {\n          fs.unlinkSync(tmpIssPath)\n          if (err) return reject(err)\n          resolve(opt)\n        })\n      })\n    })\n  })\n}\n\nfunction getOutputName(str, data) {\n  return str.replace(\/\\$\\{(.*?)\\}\/g, function(a, b) {\n    return data[b] || b\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e innosetupCompiler = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27innosetup-compiler\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27fs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iconv = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27iconv-lite\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rootPath = path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ `.\/package.json`\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tmpJson = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(path.resolve(rootPath, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/package.json\x27\x3c\/span\x3e))\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ get config\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(path.resolve(rootPath, \x3cspan class=\x22hljs-string\x22\x3e\x27config\x27\x3c\/span\x3e))\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e setupOptions = config.build.nw.setup\n\nfs.readdir(setupOptions.files, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, files\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n\n  files.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efileName\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!~fileName.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27win\x27\x3c\/span\x3e)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e curPath = path.resolve(setupOptions.files, fileName)\n    fs.stat(curPath, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err || stats.isFile()) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (stats.isDirectory()) {\n        makeExeSetup(\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, setupOptions, { \x3cspan class=\x22hljs-attr\x22\x3efiles\x3c\/span\x3e: curPath, \x3cspan class=\x22hljs-attr\x22\x3eplatform\x3c\/span\x3e: fileName }))\n      }\n    })\n  })\n})\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeExeSetup\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eopt\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { issPath, files, outputPath, outputFileName, resourcesPath, appPublisher, appURL, appId, platform } = opt\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { name, appName, version } = tmpJson\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e tmpIssPath = path.resolve(path.parse(issPath).dir, \x3cspan class=\x22hljs-string\x22\x3e\x27_tmp.iss\x27\x3c\/span\x3e)\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ rewrite name, version to iss\x3c\/span\x3e\n    fs.readFile(issPath, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, text\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e reject(err)\n\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e str = iconv.decode(text, \x3cspan class=\x22hljs-string\x22\x3e\x27gbk\x27\x3c\/span\x3e)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_name_\/g\x3c\/span\x3e, name)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_appName_\/g\x3c\/span\x3e, appName)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_version_\/g\x3c\/span\x3e, version)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_outputPath_\/g\x3c\/span\x3e, outputPath)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_outputFileName_\/g\x3c\/span\x3e, getOutputName(outputFileName, { name, version, platform }))\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_filesPath_\/g\x3c\/span\x3e, files)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_resourcesPath_\/g\x3c\/span\x3e, resourcesPath)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_appPublisher_\/g\x3c\/span\x3e, appPublisher)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_appURL_\/g\x3c\/span\x3e, appURL)\n        .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/_appId_\/g\x3c\/span\x3e, appId)\n\n\n      fs.writeFile(tmpIssPath, iconv.encode(str, \x3cspan class=\x22hljs-string\x22\x3e\x27gbk\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e reject(err)\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ inno setup start\x3c\/span\x3e\n        innosetupCompiler(tmpIssPath, { \x3cspan class=\x22hljs-attr\x22\x3egui\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3everbose\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n          fs.unlinkSync(tmpIssPath)\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e reject(err)\n          resolve(opt)\n        })\n      })\n    })\n  })\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetOutputName\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr, data\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\\$\\{(.*?)\\}\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea, b\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data[b] || b\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e4、再配置这个打包的入口\x3c\/h3\x3e\n\x3cp\x3e在我们上文提到的打包 NW 应用的那个文件中 \x3ccode\x3e.\/build\/build-nw.js\x3c\/code\x3e 中的最后打包完成的回调里加个调用入口\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ build windows setup\n    if (config.build.noSetup) return\n    if (~config.build.nw.builder.platforms.toString().indexOf(\x27win\x27)) require(\x27.\/build-win-setup.js\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ build windows setup\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.noSetup) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (~config.build.nw.builder.platforms.toString().indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27win\x27\x3c\/span\x3e)) \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build-win-setup.js\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这次简洁吧，4 部就完成了打包。\x3cbr\x3e来看效果。\x3c\/p\x3e\n\x3cp\x3e原文持续更新: \x3ca href=\x22https:\/\/github.com\/anchengjian\/anchengjian.github.io\/blob\/master\/posts\/2017\/vuejs-webpack-nwjs-2.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/anchengjian\/anchengjian.github.io\/blob\/master\/posts\/2017\/vuejs-webpack-nwjs-2.md\x3c\/a\x3e，同时，如果对您有用，帮我点个 star 吧，写这玩意不容易啊。  \x3c\/p\x3e\n\x3cp\x3e如果你真的看到这儿了，我也就输了。。。\x3cbr\x3e那就顺便看看 \x3ca href=\x22https:\/\/github.com\/anchengjian\/vue-nw-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-nw-seed\x3c\/a\x3e 这个项目吧，里面包含了我这篇文章里的所有的点和一些别的优化。  \x3cbr\x3e希望还有其他需求的朋友可以提 issue 或者私信讨论   \x3c\/p\x3e\n\x3cp\x3e谢谢！您的支持是我继续更新下去的动力。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用 vue2 和 webpack 快速建构 NW.js 项目(3)</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008933762">https://segmentfault.com/a/1190000008933762</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/pvp1m0q8mc/" target="_blank">https://alili.tech/archive/pvp1m0q8mc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/lfmj4xr00e/">2016年终总结--前端生涯从0到1的过程<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/ukfvl3yzohq/">ES6新语法疑点简析<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/adal5cm5rlr/">Icon 进化史<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/xwquh4g09bl/">JS 中 TDZ 的理解<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/13j072ppoyf/">Javascript 中 Y 组合子的推导<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/kn3l7fwd55/">Redux story-1:who creates it?<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/9gngp6sg77/">Redux概念之二: Redux的三大原则<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/ktc291v9lq/">V8 Object 内存结构与属性访问详解<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/62hk7sdq93k/">Vue&#43;MySQL&#43;Express小试牛刀<aside class="dates">2019-01-27</aside></a></li><li><a href="/archive/q9tzlra5qaj/">Vue2.0简易案例<aside class="dates">2019-01-27</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>