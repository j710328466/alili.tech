<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用TypeScript弥补Elm和JavaScript之间的差距"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用TypeScript弥补Elm和JavaScript之间的差距 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/hvks3gpluns/",
				"appid": "1613049289050283", 
				"title": "用TypeScript弥补Elm和JavaScript之间的差距 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-24T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xh1hdhpnkc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/obpx2bvdfjo/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&text=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&text=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&title=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&is_video=false&description=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&title=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&title=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&title=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhvks3gpluns%2f&title=%e7%94%a8TypeScript%e5%bc%a5%e8%a1%a5Elm%e5%92%8cJavaScript%e4%b9%8b%e9%97%b4%e7%9a%84%e5%b7%ae%e8%b7%9d"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用TypeScript弥补Elm和JavaScript之间的差距</h1><div class="meta"><div class="postdate"><time datetime="2019-01-24" itemprop="datePublished">2019-01-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t019d2845bd7ca5f720.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e近些日子，我使用了新语言编程，从JavaScript，切确地说是Elm，转成TypeScript。\x3ca href=\x22https:\/\/medium.com\/front-end-hacking\/es2015-vs-elm-vs-typescript-a88dbc5d14d9\x22\x3e我写过一篇文章\x3c\/a\x3e解释了我为什么选择TypeScript作为我的前端语言。在本文中，我将继续深挖一些我非常喜欢的TypeScript特性。\x3c\/p\x3e\n\x3ch3\x3e联合类型--更好地表达数据\x3c\/h3\x3e\n\x3cp\x3e在我短暂使用Elm编程的过程中，越来越喜欢\x3ca href=\x22https:\/\/guide.elm-lang.org\/types\/union_types.html\x22\x3e联合类型\x3c\/a\x3e这个特性。让我们探究这个特性，看它是怎么让Elm和TypeScript变得更加好用。\x3c\/p\x3e\n\x3cp\x3e联合类型，又被称为标记联合和代数数据类型（ADTs）。相对于仅仅只是用Javascript内置的数据类型，它能让编程者更加精确地表达数据。\x3c\/p\x3e\n\x3cp\x3e很多编程语言难以表达好结构奇怪的数据。这些语言只提供一小组内置类型，而你所有数据都得使用这些类型去表达。所以你经常使用\x22null\x22，或者布尔值或者字符串去表达奇怪的细节，这是很容易出错。\x3c\/p\x3e\n\x3cp\x3eElm的联合类型让复杂数据更加自然地表达--\x3ca href=\x22http:\/\/evan.czaplicki.us\/\x22\x3eEvan Czaplicki\x3c\/a\x3e(Elm作者)。\x3c\/p\x3e\n\x3cp\x3eRedux是受Elm启发而来。在Redux和Elm中，应用数据的流动和变化通过接口的形式体现。这个过程非常类似Elm中的联合类型。让我们看些代码来证明这一点。\x3c\/p\x3e\n\x3cp\x3eRedux Reducer 例子\x3c\/p\x3e\n\x3cp\x3eRedux中的核心抽象就是reducer函数。store是应用中储存数据的地方，reducer函数作用于store之前，它让开发者能精确控制着应用数据的变化。在用redux构建的应用中，数据被认为是不可变化的，改变数据的唯一方法是行动触发了reducer函数，reducer函数根据行动的类型返回下一个数据状态。配合Immutable JS，JavaScript基本拥有了Elm 架构的所有功能。唯一缺失的是静态数据，尤其是联合类型。接下来，我重写了一些reducer函数的例子来证明Elm和Redux的相似。\x3c\/p\x3e\n\x3cp\x3e当我开始学习Elm时，我发现了Redux和Elm架构之间的相似性，我就像\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t01007d2cad4aac68cb.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e我在哪里？耶，是的，联合类型。就如你上面所看的，我使用了一个联合类型：\x27Msg\x27类型。这个关键词现在变成了一种类型。当你使用Javascript和Redux时，你需要确保reducer函数是正确的。所以你必须将动作类型定义为不变类型并且确保它们没写错，还要确定在reducer函数中没有改变了数据状态。\x3c\/p\x3e\n\x3cp\x3e你写了大量的单元测试，确保每种情况都覆盖到，并且每种场景都能返你想要的结果，这些结果是由动作触发或reducer函数决定的。随着项目的发展，事情开始偏离正轨。当你重构你的代码时，保持测试与代码同步是非常烦人的事情。Redux需要数据的正确，但是由于Javascript自身没有静态类型，我们编写或者重构代码时，不能在编译器时就帮我们检查出来。\x3c\/p\x3e\n\x3cp\x3e然而在Elm中就完全不一样了。编译器，依靠其本身优秀的特性，会全程帮助我们。事实上，如果写错了类型或者常数，就不能编译成功。这就是联合类型的力量所在。\x3c\/p\x3e\n\x3cp\x3e当调用update函数时，按字面意思，必须传递一个\x22Msg\x22类型给函数；如果传递了其它内容，Elm将不会编译通过。如果忘记处理其中某个情况，Elm编译器会给你一个友好提示，告诉你现在不能处理所有情况，因为你没有将默认的情况考虑进去。\x3c\/p\x3e\n\x3cp\x3e这意味着在编译的时候，你就能查找出所有bug而不用等到代码运行才发现。这样，由于运行时出的错误和写测试用例所花费的一大串时间都能省下来。除此之外，联合类型让我们可以用声明式和描述式的方式去定义数据类型和使用方式。\x3c\/p\x3e\n\x3cp\x3e正如我 \x3ca href=\x22https:\/\/medium.com\/front-end-hacking\/es2015-vs-elm-vs-typescript-a88dbc5d14d9#.5tjzeoike\x22\x3e上一篇文章\x3c\/a\x3e所讨论的，不管我多喜欢Elm，我还是时不时要写JavaScript。TypeScript帮我解决了这个难题，主要是因为它支持联合类型。让我们看看在Redux中怎样使用TypeScript的联合类型。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t015c3af62e64cf3f5a.png\x22 alt=\x22\x22\x3e有人记得是哪部电影吗?\x3c\/p\x3e\n\x3ch3\x3e用静态数据构建UI组件框架编写组件框架文档\x3c\/h3\x3e\n\x3cp\x3eReact首先提出了构建独立可重复使用的UI组件框架这个概念。经过几年的发展，我们真的看到一些令人惊叹的框架，比如\x3ca href=\x22https:\/\/grommet.github.io\/\x22\x3eGrommet UX\x3c\/a\x3e, \x3ca href=\x22http:\/\/www.material-ui.com\/\x22\x3eMaterial UI\x3c\/a\x3e, \x3ca href=\x22http:\/\/blueprintjs.com\/\x22\x3eBlueprint\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/ant.design\/\x22\x3eAnt.Design\x3c\/a\x3e。我一直有个目标，想为这些框架做出贡献，现在我已成为Grommet的贡献者。看着这些优秀框架的建立过程，让我更加明白哪些功能是框架能做，哪些不能做。\x3c\/p\x3e\n\x3cp\x3e创建可复用UI组件是我的日常工作，在构建React\/TypeScript开源项目的过程中，我发现这种能力得到了提升。不仅如此，我花在写文档和测试用例的时间比以前少。这要归功于TypeScript编译器，跟Elm编译器很类似，它们可以给你很有用的建议，让你能嵌入元数据，这些元数据在代码中描述了你的目的，让编译器去使用。它允许您在编写代码时对其进行文档化，使用智能工具甚至可以为您生成文档。\x3c\/p\x3e\n\x3cp\x3e如果我将要构建一个全新的UI套件，基于上面提到几点原因，我百分百会使用TypeScript。\x3c\/p\x3e\n\x3ch3\x3e总结\x3c\/h3\x3e\n\x3cp\x3e静态类型是一个被JavaScript丢失的特性。我们非常幸运看到，当我们写JavaScript时，我们能选择去使用静态类型。不管你是不是有函数编程的背景，类型都能帮你写出自文档的代码，这些能帮你规范好数据。在没有静态类型下，是很难做到的。\x3c\/p\x3e\n\x3cp\x3e我写这边文章，目的就是想分享一些特性，这些特性使用享受使用类型化的JavaScript。如果你喜欢这篇文章，关注我并且把他分享给朋友。下期见。\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用TypeScript弥补Elm和JavaScript之间的差距</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/bridging-the-gap-between-elm-and-javascript-with-typescript">https://www.zcfy.cc/article/bridging-the-gap-between-elm-and-javascript-with-typescript</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/hvks3gpluns/" target="_blank">https://alili.tech/archive/hvks3gpluns/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>