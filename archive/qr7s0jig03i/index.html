<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用nodejs自动生成前端项目组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用nodejs自动生成前端项目组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qr7s0jig03i/",
				"appid": "1613049289050283", 
				"title": "使用nodejs自动生成前端项目组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-09T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/cp10fv9bkjn/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/junqhkh9awn/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&text=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&text=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&title=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&is_video=false&description=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&title=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&title=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&title=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqr7s0jig03i%2f&title=%e4%bd%bf%e7%94%a8nodejs%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用nodejs自动生成前端项目组件</h1><div class="meta"><div class="postdate"><time datetime="2019-01-09" itemprop="datePublished">2019-01-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e脚本编写背景\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109165\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109165\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e写这个小脚本的初衷是，项目本身添加一个组件太繁琐了，比如我想要去建立一个login的组件，那么我需要手动去IDE中，创建index.js(组件出口文件)，login.js(业务文件)，login.html，login.less这四个文件。因为每个组件都有一些输出的代码，还要把之前组件的那几行拷贝过来，这种作业真的烦，于是乎写了一个小脚本去自动完成这些功能。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3cem\x3ePS:本脚本运行环境是nodeV7以上，当前时间2017\/07，stable版本还是V6，最新的node版本为V8.1.3（current版本），如要运行，请升级node版本为current版本。\x3c\/em\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e预期效果\x3c\/h2\x3e\n\x3cp\x3e在命令行输入：\x3ccode\x3enode set login\x3c\/code\x3e \x3cbr\x3e在conponents文件夹下面自动生成4个文件，并填写index.js , login.js的文件公共内容。\x3cbr\x3e如果输入多层文件如： \x3ccode\x3enode set login\/foo\x3c\/code\x3e\x3cbr\x3e则会先检测conponents文件夹下是否存在login，如不存在，先创建login文件夹，然后创建foo的组件。本脚本主要使用nodejs的fs模块来完成需求。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3efs模块\x3c\/h2\x3e\n\x3cp\x3efs模块用于对系统文件及目录进行读写操作，本次主要用到的fs模块的功能有：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3efs.existsSync(path)\x3c\/strong\x3e 检测文件夹是否存在，一个同步的API，只接受一个路径参数，当前版本异步的废弃了。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3efs.mkdir(path,callback)\x3c\/strong\x3e 创建文件夹，异步，两个必填参数，路径和回掉。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3efs.readFileSync(path)\x3c\/strong\x3e 读取文件，接受一个参数，文件路径。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3efs.writeFile(path,data,callback)\x3c\/strong\x3e 写文件，接受三个参数，文件路径，向文件中写的数据，回掉。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e代码实施\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e流程图\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109166\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109166\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22async function creatCpt() {\n    try {\n        await exists(); \/\/ 检测文件夹\n        await readFile(); \/\/ 读取模板内容\n        await writeFile(await readFile()); \/\/写入组件\n    }\n    catch (err) {\n        console.error(err);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreatCpt\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e exists(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检测文件夹\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e readFile(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 读取模板内容\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e writeFile(\x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e readFile()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/写入组件\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (err) {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e获取命令行参数\x3c\/h3\x3e\n\x3cp\x3e以node set login为例，想要创建一个login文件夹，首先先要获取命令行当中的login。在nodejs当中，获取命令行参数使用\x3ccode\x3eprocess.argv\x3c\/code\x3e这条命令返回一个数组，第一个参数为nodejs.exe的应用所在绝对路径，第二个参数为当前脚本所在的绝对路径，之后所输入的参数以空格分隔，如输入node set aaa,得到：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109167\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109167\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e检测文件夹是否存在\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let exists = function () {\n    return new Promise((res) =\x3e {\n        (async function () {\n            for (let a of path) {\n                fs.existsSync(basepath \x2b a) ? basepath = `${basepath}${a}\/` : await mkdir(a);\n            }\n            res(basepath);\n        })()\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e exists = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        (\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e path) {\n                fs.existsSync(basepath \x2b a) ? basepath = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${basepath}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${a}\x3c\/span\x3e\/`\x3c\/span\x3e : \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e mkdir(a);\n            }\n            res(basepath);\n        })()\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e判断是否存在文件夹，如果存在，重新拼接路径继续检查，如不存在则生成文件夹。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e创建文件夹\x3c\/h3\x3e\n\x3cp\x3enode set foo\/bar\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109168\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109168\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let mkdir = function (a) {\n    return new Promise((res, rej) =\x3e {\n        fs.mkdir(basepath \x2b a, (err) =\x3e {\n            if (err) rej(err);\n            basepath = `${basepath}${a}\/`\n            res(basepath);\n        });\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mkdir = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eres, rej\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        fs.mkdir(basepath \x2b a, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) rej(err);\n            basepath = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${basepath}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${a}\x3c\/span\x3e\/`\x3c\/span\x3e\n            res(basepath);\n        });\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e创建文件夹成功后，重新拼接路径，以便于继续查找。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e读取模板内容\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let reads = [`${basepath}cptTemp\/index.js`, `${basepath}cptTemp\/cptTemp.js`];\/\/要读取的文件\n\nlet readFile = function () {\n    return new Promise((res) =\x3e {\n        for (let a of reads) {\n            let text = fs.readFileSync(a).toString();\n            text = text.replace(\/time\/g, moment().format(\x27YYYY\/MM\/DD\x27))\n                .replace(\/temp\/g, name);\n            file.push(text)\n        }\n        res(file);\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e reads = [\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${basepath}\x3c\/span\x3ecptTemp\/index.js`\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${basepath}\x3c\/span\x3ecptTemp\/cptTemp.js`\x3c\/span\x3e];\x3cspan class=\x22hljs-comment\x22\x3e\/\/要读取的文件\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e readFile = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e reads) {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e text = fs.readFileSync(a).toString();\n            text = text.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/time\/g\x3c\/span\x3e, moment().format(\x3cspan class=\x22hljs-string\x22\x3e\x27YYYY\/MM\/DD\x27\x3c\/span\x3e))\n                .replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/temp\/g\x3c\/span\x3e, name);\n            file.push(text)\n        }\n        res(file);\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109169\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109169\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e每个生成好的文件都需要一个创建的时间，及作者，包括文件的输出，以及class等结构，这些都是比较公用的，把他们写在模板当中，然后读取出来，替换其中的关键词，如时间，组件名等。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e生成文件并写入内容\x3c\/h3\x3e\n\x3cp\x3e提前建立好要生成的文件和要读取的文件。如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let writes = [`${name}.js`, `${name}.html`, `${name}.less`, `index.js`];\n\nlet writeFile = function (file) {\n    return new Promise((res, rej) =\x3e {\n        (async function () {\n            for (let a of writes) {\n                await fs.writeFile(`${basepath}${a}`,\n                    a == writes[3] ? file[0] : a == writes[0] ? file[1] : \x27\x27, (err) =\x3e {\n                        if (err) rej(err)\n                    })\n            }\n            res(\x27succ\x27);\n        })()\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e writes = [\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e.js`\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e.html`\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e.less`\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e`index.js`\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e writeFile = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3efile\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eres, rej\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        (\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e writes) {\n                \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e fs.writeFile(\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${basepath}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${a}\x3c\/span\x3e`\x3c\/span\x3e,\n                    a == writes[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e] ? file[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] : a == writes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] ? file[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] : \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, (err) =\x26gt; {\n                        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) rej(err)\n                    })\n            }\n            res(\x3cspan class=\x22hljs-string\x22\x3e\x27succ\x27\x3c\/span\x3e);\n        })()\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010109170\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010109170\x22 alt=\x22这里写图片描述\x22 title=\x22这里写图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e目前只写了2个要读取的模板，在生成文件之后，会将模板中的内容填充进去。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e以上就完成了一个自动生成前端项目组件的小脚本了，当然，还可以继续扩充，比如这些组件其实还需要再到，组件管理的那个js中去注入，这些都可以用脚本完成，本文就到这里为止了。\x3c\/p\x3e\n\x3cp\x3e项目地址：\x3ca href=\x22https:\/\/github.com\/jiwenjiang\/angularSeed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/jiwenjiang...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用nodejs自动生成前端项目组件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010109160">https://segmentfault.com/a/1190000010109160</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qr7s0jig03i/" target="_blank">https://alili.tech/archive/qr7s0jig03i/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>