<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从 &#43;&#43;[[]][&#43;[]]&#43;[&#43;[]]==10? 深入浅出弱类型 JS 的隐式转换"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从 &#43;&#43;[[]][&#43;[]]&#43;[&#43;[]]==10? 深入浅出弱类型 JS 的隐式转换 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/rkv2igdvslf/",
				"appid": "1613049289050283", 
				"title": "从 &#43;&#43;[[]][&#43;[]]&#43;[&#43;[]]==10? 深入浅出弱类型 JS 的隐式转换 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-25T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ywbeq5tee5h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/rgw7lstr2s/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&text=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&text=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&title=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&is_video=false&description=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&title=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&title=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&title=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frkv2igdvslf%2f&title=%e4%bb%8e%20%2b%2b%5b%5b%5d%5d%5b%2b%5b%5d%5d%2b%5b%2b%5b%5d%5d%3d%3d10%3f%20%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%ba%e5%bc%b1%e7%b1%bb%e5%9e%8b%20JS%20%e7%9a%84%e9%9a%90%e5%bc%8f%e8%bd%ac%e6%8d%a2"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从 &#43;&#43;[[]][&#43;[]]&#43;[&#43;[]]==10? 深入浅出弱类型 JS 的隐式转换</h1><div class="meta"><div class="postdate"><time datetime="2019-01-25" itemprop="datePublished">2019-01-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e从\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]==10?深入浅出弱类型JS的隐式转换\x3c\/h1\x3e\n\x3cp\x3e本文纯属原创? 如有雷同? 纯属抄袭? 不甚荣幸! 欢迎转载！\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e原文收录在\x3ca href=\x22https:\/\/github.com\/jawil\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e【我的GitHub博客】\x3c\/a\x3e，觉得本文写的不算烂的，可以点击\x3ca href=\x22https:\/\/github.com\/jawil\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e【我的GitHub博客】\x3c\/a\x3e顺便登录一下账号给个星星\x3cspan style=\x22font-weight:normal;\x22\x3e✨\x3c\/span\x3e鼓励一下，关注最新更新动态，大家一起多交流学习，欢迎随意转载交流，不要钱，文末没有福利哦?，你懂的?。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e如果你很直接，就是直白想看我的结果分析，请直接跳到[第六章]()，只要你看的懂，前面的知识点可以忽略。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e起因\x3c\/h3\x3e\n\x3cp\x3e凡是都有一个来源和起因，这个题不是我哪篇文章看到的，也不是我瞎几把乱造出来的，我也没这个天赋和能力，是我同事之前丢到群里，叫我们在浏览器输出一下，对结果出乎意料，本着实事求是的精神，探寻事物的本质，不断努力追根溯源，总算弄明白了最后的结果，最后的收获总算把js的隐式类型转换刨根问底的搞清楚了，也更加深入的明白了为什么JS是弱类型语言了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e题外话\x3c\/h3\x3e\n\x3cp\x3e一看就看出答案的大神可以跳过，鄙文会浪费你宝贵的时间，因为此文会很长，涉及到知识点很多很杂很细，以及对js源码的解读，而且很抽象，如果没有耐心，也可以直接跳过，本文记录本人探索这道问题所有的过程，会很长。\x3c\/p\x3e\n\x3cp\x3e可能写的不太清楚，逻辑不太严密，存在些许错误，还望批评指正，我会及时更正。去年毕业入坑前端一年，并不是什么老鸟，所以我也是以一个学习者的身份来写这篇文章，逆向的记录自己学习探索的过程，并不是指点江山，挥斥方遒，目空一切的大神，如果写的不好，还望见谅。\x3c\/p\x3e\n\x3cp\x3e首先对于这种问题，有人说是闲的蛋疼，整天研究这些无聊的，有啥用，开发谁会这么写，你钻牛角尖搞这些有意思吗？\x3c\/p\x3e\n\x3cp\x3e对于这种质疑，我只能说：爱看不看，反正不是写给你看。\x3c\/p\x3e\n\x3cp\x3e当然，这话也没错，开发过程中确实不会这么写，但是我们要把开发和学习区分开来，很多人开发只为完成事情，不求最好，但求最快，能用就行?。学习也是这样，停留在表面，会用API就行，不会去深层次思考原理，因此很难进一步提升，就是因为这样的态度才诞生了一大批一年经验重复三五年的API大神?。\x3c\/p\x3e\n\x3cp\x3e但是学习就不同，学习本生就是一个慢慢深入，寻根问底，追根溯源的过程，如果对于探寻问题的本质追求都没有，我只能说做做外包就好，探究这种问题对于开发确实没什么卵用，但是对我们了解JavaScript这门语言却有极大的帮助，可以让我们对这门语言的了解更上一个台阶。\x3cstrong\x3eJavaScript为什么是弱类型语言，主要体现在哪里，弱类型转换的机制又是什么？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e有人还是觉得其实这对学习JS也没什么多大卵用，我只能说：\x3cstrong\x3e我就喜欢折腾，你管得着？反正我收获巨多就够了。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]===10?这个对不对，我们先不管，先来看几个稍微简单的例子，当做练习入手。\x3c\/strong\x3e\x3cbr\x3e\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e一、作业例子：\x3c\/h3\x3e\n\x3cp\x3e这几个是留给大家的作业，涉及到的知识点下面我会先一一写出来，为什么涉及这些知识点，因为我自己一步步踩坑踩过来的，所以知道涉及哪些坑，大家最后按照知识点一步一步分析，一定可以得出 答案来，列出知识点之后，我们再来一起分析\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]===10?的正确性。\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e\x3cp\x3e{}\x2b{}\/\/chrome:\x22object Object\x22，Firfox:NaN\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e{}\x2b[]\/\/0\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e[]\x2b{}\/\/\x22[object Object]\x22\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e首先，关于1、2和3这三个的答案我是有一些疑惑，先给出答案，希望大家看完这篇文章能和我讨论一下自己的想法,求同存异。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x224.{}\x2b1\n\n5.({}\x2b1)\n\n6.1\x2b{}\n\n7.[]\x2b1\n\n8.1\x2b[]\n\n9.1-[]\n\n10.1-{}\n\n11.1-!{}\n\n12.1\x2b!{}\n\n13.1\x2b\x26quot;2\x26quot;\x2b\x26quot;2\x26quot;\n\n14.1\x2b \x2b\x26quot;2\x26quot;\x2b\x26quot;2\x26quot;\n\n15.1\x2b\x2b\x26quot;2\x26quot;\x2b\x26quot;2\x26quot;\n\n16.[]==![]\n\n17.[]===![]\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e{}\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e({}\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-number\x22\x3e6.1\x3c\/span\x3e\x2b{}\n\n\x3cspan class=\x22hljs-number\x22\x3e7.\x3c\/span\x3e[]\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e8.1\x3c\/span\x3e\x2b[]\n\n\x3cspan class=\x22hljs-number\x22\x3e9.1\x3c\/span\x3e-[]\n\n\x3cspan class=\x22hljs-number\x22\x3e10.1\x3c\/span\x3e-{}\n\n\x3cspan class=\x22hljs-number\x22\x3e11.1\x3c\/span\x3e-!{}\n\n\x3cspan class=\x22hljs-number\x22\x3e12.1\x3c\/span\x3e\x2b!{}\n\n\x3cspan class=\x22hljs-number\x22\x3e13.1\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e14.1\x3c\/span\x3e\x2b \x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e15.1\x3c\/span\x3e\x2b\x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e16.\x3c\/span\x3e[]==![]\n\n\x3cspan class=\x22hljs-number\x22\x3e17.\x3c\/span\x3e[]===![]\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这几个例子是我随便写的，几乎包含了所有弱类型转换所遇到的坑，为什么会出现这种情况，就不得不从JS这门语言的特性讲起，大家都知道JS是一门动态的弱类型语言，那么你有没有想过什么叫做弱类型？什么叫做动态？大家都知道这个概念，但有没有进一步思考呢？\x3c\/p\x3e\n\x3cp\x3e今天通过这几个例子就来了解一下JS的弱类型，什么是动态暂时不做探讨。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e二、强弱类型的判别\x3c\/h3\x3e\n\x3cp\x3e按照计算机语言的类型系统的设计方式,可以分为强类型和弱类型两种。二者之间的区别，就在于计算时是否可以不同类型之间对使用者透明地隐式转换。从使用者的角度来看，如果一个语言可以隐式转换它的所有类型，那么它的变量、表达式等在参与运算时，即使类型不正确，也能通过隐式转换来得到正确地类型，这对使用者而言，就好像所有类型都能进行所有运算一样，所以这样的语言被称作弱类型。与此相对，强类型语言的类型之间不一定有隐式转换。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e三、JS为什么是弱类型？\x3c\/h3\x3e\n\x3cp\x3e弱类型相对于强类型来说类型检查更不严格，比如说允许变量类型的隐式转换，允许强制类型转换等等。强类型语言一般不允许这么做。具体说明请看\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Strong_and_weak_typing\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e维基百科的说明\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e根据强弱类型的判别定义，和上面的十几个例子已经充分说明JavaScript 是一门弱类型语言了。\x3c\/p\x3e\n\x3cp\x3e\u2028先讲一讲一些概念，要想弄懂上面题目答案的原理，首先你要彻底弄懂以下的概念，有些时候对一些东西似懂非懂，其实就是对概念和规则没有弄透，弄透之后等会回过头对照就不难理解，不先了解透这些后面的真的不好理解，花点耐心看看，消化一下，最后串通梳理一下，一层一层的往下剥，答案迎刃而解。\x3c\/p\x3e\n\x3cp\x3e\u2028 \x3cstrong\x3e为了能够弄明白这种隐式转换是如何进行的，我们首先需要搞懂如下一些基础知识。如果没有耐心，直接跳到后面第四章[4.8 小结]()我总结的几条结论，这里仅给想要一步步通过过程探寻结果的人看。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e四、ECMAScript的运算符、{}解析、自动分号插入\x3c\/h3\x3e\n\x3ch4\x3e4.1 ECMAScript 运算符优先级\x3c\/h4\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e运算符\x3c\/th\x3e\n\x3cth\x3e描述\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3e. [] ()\x3c\/td\x3e\n\x3ctd\x3e字段访问、数组下标、函数调用以及表达式分组\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x2b\x2b — - \x2b ~ ! delete new typeof void\x3c\/td\x3e\n\x3ctd\x3e一元运算符、返回数据类型、对象创建、未定义值\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e* \/ %\x3c\/td\x3e\n\x3ctd\x3e乘法、除法、取模\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x2b - \x2b\x3c\/td\x3e\n\x3ctd\x3e加法、减法、字符串连接\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x26lt;\x26lt; \x26gt;\x26gt; \x26gt;\x26gt;\x26gt;\x3c\/td\x3e\n\x3ctd\x3e移位\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x26lt; \x26lt;= \x26gt; \x26gt;= instanceof\x3c\/td\x3e\n\x3ctd\x3e小于、小于等于、大于、大于等于、instanceof\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e== != === !==\x3c\/td\x3e\n\x3ctd\x3e等于、不等于、严格相等、非严格相等\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x26amp;\x3c\/td\x3e\n\x3ctd\x3e按位与\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e^\x3c\/td\x3e\n\x3ctd\x3e按位异或\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e \x3c\/td\x3e\n\x3ctd\x3e \x3c\/td\x3e\n\x3ctd\x3e按位或\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x26amp;\x26amp;\x3c\/td\x3e\n\x3ctd\x3e逻辑与\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd colspan=\x222\x22\x3e \x3c\/td\x3e\n\x3ctd\x3e\x26lt;span class=\x22Apple-tab-span\x22 style=\x22white-space:pre\x22\x26gt;\x26lt;\/span\x26gt;\x3c\/td\x3e\n\x3ctd\x3e逻辑或\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e?:\x3c\/td\x3e\n\x3ctd\x3e条件\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e= oP=\x3c\/td\x3e\n\x3ctd\x3e赋值、运算赋值\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e,\x3c\/td\x3e\n\x3ctd\x3e多重求值\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch4\x3e4.2 ECMAScript 一元运算符（\x2b、-）\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e一元运算符只有一个参数，即要操作的对象或值。它们是 ECMAScript 中最简单的运算符。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edelete\x3c\/code\x3e，\x3ccode\x3evoid\x3c\/code\x3e，\x3ccode\x3e--\x3c\/code\x3e，\x3ccode\x3e\x2b\x2b\x3c\/code\x3e这里我们先不扯，免得越扯越多，防止之前博文的啰嗦，这里咋们只讲重点，有兴趣的可以看看\x3ca href=\x22http:\/\/www.w3school.com.cn\/js\/pro_js_operators_unary.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ew3school(点我查看)\x3c\/a\x3e对这几个的详细讲解。\x3c\/p\x3e\n\x3cp\x3e上面的例子我们一个一个看，看一个总结一个规则，基本规则上面例子几乎都包含了，如有遗漏，还望反馈补上。\x3c\/p\x3e\n\x3cp\x3e这里我们只讲 \x3cstrong\x3e一元加法\x3c\/strong\x3e 和 \x3cstrong\x3e一元减法\x3c\/strong\x3e ：\x3c\/p\x3e\n\x3cp\x3e我们先看看\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范\x3c\/a\x3e（熟读规范，你会学到很多很多）对一元加法和一元减法的解读，我们翻到11.4.6和11.4.7。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572284?w=1498\x26amp;h=844\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572284?w=1498\x26amp;h=844\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e其中涉及到几个ECMAScript定义的抽象操作，ToNumber(x),ToPrimitive(x)等等 下一章详细解答，下面出现的抽象定义也同理，先不管这个，有基础想深入了解可以提前熟读\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范(点击查看)\x3c\/a\x3e。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e规范本来就是抽象的东西，不太好懂不要紧，我们看看例子，这里的规范我们只当做一种依据来证明这些现象。\x3c\/p\x3e\n\x3cp\x3e大多数人都熟悉一元加法和一元减法，它们在 ECMAScript 中的用法与您高中数学中学到的用法相同。\x3cbr\x3e一元加法本质上对数字无任何影响：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iNum = 20;\niNum = \x2biNum;\/\/注意不要和iNum \x2b= iNum搞混淆了;\nalert(iNum);    \/\/输出 \x26quot;20\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\niNum = \x2biNum;\x3cspan class=\x22hljs-comment\x22\x3e\/\/注意不要和iNum \x2b= iNum搞混淆了;\x3c\/span\x3e\nalert(iNum);    \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x2220\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e尽管一元加法对数字无作用，但对字符串却有有趣的效果，会把字符串转换成数字。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var sNum = \x26quot;20\x26quot;;\nalert(typeof sNum); \/\/输出 \x26quot;string\x26quot;\nvar iNum = \x2bsNum;\nalert(typeof iNum); \/\/输出 \x26quot;number\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e sNum = \x3cspan class=\x22hljs-string\x22\x3e\x2220\x22\x3c\/span\x3e;\nalert(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e sNum); \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22string\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = \x2bsNum;\nalert(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e iNum); \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22number\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码把字符串 \x2220\x22 转换成真正的数字。当一元加法运算符对字符串进行操作时，它计算字符串的方式与 parseInt() 相似，主要的不同是只有对以 \x220x\x22 开头的字符串（表示十六进制数字），一元运算符才能把它转换成十进制的值。因此，用一元加法转换 \x22010\x22，得到的总是 10，而 \x220xB\x22 将被转换成 11。\x3c\/p\x3e\n\x3cp\x3e另一方面，一元减法就是对数值求负（例如把 20 转换成 -20）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iNum = 20;\niNum = -iNum;\nalert(iNum);    \/\/输出 \x26quot;-20\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\niNum = -iNum;\nalert(iNum);    \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22-20\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e与一元加法运算符相似，一元减法运算符也会把字符串转换成近似的数字，此外还会对该值求负。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var sNum = \x26quot;20\x26quot;;\nalert(typeof sNum); \/\/输出 \x26quot;string\x26quot;\nvar iNum = -sNum;\nalert(iNum);        \/\/输出 \x26quot;-20\x26quot;\nalert(typeof iNum); \/\/输出 \x26quot;number\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e sNum = \x3cspan class=\x22hljs-string\x22\x3e\x2220\x22\x3c\/span\x3e;\nalert(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e sNum); \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22string\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = -sNum;\nalert(iNum);        \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22-20\x22\x3c\/span\x3e\nalert(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e iNum); \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x22number\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的代码中，一元减法运算符将把字符串 \x22-20\x22 转换成 -20（一元减法运算符对十六进制和十进制的处理方式与一元加法运算符相似，只是它还会对该值求负）。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e4.3 ECMAScript 加法运算符（\x2b）\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e在多数程序设计语言中，加性运算符（即加号或减号）通常是最简单的数学运算符。\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e在 ECMAScript 中，加性运算符有大量的特殊行为。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们还是先看看\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范\x3c\/a\x3e（熟读规范，你会学到很多很多）对加号运算符 ( \x2b )解读，我们翻到11.6.1。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572285?w=1746\x26amp;h=920\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572285?w=1746\x26amp;h=920\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e前面读不懂不要紧，下一章节会为大家解读这些抽象词汇，大家不要慌，但是第七条看的懂吧， \x3cstrong\x3e这就是为什么1\x2b\x221\x22=\x2211\x22而不等于2的原因\x3c\/strong\x3e ，因为规范就是这样的，浏览器没有思维只会按部就班的执行规则，所以规则是这样定义的，所以最后的结果就是规则规定的结果，知道规则之后，对浏览器一切运行的结果都会豁然开朗，哦，原来是这样的啊。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e在处理特殊值时，ECMAScript 中的加法也有一些特殊行为：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e某个运算数是 NaN，那么结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-Infinity 加 -Infinity，结果为 -Infinity。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eInfinity 加 -Infinity，结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x2b0 加 \x2b0，结果为 \x2b0。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-0 加 \x2b0，结果为 \x2b0。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-0 加 -0，结果为 -0。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e不过，如果某个运算数是字符串，那么采用下列规则：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e如果两个运算数都是字符串，把第二个字符串连接到第一个上。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果只有一个运算数是字符串，把另一个运算数转换成字符串，结果是两个字符串连接成的字符串。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = 5 \x2b 5; \/\/两个数字\nalert(result);      \/\/输出 \x26quot;10\x26quot;\nvar result2 = 5 \x2b \x26quot;5\x26quot;;  \/\/一个数字和一个字符串\nalert(result);      \/\/输出 \x26quot;55\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/两个数字\x3c\/span\x3e\nalert(result);      \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x2210\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result2 = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-string\x22\x3e\x225\x22\x3c\/span\x3e;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/一个数字和一个字符串\x3c\/span\x3e\nalert(result);      \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出 \x2255\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码说明了加法运算符的两种模式之间的差别。正常情况下，5\x2b5 等于 10（原始数值），如上述代码中前两行所示。不过，如果把一个运算数改为字符串 \x225\x22，那么结果将变为 \x2255\x22（原始的字符串值），因为另一个运算数也会被转换为字符串。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e注意：为了避免 JavaScript 中的一种常见错误，在使用加法运算符时，一定要仔细检查运算数的数据类型\x3c\/strong\x3e\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e4.4 ECMAScript 减法运算符（-）\x3c\/h4\x3e\n\x3cp\x3e减法运算符（-），也是一个常用的运算符：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iResult = 2 - 1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iResult = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e减、乘和除没有加法特殊，都是一个性质，这里我们就单独解读减法运算符（-）\x3c\/p\x3e\n\x3cp\x3e我们还是先看看\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范\x3c\/a\x3e（熟读规范，你会学到很多很多）对减号运算符 ( - )解读，我们翻到11.6.2。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572286?w=1690\x26amp;h=534\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572286?w=1690\x26amp;h=534\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e与加法运算符一样，在处理特殊值时，减法运算符也有一些特殊行为：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e某个运算数是 NaN，那么结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eInfinity 减 Infinity，结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-Infinity 减 -Infinity，结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eInfinity 减 -Infinity，结果为 Infinity。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-Infinity 减 Infinity，结果为 -Infinity。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x2b0 减 \x2b0，结果为 \x2b0。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-0 减 -0，结果为 -0。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x2b0 减 -0，结果为 \x2b0。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e某个运算符不是数字，那么结果为 NaN。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e注释：如果运算数都是数字，那么执行常规的减法运算，并返回结果。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e4.5 ECMAScript 前自增运算符（\x2b\x2b）\x3c\/h4\x3e\n\x3cp\x3e直接从 C（和 Java）借用的两个运算符是前增量运算符和前减量运算符。\x3cbr\x3e所谓前增量运算符，就是数值上加 1，形式是在变量前放两个加号（\x2b\x2b）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iNum = 10;\n\x2b\x2biNum;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n\x2b\x2biNum;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第二行代码把 iNum 增加到了 11，它实质上等价于：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iNum = 10;\niNum = iNum \x2b 1；\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iNum = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\niNum = iNum \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e；\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们还是先看看\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范\x3c\/a\x3e（熟读规范，你会学到很多很多）对前自增运算符 ( \x2b\x2b )解读，我们翻到11.4.4。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572287?w=1660\x26amp;h=516\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572287?w=1660\x26amp;h=516\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e此图有坑，后面会说到，坑了我很久。。。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e看不懂这些抽象函数和词汇也不要紧，想要深入了解可以通读\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范中文版\x3c\/a\x3e，看几遍就熟悉了，第一次看见这些肯定一脸懵逼，这是什么玩意，我们只要明白\x2b\x2b是干什么就行，这里不必去深究v8引擎怎么实现这个规范的。\x3cbr\x3e至于\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a=1;\nconsole.log(a\x2b\x2b);\/\/1\nvar b=1;\ncosole.log(\x2b\x2bb);\/\/2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a\x2b\x2b);\x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\ncosole.log(\x2b\x2bb);\x3cspan class=\x22hljs-comment\x22\x3e\/\/2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e还弄不明白的该好好补习了，这里不在本文的知识点，也不去花篇幅讲解这些，这里我们只要明白一点： \x3cstrong\x3e所谓前增量运算符，就是数值上加 1\x3c\/strong\x3e 。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e4.6 ECMAScript 自动分号(;)插入\x3c\/h4\x3e\n\x3cp\x3e尽管 JavaScript 有 C 的代码风格，但是它不强制要求在代码中使用分号，实际上可以省略它们。\x3c\/p\x3e\n\x3cp\x3eJavaScript 不是一个没有分号的语言，恰恰相反上它需要分号来就解析源代码。 因此 JavaScript 解析器在遇到由于缺少分号导致的解析错误时，会自动在源代码中插入分号。\x3c\/p\x3e\n\x3ch5\x3e4.6.1例子\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = function() {\n} \/\/ 解析错误，分号丢失\ntest()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n} \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 解析错误，分号丢失\x3c\/span\x3e\ntest()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e自动插入分号，解析器重新解析。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = function() {\n}; \/\/ 没有错误，解析继续\ntest()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n}; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没有错误，解析继续\x3c\/span\x3e\ntest()\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e4.6.2工作原理\x3c\/h5\x3e\n\x3cp\x3e下面的代码没有分号，因此解析器需要自己判断需要在哪些地方插入分号。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function(window, undefined) {\n    function test(options) {\n        log(\x27testing!\x27)\n\n        (options.list || []).forEach(function(i) {\n\n        })\n\n        options.value.test(\n            \x27long string to pass here\x27,\n            \x27and another long string to pass\x27\n        )\n\n        return\n        {\n            foo: function() {}\n        }\n    }\n    window.test = test\n\n})(window)\n\n(function(window) {\n    window.someLibrary = {}\n})(window)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow, undefined\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n        log(\x3cspan class=\x22hljs-string\x22\x3e\x27testing!\x27\x3c\/span\x3e)\n\n        (options.list || []).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n\n        })\n\n        options.value.test(\n            \x3cspan class=\x22hljs-string\x22\x3e\x27long string to pass here\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27and another long string to pass\x27\x3c\/span\x3e\n        )\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3efoo\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n        }\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.test = test\n\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)\n\n(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.someLibrary = {}\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是解析器\x22猜测\x22的结果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function(window, undefined) {\n    function test(options) {\n\n        \/\/ 没有插入分号，两行被合并为一行\n        log(\x27testing!\x27)(options.list || []).forEach(function(i) {\n\n        }); \/\/ \x3c- 插入分号\n\n        options.value.test(\n            \x27long string to pass here\x27,\n            \x27and another long string to pass\x27\n        ); \/\/ \x3c- 插入分号\n\n        return; \/\/ \x3c- 插入分号, 改变了 return 表达式的行为\n        { \/\/ 作为一个代码段处理\n            foo: function() {}\n        }; \/\/ \x3c- 插入分号\n    }\n    window.test = test; \/\/ \x3c- 插入分号\n\n\/\/ 两行又被合并了\n})(window)(function(window) {\n    window.someLibrary = {}; \/\/ \x3c- 插入分号\n})(window); \/\/\x3c- 插入分号\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow, undefined\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没有插入分号，两行被合并为一行\x3c\/span\x3e\n        log(\x3cspan class=\x22hljs-string\x22\x3e\x27testing!\x27\x3c\/span\x3e)(options.list || []).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n\n        }); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n        options.value.test(\n            \x3cspan class=\x22hljs-string\x22\x3e\x27long string to pass here\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27and another long string to pass\x27\x3c\/span\x3e\n        ); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号, 改变了 return 表达式的行为\x3c\/span\x3e\n        { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 作为一个代码段处理\x3c\/span\x3e\n            foo: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n        }; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.test = test; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 两行又被合并了\x3c\/span\x3e\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.someLibrary = {}; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x26lt;- 插入分号\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e解析器显著改变了上面代码的行为，在另外一些情况下也会做出错误的处理。\x3c\/p\x3e\n\x3ch5\x3e4.6.3 ECMAScript对自动分号插入的规则\x3c\/h5\x3e\n\x3cp\x3e我们翻到7.9章节，看看其中插入分号的机制和原理，清楚只写以后就可以尽量以后少踩坑\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e必须用分号终止某些 ECMAScript 语句 ( 空语句 , 变量声明语句 , 表达式语句 , do-while 语句 , continue 语句 , break 语句 , return 语句 ,throw 语句 )。这些分号总是明确的显示在源文本里。然而，为了方便起见，某些情况下这些分号可以在源文本里省略。描述这种情况会说：这种情况下给源代码的 token 流自动插入分号。\x3c\/strong\x3e\u2028\u2028\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572288?w=1968\x26amp;h=766\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572288?w=1968\x26amp;h=766\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572289?w=1796\x26amp;h=666\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572289?w=1796\x26amp;h=666\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e还是比较抽象，看不太懂是不是，不要紧，我们看看实际例子，总结出几个规律就行，我们先不看抽象的，看着头晕，看看具体的总结说明， \x3cstrong\x3e化抽象为具体\x3c\/strong\x3e 。\x3c\/p\x3e\n\x3cp\x3e首先这些规则是基于两点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e以换行为基础；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e解析器会尽量将新行并入当前行，当且仅当符合ASI规则时才会将新行视为独立的语句。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch6\x3e4.6.3.1 ASI的规则\x3c\/h6\x3e\n\x3cp\x3e\x3cstrong\x3e1. 新行并入当前行将构成非法语句，自动插入分号。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if(1 \x3c 10) a = 1\nconsole.log(a)\n\/\/ 等价于\nif(1 \x3c 10) a = 1;\nconsole.log(a);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 在continue,return,break,throw后自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22return\n{a: 1}\n\/\/ 等价于\nreturn;\n{a: 1};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. \x2b\x2b、--后缀表达式作为新行的开始，在行首自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a\n\x2b\x2b\nc\n\/\/ 等价于\na;\n\x2b\x2bc;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3ea\n\x2b\x2b\nc\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\na;\n\x2b\x2bc;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 代码块的最后一个语句会自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function(){ a = 1 }\n\/\/ 等价于\nfunction(){ a = 1; }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{ a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{ a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch6\x3e4.6.3.2 No ASI的规则\x3c\/h6\x3e\n\x3cp\x3e\x3cstrong\x3e1. 新行以 ( 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 1\nvar b = a\n(a\x2bb).toString()\n\/\/ 会被解析为以a\x2bb为入参调用函数a，然后调用函数返回值的toString函数\nvar a = 1\nvar b =a(a\x2bb).toString()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n(a\x2bb).toString()\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会被解析为以a\x2bb为入参调用函数a，然后调用函数返回值的toString函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b =a(a\x2bb).toString()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 新行以 [ 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = [\x27a1\x27, \x27a2\x27]\nvar b = a\n[0,1].slice(1)\n\/\/ 会被解析先获取a[1]，然后调用a[1].slice(1)。\n\/\/ 由于逗号位于[]内，且不被解析为数组字面量，而被解析为运算符，而逗号运算符会先执\n行左侧表达式，然后执行右侧表达式并且以右侧表达式的计算结果作为返回值\nvar a = [\x27a1\x27, \x27a2\x27]\nvar b = a[0,1].slice(1)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = [\x3cspan class=\x22hljs-string\x22\x3e\x27a1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27a2\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].slice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会被解析先获取a[1]，然后调用a[1].slice(1)。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由于逗号位于[]内，且不被解析为数组字面量，而被解析为运算符，而逗号运算符会先执\x3c\/span\x3e\n行左侧表达式，然后执行右侧表达式并且以右侧表达式的计算结果作为返回值\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = [\x3cspan class=\x22hljs-string\x22\x3e\x27a1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27a2\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].slice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. 新行以 \/ 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 1\nvar b = a\n\/test\/.test(b)\n\/\/ \/会被解析为整除运算符，而不是正则表达式字面量的起始符号。浏览器中会报test前多了个.号\nvar a = 1\nvar b = a \/ test \/ .test(b)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n\/test\/.test(b)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \/会被解析为整除运算符，而不是正则表达式字面量的起始符号。浏览器中会报test前多了个.号\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a \/ test \/ .test(b)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 新行以 \x2b 、 - 、 % 和 * 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 2\nvar b = a\n\x2ba\n\/\/ 会解析如下格式\nvar a = 2\nvar b = a \x2b a\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n\x2ba\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会解析如下格式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a \x2b a\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e5. 新行以 , 或 . 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 2\nvar b = a\n.toString()\nconsole.log(typeof b)\n\/\/ 会解析为\nvar a = 2\nvar b = a.toString()\nconsole.log(typeof b)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n.toString()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e b)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会解析为\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a.toString()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e b)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里我们已经对ASI的规则有一定的了解了，另外还有一样有趣的事情，就是“空语句”。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 三个空语句\n;;;\n\n\/\/ 只有if条件语句，语句块为空语句。\n\/\/ 可实现unless条件语句的效果\nif(1\x3e2);else\n  console.log(\x272 is greater than 1 always!\x27);\n\n\/\/ 只有while条件语句，循环体为空语句。\nvar a = 1\nwhile(\x2b\x2ba \x3c 100);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 三个空语句\x3c\/span\x3e\n;;;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有if条件语句，语句块为空语句。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可实现unless条件语句的效果\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x26gt;\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x272 is greater than 1 always!\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有while条件语句，循环体为空语句。\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(\x2b\x2ba \x26lt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e4.6.4 结论\x3c\/h5\x3e\n\x3cp\x3e建议绝对不要省略分号，同时也提倡将花括号和相应的表达式放在一行， 对于只有一行代码的 if 或者 else 表达式，也不应该省略花括号。 这些良好的编程习惯不仅可以提到代码的一致性，而且可以防止解析器改变代码行为的错误处理。\x3cbr\x3e\u2028\x3ca href=\x22https:\/\/www.zhihu.com\/question\/20298345\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e关于JavaScript 语句后应该加分号么？(点我查看)\x3c\/a\x3e我们可以看看知乎上大牛们对着个问题的看法。\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e4.7 ECMAScript 对{}的解读，确切说应该是浏览器对{}的解析\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3ejs引擎是如何判断{}是代码块还是对象的？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e这个问题不知道大家有没有想过，先看看几个例子吧？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572290?w=630\x26amp;h=524\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572290?w=630\x26amp;h=524\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e首先要深入明白的概念：\x3c\/p\x3e\n\x3ch5\x3e4.7.1 JavaScript的语句与原始表达式\x3c\/h5\x3e\n\x3cp\x3e原始表达式是表达式的最小单位——它不再包含其他表达式。javascript中的原始表达式包括this关键字、标识符引用、字面量引用、数组初始化、对象初始化和分组表达式，复杂表达式暂不做讨论。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e语句没有返回值，而表达式都有返回值的，表达式没有设置返回值的话默认返回都是undefined。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在 \x3ccode\x3ejavascript\x3c\/code\x3e 里面满足这个条件的就函数声明、变量声明(var a=10是声明和赋值)、for语句、if语句、while语句、switch语句、return、try catch。\x3cbr\x3e但是 javascript 还有一种函数表达式，它的形式跟函数声明一模一样。如果写 function fn() { return 0;} 是函数声明而写var a = function fn(){ return 0;} 等号后面的就是函数表达式。\x3c\/p\x3e\n\x3ch5\x3e4.7.2 再来看看几个例子吧\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.{a:1}\n2.{a:1};\n3.{a:1}\x2b1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e};\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们直接在chrome看看结果：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572291?w=506\x26amp;h=334\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572291?w=506\x26amp;h=334\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e很奇怪是吧：\x3cbr\x3e再来看看在Firefox下面的情况：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572292?w=660\x26amp;h=404\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572292?w=660\x26amp;h=404\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e其他IE没测，我Mac没法装IE,大家自行测试。\x3c\/p\x3e\n\x3cp\x3e第二个很好理解，在有;的情况下，chrome和Firefox一致的把{a:1}解析为代码块，那么{a:1}怎么理解这个代码块，为什么不报错，还记得goto语句吗，JavaScript保留了goto的语法，我最先也半天没缓过神来，还好记得c语言里面的这个语法，没白学，其实可以这么理解：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\na:\n 1;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e{\n\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\n \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e关于第二个{a:1}\x2b1的答案，chrome和Firefox接过也一致，两个浏览器都会把这段代码解析成:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\na:\n 1;\n};\n\x2b1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e{\n\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\n \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n};\n\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中关于{a:1}两个浏览器就达成了不一样的意见，只要{}前面没有任何运算符号，Firefox始终如一的把{}解析成{};也就是我们熟知的代码块，而不是对象字面量。\x3c\/p\x3e\n\x3cp\x3e而chrome就不同了，如果{a:1}后面和前面啥也没有，{a:1}在chrome浏览器会首先检查这个是不是标准对象格式，如果是返回这个对象，如果不是，则当做代码块执行代码。当然这种情况基本可以不考虑，你写代码就写个{a:1}然后就完了？\x3c\/p\x3e\n\x3cp\x3e共同的特点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e当{}的前面有运算符号的时候，\x2b，-，*，\/,()等等，{}都会被解析成对象字面量，这无可争议。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当{}前面没有运算符时候但有;结尾的时候，或者浏览器的自动分号插入机制给{}后面插入分号(;)时候，此时{}都会被解析成代码块。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e如果{}前面什么运算符都没有，{}后面也没有分号(;)结尾，Firefox会始终如一的解析为代码块，而chrome有细微的差别，chrome会解析为对象字面量。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e这里也是我通过浏览器输出结果进行的一种归纳，当然可能还有没有总结到位的地方，也可能还有错误，发现\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript规范\x3c\/a\x3e对于{}何时解析为对象何时解析为代码块也没有找到比较详细的解答，有可能也是我看的不仔细，遗漏了这块，还望大家能解答一下这块。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch4\x3e4.8 小结\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e如果你觉得以上的很繁琐，我是新手，也看不太懂，不要紧，不要慌，循序渐进，以后会懂的，这里我就直接总结出几个结论，总结的不对的地方，还望反馈指出，对照着结论来验证上面的十几个例子：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e\x3cp\x3e数组下标([])优先级最高， 一元运算符（--，\x2b\x2b，\x2b，-）的优先级高于加法或减法运算符（\x2b，-）；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x2b\x2b前增量运算符，就是数值上加 1；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e一元运算符（\x2b，-）的后面如果不是数字，会调用 \x3cstrong\x3eToNumber\x3c\/strong\x3e 方法按照规则转化成数字类型。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e对于加号运算符(\x2b)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22首先执行代码，调用 **ToPrimitive** 方法得到原始值\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs asciidoc\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e首先执行代码，调用 *\x3cspan class=\x22hljs-strong\x22\x3e*ToPrimitive*\x3c\/span\x3e* 方法得到原始值\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e①如果原始值是两个数字，则直接相加得出结果。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e②如果两个原始值都是字符串，把第二个字符串连接到第一个上，也就是相当于调用 \x3cstrong\x3econcat\x3c\/strong\x3e 方法。\x3cbr\x3e  ③如果只有一个原始值是字符串，调用 \x3cstrong\x3eToString\x3c\/strong\x3e 方法把另一个运算数转换成字符串，结果是两个字符串连接成的字符串。\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\x3cli\x3e\n\x3cp\x3e对于减号运算符(-)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22不知道大家有没有看到[ECMAScript](http:\/\/yanhaijing.com\/es5\/#about)规范，这里比\x2b少了一步 **ToPrimitive**  ，所以 **-** 相对容易理解。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e不知道大家有没有看到[\x3cspan class=\x22hljs-string\x22\x3eECMAScript\x3c\/span\x3e](\x3cspan class=\x22hljs-link\x22\x3ehttp:\/\/yanhaijing.com\/es5\/#about\x3c\/span\x3e)规范，这里比\x2b少了一步 \x3cspan class=\x22hljs-strong\x22\x3e**ToPrimitive**\x3c\/span\x3e  ，所以 \x3cspan class=\x22hljs-strong\x22\x3e**-**\x3c\/span\x3e 相对容易理解。\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e①如果是两个数字，则直接相减得出结果。\x3c\/p\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e②如果有一个不是数字，会调用 \x3cstrong\x3eToNumber\x3c\/strong\x3e 方法按照规则转化成数字类型，然后进行相减。\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\x3cli\x3e\x3cp\x3e分号的插入\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e①新行并入当前行将构成非法语句，自动插入分号。\x3cbr\x3e  ②在continue,return,break,throw后自动插入分号\x3cbr\x3e  ③\x2b\x2b、--后缀表达式作为新行的开始，在行首自动插入分号\x3cbr\x3e  ④代码块的最后一个语句会自动插入分号\x3cbr\x3e  ⑤新行以 ( 、[、、\x2b 、 - 、,、. % 和 *开始都不会插入分号\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\x3cli\x3e\x3cp\x3e{}的两种解读\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e①当{}的前面有运算符号的时候，\x2b，-，*，\/,()等等，{}都会被解析成对象字面量，这无可争议。\x3cbr\x3e   ②当{}前面没有运算符时候但有;结尾的时候，或者浏览器的自动分号插入机制给{}后面插入分号(;)时候，此时{}都会被解析成代码块。\x3cbr\x3e   ③如果{}前面什么运算符都没有，{}后面也没有分号(;)结尾，Firefox会始终如一的解析为代码块，而chrome有细微的差别，chrome会解析为对象字面量。\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e五、ECMAScript的规范定义的抽象操作\x3c\/h3\x3e\n\x3cp\x3e前面关于\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript规范\x3c\/a\x3e的解读，涉及到几个重要的抽象操作：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eGetValue(v) : 引用规范类型\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eType(x) : 获取x的类型\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eToNumber(x) : 将x转换为Number类型\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eToString(x) : 将x转换为String类型\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eSameValue(x,y) : 计算非数字类型x,y是否相同\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eToPrimitive(x) : 将x转换为原始值\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\u2028\x3c\/p\x3e\n\x3ch4\x3e5.1 原始值\x3c\/h4\x3e\n\x3cp\x3e首先，让我们快速的复习一下。 在 JavaScript 中，一共有两种类型的值(ES6的 \x3cstrong\x3esymbol\x3c\/strong\x3e 暂不做讨论):\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22原始值(primitives)\n\n1. undefined\n2. null\n3. boolean\n4. number\n5. string\n\n对象值(objects)。\n除了原始值外，其他的所有值都是对象类型的值，包括数组(array)和函数(function)等。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e原始值(primitives)\n\n\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e boolean\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e number\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e string\n\n对象值(objects)。\n除了原始值外，其他的所有值都是对象类型的值，包括数组(array)和函数(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e)等。\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\u2028\x3c\/p\x3e\n\x3ch4\x3e5.2 GetValue(v)\x3c\/h4\x3e\n\x3cp\x3e这里的每个操作都有其严格并复杂的定义，可以直接查阅ECMA规范文档对其的详细说明。\x3cbr\x3e附上在线中文文档地址：\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我们先看看GetValue(v) : 引用规范类型，下面是\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript规范\x3c\/a\x3e的解读：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572293?w=1940\x26amp;h=1206\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572293?w=1940\x26amp;h=1206\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这什么鬼，我也不太懂，反正就是关于引用规范的一些抽象描述，鄙人才疏学浅，也不能化抽象为具体的解释一番，太抽象了，好难啊，功力还不够，不懂但对我们解决上面的问题也没有什么影响，我们只看关键的几个：\x3c\/p\x3e\n\x3cp\x3e这里我们先看下SameValue()和ToPrimitive()两个操作。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e5.3 SameValue(x,y)\x3c\/h4\x3e\n\x3cp\x3e我们还是先看看\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5规范\x3c\/a\x3e（熟读规范，你会学到很多很多）对 \x3cstrong\x3eSameValue\x3c\/strong\x3e 方法解读，我们翻到9.12。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572294?w=1752\x26amp;h=738\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572294?w=1752\x26amp;h=738\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个SameValue操作说的就是，如果x,y两个值类型相同，但又不同时是Number类型时的比较是否相等的操作。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e5.4 ToPrimitive(input [ , PreferredType])\x3c\/h4\x3e\n\x3cp\x3eToPrimitive() 方法\x3cbr\x3e转换成原始类型方法。\x3c\/p\x3e\n\x3cp\x3e还是来看看 \x3cem\x3eECMAScript\x3c\/em\x3e 标准怎么定义 \x3cstrong\x3eToPrimitice\x3c\/strong\x3e 方法的:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432628?w=1850\x26amp;h=720\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432628?w=1850\x26amp;h=720\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e是不是看了这个定义,还是一脸懵逼,ToPrimitive这尼玛什么玩意啊?这不是等于没说吗?\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008435958?w=411\x26amp;h=276\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008435958?w=411\x26amp;h=276\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e再来看看火狐MDN上面文档的介绍:\x3cbr\x3e\x3ca\x3eJS::ToPrimitive\x3c\/a\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432629?w=1318\x26amp;h=1354\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432629?w=1318\x26amp;h=1354\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432630?w=200\x26amp;h=200\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432630?w=200\x26amp;h=200\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e查了一下资料,上面要说的可以概括成:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ToPrimitive(obj,preferredType)\n\nJS引擎内部转换为原始值ToPrimitive(obj,preferredType)函数接受两个参数，第一个obj为被转换的对象，第二个\npreferredType为希望转换成的类型（默认为空，接受的值为Number或String）\n\n在执行ToPrimitive(obj,preferredType)时如果第二个参数为空并且obj为Date的事例时，此时preferredType会\n被设置为String，其他情况下preferredType都会被设置为Number如果preferredType为Number，ToPrimitive执\n行过程如\n下：\n1. 如果obj为原始值，直接返回；\n2. 否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\n3. 否则调用 obj.toString()，如果执行结果是原始值，返回之；\n4. 否则抛异常。\n\n如果preferredType为String，将上面的第2步和第3步调换，即：\n1. 如果obj为原始值，直接返回；\n2. 否则调用 obj.toString()，如果执行结果是原始值，返回之；\n3. 否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\n4. 否则抛异常。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3eToPrimitive(obj,preferredType)\n\nJS引擎内部转换为原始值ToPrimitive(obj,preferredType)函数接受两个参数，第一个obj为被转换的对象，第二个\npreferredType为希望转换成的类型（默认为空，接受的值为\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e或\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e）\n\n在执行ToPrimitive(obj,preferredType)时如果第二个参数为空并且obj为\x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e的事例时，此时preferredType会\n被设置为\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e，其他情况下preferredType都会被设置为\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e如果preferredType为\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e，ToPrimitive执\n行过程如\n下：\n\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e 如果obj为原始值，直接返回；\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e 否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e 否则调用 obj.toString()，如果执行结果是原始值，返回之；\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e 否则抛异常。\n\n如果preferredType为\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e，将上面的第\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e步和第\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e步调换，即：\n\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e 如果obj为原始值，直接返回；\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e 否则调用 obj.toString()，如果执行结果是原始值，返回之；\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e 否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e 否则抛异常。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432631?w=235\x26amp;h=231\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432631?w=235\x26amp;h=231\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e首先我们要明白 \x3cstrong\x3eobj.valueOf()\x3c\/strong\x3e 和 \x3cstrong\x3eobj.toString()\x3c\/strong\x3e 还有原始值分别是什么意思,这是弄懂上面描述的前提之一:\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3etoString用来返回对象的字符串表示。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var obj = {};\nconsole.log(obj.toString());\/\/[object Object]\n\nvar arr2 = [];\nconsole.log(arr2.toString());\/\/\x26quot;\x26quot;空字符串\n\nvar date = new Date();\nconsole.log(date.toString());\/\/Sun Feb 28 2016 13:40:36 GMT\x2b0800 (中国标准时间)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {};\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/[object Object]\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr2 = [];\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arr2.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22\x22空字符串\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e date = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(date.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/Sun Feb 28 2016 13:40:36 GMT\x2b0800 (中国标准时间)\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3evalueOf方法返回对象的原始值，可能是字符串、数值或bool值等，看具体的对象。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var obj = {\n  name: \x26quot;obj\x26quot;\n};\nconsole.log(obj.valueOf());\/\/Object {name: \x26quot;obj\x26quot;}\n\nvar arr1 = [1];\nconsole.log(arr1.valueOf());\/\/[1]\n\n\n\nvar date = new Date();\nconsole.log(date.valueOf());\/\/1456638436303\n如代码所示，三个不同的对象实例调用valueOf返回不同的数据\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22obj\x22\x3c\/span\x3e\n};\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj.valueOf());\x3cspan class=\x22hljs-comment\x22\x3e\/\/Object {name: \x22obj\x22}\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr1 = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arr1.valueOf());\x3cspan class=\x22hljs-comment\x22\x3e\/\/[1]\x3c\/span\x3e\n\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e date = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(date.valueOf());\x3cspan class=\x22hljs-comment\x22\x3e\/\/1456638436303\x3c\/span\x3e\n如代码所示，三个不同的对象实例调用valueOf返回不同的数据\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e原始值指的是[\x27Null\x27,\x27Undefined\x27,\x27String\x27,\x27Boolean\x27,\x27Number\x27]五种基本数据类型之一，一开始就提到过。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e弄清楚这些以后,举个简单的例子:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a={};\nToPrimitive(a)\n\n分析:a是对象类型但不是Date实例对象,所以preferredType默认是Number,先调用a.valueOf()不是原始值,继续来调\n用a.toString()得到string字符串,此时为原始值,返回之.所以最后ToPrimitive(a)得到就是\x26quot;[object Object]\x26quot;.\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a={};\nToPrimitive(a)\n\n分析:a是对象类型但不是\x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e实例对象,所以preferredType默认是\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e,先调用a.valueOf()不是原始值,继续来调\n用a.toString()得到string字符串,此时为原始值,返回之.所以最后ToPrimitive(a)得到就是\x3cspan class=\x22hljs-string\x22\x3e\x22[object Object]\x22\x3c\/span\x3e.\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果觉得描述还不好明白,一大堆描述晦涩又难懂,我们用代码说话:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nconst toPrimitive = (obj, preferredType=\x27Number\x27) =\x3e {\n    let Utils = {\n        typeOf: function(obj) {\n            return Object.prototype.toString.call(obj).slice(8, -1);\n        },\n        isPrimitive: function(obj) {\n            let types = [\x27Null\x27, \x27String\x27, \x27Boolean\x27, \x27Undefined\x27, \x27Number\x27];\n            return types.indexOf(this.typeOf(obj)) !== -1;\n        }\n    };\n\n    if (Utils.isPrimitive(obj)) {\n        return obj;\n    }\n\n    preferredType = (preferredType === \x27String\x27 || Utils.typeOf(obj) === \x27Date\x27) ?\n     \x27String\x27 : \x27Number\x27;\n\n    if (preferredType === \x27Number\x27) {\n        if (Utils.isPrimitive(obj.valueOf())) {\n            return obj.valueOf()\n        };\n        if (Utils.isPrimitive(obj.toString())) {\n            return obj.toString()\n        };\n    } else {\n        if (Utils.isPrimitive(obj.toString())) {\n            return obj.toString()\n        };\n        if (Utils.isPrimitive(obj.valueOf())) {\n            return obj.valueOf()\n        };\n    }\n}\n\nvar a={};\nToPrimitive(a);\/\/\x26quot;[object Object]\x26quot;,与上面文字分析的一致\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e toPrimitive = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, preferredType=\x3cspan class=\x22hljs-string\x22\x3e\x27Number\x27\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e Utils = {\n        \x3cspan class=\x22hljs-attr\x22\x3etypeOf\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.prototype.toString.call(obj).slice(\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3eisPrimitive\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e types = [\x3cspan class=\x22hljs-string\x22\x3e\x27Null\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27String\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Boolean\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Undefined\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Number\x27\x3c\/span\x3e];\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e types.indexOf(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.typeOf(obj)) !== \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n        }\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (Utils.isPrimitive(obj)) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj;\n    }\n\n    preferredType = (preferredType === \x3cspan class=\x22hljs-string\x22\x3e\x27String\x27\x3c\/span\x3e || Utils.typeOf(obj) === \x3cspan class=\x22hljs-string\x22\x3e\x27Date\x27\x3c\/span\x3e) ?\n     \x3cspan class=\x22hljs-string\x22\x3e\x27String\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27Number\x27\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (preferredType === \x3cspan class=\x22hljs-string\x22\x3e\x27Number\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (Utils.isPrimitive(obj.valueOf())) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.valueOf()\n        };\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (Utils.isPrimitive(obj.toString())) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.toString()\n        };\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (Utils.isPrimitive(obj.toString())) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.toString()\n        };\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (Utils.isPrimitive(obj.valueOf())) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.valueOf()\n        };\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a={};\nToPrimitive(a);\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22[object Object]\x22,与上面文字分析的一致\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e5.5 ToNumber(x)\x3c\/h4\x3e\n\x3cp\x3e这个就比ToPrimitive() 方法好理解多了，就是把其他类型按照一定的规则转化成数字类型，也就是类似Number()和parseInt()的方法。\x3c\/p\x3e\n\x3cp\x3e还是继续看看ECMAScipt规范中对于Number的转换\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432627?w=1528\x26amp;h=780\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432627?w=1528\x26amp;h=780\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\u2028\u2028是不是又看到 \x3cstrong\x3eToPrimitive()\x3c\/strong\x3e 方法了，是不是看了上面的就好理解多了，如果ToNumber(x)这个x是对象就要调用ToPrimitive方法返回x的原始值，是不是一下子就串起来了。\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e5.6 ToString(x)\x3c\/h4\x3e\n\x3cp\x3e这个理解起来跟 \x3cstrong\x3eToNumber\x3c\/strong\x3e 方法大同小异，还是继续看看ECMAScipt规范中对于String的转换.\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572295?w=1726\x26amp;h=836\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572295?w=1726\x26amp;h=836\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对数值类型应用 ToString\x3cbr\x3e ToString 运算符将数字 m 转换为字符串格式的给出如下所示：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e如果 m 是 NaN，返回字符串 \x22NaN\x22。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 m 是 \x2b0 或 -0，返回字符串 \x220\x22。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 m 小于零，返回连接 \x22-\x22 和 ToString (-m) 的字符串。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 m 无限大，返回字符串 \x22Infinity\x22。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e否则，令 n, k, 和 s 是整数，使得 k ≥ 1, 10k-1 ≤ s \x26lt; 10k，s × 10n-k 的数字值是 m，且 k 足够小。要注意的是，k 是 s 在十进制表示中的数字的个数。s 不被 10 整除，且s 的至少要求的有效数字位数不一定要被这些标准唯一确定。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 k ≤ n ≤ 21，返回由 k 个 s 在十进制表示中的数字组成的字符串（有序的，开头没有零），后面跟随字符 \x270\x27 的 n-k 次出现。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 0 \x26lt; n ≤ 21，返回由 s 在十进制表示中的、最多 n 个有效数字组成的字符串，后面跟随一个小数点 \x27. \x27，再后面是余下的 k-n 个 s 在十进制表示中的数字。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果 -6 \x26lt; n ≤ 0，返回由字符 \x270\x27 组成的字符串，后面跟随一个小数点 \x27. \x27，再后面是字符 \x270\x27 的 -n 次出现，再往后是 k 个 s 在十进制表示中的数字。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e否则，如果 k = 1，返回由单个数字 s 组成的字符串，后面跟随小写字母 \x27e\x27，根据 n-1 是正或负，再后面是一个加号 \x27\x2b\x27 或减号 \x27-\x27 ，再往后是整数 abs(n-1) 的十进制表示（没有前置的零）。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e返回由 s 在十进制表示中的、最多的有效数字组成的字符串，后面跟随一个小数点 \x27. \x27，再后面是余下的是 k-1 个 s 在十进制表示中的数字，再往后是小写字母 \x27e\x27，根据n-1 是正或负，再后面是一个加号 \x27\x2b \x27 或减号 \x27-\x27 ，再往后是整数 abs(n-1) 的十进制表示（没有前置的零）。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\u2028\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e六、验证分析\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]==10?\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e养兵千日，用兵一时。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e了解了这么多深入的基础知识，该发挥用武之地了，我已经用完洪荒之力了，是时候表演真正的技术了。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572296?w=624\x26amp;h=454\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572296?w=624\x26amp;h=454\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e好像前面忘记讲 \x3cstrong\x3e==\x3c\/strong\x3e 符号了，不要紧，之前这个我的上一篇博文已经非常详细的分析过了，可以看看我的这篇\x3ca href=\x22https:\/\/github.com\/jawil\/blog\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e博文(点击查看)\x3c\/a\x3e。这里就不花篇幅介绍了，感觉越来越坑，越写越多。\x3c\/p\x3e\n\x3cp\x3e这里就简单说一下，总结一下==转换规则：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e==运算规则的图形化表示\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008432634?w=1216\x26amp;h=610\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008432634?w=1216\x26amp;h=610\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221. undefined == null，结果是true。且它俩与所有其他值比较的结果都是false。\n\n2. String == Boolean，需要两个操作数同时转为Number。\n\n3. String\/Boolean == Number，需要String\/Boolean转为Number。\n\n4. Object == Primitive，需要Object转为Primitive(具体通过valueOf和toString方法)。\n\n瞧见没有，一共只有4条规则！是不是很清晰、很简单。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e，结果是\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e。且它俩与所有其他值比较的结果都是\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e。\n\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e == \x3cspan class=\x22hljs-built_in\x22\x3eBoolean\x3c\/span\x3e，需要两个操作数同时转为\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e。\n\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e\/\x3cspan class=\x22hljs-built_in\x22\x3eBoolean\x3c\/span\x3e == \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e，需要\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e\/\x3cspan class=\x22hljs-built_in\x22\x3eBoolean\x3c\/span\x3e转为\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e。\n\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e == Primitive，需要\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e转为Primitive(具体通过valueOf和toString方法)。\n\n瞧见没有，一共只有\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e条规则！是不是很清晰、很简单。\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e1.首先\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]首先拆分一下：\x3c\/h4\x3e\n\x3cp\x3e根据 \x3cstrong\x3e4.1 ECMAScript 运算符优先级\x3c\/strong\x3e 可以这样拆分：\x3cbr\x3e相当于这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(\x2b\x2b[[]][\x2b[]])\n\x2b\n([\x2b[]])\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e(\x2b\x2b[[]][\x2b[]])\n\x2b\n([\x2b[]])\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2.先来分析右边的[\x2b[]]\x3c\/h4\x3e\n\x3cp\x3e①先看里面的\x2b[]\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e根据 \x3cstrong\x3e4.2 ECMAScript 一元运算符（\x2b、-）\x3c\/strong\x3e 可以知道，一元运算符会调用 \x3cstrong\x3eToNumber\x3c\/strong\x3e 方法把 \x3cstrong\x3eToNumber([])\x3c\/strong\x3e 转化成数字。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据 \x3cstrong\x3e5.5 ToNumber(x)\x3c\/strong\x3e 的转换规则，x为[]是数组对象，因此会调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e 方法。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据 \x3cstrong\x3e5.4 ToPrimitive(input [ , PreferredType])\x3c\/strong\x3e 的转换规则，空数组先调用 \x3cstrong\x3evalueOf()\x3c\/strong\x3e 方法，得到[]不是原始值，继续调用 \x3cstrong\x3etoString()\x3c\/strong\x3e 方法，得到 \x3cstrong\x3e\x22\x22空字符串\x3c\/strong\x3e 。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e递归的调用之后成了 \x3cstrong\x3eToNumber(\x22\x22)\x3c\/strong\x3e ,答案显而易见，根据 \x3cstrong\x3e5.5 ToNumber(x)\x3c\/strong\x3e 的转换规则对照图片可以看出ToNumber(\x22\x22)===0。 \x3cstrong\x3e那么[\x2b[]]就变相的成了[0]\x3c\/strong\x3e 。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e此时成了(\x2b\x2b[[]][\x2b[]])\x2b[0]\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch4\x3e3.再来分析左边边的\x2b\x2b[[]][\x2b[]]\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x2b[]上面已经分析出来了，结果为0，那么此时就成了\x2b\x2b[[]][0]\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据 \x3cstrong\x3e4.2 ECMAScript 一元运算符（\x2b、-）\x3c\/strong\x3e 可以知道，数组下标的优先级高于一元运算符\x2b\x2b，那么理所当然成了这样 \x3cstrong\x3e\x2b\x2b([[]][0])\x3c\/strong\x3e ,而[[]][0]可以看出数组下标为0也就是第一个元素，此时为[],那么最后成了\x2b\x2b[].\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x2b\x2b[]这是什么鬼?，根据 \x3cstrong\x3e4.5 ECMAScript 前自增运算符（\x2b\x2b）\x3c\/strong\x3e 没有发现任何有调用 \x3cstrong\x3eToNumber\x3c\/strong\x3e 的方法，浏览器试了一下，果然有问题，报错啦，到底哪里出问题了呢，为什么走着走着就走偏了。问题出在哪一步呢？\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e4.分析问题错误的原因\x3c\/h4\x3e\n\x3cp\x3e为什么\x2b\x2b([[]][0])在浏览器不报错，而\x2b\x2b[]报错，我知道问题就出在这一步，但是一直相不出原因，光瞎想是没用的，没事继续读读ECMAScript规范,然后中文版的并没有看出什么玩意，最后在github英文版找到原因了。\x3c\/p\x3e\n\x3cp\x3e首先我们在浏览器输出一下\x2b\x2b[]\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572297?w=1058\x26amp;h=284\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572297?w=1058\x26amp;h=284\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e无意之中照着错误搜，搜到了这个后缀自增\x2b\x2b：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572298?w=1762\x26amp;h=838\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572298?w=1762\x26amp;h=838\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e顺便看看大同小异的前缀自增\x2b\x2b\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572299?w=1792\x26amp;h=844\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572299?w=1792\x26amp;h=844\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eIncrement Operator_操作的第5步PutValue(expr, newValue)要求expr是引用。这就是问题的关键，为什么之前我没发现，因为之前我一直看的是中文版，来看看中文版的截图对比一下\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572300?w=1442\x26amp;h=492\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572300?w=1442\x26amp;h=492\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e发现后面的3，4，5都没有，我一度以为自己理解错了，为什么这个规则没有调ToNumber()却也能得到数字，原来是翻译中这块内容遗漏了，我该好好补习英语了，尽量多看英文文档。\x3c\/p\x3e\n\x3cp\x3e看到第五条大大的 \x3cstrong\x3eCall PutValue(expr, newValue).\x3c\/strong\x3e ，\x3c\/p\x3e\n\x3cp\x3e阅读\x3ca href=\x22http:\/\/es5.github.io\/#x11.4.4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ees5英文文档\x3c\/a\x3e，可以看到_Prefix Increment Operator_操作的第5步PutValue(expr, newValue)要求expr是引用。\x3c\/p\x3e\n\x3cp\x3e我们还是来看看 \x3cstrong\x3ePutValue\x3c\/strong\x3e 到底是什么定义，这里我们只需要知道\x2b\x2ba,这个a是引用类型才不会报Uncaught ReferenceError: Invalid left-hand side expression in postfix operation这个错误。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572301?w=1862\x26amp;h=790\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572301?w=1862\x26amp;h=790\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e而我们知道[[]][0]是对象的属性访问，而我们知道对象的属性访问返回的是引用，所以可以正确执行。\x3c\/strong\x3e\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e5.进一步拆分\x3c\/h4\x3e\n\x3cp\x3e\x2b\x2b[[]][0]可以这么拆分，只要保持引用关系就行：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var refence=[[]][0]；\n\x2b\x2brefence;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e refence=[[]][\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]；\n\x2b\x2brefence;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再来进一步拆分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var refence=[];\nrefence=refence\x2b1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e refence=[];\nrefence=refence\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后就成了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22refence=[]\x2b1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3erefence=[]\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据 \x3cstrong\x3e4.3 ECMAScript 加法运算符（\x2b）\x3c\/strong\x3e ，[]\x2b1可以看成是ToPrimitive([]）\x2bToPrimitive（1），根据 \x3cstrong\x3e5.4 ToPrimitive(input [ , PreferredType])\x3c\/strong\x3e 的转换规则，空数组先调用 \x3cstrong\x3evalueOf()\x3c\/strong\x3e 方法，得到[]不是原始值，继续调用 \x3cstrong\x3etoString()\x3c\/strong\x3e 方法，得到 \x3cstrong\x3e\x22\x22\x3c\/strong\x3e 空字符串。\x3c\/p\x3e\n\x3cp\x3e于是就成了 \x3cstrong\x3e\x22\x22\x2b1\x3c\/strong\x3e ，根据 \x3cstrong\x3e4.3 ECMAScript 加法运算符（\x2b）\x3c\/strong\x3e ，有一个字符串，另外一个也会变成字符串，所以\x22\x22\x2b1===\x221\x22。所以 \x3cstrong\x3e\x2b\x2b[[]][0] === \x221\x22\x3c\/strong\x3e ;\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e好像分析的是这么回事，其实错了，大家不要跟着我错误的步骤走，我其实忽略了很重要的一点。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e看看规范有一点遗漏了，就是 \x3cstrong\x3eLet oldValue be ToNumber(GetValue(expr)).\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e就是\x2b\x2b时候旧的值要进行 \x3cstrong\x3eToNumber()\x3c\/strong\x3e 运算，最后最后一步应该是这样子的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22refence=ToNumber([])\x2b1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3erefence=ToNumber([])\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eToNumber([])===0,别问我为什么，照着我上面的分析自己分析一遍，不难，我因为分析多了，所以一眼就看出来了，所以最后成了0\x2b1=1的问题，所以 \x3cstrong\x3e\x2b\x2b[[]][0] === 1\x3c\/strong\x3e 。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch4\x3e6. 谜底揭开？\x3c\/h4\x3e\n\x3cp\x3e左边\x2b\x2b[[]][0] === 1；\x3cbr\x3e右边[\x2b[]]的值为[0];\x3cbr\x3e所以最后成了1\x2b[0]的问题了。\x3cbr\x3e根据 \x3cstrong\x3e5.4 ToPrimitive(input [ , PreferredType])\x3c\/strong\x3e 的转换规则，[0]数组先调用 \x3cstrong\x3evalueOf()\x3c\/strong\x3e 方法，得到[0]不是原始值，继续调用 \x3cstrong\x3etoString()\x3c\/strong\x3e 方法，得到 \x3cstrong\x3e“0”\x3c\/strong\x3e 的字符串。\x3c\/p\x3e\n\x3cp\x3e所以最后就成了 \x3cstrong\x3e1\x2b\x220\x22===\x2210\x22\x3c\/strong\x3e 。\x3c\/p\x3e\n\x3ch4\x3e7.最后的最后\x3c\/h4\x3e\n\x3cp\x3e于是最后就成了 \x3cstrong\x3e\x2210\x22 == 10\x3c\/strong\x3e 的问题，根据ECMAScript规范==的对应法则：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572302?w=1918\x26amp;h=1318\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572302?w=1918\x26amp;h=1318\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对比第5条，可以发现最后成了ToNumber(\x2210\x22)与10的比较，而ToNumber(\x2210\x22) === 10，\x3cbr\x3e左边最后 === 10，\x3cbr\x3e右边最后 === 10。\x3cbr\x3e10 === 10为true.\x3c\/p\x3e\n\x3cp\x3e所以 \x3cstrong\x3e\x2b\x2b[[]][\x2b[]]\x2b[\x2b[]]==10\x3c\/strong\x3e 为true,大功告成，可喜可贺，实力分析了一波，有错误还望批评指正。\x3c\/p\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e七、我的疑惑\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221. {}\x2b{}\/\/chrome:\x26quot;[object Object][object Object]\x26quot;，Firfox:NaN\n\n2. {}\x2b[]\/\/0\n\n3. []\x2b{}\/\/\x26quot;[object Object]\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e {}\x2b{}\x3cspan class=\x22hljs-comment\x22\x3e\/\/chrome:\x22[object Object][object Object]\x22，Firfox:NaN\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e {}\x2b[]\x3cspan class=\x22hljs-comment\x22\x3e\/\/0\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e []\x2b{}\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22[object Object]\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过这个例子，我发现刚才4.7 ECMAScript 对{}的解读还不够彻底，首先我们按照前面常规的思维来解答：\x3c\/p\x3e\n\x3ch4\x3e1.第一种思维：第一个{}解析为对面字面量\x3c\/h4\x3e\n\x3cp\x3e第一例子： \x3cstrong\x3e{}\x2b{}\x3c\/strong\x3e 首先左边{}和右边{}会调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e 两边都会得到:\x22[object Object]\x22,所以最后就是这两个相同的字符串相加，得到： \x3cstrong\x3e\x22object Object\x22\x3c\/strong\x3e ，chrome符合，Firefox不符合。\x3c\/p\x3e\n\x3cp\x3e第二个例子： \x3cstrong\x3e{}\x2b[]\x3c\/strong\x3e 按照这种思维首先左边{}和右边[]会调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e ,分别得到\x22[object Object]\x22和\x22\x22空字符串，那么相加结果应该是 \x3cstrong\x3e\x22[object Object]\x22\x3c\/strong\x3e ，为什么结果成了 \x3cstrong\x3e0\x3c\/strong\x3e ，而且在 \x3cstrong\x3echrome\x3c\/strong\x3e 和 \x3cstrong\x3eFirfox\x3c\/strong\x3e 都是0？\x3c\/p\x3e\n\x3cp\x3e第三个例子： \x3cstrong\x3e[]\x2b{}\x3c\/strong\x3e 按照这种思维首先左边[]和右边{}会调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e ,分别得到\x22\x22空字符串和\x22[object Object]\x22，最后相加结果 \x3cstrong\x3e\x22[object Object]\x22\x3c\/strong\x3e ，这个没有任何疑惑，chrome和Firefox都符合。\x3c\/p\x3e\n\x3ch4\x3e2.第一种思维：第一个{}解析为代码块\x3c\/h4\x3e\n\x3cp\x3e第一例子： \x3cstrong\x3e{}\x2b{}\x3c\/strong\x3e 浏览器这么解析，把{}不解析为对象字面量而是代码块，也就是let a={}这种块，代码可以看成是这样 \x3cstrong\x3e{};\x2b{}\x3c\/strong\x3e ,那么{};执行啥也没有，接下来就是 \x3cstrong\x3e\x2b{}\x3c\/strong\x3e ，\x2b是一元运算符，上面讲到了，这里\x2b{}执行时候首先会调用ToNumber(),参数{}是object会首先调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e 得到原始值： \x3cstrong\x3e\x22[object Object]\x22\x3c\/strong\x3e ，这时候就可以发现ToNumber(\x22[object Object]\x22)转化的就是 \x3cstrong\x3eNaN\x3c\/strong\x3e 了，chrome不符合，Firefox符合。\x3c\/p\x3e\n\x3cp\x3e第二个例子： \x3cstrong\x3e{}\x2b[]\x3c\/strong\x3e 按照这种思维，最后解析成 \x3cstrong\x3e{};\x2b[]\x3c\/strong\x3e ,\x2b是一元运算符，上面讲到了，这里\x2b[]执行时候首先会调用ToNumber(),参数[]是object会首先调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e 得到原始值： \x3cstrong\x3e\x22\x22空字符串\x3c\/strong\x3e ，最后根据规则ToNumber(\x22\x22)得到数字0.这种思维下没有任何疑惑，chrome和Firefox都符合。\x3c\/p\x3e\n\x3cp\x3e第三个例子： \x3cstrong\x3e[]\x2b{}\x3c\/strong\x3e 首先左边[]和右边{}会调用 \x3cstrong\x3eToPrimitive\x3c\/strong\x3e ,分别得到\x22\x22空字符串和\x22[object Object]\x22，最后相加结果 \x3cstrong\x3e\x22[object Object]\x22\x3c\/strong\x3e ，这个没有任何疑惑，chrome和Firefox都符合。\x3c\/p\x3e\n\x3cp\x3e\u2028那么问题来了？问题的矛盾就在于第一条和第二条，chrome和Firefox对于{}\x2b{}解析是不一样的，对于第一个{}chrome解析为对象字面量，而Firefox解析为代码块，这无可厚非， \x3cstrong\x3e关键是第二个例子{}\x2b[]\x3c\/strong\x3e ，既然第一个例子 \x3cstrong\x3e{}\x2b{}\x3c\/strong\x3e 的第一个{}chrome解析为对象字面量而第二个例子 \x3cstrong\x3e{}\x2b[]\x3c\/strong\x3e 中，chrome却解析为代码块，匪夷所思，有谁能扒一扒源码分析一下，chrome对{}的详细解析，到底什么时候解析为代码块，什么时候解析为对象字面量？有点想不明白为什么这么不一致，而 \x3cstrong\x3eFirefox始终如一，第一个{}一直解析为代码块，运算符号后面{}解析为对象字面量\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch4\x3e3.捉摸不透\x3c\/h4\x3e\n\x3cp\x3eFirefox的我能理解，开头{}一律解析为代码块（block）,而chrome却让人捉摸不透。。。\x3cbr\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e八、结束\x3c\/h3\x3e\n\x3cp\x3e前面的十几个例子，大家有兴趣对照着规则自己一个一个做做，看看自己是否真的理解了，理解了也再熟悉一遍，学习本来就是一个重复的过程。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e突然灵机一动：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var obj = {\n        valueOf: function() {\n            return 18;\n        }\n    };\n\n    console.log(\n            1 \x3c= \x26quot;2\x26quot;,\n            \x26quot;1\x26quot; \x3c= \x26quot;a\x26quot;,\n            obj \x3e= \x26quot;17\x26quot;\n    );\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\n        \x3cspan class=\x22hljs-attr\x22\x3evalueOf\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e18\x3c\/span\x3e;\n        }\n    };\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\n            \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-string\x22\x3e\x22a\x22\x3c\/span\x3e,\n            obj \x26gt;= \x3cspan class=\x22hljs-string\x22\x3e\x2217\x22\x3c\/span\x3e\n    );\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e这个答案又是多少呢？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var obj = {\n        valueOf: function() {\n            return {a:1};\n        },\n        toString:function(){\n            return 0;\n        }\n    };\n\nconsole.log(obj==[]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\n        \x3cspan class=\x22hljs-attr\x22\x3evalueOf\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e};\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3etoString\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n    };\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj==[]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e最后这个呢？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var obj = {\n        valueOf: function() {\n            return {a:1};\n        },\n        toString:function(){\n            return \x26quot;0\x26quot;;\n        }\n    };\n\nconsole.log(obj==[]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\n        \x3cspan class=\x22hljs-attr\x22\x3evalueOf\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e};\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3etoString\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e;\n        }\n    };\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj==[]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\u2028\u2028\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e九、相关资料\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/jawil\/blog\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e从 []==![] 为 true 来剖析 JavaScript 各种蛋疼的类型转换\x3c\/a\x3e(厚颜无耻的也参考一下自己文章)\x3cbr\x3e\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#about\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript5.1中文版\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/es5.github.io\/#toc\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAnnotated ECMAScript 5.1\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/bonsaiden.github.io\/JavaScript-Garden\/zh\/#types.casting\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 秘密花园\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.w3school.com.cn\/js\/pro_js_operators_unary.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ew3school中文文档\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/fsjohnhuang\/p\/4154503.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJS魔法堂：ASI(自动分号插入机制)和前置分号\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/justjavac.com\/javascript\/2012\/12\/20\/object-plus-object.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript中,{}\x2b{}等于多少?\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从 ++[[]][+[]]+[+[]]==10? 深入浅出弱类型 JS 的隐式转换</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008572281">https://segmentfault.com/a/1190000008572281</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/rkv2igdvslf/" target="_blank">https://alili.tech/archive/rkv2igdvslf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/dc9tmbt89lc/">CSS3 巧妙实现聊天气泡<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/awfhylei7vr/">Element 一套优雅的 Vue 2 组件库是如何开发的<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/5n6e7oj31zb/">Ionic2入坑基础教程和安装指南<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/k9uktrr2ck/">JavaScript arguments 对象全面介绍<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/d31ygsiurr7/">JavaScript 版俄罗斯方块——重构<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f1goxj498pc/">JavaScript中this绑定详解<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/fpk9tyls8sb/">Markcook2.0，使用Vue2.0和Vuex2.0进行完全重构升级<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/rnj4z8l02t/">N3-components - 强劲的 Vue UI组件库<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/7njdijhy2um/">Node.js &#43; React Native 毕设：农业物联网监测系统的开发手记<aside class="dates">2019-02-02</aside></a></li><li><a href="/archive/f8zzbybr4tl/">Redux、Flux、Vuex<aside class="dates">2019-02-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>