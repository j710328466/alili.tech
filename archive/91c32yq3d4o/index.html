<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="人人都会写的富文本编辑器"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>人人都会写的富文本编辑器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/91c32yq3d4o/",
				"appid": "1613049289050283", 
				"title": "人人都会写的富文本编辑器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-05T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jspac2304gh/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/sh7xv1f0re/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&text=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&text=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&title=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&is_video=false&description=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&title=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&title=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&title=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f91c32yq3d4o%2f&title=%e4%ba%ba%e4%ba%ba%e9%83%bd%e4%bc%9a%e5%86%99%e7%9a%84%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">人人都会写的富文本编辑器</h1><div class="meta"><div class="postdate"><time datetime="2019-01-05" itemprop="datePublished">2019-01-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010572797\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010572797\x22 alt=\x22vm-editor\x22 title=\x22vm-editor\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个本来是给 \x3ca href=\x22https:\/\/github.com\/luosijie\/vue-manager\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evm-manager\x3c\/a\x3e 写的一个富文本编辑器，后来觉得独立出来维护比较方便，就单独分离出来放到\x3cstrong\x3eNPM\x3c\/strong\x3e。之所以说\x3cstrong\x3e人人都会写\x3c\/strong\x3e, 是因为这个组件实现起来确实比较简单，不需要很厉害的Js水平, 基本是对document.execCommand()指令的绑定。在此将过程分享给大家\x3c\/p\x3e\n\x3cp\x3e预览地址 \x3ca href=\x22https:\/\/luosijie.github.io\/vm-editor\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/luosijie.github.io\/vm-editor\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e源码地址 \x3ca href=\x22https:\/\/github.com\/luosijie\/vm-editor\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/luosijie\/vm-editor\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e安装\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install --save vm-editor\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e--save vm-editor\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e使用\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/upload绑定事件将编译的html字符传给父组件\n\x3cVmEditor @upload=\x26quot;showHtml\x26quot;\x3e\x3c\/VmEditor\x3e\n\n\x3cscript\x3e\nimport VmEditor from \x27vm-editor\x27\nexport default {\n  ...\n  methods: {\n    showHtml: function(data){\n      console.log(data)\n    }\n  }\n}\n\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\/\/upload绑定事件将编译的html字符传给父组件\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditor\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eupload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22showHtml\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditor\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VmEditor \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vm-editor\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  ...\n  methods: {\n    \x3cspan class=\x22hljs-attr\x22\x3eshowHtml\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data)\n    }\n  }\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e准备\x3c\/h3\x3e\n\x3cp\x3e因为是Vue组件, 所以写这样的一个组件，需要掌握的知识点有：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/single-file-components.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue单文件组件开发\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/Document\/execCommand\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexecCommand指令\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e组件结构\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010572798\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010572798\x22 alt=\x22组件结构图\x22 title=\x22组件结构图\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e组件由 \x3cstrong\x3e菜单部分\x3c\/strong\x3e和\x3cstrong\x3e内容区域\x3c\/strong\x3e 2大部分组成, 其中菜单区域又由各种 \x3cstrong\x3e指令按钮\x3c\/strong\x3e 组成，部分指令按钮还有下拉选项\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e指令按钮\x3c\/h3\x3e\n\x3cp\x3e指令按钮是 \x3cstrong\x3eexecConmand\x3c\/strong\x3e 的装载器，需要实现以下功能\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e划过背景变灰\x3c\/li\x3e\n\x3cli\x3e显示按钮图标\x3c\/li\x3e\n\x3cli\x3e部分按钮需要实现点击展开下拉菜单\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cbutton class=\x26quot;vm-editor-button\x26quot; :class=\x26quot;{ active: slot }\x26quot;\x3e\n    \/\/ 显示按钮图标\n    \x3cimg :src=\x26quot;require(\x27..\/assets\/iconimg\/\x27 \x2b icon \x2b \x27.png\x27)\x26quot; height=\x26quot;16\x26quot; width=\x26quot;16\x26quot; alt=\x26quot;\x26quot; @click=\x26quot;showSlot\x26quot;\x3e\n    \x3c!-- \x3ci :class=\x26quot;icon\x26quot; @click=\x26quot;showSlot\x26quot;\x3e\x3c\/i\x3e --\x3e\n    \/\/ 部分按钮需要实现点击展开下拉菜单\n    \x3cslot v-if=\x26quot;slot\x26quot;\x3e\x3c\/slot\x3e\n  \x3c\/button\x3e\n\x3c\/template\x3e\n\x3cstyle\x3e\n  ...\n  \/\/ 划过显示背景\n  button.vm-editor-button:hover{        \n    background-color: #eee;\n  }\n  ...\n\x3c\/style\x3e\nexport default {\n  name: \x27VmEditorButton\x27,\n  props: {\n    icon: {\n      type: String,\n      default: \x27heading\x27\n    }\n  },\n  data: function () {\n    return {\n      slot: false\n    }\n  },\n  methods: {\n    showSlot () {\n      this.slot === false ? this.slot = true : this.slot = false\n    }\n  }\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;button \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22vm-editor-button\x22\x3c\/span\x3e :\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{ active: slot }\x22\x3c\/span\x3e\x26gt;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示按钮图标\x3c\/span\x3e\n    \x26lt;img :src=\x3cspan class=\x22hljs-string\x22\x3e\x22require(\x27..\/assets\/iconimg\/\x27 \x2b icon \x2b \x27.png\x27)\x22\x3c\/span\x3e height=\x3cspan class=\x22hljs-string\x22\x3e\x2216\x22\x3c\/span\x3e width=\x3cspan class=\x22hljs-string\x22\x3e\x2216\x22\x3c\/span\x3e alt=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e \x3cspan class=\x22hljs-meta\x22\x3e@click\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22showSlot\x22\x3c\/span\x3e\x26gt;\n    \x26lt;!-- \x26lt;i :\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22icon\x22\x3c\/span\x3e \x3cspan class=\x22hljs-meta\x22\x3e@click\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22showSlot\x22\x3c\/span\x3e\x26gt;\x26lt;\/i\x26gt; --\x26gt;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 部分按钮需要实现点击展开下拉菜单\x3c\/span\x3e\n    \x26lt;slot v-\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22slot\x22\x3c\/span\x3e\x26gt;\x26lt;\/slot\x26gt;\n  \x26lt;\/button\x26gt;\n\x26lt;\/template\x26gt;\n\x26lt;style\x26gt;\n  ...\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 划过显示背景\x3c\/span\x3e\n  button.vm-editor-button:hover{        \n    background-color: #eee;\n  }\n  ...\n\x26lt;\/style\x26gt;\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  name: \x3cspan class=\x22hljs-symbol\x22\x3e\x27VmEditorButto\x3c\/span\x3en\x27,\n  props: {\n    icon: {\n      \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e: \x3cspan class=\x22hljs-type\x22\x3eString\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27headin\x3c\/span\x3eg\x27\n    }\n  },\n  data: function () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      slot: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }\n  },\n  methods: {\n    showSlot () {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slot === \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slot = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slot = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }\n  }\n}\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e菜单区域\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010572799\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010572799\x22 alt=\x22菜单区域\x22 title=\x22菜单区域\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e菜单区域放置按钮,主要实现的功能是\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e将execCommand指令绑定到按钮中\x3c\/li\x3e\n\x3cli\x3e实现点击上传按钮编译html\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv class=\x26quot;vm-editor-menu\x26quot;\x3e\n    \/\/ 引入按钮组建, 通过 **click事件** 绑定封装的 **execCommand方法** 实现样式的变化 \n    \x3cVmEditorButton icon=\x26quot;paragraph\x26quot; @click.native=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3cp\x3e\x27)\x26quot;\x3e\n    \x3c\/VmEditorButton\x3e\n    \x3cVmEditorButton icon=\x26quot;heading\x26quot;\x3e\n      \x3cVmEditorDropdown\x3e\n        \/\/ 这是部分按钮需要下拉菜单功能\n        \x3cul class=\x26quot;vm-editor-ul\x26quot;\x3e\n          \x3cli @click=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3ch1\x3e\x27)\x26quot;\x3e\n            \x3ch1\x3eH1\x3c\/h1\x3e\n          \x3c\/li\x3e\n          \x3cli @click=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3ch2\x3e\x27)\x26quot;\x3e\n            \x3ch2\x3eH2\x3c\/h2\x3e\n          \x3c\/li\x3e\n          \x3cli @click=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3ch3\x3e\x27)\x26quot;\x3e\n            \x3ch3\x3eH3\x3c\/h3\x3e\n          \x3c\/li\x3e\n          \x3cli @click=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3ch4\x3e\x27)\x26quot;\x3e\n            \x3ch4\x3eH4\x3c\/h4\x3e\n          \x3c\/li\x3e\n          \x3cli @click=\x26quot;execCommand(\x27formatBlock\x27, \x27\x3ch5\x3e\x27)\x26quot;\x3e\n            \x3ch5\x3eH5\x3c\/h5\x3e\n          \x3c\/li\x3e\n        \x3c\/ul\x3e\n      \x3c\/VmEditorDropdown\x3e\n    \x3c\/VmEditorButton\x3e\n    \/\/ 省略其他按钮代码\n    ...\n    \x3cslot\x3e\x3c\/slot\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\x3cstyle\x3e\n  ...\n\x3c\/style\x3e\n\x3cscript\x3e\n...\nexport default {\n  name: \x27VmEditorMenu\x27,\n  components: {\n    VmEditorButton,\n    VmEditorDropdown,\n    VmEditorAddlink,\n    VmEditorAddimage,\n    VmEditorFontcolor\n  },\n  methods: {\n    \/\/ 封装 document.execCommand 指令\n    execCommand: function (commandName, valueArgument) {\n      \/\/ let body = document.querySelector(\x27.body\x27);\n      if (!valueArgument) {\n        valueArgument = null\n      }\n      document.execCommand(\x27styleWithCSS\x27, null, true)\n      document.execCommand(commandName, false, valueArgument)\n    },\n    \/\/ 插入图片功能\n    setImage: function (evt) {\n      let reader = new FileReader()\n      let file = evt.target.files[0]\n      reader.readAsDataURL(file)\n      reader.onload = function (evt) {\n        let base64Image = evt.target.result\n        document.execCommand(\x27insertImage\x27, false, base64Image)\n      }\n    }\n  }\n}\n\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22vm-editor-menu\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \/\/ 引入按钮组建, 通过 **click事件** 绑定封装的 **execCommand方法** 实现样式的变化 \n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22paragraph\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick.native\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;p\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22heading\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditorDropdown\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \/\/ 这是部分按钮需要下拉菜单功能\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22vm-editor-ul\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;h1\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eH1\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;h2\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3eH2\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;h3\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3eH3\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;h4\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3eH4\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22execCommand(\x27formatBlock\x27, \x27\x26lt;h5\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh5\x3c\/span\x3e\x26gt;\x3c\/span\x3eH5\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh5\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditorDropdown\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \/\/ 省略其他按钮代码\n    ...\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n  ...\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n...\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27VmEditorMenu\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecomponents\x3c\/span\x3e: {\n    VmEditorButton,\n    VmEditorDropdown,\n    VmEditorAddlink,\n    VmEditorAddimage,\n    VmEditorFontcolor\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 封装 document.execCommand 指令\x3c\/span\x3e\n    execCommand: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecommandName, valueArgument\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ let body = document.querySelector(\x27.body\x27);\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!valueArgument) {\n        valueArgument = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n      }\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.execCommand(\x3cspan class=\x22hljs-string\x22\x3e\x27styleWithCSS\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.execCommand(commandName, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, valueArgument)\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 插入图片功能\x3c\/span\x3e\n    setImage: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e reader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FileReader()\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e file = evt.target.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n      reader.readAsDataURL(file)\n      reader.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e base64Image = evt.target.result\n        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.execCommand(\x3cspan class=\x22hljs-string\x22\x3e\x27insertImage\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, base64Image)\n      }\n    }\n  }\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e主组件\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010572800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010572800\x22 alt=\x22主组件\x22 title=\x22主组件\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e主组件就是将 \x3cstrong\x3e菜单组件\x3c\/strong\x3e和 \x3cstrong\x3e内容区域\x3c\/strong\x3e 整合在一起\x3c\/p\x3e\n\x3cp\x3e另外还要实现\x3cstrong\x3e导出html\x3c\/strong\x3e的功能\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;vm-editor\x26quot;\x3e\n  \x3cVmEditorMenu\x3e\n    \x3cdiv class=\x26quot;global-control\x26quot;\x3e\n      \/\/ 到处html的按钮，放在这里因为，需要获取 内容区域 的html数据\n      \x3cVmEditorButton icon=\x26quot;upload\x26quot; @click.native=\x26quot;uploadHtml\x26quot;\x3e\x3c\/VmEditorButton\x3e\n    \x3c\/div\x3e\n  \x3c\/VmEditorMenu\x3e\n  \/\/ 内容区域 只要设置 **contenteditable=\x26quot;true\x26quot;** 就可以了，其他的交给指令去做\n  \x3cdiv class=\x26quot;content\x26quot; contenteditable=\x26quot;true\x26quot; v-html=\x26quot;html\x26quot;\x3e\n  \x3c\/div\x3e\n\x3c\/div\x3e\n\x3cstyle\x3e\n ...\n\x3c\/style\x3e\n\x3cscript\x3e\n  name: \x27VmEditor\x27,\n  components: {\n    VmEditorMenu,\n    VmEditorButton\n  },\n  data: function () {\n    return {\n      html: \x27Please Enter ...\x27\n    }\n  },\n  methods: {\n     导出html数据\n    \/\/ 目前 内容区域 的样式都是 **CSS样式**, 导出时需要转化为 **内联样式**\n    uploadHtml: function () {\n      \/\/ 获取各个模块的 CSS样式\n      let style = {\n        ul: `\n              margin: 10px 20px;\n              list-style-type: square;\n              padding: 0;\n            `,\n        ol: `\n              margin: 10px 20px;\n              list-style-type: decimal;\n              padding: 0;\n            `,\n        li: `\n              display: list-item;\n              padding: 0;\n            `,\n        hr: `\n              margin: 15px 0;\n              border-top: 1px solid #eeeff1;\n            `,\n        pre: `\n              display: block;\n              margin: 10px 0;\n              padding: 8px;\n              border-radius: 4px;\n              background-color: #f2f2f2;\n              color: #656565;\n              font-size: 14px;\n             `,\n        blockquote: `\n                      display: block;\n                      border-left: 4px solid #ddd;\n                      margin: 15px 0;\n                      padding: 0 15px;\n                    `,\n        img: `\n               margin: 20px 0;\n             `,\n        a: `\n            color: #41b883;\n           `\n      }\n      let html = document.getElementsByClassName(\x27content\x27)[0]\n      let htmlContainerParent = document.createElement(\x27div\x27)\n      let htmlContainer = document.createElement(\x27div\x27)\n      let tagNames = Object.keys(style)\n      \/\/ 遍历html节点并插入对应的内联样式 \n      for (let i = 0; i \x3c tagNames.length; i\x2b\x2b) {\n        let _tagNames = html.getElementsByTagName(tagNames[i])\n        if (_tagNames.length \x3e 0) {\n          for (let j = 0; j \x3c _tagNames.length; j\x2b\x2b) {\n            _tagNames[j].style = style[tagNames[i]]\n          }\n        }\n      }\n      htmlContainer.style = `\n                              text-align: left;\n                              padding: 15px;\n                              font-size: 16px; \n                            `\n      htmlContainer.innerHTML = html.innerHTML\n      htmlContainerParent.appendChild(htmlContainer)\n      \n      \/\/ 注册自定义事件 **upload**\n      this.$emit(\x27upload\x27, htmlContainerParent.innerHTML)\n    }\n  }\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22vm-editor\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditorMenu\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22global-control\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \/\/ 到处html的按钮，放在这里因为，需要获取 内容区域 的html数据\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22upload\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick.native\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22uploadHtml\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditorButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eVmEditorMenu\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \/\/ 内容区域 只要设置 **contenteditable=\x22true\x22** 就可以了，其他的交给指令去做\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtenteditable\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-html\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22html\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n ...\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27VmEditor\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecomponents\x3c\/span\x3e: {\n    VmEditorMenu,\n    VmEditorButton\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Please Enter ...\x27\x3c\/span\x3e\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n     导出html数据\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 目前 内容区域 的样式都是 **CSS样式**, 导出时需要转化为 **内联样式**\x3c\/span\x3e\n    uploadHtml: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取各个模块的 CSS样式\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e style = {\n        \x3cspan class=\x22hljs-attr\x22\x3eul\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n              margin: 10px 20px;\n              list-style-type: square;\n              padding: 0;\n            `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eol\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n              margin: 10px 20px;\n              list-style-type: decimal;\n              padding: 0;\n            `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eli\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n              display: list-item;\n              padding: 0;\n            `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ehr\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n              margin: 15px 0;\n              border-top: 1px solid #eeeff1;\n            `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epre\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n              display: block;\n              margin: 10px 0;\n              padding: 8px;\n              border-radius: 4px;\n              background-color: #f2f2f2;\n              color: #656565;\n              font-size: 14px;\n             `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eblockquote\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n                      display: block;\n                      border-left: 4px solid #ddd;\n                      margin: 15px 0;\n                      padding: 0 15px;\n                    `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eimg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n               margin: 20px 0;\n             `\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\n            color: #41b883;\n           `\x3c\/span\x3e\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e html = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByClassName(\x3cspan class=\x22hljs-string\x22\x3e\x27content\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e htmlContainerParent = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e htmlContainer = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e tagNames = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(style)\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 遍历html节点并插入对应的内联样式 \x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; tagNames.length; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e _tagNames = html.getElementsByTagName(tagNames[i])\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (_tagNames.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; _tagNames.length; j\x2b\x2b) {\n            _tagNames[j].style = style[tagNames[i]]\n          }\n        }\n      }\n      htmlContainer.style = \x3cspan class=\x22hljs-string\x22\x3e`\n                              text-align: left;\n                              padding: 15px;\n                              font-size: 16px; \n                            `\x3c\/span\x3e\n      htmlContainer.innerHTML = html.innerHTML\n      htmlContainerParent.appendChild(htmlContainer)\n      \n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册自定义事件 **upload**\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27upload\x27\x3c\/span\x3e, htmlContainerParent.innerHTML)\n    }\n  }\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e其他组件\x3c\/h3\x3e\n\x3cp\x3e其他的组建主要是\x3cstrong\x3e按钮下拉菜单\x3c\/strong\x3e， 因为每个都不一样，所以要独立出来\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3evm-editor-addimage: 插入图片\x3c\/li\x3e\n\x3cli\x3evm-editor-addlink: 插入链接\x3c\/li\x3e\n\x3cli\x3evm-editor-fontcolor: 修改颜色\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e不足之处\x3c\/h3\x3e\n\x3cp\x3e因为这个富文本编辑器的开发时间比较短，没有认真研究类似优秀插件的源码 也没有 深入调研过富文本编辑器的需求。\x3cbr\x3e只是参考了一些同类编辑器的实现效果和UI风格，比如\x3ca href=\x22http:\/\/simditor.tower.im\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esimditor\x3c\/a\x3e，然后简单实现了一下功能。\x3c\/p\x3e\n\x3cp\x3e所以肯定还有很多需要改善的地方，比较明显的有:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e浏览器的兼容\x3c\/li\x3e\n\x3cli\x3e表格功能的实现\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e不管怎样，仅供大家学习使用\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e先这样了， 欢迎star\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>人人都会写的富文本编辑器</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010572792">https://segmentfault.com/a/1190000010572792</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/91c32yq3d4o/" target="_blank">https://alili.tech/archive/91c32yq3d4o/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5x6tenwjeux/">ES6中的异步编程：Generators函数&#43;Promise:最强大的异步处理方式<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/nvtmua2a1hd/">GreenSock (TweenMax) 极简入门指南<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/7kt5s47oysx/">HTML5 中 canvas 的使用总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/41pgo3a2iyp/">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/krb1zm7x38j/">JavaScript 时间与日期处理实战:你肯定被坑过<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/yh2lq30d0x/">JavaScript中的各种宽高属性<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/eydwczesyv/">Muse UI — 基于 Vue2.0 的 Material Design UI 库<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/y62oejm8cr/">Nodejs基础：路径处理模块path总结<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/06cwh88ankmd/">PhantomJS &amp; NodeJS 在京东网站前端监控平台的最佳实践<aside class="dates">2019-01-31</aside></a></li><li><a href="/archive/z4ymvs0jz2h/">Promise 的链式调用与中止<aside class="dates">2019-01-31</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>