<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ncurses 入门指南"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ncurses 入门指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/8p7myefjurj/",
				"appid": "1613049289050283", 
				"title": "ncurses 入门指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-20T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dqt55q5dg5f/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/nkobvkswoji/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&text=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&text=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&title=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&is_video=false&description=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&title=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&title=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&title=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8p7myefjurj%2f&title=ncurses%20%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ncurses 入门指南</h1><div class="meta"><div class="postdate"><time datetime="2019-01-20" itemprop="datePublished">2019-01-20</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#ncurses-入门指南\x22\x3e\x3c\/a\x3encurses 入门指南\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e怎样使用curses来绘制终端屏幕？\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e虽然图形界面非常酷，但是不是所有的程序都需要点击式的界面。例如，令人尊敬的 Vi 编辑器在第一个 GUI 出现之前在纯文本终端运行了很久。\x3c\/p\x3e\n\x3cp\x3eVi 编辑器是一个在“文本”模式下绘制的面向屏幕screen-oriented程序的例子。它使用了一个叫 curses 的库。这个库提供了一系列的编程接口来操纵终端屏幕。curses 库产生于 BSD UNIX，但是 Linux 系统通过 ncurses 库提供这个功能。\x3c\/p\x3e\n\x3cp\x3e[要了解 ncurses “过去曾引起的风暴”，参见 \x3ca href=\x22http:\/\/www.linuxjournal.com\/article\/1124\x22\x3encurses: Portable Screen-Handling for Linux\x3c\/a\x3e, September 1, 1995, by Eric S. Raymond.]\x3c\/p\x3e\n\x3cp\x3e使用 curses 创建程序实际上非常简单。在这个文章中，我展示了一个利用 curses 来在终端屏幕上绘图的示例程序。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#谢尔宾斯基三角形\x22\x3e\x3c\/a\x3e谢尔宾斯基三角形\x3c\/h3\x3e\n\x3cp\x3e简单展示一些 curses 函数的一个方法是生成谢尔宾斯基三角形Sierpinski\x27s Triangle。如果你对生成谢尔宾斯基三角形的这种方法不熟悉的话，这里是一些产生谢尔宾斯基三角形的规则：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e设置定义三角形的三个点。\x3c\/li\x3e\n\x3cli\x3e随机选择任意的一个点 \x3ccode\x3e(x,y)\x3c\/code\x3e。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e然后：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在三角形的顶点中随机选择一个点。\x3c\/li\x3e\n\x3cli\x3e将新的 \x3ccode\x3ex,y\x3c\/code\x3e 设置为先前的 \x3ccode\x3ex,y\x3c\/code\x3e 和三角顶点的中间点。\x3c\/li\x3e\n\x3cli\x3e重复（上述步骤）。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e所以我按照这些指令写了这个程序，程序使用 curses 函数来向终端屏幕绘制谢尔宾斯基三角形：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/* triangle.c *\/\x3c\/span\x3e\n\n#include \x26lt;curses.h\x26gt;\n#include \x26lt;stdlib.h\x26gt;\n\n#include \x3cspan class=\x22hljs-string\x22\x3e\x22getrandom_int.h\x22\x3c\/span\x3e\n\n#define ITERMAX \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e\n\nint main(void)\n{\n  long iter;\n  int yi, xi;\n  int y[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n  int index;\n  int maxlines, maxcols;\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* initialize curses *\/\x3c\/span\x3e\n\n  initscr();\n  cbreak();\n  noecho();\n\n  clear();\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* initialize triangle *\/\x3c\/span\x3e\n\n  maxlines = LINES - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  maxcols = COLS - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n  y[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  x[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n  y[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = maxlines;\n  x[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = maxcols \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n  y[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  x[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = maxcols;\n\n  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x27);\n  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x27);\n  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x27);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* initialize yi,xi with random values *\/\x3c\/span\x3e\n\n  yi = getrandom_int() % maxlines;\n  xi = getrandom_int() % maxcols;\n\n  mvaddch(yi, xi, \x27.\x27);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* iterate the triangle *\/\x3c\/span\x3e\n\n  for (iter = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; iter \x26lt; ITERMAX; iter\x2b\x2b) {\n      index = getrandom_int() % \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n\n      yi = (yi \x2b y[index]) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n      xi = (xi \x2b x[index]) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n      mvaddch(yi, xi, \x27*\x27);\n      refresh();\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* done *\/\x3c\/span\x3e\n\n  mvaddstr(maxlines, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22Press any key to quit\x22\x3c\/span\x3e);\n\n  refresh();\n\n  getch();\n  endwin();\n\n  exit(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e让我一边解释一边浏览这个程序。首先，\x3ccode\x3egetrandom_int()\x3c\/code\x3e 函数是我对 Linux 系统调用 \x3ccode\x3egetrandom()\x3c\/code\x3e 的包装器。它保证返回一个正整数（\x3ccode\x3eint\x3c\/code\x3e）值。（LCTT 译注：\x3ccode\x3egetrandom()\x3c\/code\x3e 系统调用按照字节返回随机值到一个变量中，值是随机的，不保证正负，使用 \x3ccode\x3estdlib.h\x3c\/code\x3e 的 \x3ccode\x3erandom()\x3c\/code\x3e 函数可以达到同样的效果）另外，按照上面的规则，你应该能够辨认出初始化和迭代谢尔宾斯基三角形的代码。除此之外，我们来看看我用来在终端上绘制三角形的 curses 函数。\x3c\/p\x3e\n\x3cp\x3e大多数 curses 程序以这四条指令开头。 \x3ccode\x3einitscr()\x3c\/code\x3e 函数获取包括大小和特征在内的终端类型，并设置终端支持的 curses 环境。\x3ccode\x3ecbreak()\x3c\/code\x3e 函数禁用行缓冲并设置 curses 每次只接受一个字符。\x3ccode\x3enoecho()\x3c\/code\x3e 函数告诉 curses 不要把输入回显到屏幕上。而 \x3ccode\x3eclear()\x3c\/code\x3e 函数清空了屏幕：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs abnf\x22\x3e  initscr()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  cbreak()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  noecho()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n  clear()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e之后程序设置了三个定义三角的顶点。注意这里使用的 \x3ccode\x3eLINES\x3c\/code\x3e 和 \x3ccode\x3eCOLS\x3c\/code\x3e，它们是由 \x3ccode\x3einitscr()\x3c\/code\x3e 来设置的。这些值告诉程序在终端的行数和列数。屏幕坐标从 \x3ccode\x3e0\x3c\/code\x3e 开始，所以屏幕左上角是 \x3ccode\x3e0\x3c\/code\x3e 行 \x3ccode\x3e0\x3c\/code\x3e 列。屏幕右下角是 \x3ccode\x3eLINES - 1\x3c\/code\x3e 行，\x3ccode\x3eCOLS - 1\x3c\/code\x3e 列。为了便于记忆，我的程序里把这些值分别设为了变量 \x3ccode\x3emaxlines\x3c\/code\x3e 和 \x3ccode\x3emaxcols\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e在屏幕上绘制文字的两个简单方法是 \x3ccode\x3eaddch()\x3c\/code\x3e 和 \x3ccode\x3eaddstr()\x3c\/code\x3e 函数。也可以使用相关的 \x3ccode\x3emvaddch()\x3c\/code\x3e 和 \x3ccode\x3emvaddstr()\x3c\/code\x3e 函数可以将字符放到一个特定的屏幕位置。我的程序在很多地方都用到了这些函数。首先程序绘制三个定义三角的点并标记为 \x3ccode\x3e\x270\x27\x3c\/code\x3e，\x3ccode\x3e\x271\x27\x3c\/code\x3e 和 \x3ccode\x3e\x272\x27\x3c\/code\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3e  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x27);\n  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x27);\n  mvaddch(y[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e], x[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e], \x27\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x27);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e为了绘制任意的一个初始点，程序做了类似的一个调用：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e  \x3cspan class=\x22hljs-selector-tag\x22\x3emvaddch\x3c\/span\x3e(yi, xi, \x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e还有为了在谢尔宾斯基三角形递归中绘制连续的点：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lisp\x22\x3e      mvaddch(\x3cspan class=\x22hljs-name\x22\x3eyi\x3c\/span\x3e, xi, \x27*\x27)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e当程序完成之后，将会在屏幕左下角（在 \x3ccode\x3emaxlines\x3c\/code\x3e 行，\x3ccode\x3e0\x3c\/code\x3e 列）显示一个帮助信息：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lisp\x22\x3e  mvaddstr(\x3cspan class=\x22hljs-name\x22\x3emaxlines\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22Press any key to quit\x22\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e注意 curses 在内存中维护了一个版本的屏幕显示，并且只有在你要求的时候才会更新这个屏幕，这很重要。特别是当你想要向屏幕显示大量的文字的时候，这样程序会有更好的性能表现。这是因为 curses 只能更新在上次更新之后改变的这部分屏幕。想要让 curses 更新终端屏幕，请使用 \x3ccode\x3erefresh()\x3c\/code\x3e 函数。\x3c\/p\x3e\n\x3cp\x3e在我的示例程序中，我选择在“绘制”每个谢尔宾斯基三角形中的连续点时更新屏幕。通过这样做，用户可以观察三角形中的每次迭代。（LCTT 译注：由于 CPU 太快，迭代过程执行就太快了，所以其实很难直接看到迭代过程）\x3c\/p\x3e\n\x3cp\x3e在退出之前，我使用 \x3ccode\x3egetch()\x3c\/code\x3e 函数等待用户按下一个键。然后我调用 \x3ccode\x3eendwin()\x3c\/code\x3e 函数退出 curses 环境并返回终端程序到一般控制。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs abnf\x22\x3e  getch()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  endwin()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#编译和示例输出\x22\x3e\x3c\/a\x3e编译和示例输出\x3c\/h3\x3e\n\x3cp\x3e现在你已经有了你的第一个 curses 示例程序，是时候编译运行它了。记住 Linux 操作系统通过 ncurses 库来实现 curses 功能，所以你需要在编译的时候通过 \x3ccode\x3e-lncurses\x3c\/code\x3e来链接——例如：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e$ ls\ngetrandom_int\x3cspan class=\x22hljs-selector-class\x22\x3e.c\x3c\/span\x3e  getrandom_int\x3cspan class=\x22hljs-selector-class\x22\x3e.h\x3c\/span\x3e  triangle\x3cspan class=\x22hljs-selector-class\x22\x3e.c\x3c\/span\x3e\n\n$ gcc -Wall -lncurses -o triangle triangle\x3cspan class=\x22hljs-selector-class\x22\x3e.c\x3c\/span\x3e getrandom_int\x3cspan class=\x22hljs-selector-class\x22\x3e.c\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e（LCTT 译注：此处命令行有问题，\x3ccode\x3e-lncurses\x3c\/code\x3e 选项在我的 Ubuntu 16.04 系统 \x2b gcc 4.9.3 环境下，必须放在命令行最后，否则找不到库文件，链接时会出现未定义的引用。）\x3c\/p\x3e\n\x3cp\x3e在标准的 80x24 终端运行这个 \x3ccode\x3etriangle\x3c\/code\x3e 程序并没什么意思。在那样的分辨率下你不能看见谢尔宾斯基三角形的很多细节。如果你运行终端窗口并设置非常小的字体大小，你可以更加容易地看到谢尔宾斯基三角形的不规则性质。在我的系统上，输出如图 1。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/f2df8bdab23232ecd344267fd45652c52102983e\/687474703a2f2f7777772e6c696e75786a6f75726e616c2e636f6d2f66696c65732f6c696e75786a6f75726e616c2e636f6d2f7566696c65732f696d61676563616368652f6c617267652d35353070782d63656e74657265642f75313030303030392f747269616e676c652e706e67\x22\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t01fb644af82274793e.png\x22 alt=\x22\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e图 1. triangle 程序的输出\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e虽然迭代具有随机性，但是每次谢尔宾斯基三角形的运行看起来都会很一致。唯一的不同是最初绘制到屏幕的一些点的位置不同。在这个例子中，你可以看到三角形开始的一个小圆点，在点 1 附近。看起来程序接下来选择了点 2，然后你可以看到在圆点和“2”之间的星号。并且看起来程序随机选择了点 2 作为下一个随机数，因为你可以看到在第一个星号和“2”之间的星号。从这里开始，就不能继续分辨三角形是怎样被画出来的了，因为所有的连续点都属于三角形区域。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#开始学习-ncurses\x22\x3e\x3c\/a\x3e开始学习 ncurses\x3c\/h3\x3e\n\x3cp\x3e这个程序是一个怎样使用 curses 函数绘制字符到屏幕的简单例子。按照你的程序的需要，你可以通过 curses 做得更多。在下一篇文章中，我将会展示怎样使用 curses 让用户和屏幕交互。如果你对于学习 curses 有兴趣，我建议你去读位于 \x3ca href=\x22http:\/\/www.tldp.org\x22\x3eLinux 文档计划\x3c\/a\x3eLinux Documentation Project的 Pradeep Padala 写的 \x3ca href=\x22http:\/\/tldp.org\/HOWTO\/NCURSES-Programming-HOWTO\x22\x3eNCURSES Programming HOWTO\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#关于作者\x22\x3e\x3c\/a\x3e关于作者\x3c\/h3\x3e\n\x3cp\x3eJim Hall 是一个自由及开源软件的倡议者，他最有名的工作是 FreeDOS 计划，也同样致力于开源软件的可用性。Jim 是在明尼苏达州的拉姆齐县的首席信息官。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22http:\/\/www.linuxjournal.com\/content\/getting-started-ncurses\x22\x3ehttp:\/\/www.linuxjournal.com\/content\/getting-started-ncurses\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22http:\/\/www.linuxjournal.com\/users\/jim-hall\x22\x3eJim Hall\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/leemeans\x22\x3eleemeans\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ncurses 入门指南</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/getting-started-with-ncurses">https://www.zcfy.cc/article/getting-started-with-ncurses</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/8p7myefjurj/" target="_blank">https://alili.tech/archive/8p7myefjurj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/z09muaar7j/">2年前端应该会哪些技能<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/ke982v6qrfg/">CSS 性能优化笔记<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/if1i2hs28ah/">H5打造3d场景不完全攻略（二）: Amazing CSS3D<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/s4apghsr7o/">JS原生一步步实现前端路由和单页面应用<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/hjgkntbgqek/">JavaScript 中对大量数据的多重过滤<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/h1hfvr2a2nj/">JavaScript 中的错误处理机制<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/a0ukpm125gm/">JavaScript 数组分组的实现<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/fwosouhbhmj/">JavaScript 类型转换深度学习<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/z193p9xv2p/">JavaScript设计模式之发布-订阅模式（观察者模式）-Part1<aside class="dates">2019-02-01</aside></a></li><li><a href="/archive/6i7sr0vgkxm/">Javascript中的时间<aside class="dates">2019-02-01</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>