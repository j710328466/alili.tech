<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="一个自制的2048小游戏（2）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>一个自制的2048小游戏（2） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/np6ann990ye/",
				"appid": "1613049289050283", 
				"title": "一个自制的2048小游戏（2） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/5fcp9qo0itw/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xx37hiz31k8/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&text=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&text=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&title=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&is_video=false&description=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&title=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&title=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&title=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnp6ann990ye%2f&title=%e4%b8%80%e4%b8%aa%e8%87%aa%e5%88%b6%e7%9a%842048%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%882%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">一个自制的2048小游戏（2）</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e先声明哈：我做的这个也是跟着被人学习的，写文章是为了复习思路，还有巩固一下。总而言之呢，就是为了多理解思路，多折腾代码。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch6\x3e咳咳，上次我们已经将游戏的初始化全部完成了，包括游戏过程中需要的\x3ccode\x3eupdataBoardView(); generateOneNumber();showNumberWithAnimation()\x3c\/code\x3e也都全写好了，所以这次呢就是来写游戏过程中的逻辑了，发车了，抓紧时间上车~~\x3c\/h6\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e一.游戏过程键盘操作\x3c\/h3\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e键盘监听函数\x3cbr\x3e  玩过这款游戏的人都知道，操作就是通过上下左右来移动小方块，完成合并操作。所以我们在全局写一个键盘的事件监听函数\x3ccode\x3e$(document).keydown()\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e我们需要在其中写入什么呢？首先需要判断是哪个按键被按下，所以肯定需要获取event这个事件触发式生成的对象\x3c\/p\x3e\n\x3cblockquote\x3e\x3ch5\x3eEvent 对象\x3c\/h5\x3e\x3c\/blockquote\x3e\n\x3cp\x3eEvent 对象代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠的位置、鼠标按钮的状态。\x3cbr\x3e事件通常与函数结合使用，函数不会在事件发生前被执行！\x3cbr\x3e具体的event的解释大家可以去\x3ca href=\x22http:\/\/www.w3school.com.cn\/jsref\/dom_obj_event.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ew3school\x3c\/a\x3e看看。其中event有一个keyCode属性能够获取到敲击键盘的虚拟键盘码\x3c\/p\x3e\n\x3cp\x3e我们通过拿到的keyCode来判断哪个键被按下，同时执行相应的函数就好了，代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 $(document).keydown(function (event){\n    switch(event.keyCode){\n        case 37: \/\/left\n            moveLeft();\n            generateOneNumber();\n            break;\n        case 38: \/\/up\n            \n            break;\n        case 39: \/\/right\n            \n            break;\n        case 40: \/\/down\n            \n            break;\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e $(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e).keydown(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e(event.keyCode){\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e: \x3cspan class=\x22hljs-comment\x22\x3e\/\/left\x3c\/span\x3e\n            moveLeft();\n            generateOneNumber();\n            \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e38\x3c\/span\x3e: \x3cspan class=\x22hljs-comment\x22\x3e\/\/up\x3c\/span\x3e\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e39\x3c\/span\x3e: \x3cspan class=\x22hljs-comment\x22\x3e\/\/right\x3c\/span\x3e\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e: \x3cspan class=\x22hljs-comment\x22\x3e\/\/down\x3c\/span\x3e\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但这牵扯到的两个问题，一个是当前的游戏状态允不允许执行左移或者右移，比如如果是不能左移的话，那按下←应该是无效的，同时就不应该新生成一个数字。一个是移动后应该立马检测游戏有没有结束，如果四个方向都不能移动的话，游戏就应该GameOver了。为解决第一个问题，我们需要做一个检测，返回一个值来决定需不需要新生成一个数字。为解决第二个问题，我们需要写一个\x3ccode\x3eisgameover()\x3c\/code\x3e.\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e我们将检测函数写在moveleft内部返回，将键盘监听代码改为如下\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22case 37:\/\/left\n        if(moveLeft()){\n            generateOneNumber();\n            isgameover();\n        }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ruby\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\/\/left\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(moveLeft()){\n            generateOneNumber();\n            isgameover();\n        }\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e左移函数moveLeft()\x3cbr\x3e在这里面我们做两件事，一个是先判断能不能移动，不行的话直接返回false。如果能移动的话，我们再执行接下来的移动部分。我先把代码贴出来\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e完整代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function moveLeft(){\n    if(!canMoveLeft(board)){\n        return false;\n    }\n\n    \/\/遍历右边12个格子\n    for(var i=0;i\x3c4;i\x2b\x2b){\n        for(var j=1;j\x3c4;j\x2b\x2b){\n            if(board[i][j]!=0){\n                \/\/有数字则遍历左边\n                for(var k=0;k\x3cj;k\x2b\x2b){\n                    \/\/看落点是否为空且路上有无障碍\n                    if(board[i][k]==0\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)){\n                        \/\/move\n                        showMoveAnimation(i,j,i,k);\n                        \/\/更新\n                        board[i][k]=board[i][j];\n                        board[i][j]=0;\n                        continue;\n                    }else if(board[i][k]==board[i][j]\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)\x26amp;\x26amp;!hasConflicted[i][k]){\n                        \/\/move\n                        showMoveAnimation(i,j,i,k);\n                        \/\/更新\n                        board[i][k]\x2b=board[i][j];\n                        board[i][j]=0;\n                        \/\/分数增加\n                        score \x2b= board[i][k];\n                        updateScore(score);\n\n                        hasConflicted[i][k]=true;\n                        \n                        continue;\n                    }\n                }\n            }\n        }\n    }\n    \/\/遍历完后更新格子显示状态,慢一点才能显示动画\n    setTimeout(\x26quot;updateBoardView()\x26quot;,200);\n    return true;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3efunction moveLeft(){\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!canMoveLeft(board)){\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历右边12个格子\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;i\x2b\x2b){\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;j\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;j\x2b\x2b){\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][j]!=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/有数字则遍历左边\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;k\x26lt;j;k\x2b\x2b){\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/看落点是否为空且路上有无障碍\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][k]==\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)){\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/move\x3c\/span\x3e\n                        showMoveAnimation(i,j,i,k);\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新\x3c\/span\x3e\n                        board[i][k]=board[i][j];\n                        board[i][j]=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][k]==board[i][j]\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)\x26amp;\x26amp;!hasConflicted[i][k]){\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/move\x3c\/span\x3e\n                        showMoveAnimation(i,j,i,k);\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新\x3c\/span\x3e\n                        board[i][k]\x2b=board[i][j];\n                        board[i][j]=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/分数增加\x3c\/span\x3e\n                        score \x2b= board[i][k];\n                        updateScore(score);\n\n                        hasConflicted[i][k]=\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                        \n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\n                }\n            }\n        }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历完后更新格子显示状态,慢一点才能显示动画\x3c\/span\x3e\n    setTimeout(\x3cspan class=\x22hljs-string\x22\x3e\x22updateBoardView()\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们通过canMoveLeft来判断当前游戏状态能不能左移，我们要用到的是存储格子数据的数组board，我们将这个函数写在support.js中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/检测能否左移\nfunction canMoveLeft(board){\n    for(var i=0;i\x3c4;i\x2b\x2b){\n        for(var j=1;j\x3c4;j\x2b\x2b){\n            if(board[i][j]!= 0){\n                if(board[i][j-1]==0||board[i][j-1]==board[i][j])\n                    return true;\n            }\n        }\n    }\n    return false;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/检测能否左移\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecanMoveLeft\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(board)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;i\x2b\x2b){\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;j\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;j\x2b\x2b){\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][j]!= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][j\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e]==\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e||board[i][j\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e]==board[i][j])\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            }\n        }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里面显而易见的是左边第一列的4个格子是不能移动的，所以只需要遍历右边的12个格子，只要有一个有数字的格子的自身左边的一个格子为空，或者说值和它相等，那么游戏状态就是可以左移的，直接\x3ccode\x3ereturn true;\x3c\/code\x3e即可。\x3cbr\x3e看完检测函数后我们来看看后面的移动的部分。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/遍历右边12个格子\n    for(var i=0;i\x3c4;i\x2b\x2b){\n        for(var j=1;j\x3c4;j\x2b\x2b){\n            if(board[i][j]!=0){\n                \/\/有数字则遍历左边\n                for(var k=0;k\x3cj;k\x2b\x2b){\n                    \/\/看落点是否为空且路上有无障碍\n                    if(board[i][k]==0\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)){\n                        \/\/move\n                        showMoveAnimation(i,j,i,k);\n                        \/\/更新\n                        board[i][k]=board[i][j];\n                        board[i][j]=0;\n                        continue;\n                    }else if(board[i][k]==board[i][j]\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)\x26amp;\x26amp;!hasConflicted[i][k]){\n                        \/\/move\n                        showMoveAnimation(i,j,i,k);\n                        \/\/更新\n                        board[i][k]\x2b=board[i][j];\n                        board[i][j]=0;\n                        \/\/分数增加\n                        score \x2b= board[i][k];\n                        updateScore(score);\n\n                        hasConflicted[i][k]=true;\n                        \n                        continue;\n                    }\n                }\n            }\n        }\n    }\n    \/\/遍历完后更新格子显示状态,慢一点才能显示动画\n    setTimeout(\x26quot;updateBoardView()\x26quot;,200);\n    return true;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历右边12个格子\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;i\x2b\x2b){\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;j\x26lt;\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;j\x2b\x2b){\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][j]!=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/有数字则遍历左边\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;k\x26lt;j;k\x2b\x2b){\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/看落点是否为空且路上有无障碍\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][k]==\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)){\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/move\x3c\/span\x3e\n                        showMoveAnimation(i,j,i,k);\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新\x3c\/span\x3e\n                        board[i][k]=board[i][j];\n                        board[i][j]=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[i][k]==board[i][j]\x26amp;\x26amp;noBlockHorizontal(i,k,j,board)\x26amp;\x26amp;!hasConflicted[i][k]){\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/move\x3c\/span\x3e\n                        showMoveAnimation(i,j,i,k);\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新\x3c\/span\x3e\n                        board[i][k]\x2b=board[i][j];\n                        board[i][j]=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/分数增加\x3c\/span\x3e\n                        score \x2b= board[i][k];\n                        updateScore(score);\n\n                        hasConflicted[i][k]=\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                        \n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\n                }\n            }\n        }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历完后更新格子显示状态,慢一点才能显示动画\x3c\/span\x3e\n    setTimeout(\x3cspan class=\x22hljs-string\x22\x3e\x22updateBoardView()\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同理，也是只需要遍历右边的12个格子，先判断遍历到的这个格子是不是有值，有的话则遍历其左边的所有格子。这里就分成两种情况\x3cbr\x3e1.目标格子是空的，且中间没有阻碍，于是可以移动过去\x3cbr\x3e2.目标格子的值和自身是相等的，而且中间没有阻碍，那么就可以合并\x3cbr\x3e除了这两种情况以外的都不需要做什么操作。\x3cbr\x3e为此我们需要在support.js中写一个检测两个格子间(同一行)有没有阻碍的函数\x3cbr\x3e\x3cstrong\x3enoBlockHorizontal\x3c\/strong\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/检测行上有无阻碍\nfunction noBlockHorizontal(row,col1,col2,board){\n    for(var i=col1\x2b1;i\x3ccol2;i\x2b\x2b){\n        if(board[row][i]!=0)\n            return false;\n    }\n    return true;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/检测行上有无阻碍\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enoBlockHorizontal\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(row,col1,col2,board)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=col1\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;i\x26lt;col2;i\x2b\x2b){\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(board[row][i]!=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个我相信大家都看得懂，我就不解释了。\x3cbr\x3e对于第一种情况我们的操作是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e调用移动动画函数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e更新board数组，将自身的值传给目标格子，自身设为0\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e对于第二种情况我们的操作是：\x3c\/p\x3e\n\x3cli\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3e调用移动动画函数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e更新board数组，目标格子的值加上自身的值，自身设为0\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/li\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e移动动画函数showMoveAnimation(fromx,fromy,tox,toy)\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/移动动画\nfunction showMoveAnimation(fromx,fromy,tox,toy){\n    var numberCell=$(\x26quot;#number-cell-\x26quot;\x2bfromx\x2b\x26quot;-\x26quot;\x2bfromy);\n    numberCell.animate({\n        left:getPosLeft(tox,toy),\n        top:getPosTop(tox,toy)\n    },200);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/移动动画\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshowMoveAnimation\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efromx,fromy,tox,toy\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e numberCell=$(\x3cspan class=\x22hljs-string\x22\x3e\x22#number-cell-\x22\x3c\/span\x3e\x2bfromx\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22-\x22\x3c\/span\x3e\x2bfromy);\n    numberCell.animate({\n        \x3cspan class=\x22hljs-attr\x22\x3eleft\x3c\/span\x3e:getPosLeft(tox,toy),\n        \x3cspan class=\x22hljs-attr\x22\x3etop\x3c\/span\x3e:getPosTop(tox,toy)\n    },\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们是取自身这个数字方块，给它加个animate。animate里面传的是目标格子的left和top值，这个值是通过目标格子的坐标得到的。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3emoveLeft()函数收尾\x3cbr\x3e在一系列的修改都完成后，我们就需要根据现在的board来渲染格子视图\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e所以最后添加,并返回true给键盘监听函数使用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/遍历完后更新格子显示状态,慢一点才能显示动画\n    setTimeout(\x26quot;updateBoardView()\x26quot;,200);\n    return true;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历完后更新格子显示状态,慢一点才能显示动画\x3c\/span\x3e\n    setTimeout(\x3cspan class=\x22hljs-string\x22\x3e\x22updateBoardView()\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e最后的最后\x3cbr\x3e其他方向的移动函数也是同理，我就不贴代码了，几乎一模一样，细节上的一些数字不同罢了。当一切都完成后，我们就已经可以开始愉快的玩耍我们的游戏啦！！\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008446023\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008446023\x22 alt=\x22游戏画面\x22 title=\x22游戏画面\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch5\x3e后面还有一些小bug的修复，得分的统计，游戏结束的判断等，就放到下一篇文章吧，谢谢！！\x3c\/h5\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>一个自制的2048小游戏（2）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008446020">https://segmentfault.com/a/1190000008446020</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/np6ann990ye/" target="_blank">https://alili.tech/archive/np6ann990ye/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/t42iv2yle7e/">2016-我的前端之路:工具化与工程化<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/xlhryjzdso/">2016年总结--成长<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/4wvjfeus9ur/">2016年末总结，我的前端之路<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/w7062tmcw3/">3D 视差效果<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5jt1iw1t77b/">AlloyTouch实战--60行代码搞定QQ看点资料卡<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/kquf0fxkw2j/">ES6，你不得不学！<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/r5b6g4133jh/">Emmet-前端开发神器<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/5dbaikv4emi/">FreeCodeCamp中级算法题答案<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/iuyeljg6lm/">JSONP是什么<aside class="dates">2019-01-29</aside></a></li><li><a href="/archive/23ftsgrtzzc/">JS中的观察者模式(发布订阅)<aside class="dates">2019-01-29</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>