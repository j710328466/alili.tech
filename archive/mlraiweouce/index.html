<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript机器学习之KNN算法"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript机器学习之KNN算法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mlraiweouce/",
				"appid": "1613049289050283", 
				"title": "JavaScript机器学习之KNN算法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-08T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/twz1qm9x0h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/j4fc1ijtte/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&text=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&text=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&title=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&is_video=false&description=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&title=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&title=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&title=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmlraiweouce%2f&title=JavaScript%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e4%b9%8bKNN%e7%ae%97%e6%b3%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript机器学习之KNN算法</h1><div class="meta"><div class="postdate"><time datetime="2019-01-08" itemprop="datePublished">2019-01-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e译者按:\x3c\/strong\x3e 机器学习原来很简单啊，不妨动手试试！\x3c\/p\x3e\n\x3cp\x3e原文: \x3ca href=\x22https:\/\/hackernoon.com\/machine-learning-with-javascript-part-2-da994c17d483\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMachine Learning with JavaScript : Part 2\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e译者: \x3ca href=\x22https:\/\/fundebug.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFundebug\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e为了保证可读性，本文采用意译而非直译。另外，本文版权归原作者所有，翻译仅用于学习。另外，我们修正了原文代码中的错误\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVQWLI?w=700\x26amp;h=450\x22 src=\x22https:\/\/static.alili.tech\/img\/bVQWLI?w=700\x26amp;h=450\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e上图使用\x3ca href=\x22http:\/\/plot.ly\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eplot.ly\x3c\/a\x3e所画。\x3c\/p\x3e\n\x3cp\x3e上次我们用JavaScript实现了\x3ca href=\x22https:\/\/blog.fundebug.com\/2017\/07\/03\/javascript-machine-learning-regression\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e线性规划\x3c\/a\x3e，这次我们来聊聊KNN算法。\x3c\/p\x3e\n\x3cp\x3eKNN是\x3cstrong\x3ek-Nearest-Neighbours\x3c\/strong\x3e的缩写，它是一种监督学习算法。KNN算法可以用来做分类，也可以用来解决回归问题。\x3c\/p\x3e\n\x3cp\x3eGitHub仓库： \x3ca href=\x22https:\/\/github.com\/abhisheksoni27\/machine-learning-with-js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emachine-learning-with-js\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3eKNN算法简介\x3c\/h4\x3e\n\x3cp\x3e简单地说，\x3cstrong\x3eKNN算法由那离自己最近的K个点来投票决定待分类数据归为哪一类\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e如果待分类的数据有这些邻近数据，\x3cem\x3eNY\x3c\/em\x3e: \x3cstrong\x3e7\x3c\/strong\x3e, \x3cem\x3eNJ\x3c\/em\x3e: \x3cstrong\x3e0\x3c\/strong\x3e, \x3cem\x3eIN\x3c\/em\x3e: \x3cstrong\x3e4\x3c\/strong\x3e，即它有7个\x3cstrong\x3eNY\x3c\/strong\x3e邻居，0个\x3cstrong\x3eNJ\x3c\/strong\x3e邻居，4个\x3cstrong\x3eIN\x3c\/strong\x3e邻居，则这个数据应该归类为\x3cstrong\x3eNY\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e假设你在邮局工作，你的任务是为邮递员分配信件，目标是最小化到各个社区的投递旅程。不妨假设一共有7个街区。这就是一个实际的分类问题。你需要将这些信件分类，决定它属于哪个社区，比如\x3cstrong\x3e上东城\x3c\/strong\x3e、\x3cstrong\x3e曼哈顿下城\x3c\/strong\x3e等。\x3c\/p\x3e\n\x3cp\x3e最坏的方案是随意分配信件分配给邮递员，这样每个邮递员会拿到各个社区的信件。\x3c\/p\x3e\n\x3cp\x3e最佳的方案是根据信件地址进行分类，这样每个邮递员只需要负责邻近社区的信件。\x3c\/p\x3e\n\x3cp\x3e也许你是这样想的：\x22将邻近3个街区的信件分配给同一个邮递员\x22。这时，邻近街区的个数就是\x3cstrong\x3ek\x3c\/strong\x3e。你可以不断增加\x3cstrong\x3ek\x3c\/strong\x3e，直到获得最佳的分配方案。这个\x3cstrong\x3ek\x3c\/strong\x3e就是分类问题的最佳值。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eKNN代码实现\x3c\/h3\x3e\n\x3cp\x3e像\x3ca href=\x22https:\/\/blog.fundebug.com\/2017\/07\/03\/javascript-machine-learning-regression\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e上次\x3c\/a\x3e一样，我们将使用\x3ca href=\x22https:\/\/github.com\/mljs\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emljs\x3c\/a\x3e的\x3cstrong\x3eKNN\x3c\/strong\x3e模块\x3ca href=\x22https:\/\/github.com\/mljs\/knn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eml-knn\x3c\/a\x3e来实现。\x3c\/p\x3e\n\x3cp\x3e每一个机器学习算法都需要数据，这次我将使用\x3cstrong\x3eIRIS数据集\x3c\/strong\x3e。其数据集包含了150个样本，都属于\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E9%B8%A2%E5%B0%BE%E5%B1%9E\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e鸢尾属\x3c\/a\x3e下的三个亚属，分别是\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%B1%B1%E9%B8%A2%E5%B0%BE\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e山鸢尾\x3c\/a\x3e、\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%8F%98%E8%89%B2%E9%B8%A2%E5%B0%BE\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e变色鸢尾\x3c\/a\x3e和\x3ca href=\x22https:\/\/zh.wikipedia.org\/w\/index.php?title=%E7%BB%B4%E5%90%89%E5%B0%BC%E4%BA%9A%E9%B8%A2%E5%B0%BE\x26amp;action=edit\x26amp;redlink=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e维吉尼亚鸢尾\x3c\/a\x3e。四个特征被用作样本的定量分析，它们分别是\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E8%8A%B1%E8%90%BC\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e花萼\x3c\/a\x3e和\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E8%8A%B1%E7%93%A3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e花瓣\x3c\/a\x3e的长度和宽度。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1. 安装模块\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install ml-knn@2.0.0 csvtojson prompt\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs elixir\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3enpm install ml-knn\x3cspan class=\x22hljs-variable\x22\x3e@2\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e csvtojson prompt\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/mljs\/knn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eml-knn\x3c\/a\x3e: \x3cstrong\x3ek-Nearest-Neighbours\x3c\/strong\x3e模块，不同版本的接口可能不同，这篇博客使用了2.0.0\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/Keyang\/node-csvtojson\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecsvtojson\x3c\/a\x3e: 用于将CSV数据转换为JSON\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/flatiron\/prompt\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eprompt\x3c\/a\x3e: 在控制台输入输出数据\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e2. 初始化并导入数据\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ca href=\x22https:\/\/archive.ics.uci.edu\/ml\/machine-learning-databases\/iris\/iris.data\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIRIS数据集\x3c\/a\x3e\x3c\/strong\x3e由加州大学欧文分校提供。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22curl https:\/\/archive.ics.uci.edu\/ml\/machine-learning-databases\/iris\/iris.data \x3e iris.csv\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ecurl https:\/\/archive.ics.uci.edu\/ml\/machine-learning-databases\/iris\/iris.data \x26gt; iris.csv\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e假设你已经初始化了一个NPM项目，请在\x3cstrong\x3eindex.js\x3c\/strong\x3e中输入以下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const KNN = require(\x27ml-knn\x27);\nconst csv = require(\x27csvtojson\x27);\nconst prompt = require(\x27prompt\x27);\n\nvar knn;\n\nconst csvFilePath = \x27iris.csv\x27; \/\/ 数据集\nconst names = [\x27sepalLength\x27, \x27sepalWidth\x27, \x27petalLength\x27, \x27petalWidth\x27, \x27type\x27];\n\nlet seperationSize; \/\/ 分割训练和测试数据\n\nlet data = [],\n    X = [],\n    y = [];\n\nlet trainingSetX = [],\n    trainingSetY = [],\n    testSetX = [],\n    testSetY = [];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e KNN = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ml-knn\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e csv = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27csvtojson\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e prompt = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27prompt\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e knn;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e csvFilePath = \x3cspan class=\x22hljs-string\x22\x3e\x27iris.csv\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据集\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e names = [\x3cspan class=\x22hljs-string\x22\x3e\x27sepalLength\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sepalWidth\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27petalLength\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27petalWidth\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27type\x27\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e seperationSize; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 分割训练和测试数据\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = [],\n    X = [],\n    y = [];\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e trainingSetX = [],\n    trainingSetY = [],\n    testSetX = [],\n    testSetY = [];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3cstrong\x3eseperationSize\x3c\/strong\x3e用于分割数据和测试数据\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e使用csvtojson模块的fromFile方法加载数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22csv(\n    {\n        noheader: true,\n        headers: names\n    })\n    .fromFile(csvFilePath)\n    .on(\x27json\x27, (jsonObj) =\x3e\n    {\n        data.push(jsonObj); \/\/ 将数据集转换为JS对象数组\n    })\n    .on(\x27done\x27, (error) =\x3e\n    {\n        seperationSize = 0.7 * data.length;\n        data = shuffleArray(data);\n        dressData();\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecsv(\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3enoheader\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eheaders\x3c\/span\x3e: names\n    })\n    .fromFile(csvFilePath)\n    .on(\x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e, (jsonObj) =\x26gt;\n    {\n        data.push(jsonObj); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将数据集转换为JS对象数组\x3c\/span\x3e\n    })\n    .on(\x3cspan class=\x22hljs-string\x22\x3e\x27done\x27\x3c\/span\x3e, (error) =\x26gt;\n    {\n        seperationSize = \x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e * data.length;\n        data = shuffleArray(data);\n        dressData();\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们将\x3cstrong\x3eseperationSize\x3c\/strong\x3e设为样本数目的0.7倍。注意，如果训练数据集太小的话，分类效果将变差。\x3c\/p\x3e\n\x3cp\x3e由于数据集是根据种类排序的，所以需要使用\x3cstrong\x3eshuffleArray\x3c\/strong\x3e函数对数据进行混淆，这样才能方便分割出训练数据。这个函数的定义请参考StackOverflow的提问\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/2450954\/how-to-randomize-shuffle-a-javascript-array\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHow to randomize (shuffle) a JavaScript array?\x3c\/a\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function shuffleArray(array)\n{\n    for (var i = array.length - 1; i \x3e 0; i--)\n    {\n        var j = Math.floor(Math.random() * (i \x2b 1));\n        var temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    return array;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshuffleArray\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earray\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = array.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; i \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i--)\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * (i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e));\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e array;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e3. 转换数据\x3c\/h3\x3e\n\x3cp\x3e数据集中每一条数据可以转换为一个JS对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n sepalLength: ‘5.1’,\n sepalWidth: ‘3.5’,\n petalLength: ‘1.4’,\n petalWidth: ‘0.2’,\n type: ‘Iris-setosa’ \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode\x3e{\n\x3cspan class=\x22hljs-symbol\x22\x3e sepalLength:\x3c\/span\x3e ‘\x3cspan class=\x22hljs-number\x22\x3e5.1\x3c\/span\x3e’,\n\x3cspan class=\x22hljs-symbol\x22\x3e sepalWidth:\x3c\/span\x3e ‘\x3cspan class=\x22hljs-number\x22\x3e3.5\x3c\/span\x3e’,\n\x3cspan class=\x22hljs-symbol\x22\x3e petalLength:\x3c\/span\x3e ‘\x3cspan class=\x22hljs-number\x22\x3e1.4\x3c\/span\x3e’,\n\x3cspan class=\x22hljs-symbol\x22\x3e petalWidth:\x3c\/span\x3e ‘\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e’,\n\x3cspan class=\x22hljs-symbol\x22\x3e type:\x3c\/span\x3e ‘Iris-setosa’ \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在使用\x3cstrong\x3eKNN\x3c\/strong\x3e算法训练数据之前，需要对数据进行这些处理：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e将属性(sepalLength, sepalWidth,petalLength,petalWidth)由字符串转换为浮点数. (\x3cstrong\x3eparseFloat\x3c\/strong\x3e)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e将分类 (type)用数字表示\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function dressData()\n{\n    let types = new Set(); \n    data.forEach((row) =\x3e\n    {\n        types.add(row.type);\n    });\n    let typesArray = [...types]; \n\n    data.forEach((row) =\x3e\n    {\n        let rowArray, typeNumber;\n        rowArray = Object.keys(row).map(key =\x3e parseFloat(row[key])).slice(0, 4);\n        typeNumber = typesArray.indexOf(row.type); \/\/ Convert type(String) to type(Number)\n\n        X.push(rowArray);\n        y.push(typeNumber);\n    });\n\n    trainingSetX = X.slice(0, seperationSize);\n    trainingSetY = y.slice(0, seperationSize);\n    testSetX = X.slice(seperationSize);\n    testSetY = y.slice(seperationSize);\n\n    train();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edressData\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e types = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eSet\x3c\/span\x3e(); \n    data.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3erow\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e\n    {\n        types.add(row.type);\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e typesArray = [...types]; \n\n    data.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3erow\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e rowArray, typeNumber;\n        rowArray = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(row).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(row[key])).slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n        typeNumber = typesArray.indexOf(row.type); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Convert type(String) to type(Number)\x3c\/span\x3e\n\n        X.push(rowArray);\n        y.push(typeNumber);\n    });\n\n    trainingSetX = X.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, seperationSize);\n    trainingSetY = y.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, seperationSize);\n    testSetX = X.slice(seperationSize);\n    testSetY = y.slice(seperationSize);\n\n    train();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e4. 训练数据并测试\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function train()\n{\n    knn = new KNN(trainingSetX, trainingSetY,\n    {\n        k: 7\n    });\n    test();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etrain\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    knn = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e KNN(trainingSetX, trainingSetY,\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3ek\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e\n    });\n    test();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3etrain\x3c\/strong\x3e方法需要2个必须的参数: 输入数据，即\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E8%8A%B1%E8%90%BC\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e花萼\x3c\/a\x3e和\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E8%8A%B1%E7%93%A3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e花瓣\x3c\/a\x3e的长度和宽度；实际分类，即\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%B1%B1%E9%B8%A2%E5%B0%BE\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e山鸢尾\x3c\/a\x3e、\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%8F%98%E8%89%B2%E9%B8%A2%E5%B0%BE\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e变色鸢尾\x3c\/a\x3e和\x3ca href=\x22https:\/\/zh.wikipedia.org\/w\/index.php?title=%E7%BB%B4%E5%90%89%E5%B0%BC%E4%BA%9A%E9%B8%A2%E5%B0%BE\x26amp;action=edit\x26amp;redlink=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e维吉尼亚鸢尾\x3c\/a\x3e。另外，第三个参数是可选的，用于提供调整\x3cstrong\x3eKNN\x3c\/strong\x3e算法的内部参数。我将\x3cstrong\x3ek\x3c\/strong\x3e参数设为7，其默认值为5。\x3c\/p\x3e\n\x3cp\x3e训练好模型之后，就可以使用测试数据来检查准确性了。我们主要对预测出错的个数比较感兴趣。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function test()\n{\n    const result = knn.predict(testSetX);\n    const testSetLength = testSetX.length;\n    const predictionError = error(result, testSetY);\n    console.log(`Test Set Size = ${testSetLength} and number of Misclassifications = ${predictionError}`);\n    predict();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e result = knn.predict(testSetX);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e testSetLength = testSetX.length;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e predictionError = error(result, testSetY);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`Test Set Size = \x3cspan class=\x22hljs-subst\x22\x3e${testSetLength}\x3c\/span\x3e and number of Misclassifications = \x3cspan class=\x22hljs-subst\x22\x3e${predictionError}\x3c\/span\x3e`\x3c\/span\x3e);\n    predict();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e比较预测值与真实值，就可以得到出错个数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function error(predicted, expected)\n{\n    let misclassifications = 0;\n    for (var index = 0; index \x3c predicted.length; index\x2b\x2b)\n    {\n        if (predicted[index] !== expected[index])\n        {\n            misclassifications\x2b\x2b;\n        }\n    }\n    return misclassifications;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eerror\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3epredicted, expected\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e misclassifications = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; index \x26lt; predicted.length; index\x2b\x2b)\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (predicted[index] !== expected[index])\n        {\n            misclassifications\x2b\x2b;\n        }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e misclassifications;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e5. 进行预测(可选)\x3c\/h3\x3e\n\x3cp\x3e任意输入属性值，就可以得到预测值\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function predict()\n{\n    let temp = [];\n    prompt.start();\n    prompt.get([\x27Sepal Length\x27, \x27Sepal Width\x27, \x27Petal Length\x27, \x27Petal Width\x27], function(err, result)\n    {\n        if (!err)\n        {\n            for (var key in result)\n            {\n                temp.push(parseFloat(result[key]));\n            }\n            console.log(`With ${temp} -- type =  ${knn.predict(temp)}`);\n        }\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epredict\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e temp = [];\n    prompt.start();\n    prompt.get([\x3cspan class=\x22hljs-string\x22\x3e\x27Sepal Length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Sepal Width\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Petal Length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Petal Width\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, result\x3c\/span\x3e)\n    \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!err)\n        {\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e result)\n            {\n                temp.push(\x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(result[key]));\n            }\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`With \x3cspan class=\x22hljs-subst\x22\x3e${temp}\x3c\/span\x3e -- type =  \x3cspan class=\x22hljs-subst\x22\x3e${knn.predict(temp)}\x3c\/span\x3e`\x3c\/span\x3e);\n        }\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e6. 完整程序\x3c\/h3\x3e\n\x3cp\x3e完整的程序\x3cstrong\x3eindex.js\x3c\/strong\x3e是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const KNN = require(\x27ml-knn\x27);\nconst csv = require(\x27csvtojson\x27);\nconst prompt = require(\x27prompt\x27);\n\nvar knn;\n\nconst csvFilePath = \x27iris.csv\x27; \/\/ 数据集\nconst names = [\x27sepalLength\x27, \x27sepalWidth\x27, \x27petalLength\x27, \x27petalWidth\x27, \x27type\x27];\n\nlet seperationSize; \/\/ 分割训练和测试数据\n\nlet data = [],\n    X = [],\n    y = [];\n\nlet trainingSetX = [],\n    trainingSetY = [],\n    testSetX = [],\n    testSetY = [];\n\n\ncsv(\n    {\n        noheader: true,\n        headers: names\n    })\n    .fromFile(csvFilePath)\n    .on(\x27json\x27, (jsonObj) =\x3e\n    {\n        data.push(jsonObj); \/\/ 将数据集转换为JS对象数组\n    })\n    .on(\x27done\x27, (error) =\x3e\n    {\n        seperationSize = 0.7 * data.length;\n        data = shuffleArray(data);\n        dressData();\n    });\n\nfunction dressData()\n{\n    let types = new Set(); \n    data.forEach((row) =\x3e\n    {\n        types.add(row.type);\n    });\n    let typesArray = [...types]; \n\n    data.forEach((row) =\x3e\n    {\n        let rowArray, typeNumber;\n        rowArray = Object.keys(row).map(key =\x3e parseFloat(row[key])).slice(0, 4);\n        typeNumber = typesArray.indexOf(row.type); \/\/ Convert type(String) to type(Number)\n\n        X.push(rowArray);\n        y.push(typeNumber);\n    });\n\n    trainingSetX = X.slice(0, seperationSize);\n    trainingSetY = y.slice(0, seperationSize);\n    testSetX = X.slice(seperationSize);\n    testSetY = y.slice(seperationSize);\n\n    train();\n}\n\n\n\/\/ 使用KNN算法训练数据\nfunction train()\n{\n    knn = new KNN(trainingSetX, trainingSetY,\n    {\n        k: 7\n    });\n    test();\n}\n\n\n\/\/ 测试训练的模型\nfunction test()\n{\n    const result = knn.predict(testSetX);\n    const testSetLength = testSetX.length;\n    const predictionError = error(result, testSetY);\n    console.log(`Test Set Size = ${testSetLength} and number of Misclassifications = ${predictionError}`);\n    predict();\n}\n\n\n\/\/ 计算出错个数\nfunction error(predicted, expected)\n{\n    let misclassifications = 0;\n    for (var index = 0; index \x3c predicted.length; index\x2b\x2b)\n    {\n        if (predicted[index] !== expected[index])\n        {\n            misclassifications\x2b\x2b;\n        }\n    }\n    return misclassifications;\n}\n\n\n\/\/ 根据输入预测结果\nfunction predict()\n{\n    let temp = [];\n    prompt.start();\n    prompt.get([\x27Sepal Length\x27, \x27Sepal Width\x27, \x27Petal Length\x27, \x27Petal Width\x27], function(err, result)\n    {\n        if (!err)\n        {\n            for (var key in result)\n            {\n                temp.push(parseFloat(result[key]));\n            }\n            console.log(`With ${temp} -- type =  ${knn.predict(temp)}`);\n        }\n    });\n}\n\n\n\/\/ 混淆数据集的顺序\nfunction shuffleArray(array)\n{\n    for (var i = array.length - 1; i \x3e 0; i--)\n    {\n        var j = Math.floor(Math.random() * (i \x2b 1));\n        var temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    return array;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e KNN = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ml-knn\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e csv = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27csvtojson\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e prompt = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27prompt\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e knn;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e csvFilePath = \x3cspan class=\x22hljs-string\x22\x3e\x27iris.csv\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据集\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e names = [\x3cspan class=\x22hljs-string\x22\x3e\x27sepalLength\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sepalWidth\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27petalLength\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27petalWidth\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27type\x27\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e seperationSize; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 分割训练和测试数据\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = [],\n    X = [],\n    y = [];\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e trainingSetX = [],\n    trainingSetY = [],\n    testSetX = [],\n    testSetY = [];\n\n\ncsv(\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3enoheader\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eheaders\x3c\/span\x3e: names\n    })\n    .fromFile(csvFilePath)\n    .on(\x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e, (jsonObj) =\x26gt;\n    {\n        data.push(jsonObj); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将数据集转换为JS对象数组\x3c\/span\x3e\n    })\n    .on(\x3cspan class=\x22hljs-string\x22\x3e\x27done\x27\x3c\/span\x3e, (error) =\x26gt;\n    {\n        seperationSize = \x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e * data.length;\n        data = shuffleArray(data);\n        dressData();\n    });\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edressData\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e types = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eSet\x3c\/span\x3e(); \n    data.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3erow\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e\n    {\n        types.add(row.type);\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e typesArray = [...types]; \n\n    data.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3erow\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e rowArray, typeNumber;\n        rowArray = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(row).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(row[key])).slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n        typeNumber = typesArray.indexOf(row.type); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Convert type(String) to type(Number)\x3c\/span\x3e\n\n        X.push(rowArray);\n        y.push(typeNumber);\n    });\n\n    trainingSetX = X.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, seperationSize);\n    trainingSetY = y.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, seperationSize);\n    testSetX = X.slice(seperationSize);\n    testSetY = y.slice(seperationSize);\n\n    train();\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用KNN算法训练数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etrain\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    knn = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e KNN(trainingSetX, trainingSetY,\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3ek\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e\n    });\n    test();\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 测试训练的模型\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e result = knn.predict(testSetX);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e testSetLength = testSetX.length;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e predictionError = error(result, testSetY);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`Test Set Size = \x3cspan class=\x22hljs-subst\x22\x3e${testSetLength}\x3c\/span\x3e and number of Misclassifications = \x3cspan class=\x22hljs-subst\x22\x3e${predictionError}\x3c\/span\x3e`\x3c\/span\x3e);\n    predict();\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算出错个数\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eerror\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3epredicted, expected\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e misclassifications = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; index \x26lt; predicted.length; index\x2b\x2b)\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (predicted[index] !== expected[index])\n        {\n            misclassifications\x2b\x2b;\n        }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e misclassifications;\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据输入预测结果\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epredict\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e temp = [];\n    prompt.start();\n    prompt.get([\x3cspan class=\x22hljs-string\x22\x3e\x27Sepal Length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Sepal Width\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Petal Length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Petal Width\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, result\x3c\/span\x3e)\n    \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!err)\n        {\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e result)\n            {\n                temp.push(\x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(result[key]));\n            }\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`With \x3cspan class=\x22hljs-subst\x22\x3e${temp}\x3c\/span\x3e -- type =  \x3cspan class=\x22hljs-subst\x22\x3e${knn.predict(temp)}\x3c\/span\x3e`\x3c\/span\x3e);\n        }\n    });\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 混淆数据集的顺序\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshuffleArray\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earray\x3c\/span\x3e)\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = array.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; i \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i--)\n    {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * (i \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e));\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e array;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在控制台执行\x3cstrong\x3enode index.js\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ node index.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e$ \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eindex\x3c\/span\x3e.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输出如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Test Set Size = 45 and number of Misclassifications = 2\nprompt: Sepal Length:  1.7\nprompt: Sepal Width:  2.5\nprompt: Petal Length:  0.5\nprompt: Petal Width:  3.4\nWith 1.7,2.5,0.5,3.4 -- type =  2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3eTest \x3cspan class=\x22hljs-keyword\x22\x3eSet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eSize\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e Misclassifications = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eprompt\x3c\/span\x3e: Sepal \x3cspan class=\x22hljs-keyword\x22\x3eLength\x3c\/span\x3e:  \x3cspan class=\x22hljs-number\x22\x3e1.7\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eprompt\x3c\/span\x3e: Sepal Width:  \x3cspan class=\x22hljs-number\x22\x3e2.5\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eprompt\x3c\/span\x3e: Petal \x3cspan class=\x22hljs-keyword\x22\x3eLength\x3c\/span\x3e:  \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eprompt\x3c\/span\x3e: Petal Width:  \x3cspan class=\x22hljs-number\x22\x3e3.4\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eWith\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1.7\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2.5\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3.4\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e-- type =  2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e参考链接\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/coolshell.cn\/articles\/8052.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eK NEAREST NEIGHBOR 算法\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%AE%89%E5%BE%B7%E6%A3%AE%E9%B8%A2%E5%B0%BE%E8%8A%B1%E5%8D%89%E6%95%B0%E6%8D%AE%E9%9B%86\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e安德森鸢尾花卉数据集\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e欢迎加入\x3ca href=\x22https:\/\/fundebug.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e我们Fundebug\x3c\/a\x3e的\x3cstrong\x3e全栈BUG监控交流群: 622902485\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVNPvB?w=270\x26amp;h=370\x22 src=\x22https:\/\/static.alili.tech\/img\/bVNPvB?w=270\x26amp;h=370\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e版权声明:\x3cbr\x3e转载时请注明作者Fundebug以及本文地址：\x3cbr\x3e\x3ca href=\x22https:\/\/blog.fundebug.com\/2017\/07\/10\/javascript-machine-learning-knn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/blog.fundebug.com\/2017\/07\/10\/javascript-machine-learning-knn\/\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript机器学习之KNN算法</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010196636">https://segmentfault.com/a/1190000010196636</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mlraiweouce/" target="_blank">https://alili.tech/archive/mlraiweouce/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/dgic8s5qnlg/">CSS五种方式实现Footer置底<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/z94br1a9g2o/">React的10种有效的设计模式<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/xe4kfnhxlfo/">Seneca ：NodeJS 微服务框架入门指南<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/ffpl5ftnw2u/">Unable to preventDefault inside passive event listener<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/twqwd2wscy/">Vue源码详细解析:transclude,compile,link,依赖,批处理...一网打尽，全解析!<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/i1zivpsjdl/">chart.js 中文文档 翻译<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/ik09416kg2/">flex-box 速记表<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/ic5ys9tnr1n/">riotjs 2.2.4<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/wd1i4kdw4jq/">vuejs2.0运用原生js实现简单的拖拽元素功能<aside class="dates">2019-01-25</aside></a></li><li><a href="/archive/l7r8ye5804/">一道JS面试题所引发的&#34;血案&#34;，透过现象寻本质，再从本质看现象<aside class="dates">2019-01-25</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>