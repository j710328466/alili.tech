<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用 HappyPack 和 DllPlugin 来提升你的 Webpack 构建速度"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用 HappyPack 和 DllPlugin 来提升你的 Webpack 构建速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/eoy349e761g/",
				"appid": "1613049289050283", 
				"title": "使用 HappyPack 和 DllPlugin 来提升你的 Webpack 构建速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-10T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7ri877uye8o/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/d87erjw8roh/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&text=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&text=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&title=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&is_video=false&description=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&title=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&title=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&title=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feoy349e761g%2f&title=%e4%bd%bf%e7%94%a8%20HappyPack%20%e5%92%8c%20DllPlugin%20%e6%9d%a5%e6%8f%90%e5%8d%87%e4%bd%a0%e7%9a%84%20Webpack%20%e6%9e%84%e5%bb%ba%e9%80%9f%e5%ba%a6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用 HappyPack 和 DllPlugin 来提升你的 Webpack 构建速度</h1><div class="meta"><div class="postdate"><time datetime="2019-01-10" itemprop="datePublished">2019-01-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e本文原文发表在：\x3ca href=\x22https:\/\/medium.com\/@Erichain\/%E4%BD%BF%E7%94%A8-happypack-%E5%92%8C-dllplugin-%E6%9D%A5%E6%8F%90%E5%8D%87%E4%BD%A0%E7%9A%84-webpack-%E6%9E%84%E5%BB%BA%E9%80%9F%E5%BA%A6-7a1c41c5e78b\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/medium.com\/@Erichain\/...\x3c\/a\x3e\x3cbr\x3e本文采用的 Webpack 版本为 2.0\x2b\x3cbr\x3e本文源代码地址：\x3ca href=\x22https:\/\/github.com\/Erichain\/webpack-build-speed-testing\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/Erichain\/w...\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如果你问我对 Webpack 什么印象的话，我只能告诉你，慢，真的慢。即使他的配置如文档所说（当然，它的文档也不是那么好）很简单，不像 Grunt 或者 Gulp 那样需要一堆配置，只需那么几十行就能够配置一个构建系统，我依然觉得，这个构建工具很慢。或许，是从它的文档开始，我就印象不好了？OK，这个话题到此为止，我们开始我们的正题吧。\x3c\/p\x3e\n\x3cp\x3e本篇文章面向的不是 Webpack 新手，如果你对 Webpack 还不太熟悉的话，建议去阅读它的\x3ca href=\x22https:\/\/webpack.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e。当然，我们肯定也会涉及到一些基础的东西。\x3c\/p\x3e\n\x3cp\x3e本文重点讲解对生产环境的构建的性能的提升，如果需要对本地构建的性能进行提升的话，可以在本文结束之后，自己寻找一下解决方案哦。当然，还有一点需要说明的是，本文中的代码在本地不一定真正能够在浏览器中运行，有需要的可以自行搭建本地的构建系统。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e一点基础\x3c\/h4\x3e\n\x3cp\x3e使用过 Webpack 的朋友肯定知道，Webpack 的最简单的配置如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  entry: {\n    app: \x27.\/src\/app.js\x27\n  },\n  \n  output: {\n    path: path.join(__dirname, \x27dist-[hash]\x27),\n    filename: \x27[name].[hash].js\x27\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/app.js\x27\x3c\/span\x3e\n  },\n  \n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist-[hash]\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[hash].js\x27\x3c\/span\x3e\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样的配置会将我们的文件打包成为一个 \x3ccode\x3eapp.[hash].js\x3c\/code\x3e 文件。这样针对的一般是我们的项目不算大的情况，并且公用模块比较少的情况（当然，公用模块较多的话，配置肯定也不会这么简单了）。\x3c\/p\x3e\n\x3cp\x3e对于项目中有用到预处理器，ES2015\x2b 或者其余的需要编译后在浏览器上运行的语言，我们需要做的就是为这些东西添加上对应的 loader，然后，Webpack 就会自动的帮我们进行处理了（老实说，这一步还是挺方便的）。\x3c\/p\x3e\n\x3cp\x3e一些 loader 配置示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22rules: [\n  {\n    test: \/\\.jsx?$\/,\n    loader: [\x27babel-loader?presets[]=react,presets[]=latest\x26amp;compact=false\x27],\n  }, {\n    test: \/\\.scss$\/,\n    loader: [\n      \x27style-loader\x27,\n      \x27css-loader\x27,\n      \x27postcss-loader\x27,\n      \x27sass-loader\x27\n    ],\n  }, {\n    test: \/\\.jpe?g|png|svg|gif\/,\n    loader: [\x27url-loader?limit=8192\x26amp;name=assets\/images\/[name]-[hash].[ext]\x27],\n  }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3erules: [\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.jsx?$\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader?presets[]=react,presets[]=latest\x26amp;compact=false\x27\x3c\/span\x3e],\n  }, {\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.scss$\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: [\n      \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-loader\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27sass-loader\x27\x3c\/span\x3e\n    ],\n  }, {\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.jpe?g|png|svg|gif\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27url-loader?limit=8192\x26amp;name=assets\/images\/[name]-[hash].[ext]\x27\x3c\/span\x3e],\n  }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外，我们还可以通过一些插件来更多的定义 Webpack 的打包行为。比如，如果我们有很多第三方库的引用，并且，多个地方都会引用到这些库，我们就可以使用 Webpack 的 \x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e 来将这些公用的代码打包成一个文件（当然，至于速度嘛，我们后面再说），然后，将我们页面的业务代码打包成为一个文件。\x3c\/p\x3e\n\x3cp\x3eWebpack 的主要配置就这几项，其他更多的更深入的配置可以查看 \x3ca href=\x22https:\/\/webpack.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack 的官方文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch4\x3e速度慢\x3c\/h4\x3e\n\x3cp\x3e尽管 Webpack 配置起来很方便，但是，按照一般的配置来的话，构建的速度真的是太慢了，每构建一次都会花掉相当长的时间，这对于开发者们来说简直是噩梦。\x3c\/p\x3e\n\x3cp\x3e可是，速度为什么会这么慢呢？\x3c\/p\x3e\n\x3cp\x3e以我所在的项目为例，由于我们的项目存在多个 entries（大概四十多个），所以，我们的 Webpack 采用的配置是将公用的第三方库通过 \x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e 来打包成为一个 \x3ccode\x3ecommon.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e根据这个 \x3ccode\x3ecommon.js\x3c\/code\x3e 的内容来看，这里面存放的就是各个 entry 引用的公有的代码，比如，我们的很多组件都会用到 React 或者 Redux 这些第三方库。通过将公有的代码单独打包成一个文件，然后再将业务代码打包成一个文件，这样一来，业务代码模块本身的体积就会减小很多，页面的加载速度也能够得到很大的提升。\x3c\/p\x3e\n\x3cp\x3e虽然这样打包的方式能够在一定程度上提升页面的加载速度，但是，我们简单的想一想也知道，\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e 会去将所有 entry 中的公有模块遍历出来再进行编译压缩混淆，这个过程是非常缓慢的（我们的项目以前在使用这种方式的时候，在这一步会花上至少十二分钟的时间，你可以想象这个过程有多么漫长）。\x3c\/p\x3e\n\x3cp\x3e经过了几个迭代的痛苦的打包上线的过程之后，我们终于不能忍了，决定对这个构建系统进行改造。\x3c\/p\x3e\n\x3ch4\x3e改造的过程\x3c\/h4\x3e\n\x3cp\x3e说实话，一开始我其实是没有任何头绪的，我只知道这个构建的过程慢，但是，并不清楚应该从何处开始进行改造。\x3c\/p\x3e\n\x3cp\x3e与同事们进行了一些商讨之后，我准备从以下几个方面入手：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e减少构建的文件，减小文件大小：我们的项目中存在太多的无用的文件和代码，我决定先删除这些无用的东西\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e移除 \x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eSearch with Google\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e第一步的作用其实并不明显，我删除了很大一部分的无用的图片和代码，但是，构建速度并没有明显的提升。\x3c\/p\x3e\n\x3cp\x3e第二步，简单的移除掉 \x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e 的话，构建速度确实会快很多，但是，这样打包出来的项目就不能够运行了，所以，还需要结合第三步（必须要感谢这个世界存在 Google）。\x3c\/p\x3e\n\x3cp\x3e我在网上找到了许多相关的问题，关键性的建议有以下几个：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e将 \x3ccode\x3ecss-loader\x3c\/code\x3e 的版本回溯到 \x3ccode\x3e0.15\x3c\/code\x3e 及其以前的版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用 \x3ca href=\x22https:\/\/github.com\/amireh\/happypack\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHappyPack\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用 \x3ca href=\x22https:\/\/webpack.js.org\/plugins\/dll-plugin\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDllPlugin\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e首先，第一点，降低 \x3ccode\x3ecss-loader\x3c\/code\x3e 的版本。\x3c\/p\x3e\n\x3cp\x3e在 GitHub 上有这样一个 issue：\x3ca href=\x22https:\/\/github.com\/webpack-contrib\/css-loader\/issues\/124\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e0.15.0\x2b makes Webpack load slowly\x3c\/a\x3e。按照 issue 中大家的讨论，我将我们项目中的 \x3ccode\x3ecss-loader\x3c\/code\x3e 的版本降到了 \x3ccode\x3e0.14.5\x3c\/code\x3e。满怀期待的以为这样就能够提升一部分速度，但是，结果是令人失望的——构建的速度并没有明显的改变。我试着构建了好几遍，速度依然没有提升，所以，第一个方法失败，我将 \x3ccode\x3ecss-loader\x3c\/code\x3e 的版本恢复了回来。\x3c\/p\x3e\n\x3cp\x3e那么，继续尝试第二个方法，也是本文将要重点说明的方法之一，那就是使用 HappyPack。\x3c\/p\x3e\n\x3ch4\x3e使用 HappyPack\x3c\/h4\x3e\n\x3cp\x3eHappyPack 允许 Webpack 使用 Node 多线程进行构建来提升构建的速度。\x3c\/p\x3e\n\x3cp\x3e使用的方法与在 Webpack 中定义 loader 的方法类似，只是说，我们把构建需要的 loader 放到了 HappyPack 中，让 HappyPack 来为我们进行相应的操作，我们只需要在 Webpack 的配置中引入 HappyPack 的 loader 的配置就好了。\x3c\/p\x3e\n\x3cp\x3e比如，我们编译 \x3ccode\x3e.jsx\x3c\/code\x3e 文件的 loader 就可以这样写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new HappyPack({\n  id: \x27jsx\x27,\n  threads: 4,\n  loaders: [\x27babel-loader?presets[]=react,presets[]=latest\x26amp;compact=false\x27],\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HappyPack({\n  \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jsx\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ethreads\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader?presets[]=react,presets[]=latest\x26amp;compact=false\x27\x3c\/span\x3e],\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中，\x3ccode\x3ethreads\x3c\/code\x3e 指明 HappyPack 使用多少子进程来进行编译，一般设置为 4 为最佳。\x3c\/p\x3e\n\x3cp\x3e编译 \x3ccode\x3e.scss\x3c\/code\x3e 文件的 loader 这样写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new HappyPack({\n  id: \x27scss\x27,\n  threads: 4,\n  loaders: [\n    \x27style-loader\x27,\n    \x27css-loader\x27,\n    \x27postcss-loader\x27,\n    \x27sass-loader\x27,\n  ],\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HappyPack({\n  \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27scss\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ethreads\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27sass-loader\x27\x3c\/span\x3e,\n  ],\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e其中，需要注意的一点就是，在使用 HappyPack 的情况下，我们需要单独创建一个 \x3ccode\x3epostcss.config.js\x3c\/code\x3e 文件，不然，在编译的时候，就会报错。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e由于 HappyPack 对 \x3ccode\x3eurl-loader\x3c\/code\x3e 和 \x3ccode\x3efile-loader\x3c\/code\x3e 的支持度的问题，所以，我们此处，打包图片文件的时候，并没有使用 HappyPack。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3epostcss.config.js\x3c\/code\x3e 的配置就像下面这样（根据你的需求，定制你自己的配置）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  autoprefixer: {\n    browsers: [\x27last 3 versions\x27],\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eautoprefixer\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3ebrowsers\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27last 3 versions\x27\x3c\/span\x3e],\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e定义好了我们 HappyPack 的 loader 之后，我们直接在我们的 Webpack 的配置的 \x3ccode\x3eplugins\x3c\/code\x3e 一项中，引入就好了。\x3c\/p\x3e\n\x3cp\x3e那么，我们在编译的时候，就会看到下面的输出：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010045695?w=379\x26amp;h=83\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010045695?w=379\x26amp;h=83\x22 alt=\x22@HappyPack 输出|center\x22 title=\x22@HappyPack 输出|center\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这就是 HappyPack 在编译的时候的输出内容。\x3c\/p\x3e\n\x3cp\x3e但是，我们的关注点不是它输出了什么，而是说，我们的构建速度有没有提升。\x3c\/p\x3e\n\x3cp\x3e当然，结果是令人失望的，我们单独使用 HappyPack 的情况下，构建速度并没有明显的提升（当然，或许有所提升但是我没有发现也有可能）。\x3c\/p\x3e\n\x3cp\x3e所以，为了进一步的提升我们的构建速度，我们将采取第三种方案，那就是 DllPlugin。\x3c\/p\x3e\n\x3ch4\x3e使用 DllPlugin\x3c\/h4\x3e\n\x3cp\x3e仔细阅读过 Webpack 文档的朋友肯定对这个插件会有印象，或者说知道这个插件是干嘛用的。其实，我们此处也是基于 Webpack 的文档的一些说明，然后，结合我在项目中的实践来为大家讲解这个插件。\x3c\/p\x3e\n\x3cp\x3e在 Webpack 中，DllPlugin 并不是单独的使用的，而是需要与一个名为 \x3ccode\x3eDllReferencePlugin\x3c\/code\x3e 的插件结合起来使用的。\x3c\/p\x3e\n\x3cp\x3e熟悉 Windows 的朋友就应该知道，DLL 所代表的含义。在 Windows 中，有大量的 \x3ccode\x3e.dll\x3c\/code\x3e 文件，称为动态链接库。\x3c\/p\x3e\n\x3cp\x3e在 \x3ca href=\x22https:\/\/msdn.microsoft.com\/en-us\/library\/windows\/desktop\/ms682589%28v=vs.85%29.aspx\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMSDN\x3c\/a\x3e 上，微软是这样解释动态链接库的：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eA dynamic-link library (DLL) is a module that contains functions and data that can be used by another module (application or DLL).\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e大概的意思就是说，动态链接库包含的是，可以在其他模块中进行调用的函数和数据。\x3c\/p\x3e\n\x3cp\x3e文档里面还有一句话是这样说的：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eDLLs provide a way to modularize applications so that their functionality can be updated and reused more easily.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e动态链接库提供了将应用模块化的方式，应用的功能可以在此基础上更容易被复用。\x3c\/p\x3e\n\x3cp\x3e回到我们的项目中，类似的，我们其实要做的也是将各个模块中公用的部分给打包成为一个公用的模块。这个模块就包含了我们的其他模块中需要的函数和数据（比如，其他组件所需的 React 库）。\x3c\/p\x3e\n\x3cp\x3e使用 DllPlugin 的时候，会生成一个 \x3ccode\x3emanifest.json\x3c\/code\x3e 这个文件，所存储的就是各个模块和所需公用模块的对应关系。\x3c\/p\x3e\n\x3cp\x3e说了这么多，我们不如直接来看看这个插件到底是怎么使用的：\x3c\/p\x3e\n\x3cp\x3e首先，我们需要一个文件，这个文件包含所有的第三方或者公用的模块和库，我们在此将其命名为 \x3ccode\x3evendor.js\x3c\/code\x3e，文件的内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import \x27react\x27;\nimport \x27react-dom\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由于我们的示例项目中只用到了这两个公用的第三方库，所以，我们此处只需要引入这两个库就行了。\x3c\/p\x3e\n\x3cp\x3e在打包的时候，我们将这些公用的模块单独打包成一个文件，然后，通过生成的 \x3ccode\x3emanifest.json\x3c\/code\x3e 文件对应过去。所以，我们需要单独创建一个 \x3ccode\x3ewebpack.config.vendor.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e文件内容其实很简单：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x27webpack\x27);\nconst path = require(\x27path\x27);\n\nmodule.exports = {\n  entry: {\n    vendor: [path.join(__dirname, \x27src\x27, \x27vendor.js\x27)],\n  },\n\n  output: {\n    path: path.join(__dirname, \x27dist-[hash]\x27),\n    filename: \x27[name].js\x27,\n    library: \x27[name]\x27,\n  },\n\n  plugins: [\n    new webpack.DllPlugin({\n      path: path.join(__dirname, \x27dll\x27, \x27[name]-manifest.json\x27),\n      filename: \x27[name].js\x27,\n      name: \x27[name]\x27,\n    }),\n  ]\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor.js\x27\x3c\/span\x3e)],\n  },\n\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist-[hash]\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elibrary\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]\x27\x3c\/span\x3e,\n  },\n\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dll\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27[name]-manifest.json\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]\x27\x3c\/span\x3e,\n    }),\n  ]\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，我们主要的操作是在 \x3ccode\x3eplugins\x3c\/code\x3e 配置中，生成的文件名就是我们所定义的 \x3ccode\x3eentry\x3c\/code\x3e 的名称，JSON 文件名可以根据自己的需要来命名。像上面这样，我们就可以将我们的一些公用模块打包出来了。\x3c\/p\x3e\n\x3cp\x3e运行以下命令：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22webpack -p --progress --config webpack.config.vendor.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ewebpack -p --progress --config webpack.config.vendor.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们就可以看到这样的输出：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010045696?w=499\x26amp;h=387\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010045696?w=499\x26amp;h=387\x22 alt=\x22@DllPlugin 打包输出|center\x22 title=\x22@DllPlugin 打包输出|center\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这样，我们就完成了构建的第一步。下一步，我们需要在构建应用的配置文件中，加入我们的 DllPlugin 的配置。\x3c\/p\x3e\n\x3cp\x3e这时候，我们就需要用到 \x3ccode\x3eDllReferencePlugin\x3c\/code\x3e 了。\x3c\/p\x3e\n\x3cp\x3e在我们的主要配置文件中，加入以下的配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const manifest = require(\x27.\/dll\/vendor-manifest.json\x27);\n\n\/\/ ... 其他完美的配置\n\nplugins: [\n  new webpack.DllReferencePlugin({\n    manifest,\n  }),\n],\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e manifest = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dll\/vendor-manifest.json\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ... 其他完美的配置\x3c\/span\x3e\n\nplugins: [\n  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllReferencePlugin({\n    manifest,\n  }),\n],\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e就这样，我们的所有工作就完成了，我们只需要运行一条命令，就能够看到构建速度的巨大提升。\x3c\/p\x3e\n\x3cp\x3e当然，为了更完美，我们可以将 DllPlugin 和 HappyPack 结合起来使用，效果会更好。具体的代码细节，此处不予展示，朋友们可以直接去 GitHub 上查看。\x3c\/p\x3e\n\x3cp\x3e为了方便构建，我们可以写一个脚本将构建过程简单化。在我的 GitHub 项目里面有相关的脚本，包含了一些基础的操作，有需要的朋友可以去查看。此处，我们就认为我们的命令可以直接构建了。\x3c\/p\x3e\n\x3cp\x3e为了体现出构建速度的区别，我们先运行 \x3ccode\x3enpm run build\x3c\/code\x3e，这是采用普通方式进行构建的命令。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010045697?w=408\x26amp;h=116\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010045697?w=408\x26amp;h=116\x22 alt=\x22@采用普通构建方式的构建时间|center\x22 title=\x22@采用普通构建方式的构建时间|center\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，构建时间为 20353ms，换算下来为 20s 左右。\x3c\/p\x3e\n\x3cp\x3e接下来，我们运行 \x3ccode\x3enpm run build dll\x3c\/code\x3e，通过 DllPlugin 和 HappyPack 进行构建。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010045698?w=366\x26amp;h=63\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010045698?w=366\x26amp;h=63\x22 alt=\x22@构建 vendor.js 文件的时间|center\x22 title=\x22@构建 vendor.js 文件的时间|center\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010045699?w=397\x26amp;h=102\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010045699?w=397\x26amp;h=102\x22 alt=\x22@构建 app.js 文件的时间|center\x22 title=\x22@构建 app.js 文件的时间|center\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们将两个时间加起来，总共为 12184ms，换算下来为 12s 左右。快了将近一倍的时间！这还只是文件少的情况。在我们的实际项目中，构建时间提升了 3 倍多，所以，可以看到 DllPlugin 的强大之处。\x3c\/p\x3e\n\x3ch4\x3e一点总结\x3c\/h4\x3e\n\x3cp\x3e本文只是寻找了这样几种能够提升构建速度的解决方案，我相信，方法肯定不止这些，一定还有更多的解决方案等待我们去发现。所以，希望各位朋友能够对本文中不足的地方提出建议，希望与大家共同学习，共同进步。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eReferences\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/engineering.invisionapp.com\/post\/optimizing-webpack\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eOPTIMIZING WEBPACK FOR FASTER REACT BUILDS\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/robertknight.github.io\/posts\/webpack-dll-plugins\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eOptimizing Webpack build times and improving caching with DLL bundles\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/msdn.microsoft.com\/en-us\/library\/windows\/desktop\/ms682589%28v=vs.85%29.aspx\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDynamic-Link Libraries\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用 HappyPack 和 DllPlugin 来提升你的 Webpack 构建速度</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010045690">https://segmentfault.com/a/1190000010045690</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/eoy349e761g/" target="_blank">https://alili.tech/archive/eoy349e761g/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>