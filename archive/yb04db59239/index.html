<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于 HTML5 WebGL 的 3D 网络拓扑图"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于 HTML5 WebGL 的 3D 网络拓扑图 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/yb04db59239/",
				"appid": "1613049289050283", 
				"title": "基于 HTML5 WebGL 的 3D 网络拓扑图 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-10T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/urwwh0ppoj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/px48t7obrcg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&text=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&text=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&title=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&is_video=false&description=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&title=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&title=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&title=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyb04db59239%2f&title=%e5%9f%ba%e4%ba%8e%20HTML5%20WebGL%20%e7%9a%84%203D%20%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于 HTML5 WebGL 的 3D 网络拓扑图</h1><div class="meta"><div class="postdate"><time datetime="2019-01-10" itemprop="datePublished">2019-01-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在数据量很大的2D 场景下，要找到具体的模型比较困难，并且只能显示出模型的的某一部分，显示也不够直观，这种时候能快速搭建出 3D 场景就有很大需求了。但是搭建 3D 应用场景又依赖于通过 3ds Max 或 Maya 的专业 3D 设计师来建模，Unity 3D 引擎做图形渲染等，这对用户来说都是挑战！不过，HT 一站式的提供了从建模到渲染，包括和 2D 组件呈现和数据融合的一站式解决方案。HT 基于 WebGL 的 3D 技术的图形组件 ht.graph3dView 组件通过对 WebGL 底层技术的封装，与 HT 其他组件一样， 基于 HT 统一的 DataModel 数据模型来驱动图形显示，极大降低了 3D 图形技术开发的门槛，在熟悉HT 数据模型基础上，一般程序员只需要 1 小时的学习即可上手 3D 图形开发。\x3c\/p\x3e\n\x3cp\x3e好了，废话不多说，先附上 Demo：\x3ca href=\x22http:\/\/www.hightopo.com\/demo\/blog_3dedge_20170630\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/demo\/...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVP6z2?w=1180\x26amp;h=564\x22 src=\x22https:\/\/static.alili.tech\/img\/bVP6z2?w=1180\x26amp;h=564\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e当然，这里的我只是用简单的图形来表示设备，脑洞大开的你当然可以将其换成更有意思的模型。\x3c\/p\x3e\n\x3cp\x3e接下来看看我们是怎么做到的：\x3c\/p\x3e\n\x3cp\x3e1、准备工作：\x3c\/p\x3e\n\x3cp\x3e3D 和 2D 的 API 的设计上保持了很多一致性，3D 视图组件是 ht.graph3d.Graph3dView，  2D 视图组件是 ht.graph.GraphView，两者可共享同一数据模型 DataModel。在 HT 中，为了让了获得接近真实三维物体的视觉效果，我们通过透视投影使得远的对象变小，近的对象变大，平行线会出现先交等更接近人眼观察的视觉效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVP6Ag?w=536\x26amp;h=366\x22 src=\x22https:\/\/static.alili.tech\/img\/bVP6Ag?w=536\x26amp;h=366\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如上图所示，透视投影最终显示到屏幕上的内容只有截头椎体部分的内容，因此 GraphView 提供了 eye，center，up，far，near， fovy 和 aspect 参数来控制截头椎体的具体范围，我们在实际运用中用到更多的是 eye 和 center：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22getEye() | setEye([x, y, z])，决定眼睛（或 Camera）所在位置，默认值为 [0, 300, 1000]；\n\ngetCenter() | setCenter([x, y, z])，决定目标中心点（或 Target）所在位置，默认值为 [0, 0, 0]；\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3egetEye\x3c\/span\x3e() | \x3cspan class=\x22hljs-selector-tag\x22\x3esetEye\x3c\/span\x3e([x, y, z])，决定眼睛（或 \x3cspan class=\x22hljs-selector-tag\x22\x3eCamera\x3c\/span\x3e）所在位置，默认值为 \x3cspan class=\x22hljs-selector-attr\x22\x3e[0, 300, 1000]\x3c\/span\x3e；\n\n\x3cspan class=\x22hljs-selector-tag\x22\x3egetCenter\x3c\/span\x3e() | \x3cspan class=\x22hljs-selector-tag\x22\x3esetCenter\x3c\/span\x3e([x, y, z])，决定目标中心点（或 \x3cspan class=\x22hljs-selector-tag\x22\x3eTarget\x3c\/span\x3e）所在位置，默认值为 \x3cspan class=\x22hljs-selector-attr\x22\x3e[0, 0, 0]\x3c\/span\x3e；\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e详情看 HT for Web 3D 手册 手册 （\x3ca href=\x22http:\/\/www.hightopo.com\/guide\/guide\/core\/3d\/ht-3d-guide.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/guide...\x3c\/a\x3e）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dataModel = new ht.DataModel();\ng3d = new ht.graph3d.Graph3dView(dataModel);    \ng3d.setEye(1800, 800, 1000);\ng3d.setCenter(0, 100, 0);\ng3d.setDashDisabled(false);\ng3d.getView().style.background = \x27rgb(10, 20, 36)\x27;\ng3d.addToDOM();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3edataModel = new ht.DataModel();\ng3d = new ht.graph3d.Graph3dView(dataModel);    \ng3d.setEye(\x3cspan class=\x22hljs-number\x22\x3e1800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\ng3d.setCenter(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\ng3d.setDashDisabled(false);\ng3d.getView().style.background = \x27rgb(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e)\x27;\ng3d.addToDOM();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、创建设备：\x3c\/p\x3e\n\x3cp\x3e服务器，Demo 中的服务器其实是通过 addStyleIcon 方式在服务器的位置添加图片，详情可看 HT for Web 入门手册（\x3ca href=\x22http:\/\/www.hightopo.com\/guide\/guide\/core\/beginners\/ht-beginners-guide.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/guide...\x3c\/a\x3e）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/注册图片\nht.Default.setImage(\x27server\x27, \x27server.png\x27);\n\nvar server = new ht.Node();\n        server.s3(0, 0, 0);\n        server.p3(0, 60, 0);\n        server.addStyleIcon(\x27icon\x27, {\n            position: 0,\n            width: 200, \n            autorotate: true,\n            transparent: true,               \n            height: 200,\n            names: [\x27server\x27]\n        });\n        dataModel.add(server);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs axapta\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/注册图片\x3c\/span\x3e\nht.Default.setImage(\x3cspan class=\x22hljs-string\x22\x3e\x27server\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27server.png\x27\x3c\/span\x3e);\n\nvar \x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ht.Node();\n        \x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e.s3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e.p3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e.addStyleIcon(\x3cspan class=\x22hljs-string\x22\x3e\x27icon\x27\x3c\/span\x3e, {\n            position: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            width: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \n            autorotate: \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e,\n            transparent: \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e,               \n            height: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\n            names: [\x3cspan class=\x22hljs-string\x22\x3e\x27server\x27\x3c\/span\x3e]\n        });\n        dataModel.add(\x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e工作台，这里的工作台实际上是立体圆柱来表示的，HT 在 GraphView 的 2D 图形上，呈现各种图形是通过 style 的shape 属性决定，类似的 HT 在 3D 上提供了 shape3d属性，预定义了多种 3D 的形体，详情见HT for Web 3D 手册。不过在这里我并没有用预定义的图形，而是通过 ht.Default.createRingModel 的方式创建圆柱，该方法可以根据 xy 平面的曲线，环绕一周形成 3D 模型，所以可以用来定义多种圆形 3D 模型。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var desktop = new ht.Node();\n        desktop.s({\n            \x273d.selectable\x27: false,\n            \x27shape3d\x27: ht.Default.createRingModel([\n                        0, 40,\n                        450, 40,\n                        450, 0,\n                        0, 40\n                    ], null, 20, false, false, 50),\n            \x27shape3d.color\x27: \x27#003333\x27\n        });\ndesktop.s3(1, 1, 1);\ndataModel.add(desktop);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e desktop = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ht.Node();\n        desktop.s({\n            \x3cspan class=\x22hljs-string\x22\x3e\x273d.selectable\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27shape3d\x27\x3c\/span\x3e: ht.Default.createRingModel([\n                        \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-number\x22\x3e450\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-number\x22\x3e450\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e\n                    ], \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-string\x22\x3e\x27shape3d.color\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27#003333\x27\x3c\/span\x3e\n        });\ndesktop.s3(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\ndataModel.\x3cspan class=\x22hljs-keyword\x22\x3eadd\x3c\/span\x3e(desktop);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e平台上的设备，我们一共创建了 32 个设备：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var count = 32;\n            radius = 400;\n            index = count\/2;\n        for (var i =  1; i \x3c= count\/2; i\x2b\x2b) {\n            var device1_angle1 = Math.PI * 2 * (index - i) \/ count;\n                device1_angle2 = Math.PI * 2 * (index \x2b i) \/ count;\n                device1_angle3 = Math.PI * 2 * index \/ count;\n\n            var device1_1 = createDevice(device1_angle1, radius, 60);\n                device1_2 = createDevice(device1_angle2, radius, 60);\n                device1_3 = createDevice(device1_angle3, radius, 60);\n\n            layoutDevice1(device1_1, device1_angle1);\n            var device1_edge1 = createEdge(device1_1, server, \x27line1\x27);\n            device1_edge1.s({\x27shape3d.color\x27: \x27rgb(205, 211, 34)\x27});\n            dataModel.add(device1_1);\n            dataModel.add(device1_edge1);\n\n            layoutDevice1(device1_2, device1_angle2);\n            var device1_edge2 = createEdge(device1_2, server, \x27line1\x27);\n            device1_edge2.s({\x27shape3d.color\x27: \x27rgb(205, 211, 34)\x27});\n            dataModel.add(device1_2);\n            dataModel.add(device1_edge2);\n\n            layoutDevice1(device1_3, device1_angle3);\n            var device1_edge3 = createEdge(device1_3, server, \x27line1\x27);\n            device1_edge3.s({\x27shape3d.color\x27: \x27rgb(205, 211, 34)\x27});\n            dataModel.add(device1_3);\n            dataModel.add(device1_edge3);\n        }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode\x3evar count = \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            radius = \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            index = count\/2\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n        for (\x3cspan class=\x22hljs-name\x22\x3evar\x3c\/span\x3e i =  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e; i \x26lt;= count\/2; i\x2b\x2b) {\x3c\/span\x3e\n            var device1_angle1 = Math.PI * 2 * (\x3cspan class=\x22hljs-name\x22\x3eindex\x3c\/span\x3e - i) \/ count\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n                device1_angle2 = Math.PI * 2 * (\x3cspan class=\x22hljs-name\x22\x3eindex\x3c\/span\x3e \x2b i) \/ count\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n                device1_angle3 = Math.PI * 2 * index \/ count\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n            var device1_1 = createDevice(\x3cspan class=\x22hljs-name\x22\x3edevice1_angle1\x3c\/span\x3e, radius, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n                device1_2 = createDevice(\x3cspan class=\x22hljs-name\x22\x3edevice1_angle2\x3c\/span\x3e, radius, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n                device1_3 = createDevice(\x3cspan class=\x22hljs-name\x22\x3edevice1_angle3\x3c\/span\x3e, radius, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n            layoutDevice1(\x3cspan class=\x22hljs-name\x22\x3edevice1_1\x3c\/span\x3e, device1_angle1)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            var device1_edge1 = createEdge(\x3cspan class=\x22hljs-name\x22\x3edevice1_1\x3c\/span\x3e, server, \x27line1\x27)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            device1_edge1.s({\x27shape3d.color\x27: \x27rgb(\x3cspan class=\x22hljs-number\x22\x3e205\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e211\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e34\x3c\/span\x3e)\x27})\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_1\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_edge1\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n            layoutDevice1(\x3cspan class=\x22hljs-name\x22\x3edevice1_2\x3c\/span\x3e, device1_angle2)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            var device1_edge2 = createEdge(\x3cspan class=\x22hljs-name\x22\x3edevice1_2\x3c\/span\x3e, server, \x27line1\x27)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            device1_edge2.s({\x27shape3d.color\x27: \x27rgb(\x3cspan class=\x22hljs-number\x22\x3e205\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e211\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e34\x3c\/span\x3e)\x27})\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_2\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_edge2\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n            layoutDevice1(\x3cspan class=\x22hljs-name\x22\x3edevice1_3\x3c\/span\x3e, device1_angle3)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            var device1_edge3 = createEdge(\x3cspan class=\x22hljs-name\x22\x3edevice1_3\x3c\/span\x3e, server, \x27line1\x27)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            device1_edge3.s({\x27shape3d.color\x27: \x27rgb(\x3cspan class=\x22hljs-number\x22\x3e205\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e211\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e34\x3c\/span\x3e)\x27})\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_3\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n            dataModel.add(\x3cspan class=\x22hljs-name\x22\x3edevice1_edge3\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n        }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了让创建的设备在平台上的布局更加合理，根据 index 计算出设备摆放角度，并且根据圆柱中心，圆盘半径和角度计算出每个设备摆放的位置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createDevice (angle, x, y) {\n        var node = new ht.Node();\n            cos = Math.cos(angle);\n            sin = Math.sin(angle);\n        node.p3(x*sin, y, x*cos);\n        return node;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs matlab\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateDevice\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(angle, x, y)\x3c\/span\x3e {\x3c\/span\x3e\n        var node = new ht.Node();\n            \x3cspan class=\x22hljs-built_in\x22\x3ecos\x3c\/span\x3e = Math.\x3cspan class=\x22hljs-built_in\x22\x3ecos\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eangle\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-built_in\x22\x3esin\x3c\/span\x3e = Math.\x3cspan class=\x22hljs-built_in\x22\x3esin\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eangle\x3c\/span\x3e);\n        node.p3(x*\x3cspan class=\x22hljs-built_in\x22\x3esin\x3c\/span\x3e, y, x*\x3cspan class=\x22hljs-built_in\x22\x3ecos\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e node;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其他设备，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var num = 18;\n    var h = [800, 900, 1000, 1100, 1200];\n    var v = [40, 60, 80, 100];\n    var colors = [\x27#fcfc63\x27, \x27#00E1E4\x27];\n    for (var j = 0; j \x3c num; j\x2b\x2b) {\n            var device2_angle = Math.PI * j \/ num;\n            var device2 = createDevice(device2_angle, \n                                       h[Math.floor(Math.random()*5)], v[Math.floor(Math.random()*4)]);\n            device2.s3(100, 20, 100); \n            device2.s({\n               \x27shape3d\x27: \x27cylinder\x27,\n               \x27shape3d.color\x27: colors[Math.floor(Math.random()*2)]\n    });\n    var device2_edge = createEdge(device2, desktop , \x27line2\x27);\n    device2_edge.s({\x27shape3d.color\x27: \x27rgb(0, 203, 94)\x27});\n\n    dataModel.add(device2);\n    dataModel.add(device2_edge);         \n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e num = \x3cspan class=\x22hljs-number\x22\x3e18\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e h = [\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e900\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e];\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v = [\x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e];\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e colors = [\x3cspan class=\x22hljs-string\x22\x3e\x27#fcfc63\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#00E1E4\x27\x3c\/span\x3e];\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; num; j\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e device2_angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * j \/ num;\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e device2 = createDevice(device2_angle, \n                                       h[\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()*\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e)], v[\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()*\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e)]);\n            device2.s3(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e); \n            device2.s({\n               \x3cspan class=\x22hljs-string\x22\x3e\x27shape3d\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27cylinder\x27\x3c\/span\x3e,\n               \x3cspan class=\x22hljs-string\x22\x3e\x27shape3d.color\x27\x3c\/span\x3e: colors[\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()*\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)]\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e device2_edge = createEdge(device2, desktop , \x3cspan class=\x22hljs-string\x22\x3e\x27line2\x27\x3c\/span\x3e);\n    device2_edge.s({\x3cspan class=\x22hljs-string\x22\x3e\x27shape3d.color\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27rgb(0, 203, 94)\x27\x3c\/span\x3e});\n\n    dataModel.add(device2);\n    dataModel.add(device2_edge);         \n }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3、连线\x3c\/p\x3e\n\x3cp\x3eHT for Web 提供了默认的直线和多点的连线类型能满足大部分基本拓扑图形应用，但在这里我们需要根据实际需求绘制曲线，所以，需要用到自定义连线类型，详情看HT for Web 连线类型手册：\x3c\/p\x3e\n\x3cp\x3e用 ht.Default.setEdgeType(type, func, mutual) 函数可用于自定义新连线类型：\x3c\/p\x3e\n\x3cp\x3etype：字符串类型的连线类型，对应 style 的 edge.type 属性；\x3cbr\x3efunc：函数类型，根据传入参数（edge，gap，graphView，sameSourceWithFirstEdge）返回连线走向信息：\x3c\/p\x3e\n\x3cp\x3eedge：当前连线对象；\x3c\/p\x3e\n\x3cp\x3egap：多条连线成捆时，本连线对象对应中心连线的间距；\x3c\/p\x3e\n\x3cp\x3egraphView：当前对应拓扑组件对象；\x3c\/p\x3e\n\x3cp\x3esameSourceWithFirstEdge：boolean 类型，改连线是否与同组的第一条同源；\x3c\/p\x3e\n\x3cp\x3e返回值为 {points： new ht.List(...)，segments：new ht.List(...)} 结构的连线走向信息，segments 可取值如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 1、moveTo，占用 1 个点信息；\n\n 2、lineTo，占用 1 个点信息；\n\n 3、quadraticCurveTo，占用 2 个点信息；\n\n 4、bezierCurveTo，占用 3 个点信息；\n\n 5、closePath，不占用点信息；\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e、moveTo，占用 \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e 个点信息；\n\n \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e、lineTo，占用 \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e 个点信息；\n\n \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e、quadraticCurveTo，占用 \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e 个点信息；\n\n \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e、bezierCurveTo，占用 \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e 个点信息；\n\n \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e、closePath，不占用点信息；\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3emutual：该参数决定连线是否影响起始或结束节点上的所有连线，默认为 false 代表只影响同 source 和 target 的 EdgeGroup 中的连线，HT 预定义的连线类型中，后缀为 2 的类型都是 mutural 为 true 的复杂连线类型。  \x3cbr\x3e在 Demo 中定义了两种类型的连线，分别为 line1 和 line ：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ht.Default.setEdgeType(\x27line1\x27, function(edge){\n            var sourcePoint1 = edge.getSourceAgent().getPosition(),\n                targetPoint1 = edge.getTargetAgent().getPosition(),\n                points1 = new ht.List();       \n                points1.add(sourcePoint1);\n                points1.add({\n                    x: (sourcePoint1.x \x2b targetPoint1.x)\/2 \x2b 200,\n                    e: sourcePoint1.e,\n                    y: (sourcePoint1.y \x2b targetPoint1.y)\/2\n                });\n                points1.add(targetPoint1);                          \n            return {\n                points: points1,\n                segments: new ht.List([1, 3])\n            };\n        });\nht.Default.setEdgeType(\x27line2\x27, function(edge){\n            var sourcePoint = edge.getSourceAgent().getPosition(),\n                targetPoint = edge.getTargetAgent().getPosition(),\n                points = new ht.List();       \n                points.add(sourcePoint);\n                points.add({\n                    x: (sourcePoint.x \x2b targetPoint.x)\/2,\n                    e: ((sourcePoint.e \x2b targetPoint.e)\/2 || 0) - 300,\n                    y: (sourcePoint.y \x2b targetPoint.y)\/2\n                });\n                points.add({\n                    x: targetPoint.x,\n                    e: targetPoint.e -80, \n                    y: targetPoint.y                            \n                });\n            return {\n                points: points,\n                segments: new ht.List([1, 3])\n            };\n        });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs roboconf\x22\x3e\x3ccode\x3eht.Default.setEdgeType(\x27line1\x27, function(edge){\n            \x3cspan class=\x22hljs-attribute\x22\x3evar sourcePoint1 = edge.getSourceAgent().getPosition(),\n                targetPoint1 = edge.getTargetAgent().getPosition(),\n                points1 = new ht.List();       \n                points1.add(sourcePoint1);\n                points1.add({\n                    x\x3c\/span\x3e: (sourcePoint1\x3cspan class=\x22hljs-variable\x22\x3e.x\x3c\/span\x3e \x2b targetPoint1\x3cspan class=\x22hljs-variable\x22\x3e.x\x3c\/span\x3e)\/2 \x2b 200,\n                    e: sourcePoint1\x3cspan class=\x22hljs-variable\x22\x3e.e\x3c\/span\x3e,\n                    y: (sourcePoint1\x3cspan class=\x22hljs-variable\x22\x3e.y\x3c\/span\x3e \x2b targetPoint1\x3cspan class=\x22hljs-variable\x22\x3e.y\x3c\/span\x3e)\/2\n                });\n                \x3cspan class=\x22hljs-attribute\x22\x3epoints1.add(targetPoint1);                          \n            return {\n                points\x3c\/span\x3e: points1,\n                segments: new ht\x3cspan class=\x22hljs-variable\x22\x3e.List\x3c\/span\x3e([1, 3])\n            };\n        });\nht.Default.setEdgeType(\x27line2\x27, function(edge){\n            \x3cspan class=\x22hljs-attribute\x22\x3evar sourcePoint = edge.getSourceAgent().getPosition(),\n                targetPoint = edge.getTargetAgent().getPosition(),\n                points = new ht.List();       \n                points.add(sourcePoint);\n                points.add({\n                    x\x3c\/span\x3e: (sourcePoint\x3cspan class=\x22hljs-variable\x22\x3e.x\x3c\/span\x3e \x2b targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.x\x3c\/span\x3e)\/2,\n                    e: ((sourcePoint\x3cspan class=\x22hljs-variable\x22\x3e.e\x3c\/span\x3e \x2b targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.e\x3c\/span\x3e)\/2 || 0) - 300,\n                    y: (sourcePoint\x3cspan class=\x22hljs-variable\x22\x3e.y\x3c\/span\x3e \x2b targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.y\x3c\/span\x3e)\/2\n                });\n                \x3cspan class=\x22hljs-attribute\x22\x3epoints.add({\n                    x\x3c\/span\x3e: targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.x\x3c\/span\x3e,\n                    e: targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.e\x3c\/span\x3e -80, \n                    y: targetPoint\x3cspan class=\x22hljs-variable\x22\x3e.y\x3c\/span\x3e                            \n                });\n            \x3cspan class=\x22hljs-attribute\x22\x3ereturn {\n                points\x3c\/span\x3e: points,\n                segments: new ht\x3cspan class=\x22hljs-variable\x22\x3e.List\x3c\/span\x3e([1, 3])\n            };\n        });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e连线类型定义好，接下来就是创建连线，但是连线上还有流动效果，这个又怎么实现呢？我们 HT 有扩展流动线插件，可以在 ht.Shape 和 ht.Edge 上增加流动效果，支持内部流动元素或用户自定义的流动元素沿着路径步进，要使用也非常方便，只需要引入 ht-flow.js 文件，详情可见 HT for Web流动线手册（\x3ca href=\x22http:\/\/www.hightopo.com\/guide\/guide\/plugin\/flow\/ht-flow-guide.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/guide...\x3c\/a\x3e），但是插件并不适用于 3D 模型中，那在 3D 模型中该怎么办呢？即使不能使用现成的插件，我们也可以实现流动效果，可以看HT for Web 入门手册 中连线部分，我们可以将连线样式通过 edge.dash 设置为虚线后，动态改变 edge.dash.offset 虚线偏移，即可实现流动效果，所以，我们创建连线时：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createEdge (source, target , type) {\n        var edge = new ht.Edge(source, target);\n        edge.s({\n            \x27edge.color\x27: \x27yellow\x27,\n            \x27edge.dash\x27: true,\n            \x27edge.dash.3d\x27: true,\n            \x27edge.dash.width\x27: 4,\n            \x27edge.type\x27: type,                    \n            \x27edge.dash.color\x27: \x27rgb(10, 20, 36)\x27,                    \n            \x27edge.dash.pattern\x27: [20, 25]\n        });\n        edge.a({\n            \x27flow.enabled\x27: true,\n            \x27flow.direction\x27: -1,\n            \x27flow.step\x27: 4\n        });\n        return edge;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3efunction createEdge (source, target , \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e edge = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ht.\x3cspan class=\x22hljs-type\x22\x3eEdge\x3c\/span\x3e(source, target);\n        edge.s({\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.color\x27: \x3cspan class=\x22hljs-symbol\x22\x3e\x27yello\x3c\/span\x3ew\x27,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.dash\x27: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.dash\x3cspan class=\x22hljs-number\x22\x3e.3\x3c\/span\x3ed\x27: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.dash.width\x27: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x27: \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e,                    \x3c\/span\x3e\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.dash.color\x27: \x3cspan class=\x22hljs-symbol\x22\x3e\x27rgb\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e)\x27,                    \n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27edge\x3c\/span\x3e.dash.pattern\x27: [\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e]\n        });\n        edge.a({\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27flow\x3c\/span\x3e.enabled\x27: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27flow\x3c\/span\x3e.direction\x27: \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27flow\x3c\/span\x3e.step\x27: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e edge;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后，要让虚线流动起来，可以使用 HT 中的调度，详情可看HT for Web 调度手册（\x3ca href=\x22http:\/\/www.hightopo.com\/guide\/guide\/core\/schedule\/ht-schedule-guide.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/guide...\x3c\/a\x3e）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22flowTask = {\n            interval: 50,\n            action: function(data){\n                if(data.a(\x27flow.enabled\x27)){\n                    var offset = data.s(\x27edge.dash.offset\x27) \x2b data.a(\x27flow.step\x27) * data.a(\x27flow.direction\x27);\n                    data.s(\x27edge.dash.offset\x27, offset);                        \n                }\n            }\n        };\n        dataModel.addScheduleTask(flowTask);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3eflowTask = {\n            interval: \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\n            action: function(\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e){\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.a(\x3cspan class=\x22hljs-string\x22\x3e\x27flow.enabled\x27\x3c\/span\x3e)){\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e offset = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.s(\x3cspan class=\x22hljs-string\x22\x3e\x27edge.dash.offset\x27\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.a(\x3cspan class=\x22hljs-string\x22\x3e\x27flow.step\x27\x3c\/span\x3e) * \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.a(\x3cspan class=\x22hljs-string\x22\x3e\x27flow.direction\x27\x3c\/span\x3e);\n                    \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.s(\x3cspan class=\x22hljs-string\x22\x3e\x27edge.dash.offset\x27\x3c\/span\x3e, offset);                        \n                }\n            }\n        };\n        dataModel.addScheduleTask(flowTask);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里，Demo 中的主要技术点都已经介绍了一遍，可以看出我们 HT 的强大之处，当然我们官网上还有很多很有意思的效果，大家也可以看一看，也可以玩一玩我们的 HT 感受它的强大之处，再次附上 Demo 地址： \x3ca href=\x22http:\/\/www.hightopo.com\/demo\/blog_3dedge_20170630\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.hightopo.com\/demo\/...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>基于 HTML5 WebGL 的 3D 网络拓扑图</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009996165">https://segmentfault.com/a/1190000009996165</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/yb04db59239/" target="_blank">https://alili.tech/archive/yb04db59239/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5328xogjarn/">IndexedDB--HTML5本地存储<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/xpccu0hsqbr/">JS学习系列 01 - 编译原理和作用域<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/shv09bbtbfd/">Vue2 SSR 的优化之旅<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5vj1ojfo6h6/">[2016年末巨献] — HTML5可交互地铁线路图（第二季：帝都进阶版）<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/m02hlm4bzh/">vue2.0开发聊天程序（三）组件的通信<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/mz5o7n90plg/">《很高兴我没有猝死》- 前端新人的 2016 年总结和感悟<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/3vhoe2mo09k/">一道颇有难度的JavaScript题<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/uj12mb7thp/">使用CANVAS实现交互性圆形马赛克效果<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/ja636h8hcxa/">写于 2016 年末<aside class="dates">2019-01-28</aside></a></li><li><a href="/archive/5uomnoq1kmi/">前端学习资源整理<aside class="dates">2019-01-28</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>